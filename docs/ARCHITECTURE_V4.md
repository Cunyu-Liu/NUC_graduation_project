# é™¢å£«çº§ç§‘ç ”æ™ºèƒ½åŠ©æ‰‹ v4.0 - æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ¯ ç³»ç»Ÿå®šä½

**ä»"æ–‡çŒ®åˆ†æå·¥å…·"å‡çº§ä¸º"ç§‘ç ”æ™ºèƒ½åŠ©æ‰‹å¹³å°"**

### æ ¸å¿ƒèƒ½åŠ›çŸ©é˜µ

| èƒ½åŠ›ç»´åº¦ | v3.0 åšå£«çº§ | v4.0 é™¢å£«çº§ | è·ƒå‡ |
|---------|-----------|-----------|------|
| **å·¥ä½œæµ** | çº¿æ€§åˆ†æ | èºæ—‹å¼çŸ¥è¯†ç§¯ç´¯ | è´¨å˜ |
| **æ•°æ®ç®¡ç†** | æ–‡ä»¶ç³»ç»Ÿ | æ•°æ®åº“+çŸ¥è¯†å›¾è°± | è´¨å˜ |
| **æ™ºèƒ½ç¨‹åº¦** | ä¿¡æ¯æå– | æ´å¯Ÿç”Ÿæˆ+ä»£ç å®ç° | è´¨å˜ |
| **æ€§èƒ½** | åŒæ­¥é˜»å¡ | å¼‚æ­¥é«˜å¹¶å‘ | 10x |
| **äº¤äº’æ€§** | å•æ¬¡æ“ä½œ | äº¤äº’å¼æ¢ç´¢ | 5x |
| **åˆ›æ–°æ€§** | è·Ÿéšç°æœ‰ | å¼•é¢†å‰æ²¿ | é¢†å…ˆ |

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ™ºèƒ½å‰ç«¯ (Vue 3)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚çŸ¥è¯†å›¾è°±  â”‚ â”‚è®ºæ–‡æ´å¯Ÿ  â”‚ â”‚ä»£ç å·¥åŠ  â”‚ â”‚ç ”ç©¶è®¡åˆ’  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  API ç½‘å…³å±‚ (FastAPI)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ä»»åŠ¡è°ƒåº¦  â”‚ â”‚å¼‚æ­¥ç®¡ç†  â”‚ â”‚æƒé™æ§åˆ¶  â”‚ â”‚ç¼“å­˜å±‚    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚ (å¼‚æ­¥)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚æ™ºèƒ½å·¥ä½œæµâ”‚ â”‚çŸ¥è¯†å›¾è°±  â”‚ â”‚ä»£ç ç”Ÿæˆ  â”‚ â”‚æ´å¯Ÿå¼•æ“  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®æŒä¹…å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚PostgreSQLâ”‚ â”‚Redis     â”‚ â”‚å‘é‡æ•°æ®åº“ â”‚ â”‚å¯¹è±¡å­˜å‚¨  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¤–éƒ¨æœåŠ¡å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚LLMæœåŠ¡   â”‚ â”‚ä»£ç æ‰§è¡Œ  â”‚ â”‚æ–‡çŒ®ç´¢å¼•  â”‚ â”‚å­¦æœ¯æœç´¢å¼•æ“â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 1. æ™ºèƒ½å·¥ä½œæµå¼•æ“

#### 1.1 åˆ›æ–°å·¥ä½œæµè®¾è®¡

**ä»çº¿æ€§åˆ°èºæ—‹å¼**ï¼š

```python
# ä¼ ç»Ÿçº¿æ€§å·¥ä½œæµï¼ˆv3.0ï¼‰
upload â†’ parse â†’ analyze â†’ save â†’ END

# é™¢å£«çº§èºæ—‹å·¥ä½œæµï¼ˆv4.0ï¼‰
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  çŸ¥è¯†å›¾è°±æŸ¥è¯¢   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      è®ºæ–‡ä¸Šä¼ ä¸æ™ºèƒ½è§£æ          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    å¤šç»´åº¦æ·±åº¦åˆ†æï¼ˆå¼‚æ­¥ï¼‰        â”‚
        â”‚  â€¢ æ‘˜è¦ç”Ÿæˆ  â€¢ è¦ç‚¹æå–         â”‚
        â”‚  â€¢ ä¸»é¢˜åˆ†æ  â€¢ ç©ºç™½æŒ–æ˜         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      çŸ¥è¯†å›¾è°±è‡ªåŠ¨æ„å»º           â”‚
        â”‚  â€¢ è®ºæ–‡å…³è”  â€¢ å¼•ç”¨åˆ†æ         â”‚
        â”‚  â€¢ æ¼”åŒ–è„‰ç»œ  â€¢ ä¸»é¢˜èšç±»         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      æ´å¯Ÿç”Ÿæˆä¸æ¨è             â”‚
        â”‚  â€¢ ç ”ç©¶ç©ºç™½  â€¢ åˆ›æ–°æœºä¼š         â”‚
        â”‚  â€¢ æ–¹æ³•èåˆ  â€¢ è·¨é¢†åŸŸå‘ç°       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      è‡ªåŠ¨ä»£ç ç”Ÿæˆ               â”‚
        â”‚  â€¢ æ–¹æ³•å®ç°  â€¢ å®éªŒè®¾è®¡         â”‚
        â”‚  â€¢ æ•°æ®å¤„ç†  â€¢ æ¨¡å‹è®­ç»ƒ         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      ä»£ç ç¼–è¾‘ä¸ä¼˜åŒ–             â”‚
        â”‚  â€¢ ç”¨æˆ·äº¤äº’  â€¢ è¿­ä»£æ”¹è¿›         â”‚
        â”‚  â€¢ ç‰ˆæœ¬ç®¡ç†  â€¢ è‡ªåŠ¨æµ‹è¯•         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      å®éªŒéªŒè¯ä¸åé¦ˆ             â”‚
        â”‚  â€¢ ä»£ç æ‰§è¡Œ  â€¢ ç»“æœè¯„ä¼°         â”‚
        â”‚  â€¢ è®ºæ–‡æ’°å†™  â€¢ çŸ¥è¯†æ²‰æ·€         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
              æ›´æ–°çŸ¥è¯†å›¾è°± â†’ å½¢æˆé—­ç¯
```

#### 1.2 å·¥ä½œæµçŠ¶æ€æœº

```python
class WorkflowState(Enum):
    """å·¥ä½œæµçŠ¶æ€"""
    UPLOADED = "uploaded"           # å·²ä¸Šä¼ 
    PARSED = "parsed"              # å·²è§£æ
    ANALYZING = "analyzing"        # åˆ†æä¸­
    ANALYZED = "analyzed"          # åˆ†æå®Œæˆ
    GRAPH_BUILDING = "graph_building"  # æ„å»ºçŸ¥è¯†å›¾è°±
    INSIGHT_GENERATING = "insight_generating"  # ç”Ÿæˆæ´å¯Ÿ
    CODE_GENERATING = "code_generating"  # ç”Ÿæˆä»£ç 
    READY_TO_EXPERIMENT = "ready_to_experiment"  # å‡†å¤‡å®éªŒ
    EXPERIMENTING = "experimenting"  # å®éªŒä¸­
    COMPLETED = "completed"        # å®Œæˆ
    FAILED = "failed"              # å¤±è´¥
```

---

### 2. æ•°æ®åº“è®¾è®¡

#### 2.1 æ•°æ®æ¨¡å‹ï¼ˆERå›¾ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Papers     â”‚         â”‚  Authors     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚â†â”€â”€â”€â”€â”€â”€â”â”‚ id (PK)      â”‚
â”‚ title        â”‚   â”Œâ”€â”€â”€â†’â”‚ name         â”‚
â”‚ abstract     â”‚   â”‚    â”‚ affiliation  â”‚
â”‚ pdf_path     â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ pdf_hash     â”‚   â”‚
â”‚ year         â”‚   â”‚
â”‚ venue        â”‚   â”‚
â”‚ doi          â”‚   â”‚
â”‚ created_at   â”‚   â”‚
â”‚ updated_at   â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
         â†“         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Analyses     â”‚   â”‚         â”‚  Keywords    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚   â”‚         â”‚ id (PK)      â”‚
â”‚ paper_id (FK)â”‚â”€â”€â”€â”˜         â”‚ keyword      â”‚
â”‚ summary_text â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ category     â”‚
â”‚ keypoints    â”‚   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ topic_analysisâ”‚  â”‚
â”‚ gap_analysis â”‚  â”‚
â”‚ created_at   â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â†“        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ResearchGaps â”‚  â”‚         â”‚  Relations   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚  â”‚         â”‚ id (PK)      â”‚
â”‚ analysis_id  â”‚  â”‚         â”‚ source_id    â”‚
â”‚ gap_type     â”‚  â”‚         â”‚ target_id    â”‚
â”‚ description  â”‚  â”‚         â”‚ relation_typeâ”‚
â”‚ importance   â”‚  â”‚         â”‚ strength     â”‚
â”‚ difficulty   â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ potential_codeâ”‚ â”‚
â”‚ generated_codeâ”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â†“        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  GeneratedCodeâ”‚ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ id (PK)      â”‚  â”‚
â”‚ gap_id (FK)  â”‚â†â”€â”˜
â”‚ code         â”‚
â”‚ language     â”‚
â”‚ user_prompts â”‚
â”‚ version      â”‚
â”‚ status       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Experiments  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚
â”‚ code_id (FK) â”‚
â”‚ config       â”‚
â”‚ results      â”‚
â”‚ metrics      â”‚
â”‚ created_at   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2 æ ¸å¿ƒè¡¨ç»“æ„

**Papers è¡¨**ï¼š
```sql
CREATE TABLE papers (
    id SERIAL PRIMARY KEY,
    title VARCHAR(500) NOT NULL,
    abstract TEXT,
    pdf_path VARCHAR(1000),
    pdf_hash VARCHAR(64) UNIQUE,  -- MD5å»é‡
    year INTEGER,
    venue VARCHAR(500),
    doi VARCHAR(200),
    page_count INTEGER,
    language VARCHAR(10),
    metadata JSONB,  -- çµæ´»å­˜å‚¨æ‰€æœ‰å…ƒæ•°æ®
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_papers_hash ON papers(pdf_hash);
CREATE INDEX idx_papers_year ON papers(year);
CREATE INDEX idx_papers_venue ON papers(venue);
```

**Analyses è¡¨**ï¼š
```sql
CREATE TABLE analyses (
    id SERIAL PRIMARY KEY,
    paper_id INTEGER REFERENCES papers(id) ON DELETE CASCADE,
    summary_text TEXT,
    keypoints JSONB,  -- 12ç±»è¦ç‚¹
    topic_analysis JSONB,
    gap_analysis JSONB,
    analysis_version VARCHAR(20),
    status VARCHAR(50),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_analyses_paper ON analyses(paper_id);
CREATE INDEX idx_analyses_status ON analyses(status);
```

**ResearchGaps è¡¨**ï¼š
```sql
CREATE TABLE research_gaps (
    id SERIAL PRIMARY KEY,
    analysis_id INTEGER REFERENCES analyses(id),
    gap_type VARCHAR(50),  -- methodological, theoretical, data, application, evaluation
    description TEXT,
    importance VARCHAR(20),  -- high, medium, low
    difficulty VARCHAR(20),  -- low, medium, high
    potential_approach TEXT,
    expected_impact TEXT,
    generated_code_id INTEGER,
    status VARCHAR(50),  -- identified, code_generating, implemented
    created_at TIMESTAMP DEFAULT NOW()
);
```

**GeneratedCode è¡¨**ï¼š
```sql
CREATE TABLE generated_code (
    id SERIAL PRIMARY KEY,
    gap_id INTEGER REFERENCES research_gaps(id),
    code TEXT NOT NULL,
    language VARCHAR(20),  -- python, pytorch, tensorflow, etc.
    framework VARCHAR(50),
    dependencies TEXT,
    user_prompts TEXT[],  -- ç”¨æˆ·çš„æ‰€æœ‰ä¿®æ”¹æç¤º
    version INTEGER DEFAULT 1,
    execution_result JSONB,
    status VARCHAR(50),  -- generated, tested, deployed
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

**Relations è¡¨ï¼ˆçŸ¥è¯†å›¾è°±ï¼‰**ï¼š
```sql
CREATE TABLE relations (
    id SERIAL PRIMARY KEY,
    source_id INTEGER REFERENCES papers(id),
    target_id INTEGER REFERENCES papers(id),
    relation_type VARCHAR(50),  -- cites, extends, contradicts, applies, improves
    strength FLOAT,  -- 0-1
    evidence TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_relations_source ON relations(source_id);
CREATE INDEX idx_relations_target ON relations(target_id);
CREATE INDEX idx_relations_type ON relations(relation_type);
```

---

### 3. æ™ºèƒ½ä»£ç ç”Ÿæˆå¼•æ“

#### 3.1 ä»£ç ç”Ÿæˆæµç¨‹

```
Research Gap â†’ LLM Analysis â†’ Code Strategy â†’
    Implementation â†’ Testing â†’ User Feedback â†’
    Refinement â†’ Version Management
```

#### 3.2 ä»£ç ç”Ÿæˆç­–ç•¥

```python
class CodeGenerationStrategy:
    """ä»£ç ç”Ÿæˆç­–ç•¥"""

    STRATEGIES = {
        "method_improvement": {
            "description": "æ”¹è¿›ç°æœ‰æ–¹æ³•",
            "prompt_template": "åŸºäº{existing_method}ï¼Œå‘ç°{gap}ï¼Œè®¾è®¡æ”¹è¿›æ–¹æ¡ˆ",
            "output": "ç®—æ³•å®ç°ä»£ç "
        },
        "new_method": {
            "description": "æå‡ºæ–°æ–¹æ³•",
            "prompt_template": "é’ˆå¯¹{problem}ï¼Œè®¾è®¡æ–°æ–¹æ³•",
            "output": "å®Œæ•´æ–¹æ³•ä»£ç +æµ‹è¯•"
        },
        "dataset_creation": {
            "description": "åˆ›å»ºæ•°æ®é›†",
            "prompt_template": "ä¸º{task}åˆ›å»ºæ•°æ®é›†ï¼Œæ»¡è¶³{requirements}",
            "output": "æ•°æ®ç”Ÿæˆä»£ç "
        },
        "experiment_design": {
            "description": "è®¾è®¡å®éªŒ",
            "prompt_template": "éªŒè¯{hypothesis}ï¼Œè®¾è®¡å®éªŒæ–¹æ¡ˆ",
            "output": "å®éªŒä»£ç +è¯„ä¼°è„šæœ¬"
        },
        "model_implementation": {
            "description": "å®ç°æ¨¡å‹",
            "prompt_template": "å®ç°{model}ï¼Œè¦æ±‚{requirements}",
            "output": "æ¨¡å‹ä»£ç +è®­ç»ƒè„šæœ¬"
        }
    }
```

#### 3.3 ä»£ç ç”Ÿæˆç¤ºä¾‹

```python
# è¾“å…¥ï¼šç ”ç©¶ç©ºç™½
gap = {
    "type": "methodological",
    "description": "ç°æœ‰å›¾ç¥ç»ç½‘ç»œåœ¨å¤„ç†å¤§è§„æ¨¡å¼‚æ„å›¾æ—¶ï¼Œè®¡ç®—å¤æ‚åº¦å‘ˆæŒ‡æ•°å¢é•¿",
    "potential_approach": "çº¿æ€§å¤æ‚åº¦çš„å›¾èšåˆç®—æ³•"
}

# ç”Ÿæˆç­–ç•¥
strategy = "method_improvement"

# LLMç”Ÿæˆä»£ç 
prompt = f"""
ä½ æ˜¯ä¸–ç•Œé¡¶çº§çš„æ·±åº¦å­¦ä¹ æ¡†æ¶å¼€å‘è€…ã€‚åŸºäºä»¥ä¸‹ç ”ç©¶ç©ºç™½ï¼Œç”Ÿæˆé«˜è´¨é‡çš„PyTorchå®ç°ä»£ç ï¼š

**ç ”ç©¶ç©ºç™½**ï¼š{gap['description']}
**æ½œåœ¨æ–¹æ³•**ï¼š{gap['potential_approach']}

**è¦æ±‚**ï¼š
1. å®ç°LinearGraphAggregatorç±»
2. æ—¶é—´å¤æ‚åº¦O(V+E)
3. æ”¯æŒå¼‚æ„å›¾
4. åŒ…å«å®Œæ•´æ–‡æ¡£å­—ç¬¦ä¸²
5. åŒ…å«å•å…ƒæµ‹è¯•
6. éµå¾ªPyTorchæœ€ä½³å®è·µ

**ä»£ç ç»“æ„**ï¼š
```python
class LinearGraphAggregator(nn.Module):
    \"\"\\" [æ–‡æ¡£å­—ç¬¦ä¸²] \"\"\\"
    def __init__(self, ...):
        ...

    def forward(self, x, edge_index):
        ...

# å•å…ƒæµ‹è¯•
def test_linear_graph_aggregator():
    ...
```
"""

# è¾“å‡ºï¼šå¯æ‰§è¡Œçš„Pythonä»£ç 
code = llm.generate(prompt)
```

---

### 4. å¼‚æ­¥é«˜æ€§èƒ½æ¶æ„

#### 4.1 å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—

```python
from celery import Celery
from celery.result import AsyncResult

# å¼‚æ­¥ä»»åŠ¡å®šä¹‰
@app.task(bind=True)
async def analyze_paper_async(self, paper_id: int):
    """å¼‚æ­¥åˆ†æè®ºæ–‡"""
    try:
        # æ›´æ–°ä»»åŠ¡çŠ¶æ€
        self.update_state(state='PROGRESS', meta={'stage': 'parsing'})

        # PDFè§£æ
        paper = await parse_pdf_async(paper_id)

        # å¹¶å‘åˆ†æï¼ˆå¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œï¼‰
        tasks = [
            generate_summary_async(paper),
            extract_keypoints_async(paper),
            analyze_topic_async(paper),
            mine_gaps_async(paper)
        ]

        results = await asyncio.gather(*tasks)

        # æ„å»ºçŸ¥è¯†å›¾è°±
        self.update_state(state='PROGRESS', meta={'stage': 'building_graph'})
        await build_knowledge_graph_async(paper_id, results)

        return {
            'status': 'completed',
            'results': results
        }

    except Exception as e:
        self.update_state(state='FAILURE', meta={'error': str(e)})
        raise
```

#### 4.2 æ‰¹é‡ä»»åŠ¡å¤„ç†

```python
class BatchProcessor:
    """æ‰¹é‡å¤„ç†å™¨"""

    def __init__(self, max_concurrent=10):
        self.semaphore = asyncio.Semaphore(max_concurrent)
        self.task_queue = asyncio.Queue()

    async def process_batch(self, paper_ids: List[int]):
        """æ‰¹é‡å¤„ç†è®ºæ–‡"""
        # åˆ›å»ºä»»åŠ¡
        tasks = [
            self._process_with_limit(paper_id)
            for paper_id in paper_ids
        ]

        # å¹¶å‘æ‰§è¡Œ
        results = await asyncio.gather(*tasks, return_exceptions=True)

        # ç»Ÿè®¡
        success_count = sum(1 for r in results if not isinstance(r, Exception))
        failure_count = len(results) - success_count

        return {
            'total': len(paper_ids),
            'success': success_count,
            'failed': failure_count,
            'results': results
        }

    async def _process_with_limit(self, paper_id: int):
        """é™åˆ¶å¹¶å‘æ•°"""
        async with self.semaphore:
            return await analyze_paper_async(paper_id)
```

---

### 5. å‰ç«¯äº¤äº’å‡çº§

#### 5.1 æ ¸å¿ƒç•Œé¢

**1. çŸ¥è¯†å›¾è°±è§†å›¾**
```vue
<KnowledgeGraphView
  :papers="papers"
  :relations="relations"
  @node-click="showPaperDetail"
  @relation-click="showRelationDetail"
/>
```

**2. ç ”ç©¶æ´å¯Ÿé¢æ¿**
```vue
<ResearchInsightPanel
  :gaps="researchGaps"
  :trends="trends"
  :recommendations="recommendations"
  @gap-click="generateCode"
/>
```

**3. ä»£ç å·¥ä½œå°**
```vue
<CodeWorkbench
  :generated-code="code"
  :user-prompts="userPrompts"
  @code-modify="regenerateCode"
  @code-execute="runCode"
/>
```

**4. å†å²ç®¡ç†ç•Œé¢**
```vue
<HistoryManager
  :papers="papers"
  :analyses="analyses"
  :codes="codes"
  @paper-delete="deletePaper"
  @analysis-edit="editAnalysis"
  @code-fork="forkCode"
/>
```

#### 5.2 CRUDåŠŸèƒ½å®ç°

**Papers CRUD**ï¼š
```javascript
// APIå°è£…
const papersAPI = {
  // åˆ›å»º
  create: (file) => api.post('/papers', {file}),

  // è¯»å–ï¼ˆåˆ—è¡¨+è¯¦æƒ…+æœç´¢+è¿‡æ»¤ï¼‰
  list: (params) => api.get('/papers', {params}),
  detail: (id) => api.get(`/papers/${id}`),
  search: (query) => api.get('/papers/search', {params: {query}}),
  filter: (filters) => api.get('/papers/filter', {params: filters}),

  // æ›´æ–°
  update: (id, data) => api.put(`/papers/${id}`, data),

  // åˆ é™¤
  delete: (id) => api.delete(`/papers/${id}`),

  // æ‰¹é‡æ“ä½œ
  batchDelete: (ids) => api.post('/papers/batch-delete', {ids}),
  batchAnalyze: (ids) => api.post('/papers/batch-analyze', {ids})
}
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ä¼˜åŒ–
- ç´¢å¼•ä¼˜åŒ–ï¼šæ‰€æœ‰å¤–é”®ã€æœç´¢å­—æ®µå»ºç«‹ç´¢å¼•
- åˆ†åŒºè¡¨ï¼šæŒ‰å¹´ä»½åˆ†åŒºpapersè¡¨
- ç¼“å­˜å±‚ï¼šRedisç¼“å­˜çƒ­ç‚¹æ•°æ®
- è¿æ¥æ± ï¼šPgBouncerè¿æ¥æ± ç®¡ç†

### 2. å¼‚æ­¥ä¼˜åŒ–
- åç¨‹ï¼šæ‰€æœ‰IOæ“ä½œå¼‚æ­¥åŒ–
- å¹¶å‘æ§åˆ¶ï¼šSemaphoreé™åˆ¶å¹¶å‘æ•°
- ä»»åŠ¡é˜Ÿåˆ—ï¼šCeleryåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—
- ç»“æœç¼“å­˜ï¼šä»»åŠ¡ç»“æœç¼“å­˜24å°æ—¶

### 3. LLMè°ƒç”¨ä¼˜åŒ–
- æ‰¹é‡è°ƒç”¨ï¼šåˆå¹¶å¤šä¸ªè¯·æ±‚
- æµå¼è¾“å‡ºï¼šå®æ—¶è¿”å›ç»“æœ
- æ™ºèƒ½é‡è¯•ï¼šæŒ‡æ•°é€€é¿é‡è¯•
- Tokenä¼˜åŒ–ï¼šåŠ¨æ€è°ƒæ•´ä¸Šä¸‹æ–‡é•¿åº¦

---

## ğŸš€ å®æ–½è·¯çº¿å›¾

### Phase 1: æ ¸å¿ƒé‡æ„ï¼ˆ2å‘¨ï¼‰
- âœ… æ•°æ®åº“è®¾è®¡ä¸å®ç°
- âœ… å¼‚æ­¥æ¶æ„æ­å»º
- âœ… æ‰¹é‡å¤„ç†å®ç°
- âœ… åŸºç¡€CRUD API

### Phase 2: æ™ºèƒ½å¼•æ“ï¼ˆ3å‘¨ï¼‰
- âœ… æ™ºèƒ½å·¥ä½œæµå¼•æ“
- âœ… çŸ¥è¯†å›¾è°±æ„å»º
- âœ… ä»£ç ç”Ÿæˆå¼•æ“
- âœ… æ´å¯Ÿæ¨èç³»ç»Ÿ

### Phase 3: å‰ç«¯å‡çº§ï¼ˆ2å‘¨ï¼‰
- âœ… çŸ¥è¯†å›¾è°±è§†å›¾
- âœ… ä»£ç å·¥ä½œå°
- âœ… å†å²ç®¡ç†ç•Œé¢
- âœ… äº¤äº’ä¼˜åŒ–

### Phase 4: é›†æˆæµ‹è¯•ï¼ˆ1å‘¨ï¼‰
- âœ… ç«¯åˆ°ç«¯æµ‹è¯•
- âœ… æ€§èƒ½æµ‹è¯•
- âœ… ç”¨æˆ·æµ‹è¯•
- âœ… æ–‡æ¡£å®Œå–„

**æ€»è®¡ï¼š8å‘¨è¾¾åˆ°é™¢å£«çº§æ°´å‡†**

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

| æŒ‡æ ‡ | v3.0 | v4.0ç›®æ ‡ | æå‡ |
|-----|------|---------|------|
| åˆ†æé€Ÿåº¦ | 60ç§’/ç¯‡ | 10ç§’/ç¯‡ | **6x** |
| å¹¶å‘èƒ½åŠ› | 1ç¯‡ | 100ç¯‡ | **100x** |
| ä»£ç ç”Ÿæˆå‡†ç¡®ç‡ | 0% | 80%+ | **æ–°åŠŸèƒ½** |
| çŸ¥è¯†ç§¯ç´¯ | æ—  | æ°¸ä¹…ç´¯ç§¯ | **è´¨å˜** |
| ç”¨æˆ·æ»¡æ„åº¦ | 60åˆ† | 90åˆ†+ | **50%** |

---

**ç‰ˆæœ¬**: v4.0 Academician Edition
**è®¾è®¡ç†å¿µ**: ä¸æ­¢äºåˆ†æï¼Œæ›´æ˜¯æ™ºèƒ½ç§‘ç ”åŠ©æ‰‹
**æ ¸å¿ƒåˆ›æ–°**: ä»ä¿¡æ¯æå–åˆ°çŸ¥è¯†ç”Ÿæˆåˆ°ä»£ç å®ç°çš„å®Œæ•´é—­ç¯
