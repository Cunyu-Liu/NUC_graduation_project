"""提示词模块 - 为每个功能模块设计的完整提示词"""

# ============================================================================
# 摘要生成提示词
# ============================================================================

SUMMARY_GENERATION_PROMPT = """你是一位资深的学术文献分析师，具有深厚的学术背景和研究经验。你的任务是为科研论文撰写高质量的摘要。

## 任务要求

请仔细阅读以下论文内容，并生成一份专业、准确的摘要。摘要需要满足以下标准：

### 内容要求
1. **研究背景与问题**：简述研究的背景和要解决的核心问题（1-2句话）
2. **研究方法**：说明论文采用的主要方法和技术路线（1-2句话）
3. **核心创新**：突出论文的主要创新点和独特贡献（2-3句话）
4. **主要发现**：总结论文的关键实验结果和发现（2-3句话）
5. **结论与意义**：阐述研究的结论和学术/应用价值（1-2句话）

### 质量标准
- **客观准确**：严格基于论文内容，不添加主观臆断
- **逻辑清晰**：各部分内容连贯，层次分明
- **简洁精炼**：用最少的文字传达最多的信息
- **专业规范**：使用学术规范的语言表达
- **长度控制**：中文字数300-500字，英文200-400词

### 语言要求
- 如果是中文论文，使用简体中文回答
- 如果是英文论文，使用英文回答
- 保持学术中立的语气，避免夸张或主观评价

## 论文信息

**论文标题**：{title}

**原始摘要**：{abstract}

**主要章节内容**：
{sections}

**论文正文（节选）**：
{content}

## 输出格式

请直接输出摘要文本，不要添加任何额外说明或标记。摘要应该是一段连贯的文本，不需要分点或分段。

---

**现在请基于上述要求生成摘要：**"""


# ============================================================================
# 要点提取提示词
# ============================================================================

KEYPOINT_EXTRACTION_PROMPT = """你是一位专业的学术文献分析专家，擅长从科研论文中提取关键信息。你的任务是结构化地提取论文的核心要点。

## 任务要求

请仔细分析以下论文内容，并按要求提取关键信息。所有要点必须是直接从论文中提取的事实，不要添加推测或外部知识。

## 提取类别和要求

### 1. 核心创新点 (Innovations)
**数量**：3-5个
**要求**：
- 提取论文中最主要的创新性贡献
- 重点关注方法、算法、系统架构等方面的创新
- 每个创新点用一句话简洁描述
- 格式："[动词] + [创新内容]，实现/解决了[效果/问题]"

**示例**：
- "提出了一种基于注意力机制的新型神经网络架构，显著提升了图像识别精度"
- "设计了新的并行计算框架，将处理速度提升3倍"

### 2. 主要方法与技术 (Methods)
**数量**：3-5个
**要求**：
- 列出论文采用的核心方法、算法或技术
- 包括理论方法、实验设计、数据分析方法等
- 每个方法用专业术语准确描述
- 格式："[方法名称]：[简要说明其作用或特点]"

**示例**：
- "深度卷积神经网络(CNN)：用于特征提取和模式识别"
- "对比学习：通过正负样本对比提升模型判别能力"

### 3. 实验设计与评估 (Experiments)
**数量**：2-4个
**要求**：
- 描述论文的主要实验设计
- 说明评估指标和数据集
- 每个实验说明其目的和关键设置
- 格式："[实验名称/类型]：使用[数据集/工具]，评估[指标]"

**示例**：
- "性能对比实验：在ImageNet数据集上评估模型准确率和推理速度"
- "消融实验：验证各模块对整体性能的贡献"

### 4. 主要结论 (Conclusions)
**数量**：3-5个
**要求**：
- 总结论文的核心发现和结论
- 包括定量结果（性能提升、准确率等）
- 包括定性结论（方法有效性、适用场景等）
- 格式："[结论陈述]，具体表现为[数据/证据]"

**示例**：
- "所提方法在准确率上超越基线方法12.5%，验证了其有效性"
- "在大规模数据集上展现出良好的泛化能力，适用于实际应用场景"

### 5. 学术贡献 (Contributions)
**数量**：2-4个
**要求**：
- 阐明论文对领域的理论或实践贡献
- 强调研究的学术价值和应用前景
- 格式："[贡献类型]：[具体贡献内容]"

**示例**：
- "理论贡献：提出了新的数学框架，为后续研究提供理论基础"
- "实践贡献：开源了完整的实现代码和预训练模型，便于社区复现和使用"

### 6. 研究局限性 (Limitations)
**数量**：1-3个
**要求**：
- 诚实地指出论文的不足或局限
- 包括方法限制、适用范围、未来改进方向等
- 格式："[局限性方面]：[具体说明]"

**示例**：
- "计算复杂度：当前方法在超大规模数据上训练时间较长，需要进一步优化"
- "数据依赖：方法性能在一定程度上依赖于标注数据的质量"

## 输出格式

请严格按照以下JSON格式输出，不要添加任何额外说明：

```json
{{
  "innovations": [
    "创新点1",
    "创新点2",
    "..."
  ],
  "methods": [
    "方法1",
    "方法2",
    "..."
  ],
  "experiments": [
    "实验1",
    "实验2",
    "..."
  ],
  "conclusions": [
    "结论1",
    "结论2",
    "..."
  ],
  "contributions": [
    "贡献1",
    "贡献2",
    "..."
  ],
  "limitations": [
    "局限1",
    "局限2",
    "..."
  ]
}}
```

## 论文信息

**论文标题**：{title}

**原始摘要**：{abstract}

**关键词**：{keywords}

**主要章节**：
{sections}

**论文正文（节选）**：
{content}

---

**现在请基于上述要求提取要点，并输出JSON格式的结果：**"""


# ============================================================================
# 主题分析提示词
# ============================================================================

TOPIC_ANALYSIS_PROMPT = """你是一位学术研究领域的专家，擅长分析文献的主题和研究方向。你的任务是分析给定论文的研究主题和关键概念。

## 任务要求

请仔细阅读论文内容，并提供以下分析：

### 1. 研究领域
- 识别论文所属的学科领域（如：计算机科学、生物学、材料科学等）
- 确定具体的研究方向（如：深度学习、计算机视觉、自然语言处理等）

### 2. 核心主题
- 提取3-5个最能代表论文内容的核心主题词
- 主题词应该是专业术语，能够准确概括研究内容
- 按重要性排序

### 3. 研究问题
- 明确论文要解决的核心研究问题
- 说明该问题的背景和重要性

### 4. 方法论类别
- 判断论文采用的研究方法类型（理论、实验、仿真、调研等）
- 说明方法论的特点

### 5. 应用领域
- 指出研究成果可能的应用领域
- 说明应用的可行性

## 输出格式

请以结构化的方式输出，便于后续的主题聚类分析。

## 论文信息

**论文标题**：{title}

**摘要**：{abstract}

**关键词**：{keywords}

**主要内容**：
{content}

---

**请提供你的分析：**"""


# ============================================================================
# 研究趋势分析提示词
# ============================================================================

TREND_ANALYSIS_PROMPT = """你是一位学术战略研究专家，具有丰富的前沿技术洞察力。你的任务是基于多篇论文的主题聚类结果，分析研究趋势和发现潜在机会。

## 任务要求

请仔细分析以下聚类结果，并提供全面的趋势分析。

### 1. 研究热点分析
- 识别当前最活跃的研究方向
- 分析各热点的核心技术和方法
- 评估热点的成熟度和发展阶段

### 2. 研究趋势预测
- 基于聚类结果预测未来2-3年的研究趋势
- 识别新兴研究方向
- 分析技术演进路径

### 3. 跨领域机会
- 识别不同研究方向的交叉点
- 提出跨学科融合的可能性
- 推荐有潜力的交叉研究领域

### 4. 研究空白
- 指出当前研究中较少涉及但重要的问题
- 识别未被充分探索的技术方向
- 提出值得进一步研究的问题

### 5. 建议与展望
- 为新入研究者提供建议
- 为项目选题提供参考
- 为研究方向选择提供指导

## 聚类结果

{cluster_results}

---

**请提供你的趋势分析报告：**"""


# ============================================================================
# 辅助函数
# ============================================================================

def get_summary_prompt(title: str, abstract: str, sections: str, content: str) -> str:
    """生成摘要生成的提示词"""
    return SUMMARY_GENERATION_PROMPT.format(
        title=title or "未提取标题",
        abstract=abstract or "未提取摘要",
        sections=sections or "未提取章节",
        content=content or ""
    )


def get_keypoint_prompt(
    title: str,
    abstract: str,
    keywords: str,
    sections: str,
    content: str
) -> str:
    """生成要点提取的提示词"""
    return KEYPOINT_EXTRACTION_PROMPT.format(
        title=title or "未提取标题",
        abstract=abstract or "未提取摘要",
        keywords=keywords or "未提取关键词",
        sections=sections or "未提取章节",
        content=content or ""
    )


def get_topic_prompt(title: str, abstract: str, keywords: str, content: str) -> str:
    """生成主题分析的提示词"""
    return TOPIC_ANALYSIS_PROMPT.format(
        title=title or "未提取标题",
        abstract=abstract or "未提取摘要",
        keywords=keywords or "未提取关键词",
        content=content or ""
    )


def get_trend_prompt(cluster_results: str) -> str:
    """生成趋势分析的提示词"""
    return TREND_ANALYSIS_PROMPT.format(
        cluster_results=cluster_results
    )
