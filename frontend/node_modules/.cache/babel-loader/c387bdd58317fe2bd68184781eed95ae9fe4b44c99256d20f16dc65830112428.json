{"ast":null,"code":"import { defineComponent, ref, toRef, computed, provide, readonly, unref, watch, onDeactivated, onBeforeUnmount, openBlock, createBlock, withCtx, createVNode, renderSlot, createCommentVNode, createElementBlock, toDisplayString } from 'vue';\nimport { ElPopper } from '../../popper/index.mjs';\nimport { TOOLTIP_INJECTION_KEY } from './constants.mjs';\nimport { useTooltipProps, tooltipEmits, useTooltipModelToggle } from './tooltip.mjs';\nimport ElTooltipTrigger from './trigger2.mjs';\nimport ElTooltipContent from './content2.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { usePopperContainer } from '../../../hooks/use-popper-container/index.mjs';\nimport { useDelayedToggle } from '../../../hooks/use-delayed-toggle/index.mjs';\nimport ElPopperArrow from '../../popper/src/arrow2.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useId } from '../../../hooks/use-id/index.mjs';\nimport { isBoolean } from '../../../utils/types.mjs';\nconst _hoisted_1 = [\"innerHTML\"];\nconst _hoisted_2 = {\n  key: 1\n};\nconst _sfc_main = defineComponent({\n  ...{\n    name: \"ElTooltip\"\n  },\n  __name: \"tooltip\",\n  props: useTooltipProps,\n  emits: tooltipEmits,\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    const props = __props;\n    const emit = __emit;\n    usePopperContainer();\n    const ns = useNamespace(\"tooltip\");\n    const id = useId();\n    const popperRef = ref();\n    const contentRef = ref();\n    const updatePopper = () => {\n      var _a;\n      const popperComponent = unref(popperRef);\n      if (popperComponent) {\n        (_a = popperComponent.popperInstanceRef) == null ? void 0 : _a.update();\n      }\n    };\n    const open = ref(false);\n    const toggleReason = ref();\n    const {\n      show,\n      hide,\n      hasUpdateHandler\n    } = useTooltipModelToggle({\n      indicator: open,\n      toggleReason\n    });\n    const {\n      onOpen,\n      onClose\n    } = useDelayedToggle({\n      showAfter: toRef(props, \"showAfter\"),\n      hideAfter: toRef(props, \"hideAfter\"),\n      autoClose: toRef(props, \"autoClose\"),\n      open: show,\n      close: hide\n    });\n    const controlled = computed(() => isBoolean(props.visible) && !hasUpdateHandler.value);\n    const kls = computed(() => {\n      return [ns.b(), props.popperClass];\n    });\n    provide(TOOLTIP_INJECTION_KEY, {\n      controlled,\n      id,\n      open: readonly(open),\n      trigger: toRef(props, \"trigger\"),\n      onOpen,\n      onClose,\n      onToggle: event => {\n        if (unref(open)) {\n          onClose(event);\n        } else {\n          onOpen(event);\n        }\n      },\n      onShow: () => {\n        emit(\"show\", toggleReason.value);\n      },\n      onHide: () => {\n        emit(\"hide\", toggleReason.value);\n      },\n      onBeforeShow: () => {\n        emit(\"before-show\", toggleReason.value);\n      },\n      onBeforeHide: () => {\n        emit(\"before-hide\", toggleReason.value);\n      },\n      updatePopper\n    });\n    watch(() => props.disabled, disabled => {\n      if (disabled && open.value) {\n        open.value = false;\n      }\n    });\n    const isFocusInsideContent = event => {\n      var _a;\n      return (_a = contentRef.value) == null ? void 0 : _a.isFocusInsideContent(event);\n    };\n    onDeactivated(() => open.value && hide());\n    onBeforeUnmount(() => {\n      toggleReason.value = void 0;\n    });\n    __expose({\n      popperRef,\n      contentRef,\n      isFocusInsideContent,\n      updatePopper,\n      onOpen,\n      onClose,\n      hide\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(ElPopper), {\n        ref_key: \"popperRef\",\n        ref: popperRef,\n        role: _ctx.role\n      }, {\n        default: withCtx(() => [createVNode(ElTooltipTrigger, {\n          disabled: _ctx.disabled,\n          trigger: _ctx.trigger,\n          \"trigger-keys\": _ctx.triggerKeys,\n          \"virtual-ref\": _ctx.virtualRef,\n          \"virtual-triggering\": _ctx.virtualTriggering,\n          \"focus-on-target\": _ctx.focusOnTarget\n        }, {\n          default: withCtx(() => [_ctx.$slots.default ? renderSlot(_ctx.$slots, \"default\", {\n            key: 0\n          }) : createCommentVNode(\"v-if\", true)]),\n          _: 3\n        }, 8, [\"disabled\", \"trigger\", \"trigger-keys\", \"virtual-ref\", \"virtual-triggering\", \"focus-on-target\"]), createVNode(ElTooltipContent, {\n          ref_key: \"contentRef\",\n          ref: contentRef,\n          \"aria-label\": _ctx.ariaLabel,\n          \"boundaries-padding\": _ctx.boundariesPadding,\n          content: _ctx.content,\n          disabled: _ctx.disabled,\n          effect: _ctx.effect,\n          enterable: _ctx.enterable,\n          \"fallback-placements\": _ctx.fallbackPlacements,\n          \"hide-after\": _ctx.hideAfter,\n          \"gpu-acceleration\": _ctx.gpuAcceleration,\n          offset: _ctx.offset,\n          persistent: _ctx.persistent,\n          \"popper-class\": kls.value,\n          \"popper-style\": _ctx.popperStyle,\n          placement: _ctx.placement,\n          \"popper-options\": _ctx.popperOptions,\n          \"arrow-offset\": _ctx.arrowOffset,\n          pure: _ctx.pure,\n          \"raw-content\": _ctx.rawContent,\n          \"reference-el\": _ctx.referenceEl,\n          \"trigger-target-el\": _ctx.triggerTargetEl,\n          \"show-after\": _ctx.showAfter,\n          strategy: _ctx.strategy,\n          teleported: _ctx.teleported,\n          transition: _ctx.transition,\n          \"virtual-triggering\": _ctx.virtualTriggering,\n          \"z-index\": _ctx.zIndex,\n          \"append-to\": _ctx.appendTo,\n          loop: _ctx.loop\n        }, {\n          default: withCtx(() => [renderSlot(_ctx.$slots, \"content\", {}, () => [_ctx.rawContent ? (openBlock(), createElementBlock(\"span\", {\n            key: 0,\n            innerHTML: _ctx.content\n          }, null, 8, _hoisted_1)) : (openBlock(), createElementBlock(\"span\", _hoisted_2, toDisplayString(_ctx.content), 1))]), _ctx.showArrow ? (openBlock(), createBlock(unref(ElPopperArrow), {\n            key: 0\n          })) : createCommentVNode(\"v-if\", true)]),\n          _: 3\n        }, 8, [\"aria-label\", \"boundaries-padding\", \"content\", \"disabled\", \"effect\", \"enterable\", \"fallback-placements\", \"hide-after\", \"gpu-acceleration\", \"offset\", \"persistent\", \"popper-class\", \"popper-style\", \"placement\", \"popper-options\", \"arrow-offset\", \"pure\", \"raw-content\", \"reference-el\", \"trigger-target-el\", \"show-after\", \"strategy\", \"teleported\", \"transition\", \"virtual-triggering\", \"z-index\", \"append-to\", \"loop\"])]),\n        _: 3\n      }, 8, [\"role\"]);\n    };\n  }\n});\nvar Tooltip = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue\"]]);\nexport { Tooltip as default };","map":{"version":3,"names":["props","__props","emit","__emit","usePopperContainer","ns","useNamespace","id","useId","popperRef","ref","contentRef","updatePopper","popperComponent","unref","_a","popperInstanceRef","update","open","toggleReason","show","hide","hasUpdateHandler","useTooltipModelToggle","indicator","onOpen","onClose","useDelayedToggle","showAfter","toRef","hideAfter","autoClose","close","controlled","computed","isBoolean","visible","value","kls","b","popperClass","provide","TOOLTIP_INJECTION_KEY","readonly","trigger","onToggle","event","onShow","onHide","onBeforeShow","onBeforeHide","watch","disabled","isFocusInsideContent","onDeactivated","onBeforeUnmount","__expose","createBlock","ElPopper","ref_key","role","_ctx","default","withCtx","createVNode","ElTooltipTrigger","triggerKeys","virtualRef","virtualTriggering","focusOnTarget","$slots","renderSlot","key","createCommentVNode","ElTooltipContent","ariaLabel","boundariesPadding","content","effect","enterable","fallbackPlacements","gpuAcceleration","offset","persistent","popperStyle","placement","popperOptions","arrowOffset","pure","rawContent","referenceEl","triggerTargetEl","strategy","teleported","transition","zIndex","appendTo","loop","openBlock","createElementBlock","innerHTML","_hoisted_1","_hoisted_2","toDisplayString","showArrow","ElPopperArrow"],"sources":["../../../../../../packages/components/tooltip/src/tooltip.vue"],"sourcesContent":["<template>\n  <el-popper ref=\"popperRef\" :role=\"role\">\n    <el-tooltip-trigger\n      :disabled=\"disabled\"\n      :trigger=\"trigger\"\n      :trigger-keys=\"triggerKeys\"\n      :virtual-ref=\"virtualRef\"\n      :virtual-triggering=\"virtualTriggering\"\n      :focus-on-target=\"focusOnTarget\"\n    >\n      <slot v-if=\"$slots.default\" />\n    </el-tooltip-trigger>\n    <el-tooltip-content\n      ref=\"contentRef\"\n      :aria-label=\"ariaLabel\"\n      :boundaries-padding=\"boundariesPadding\"\n      :content=\"content\"\n      :disabled=\"disabled\"\n      :effect=\"effect\"\n      :enterable=\"enterable\"\n      :fallback-placements=\"fallbackPlacements\"\n      :hide-after=\"hideAfter\"\n      :gpu-acceleration=\"gpuAcceleration\"\n      :offset=\"offset\"\n      :persistent=\"persistent\"\n      :popper-class=\"kls\"\n      :popper-style=\"popperStyle\"\n      :placement=\"placement\"\n      :popper-options=\"popperOptions\"\n      :arrow-offset=\"arrowOffset\"\n      :pure=\"pure\"\n      :raw-content=\"rawContent\"\n      :reference-el=\"referenceEl\"\n      :trigger-target-el=\"triggerTargetEl\"\n      :show-after=\"showAfter\"\n      :strategy=\"strategy\"\n      :teleported=\"teleported\"\n      :transition=\"transition\"\n      :virtual-triggering=\"virtualTriggering\"\n      :z-index=\"zIndex\"\n      :append-to=\"appendTo\"\n      :loop=\"loop\"\n    >\n      <slot name=\"content\">\n        <span v-if=\"rawContent\" v-html=\"content\" />\n        <span v-else>{{ content }}</span>\n      </slot>\n      <el-popper-arrow v-if=\"showArrow\" />\n    </el-tooltip-content>\n  </el-popper>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  computed,\n  onBeforeUnmount,\n  onDeactivated,\n  provide,\n  readonly,\n  ref,\n  toRef,\n  unref,\n  watch,\n} from 'vue'\nimport { ElPopper, ElPopperArrow } from '@element-plus/components/popper'\nimport { isBoolean } from '@element-plus/utils'\nimport {\n  useDelayedToggle,\n  useId,\n  useNamespace,\n  usePopperContainer,\n} from '@element-plus/hooks'\nimport { TOOLTIP_INJECTION_KEY } from './constants'\nimport { tooltipEmits, useTooltipModelToggle, useTooltipProps } from './tooltip'\nimport ElTooltipTrigger from './trigger.vue'\nimport ElTooltipContent from './content.vue'\n\nimport type { TooltipContentInstance } from './content'\nimport type { PopperInstance } from '@element-plus/components/popper'\n\ndefineOptions({\n  name: 'ElTooltip',\n})\n\nconst props = defineProps(useTooltipProps)\nconst emit = defineEmits(tooltipEmits)\n\nusePopperContainer()\n\nconst ns = useNamespace('tooltip')\nconst id = useId()\nconst popperRef = ref<PopperInstance>()\nconst contentRef = ref<TooltipContentInstance>()\n\nconst updatePopper = () => {\n  const popperComponent = unref(popperRef)\n  if (popperComponent) {\n    popperComponent.popperInstanceRef?.update()\n  }\n}\nconst open = ref(false)\nconst toggleReason = ref<Event>()\n\nconst { show, hide, hasUpdateHandler } = useTooltipModelToggle({\n  indicator: open,\n  toggleReason,\n})\n\nconst { onOpen, onClose } = useDelayedToggle({\n  showAfter: toRef(props, 'showAfter'),\n  hideAfter: toRef(props, 'hideAfter'),\n  autoClose: toRef(props, 'autoClose'),\n  open: show,\n  close: hide,\n})\n\nconst controlled = computed(\n  () => isBoolean(props.visible) && !hasUpdateHandler.value\n)\n\nconst kls = computed(() => {\n  return [ns.b(), props.popperClass!]\n})\n\nprovide(TOOLTIP_INJECTION_KEY, {\n  controlled,\n  id,\n  open: readonly(open),\n  trigger: toRef(props, 'trigger'),\n  onOpen,\n  onClose,\n  onToggle: (event?: Event) => {\n    if (unref(open)) {\n      onClose(event)\n    } else {\n      onOpen(event)\n    }\n  },\n  onShow: () => {\n    emit('show', toggleReason.value)\n  },\n  onHide: () => {\n    emit('hide', toggleReason.value)\n  },\n  onBeforeShow: () => {\n    emit('before-show', toggleReason.value)\n  },\n  onBeforeHide: () => {\n    emit('before-hide', toggleReason.value)\n  },\n  updatePopper,\n})\n\nwatch(\n  () => props.disabled,\n  (disabled) => {\n    if (disabled && open.value) {\n      open.value = false\n    }\n  }\n)\n\nconst isFocusInsideContent = (event?: FocusEvent) => {\n  return contentRef.value?.isFocusInsideContent(event)\n}\n\nonDeactivated(() => open.value && hide())\n\nonBeforeUnmount(() => {\n  toggleReason.value = undefined\n})\n\ndefineExpose({\n  /**\n   * @description el-popper component instance\n   */\n  popperRef,\n  /**\n   * @description el-tooltip-content component instance\n   */\n  contentRef,\n  /**\n   * @description validate current focus event is trigger inside el-tooltip-content\n   */\n  isFocusInsideContent,\n  /**\n   * @description update el-popper component instance\n   */\n  updatePopper,\n  /**\n   * @description expose onOpen function to mange el-tooltip open state\n   */\n  onOpen,\n  /**\n   * @description expose onClose function to manage el-tooltip close state\n   */\n  onClose,\n  /**\n   * @description expose hide function\n   */\n  hide,\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;IAoFA,MAAMA,KAAQ,GAAAC,OAAA;IACd,MAAMC,IAAO,GAAAC,MAAA;IAEMC,kBAAA;IAEb,MAAAC,EAAA,GAAKC,YAAA,CAAa,SAAS;IACjC,MAAMC,EAAA,GAAKC,KAAM;IACjB,MAAMC,SAAA,GAAYC,GAAoB;IACtC,MAAMC,UAAA,GAAaD,GAA4B;IAE/C,MAAME,YAAA,GAAeA,CAAA,KAAM;;MACnB,MAAAC,eAAA,GAAkBC,KAAA,CAAML,SAAS;MACvC,IAAII,eAAiB;QACnB,CAAAE,EAAA,GAAAF,eAAA,CAAgBG,iBAAA,KAAhB,IAAmC,YAAAD,EAAA,CAAAE,MAAA;MAAA;IACrC,CACF;IACM,MAAAC,IAAA,GAAOR,GAAA,CAAI,KAAK;IACtB,MAAMS,YAAA,GAAeT,GAAW;IAEhC,MAAM;MAAEU,IAAA;MAAMC,IAAM;MAAAC;IAAA,IAAqBC,qBAAsB;MAC7DC,SAAW,EAAAN,IAAA;MACXC;IAAA,CACD;IAED,MAAM;MAAEM,MAAA;MAAQC;IAAQ,IAAIC,gBAAiB;MAC3CC,SAAA,EAAWC,KAAM,CAAA7B,KAAA,EAAO,WAAW;MACnC8B,SAAA,EAAWD,KAAM,CAAA7B,KAAA,EAAO,WAAW;MACnC+B,SAAA,EAAWF,KAAM,CAAA7B,KAAA,EAAO,WAAW;MACnCkB,IAAM,EAAAE,IAAA;MACNY,KAAO,EAAAX;IAAA,CACR;IAED,MAAMY,UAAa,GAAAC,QAAA,CACjB,MAAMC,SAAU,CAAAnC,KAAA,CAAMoC,OAAO,KAAK,CAACd,gBAAiB,CAAAe,KAAA,CACtD;IAEM,MAAAC,GAAA,GAAMJ,QAAA,CAAS,MAAM;MACzB,OAAO,CAAC7B,EAAA,CAAGkC,CAAE,IAAGvC,KAAA,CAAMwC,WAAY;IAAA,CACnC;IAEDC,OAAA,CAAQC,qBAAuB;MAC7BT,UAAA;MACA1B,EAAA;MACAW,IAAA,EAAMyB,QAAA,CAASzB,IAAI;MACnB0B,OAAA,EAASf,KAAM,CAAA7B,KAAA,EAAO,SAAS;MAC/ByB,MAAA;MACAC,OAAA;MACAmB,QAAA,EAAWC,KAAkB;QACvB,IAAAhC,KAAA,CAAMI,IAAI,CAAG;UACfQ,OAAA,CAAQoB,KAAK;QAAA,CACR;UACLrB,MAAA,CAAOqB,KAAK;QAAA;MACd,CACF;MACAC,MAAA,EAAQA,CAAA,KAAM;QACP7C,IAAA,SAAQiB,YAAA,CAAakB,KAAK;MAAA,CACjC;MACAW,MAAA,EAAQA,CAAA,KAAM;QACP9C,IAAA,SAAQiB,YAAA,CAAakB,KAAK;MAAA,CACjC;MACAY,YAAA,EAAcA,CAAA,KAAM;QACb/C,IAAA,gBAAeiB,YAAA,CAAakB,KAAK;MAAA,CACxC;MACAa,YAAA,EAAcA,CAAA,KAAM;QACbhD,IAAA,gBAAeiB,YAAA,CAAakB,KAAK;MAAA,CACxC;MACAzB;IAAA,CACD;IAEDuC,KAAA,CACE,MAAMnD,KAAM,CAAAoD,QAAA,EACXA,QAAa;MACR,IAAAA,QAAA,IAAYlC,IAAA,CAAKmB,KAAO;QAC1BnB,IAAA,CAAKmB,KAAQ;MAAA;IACf,CACF,CACF;IAEM,MAAAgB,oBAAA,GAAwBP,KAAuB;;MAC5C,QAAA/B,EAAA,GAAAJ,UAAA,CAAW0B,KAAX,qBAAAtB,EAAA,CAAkBsC,oBAAqB,CAAAP,KAAA;IAAA,CAChD;IAEAQ,aAAA,CAAc,MAAMpC,IAAA,CAAKmB,KAAS,IAAAhB,IAAA,EAAM;IAExCkC,eAAA,CAAgB,MAAM;MACpBpC,YAAA,CAAakB,KAAQ;IAAA,CACtB;IAEYmB,QAAA;MAIX/C,SAAA;MAIAE,UAAA;MAIA0C,oBAAA;MAIAzC,YAAA;MAIAa,MAAA;MAIAC,OAAA;MAIAL;IAAA,CACD;;0BAxMCoC,WAgDY,CAAA3C,KAAA,CAAA4C,QAAA;QAhDGC,OAAA;QAAJjD,GAAI,EAAAD,SAAA;QAAamD,IAAA,EAAMC,IAAA,CAAAD;MAAA;QAAAE,OAAA,EAAAC,OAAA,CAChC,MASqB,CATrBC,WAAA,CASqBC,gBAAA;UARlBb,QAAA,EAAUS,IAAA,CAAAT,QAAA;UACVR,OAAA,EAASiB,IAAA,CAAAjB,OAAA;UACT,gBAAciB,IAAA,CAAAK,WAAA;UACd,eAAaL,IAAA,CAAAM,UAAA;UACb,sBAAoBN,IAAA,CAAAO,iBAAA;UACpB,mBAAiBP,IAAA,CAAAQ;QAAA;UAAAP,OAAA,EAAAC,OAAA,CAElB,MAA8B,CAAlBF,IAAA,CAAAS,MAAA,CAAOR,OAAnB,GAAAS,UAAA,CAA8BV,IAAA,CAAAS,MAAA;YAAAE,GAAA;UAAA,KAAAC,kBAAA;;gHAEhCT,WAAA,CAoCqBU,gBAAA;UAnCff,OAAA;UAAJjD,GAAI,EAAAC,UAAA;UACH,cAAYkD,IAAA,CAAAc,SAAA;UACZ,sBAAoBd,IAAA,CAAAe,iBAAA;UACpBC,OAAA,EAAShB,IAAA,CAAAgB,OAAA;UACTzB,QAAA,EAAUS,IAAA,CAAAT,QAAA;UACV0B,MAAA,EAAQjB,IAAA,CAAAiB,MAAA;UACRC,SAAA,EAAWlB,IAAA,CAAAkB,SAAA;UACX,uBAAqBlB,IAAA,CAAAmB,kBAAA;UACrB,cAAYnB,IAAA,CAAA/B,SAAA;UACZ,oBAAkB+B,IAAA,CAAAoB,eAAA;UAClBC,MAAA,EAAQrB,IAAA,CAAAqB,MAAA;UACRC,UAAA,EAAYtB,IAAA,CAAAsB,UAAA;UACZ,gBAAc7C,GAAA,CAAAD,KAAA;UACd,gBAAcwB,IAAA,CAAAuB,WAAA;UACdC,SAAA,EAAWxB,IAAA,CAAAwB,SAAA;UACX,kBAAgBxB,IAAA,CAAAyB,aAAA;UAChB,gBAAczB,IAAA,CAAA0B,WAAA;UACdC,IAAA,EAAM3B,IAAA,CAAA2B,IAAA;UACN,eAAa3B,IAAA,CAAA4B,UAAA;UACb,gBAAc5B,IAAA,CAAA6B,WAAA;UACd,qBAAmB7B,IAAA,CAAA8B,eAAA;UACnB,cAAY9B,IAAA,CAAAjC,SAAA;UACZgE,QAAA,EAAU/B,IAAA,CAAA+B,QAAA;UACVC,UAAA,EAAYhC,IAAA,CAAAgC,UAAA;UACZC,UAAA,EAAYjC,IAAA,CAAAiC,UAAA;UACZ,sBAAoBjC,IAAA,CAAAO,iBAAA;UACpB,WAASP,IAAA,CAAAkC,MAAA;UACT,aAAWlC,IAAA,CAAAmC,QAAA;UACXC,IAAA,EAAMpC,IAAA,CAAAoC;QAAA;UAAAnC,OAAA,EAAAC,OAAA,CAEP,MAGO,CAHPQ,UAAA,CAGOV,IAAA,CAAAS,MAAA,iBAHP,MAGO,CAFOT,IAAA,CAAA4B,UAAA,IAAAS,SAAA,IAAZC,kBAAA,CAA2C;YAAA3B,GAAA;YAAnB4B,SAAA,EAAQvC,IAAA,CAAAgB;UAAA,GAChC,SAAAwB,UAAA,MAAAH,SAAA,IAAAC,kBAAA,CAAiC,QAAAG,UAAA,EAAAC,eAAA,CAAjB1C,IAAA,CAAOgB,OAAA,UAEFhB,IAAA,CAAA2C,SAAA,IAAAN,SAAA,IAAvBzC,WAAA,CAAoC3C,KAAA,CAAA2F,aAAA;YAAAjC,GAAA;UAAA,MAAAC,kBAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}