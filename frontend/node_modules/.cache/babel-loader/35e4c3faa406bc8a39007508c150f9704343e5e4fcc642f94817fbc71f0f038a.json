{"ast":null,"code":"import { computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { getSocket } from '@/api';\nexport default {\n  name: 'ProgressDialog',\n  setup() {\n    const store = useStore();\n    const visible = computed({\n      get: () => store.state.showProgressDialog,\n      set: val => store.commit('SHOW_PROGRESS_DIALOG', val)\n    });\n    const progress = computed(() => store.state.progress);\n    const message = computed(() => store.state.progressMessage);\n    const step = computed(() => store.state.progressStep);\n\n    // 监听WebSocket进度\n    const socket = getSocket();\n    socket.on('progress', data => {\n      store.commit('SET_PROGRESS', {\n        progress: data.progress,\n        message: data.message,\n        step: data.step\n      });\n      if (data.progress >= 100) {\n        setTimeout(() => {\n          store.commit('SHOW_PROGRESS_DIALOG', false);\n        }, 1000);\n      }\n    });\n    return {\n      visible,\n      progress,\n      message,\n      step\n    };\n  }\n};","map":{"version":3,"names":["computed","useStore","getSocket","name","setup","store","visible","get","state","showProgressDialog","set","val","commit","progress","message","progressMessage","step","progressStep","socket","on","data","setTimeout"],"sources":["/Users/liucunyu/Documents/all_code/nuc_Graduation_project/frontend/src/components/ProgressDialog.vue"],"sourcesContent":["<template>\n  <el-dialog\n    v-model=\"visible\"\n    title=\"处理中\"\n    width=\"400px\"\n    :close-on-click-modal=\"false\"\n    :show-close=\"false\"\n  >\n    <div class=\"progress-content\">\n      <el-progress\n        :percentage=\"progress\"\n        :status=\"progress === 100 ? 'success' : undefined\"\n      />\n      <p class=\"message\">{{ message }}</p>\n      <p class=\"step\" v-if=\"step\">{{ step }}</p>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { getSocket } from '@/api'\n\nexport default {\n  name: 'ProgressDialog',\n  setup() {\n    const store = useStore()\n\n    const visible = computed({\n      get: () => store.state.showProgressDialog,\n      set: (val) => store.commit('SHOW_PROGRESS_DIALOG', val)\n    })\n\n    const progress = computed(() => store.state.progress)\n    const message = computed(() => store.state.progressMessage)\n    const step = computed(() => store.state.progressStep)\n\n    // 监听WebSocket进度\n    const socket = getSocket()\n    socket.on('progress', (data) => {\n      store.commit('SET_PROGRESS', {\n        progress: data.progress,\n        message: data.message,\n        step: data.step\n      })\n\n      if (data.progress >= 100) {\n        setTimeout(() => {\n          store.commit('SHOW_PROGRESS_DIALOG', false)\n        }, 1000)\n      }\n    })\n\n    return {\n      visible,\n      progress,\n      message,\n      step\n    }\n  }\n}\n</script>\n\n<style scoped>\n.progress-content {\n  padding: 20px 0;\n  text-align: center;\n}\n\n.message {\n  margin-top: 20px;\n  font-size: 16px;\n  color: #303133;\n}\n\n.step {\n  margin-top: 10px;\n  font-size: 14px;\n  color: #909399;\n}\n</style>\n"],"mappings":"AAoBA,SAASA,QAAO,QAAS,KAAI;AAC7B,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,SAAQ,QAAS,OAAM;AAEhC,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIJ,QAAQ,CAAC;IAEvB,MAAMK,OAAM,GAAIN,QAAQ,CAAC;MACvBO,GAAG,EAAEA,CAAA,KAAMF,KAAK,CAACG,KAAK,CAACC,kBAAkB;MACzCC,GAAG,EAAGC,GAAG,IAAKN,KAAK,CAACO,MAAM,CAAC,sBAAsB,EAAED,GAAG;IACxD,CAAC;IAED,MAAME,QAAO,GAAIb,QAAQ,CAAC,MAAMK,KAAK,CAACG,KAAK,CAACK,QAAQ;IACpD,MAAMC,OAAM,GAAId,QAAQ,CAAC,MAAMK,KAAK,CAACG,KAAK,CAACO,eAAe;IAC1D,MAAMC,IAAG,GAAIhB,QAAQ,CAAC,MAAMK,KAAK,CAACG,KAAK,CAACS,YAAY;;IAEpD;IACA,MAAMC,MAAK,GAAIhB,SAAS,CAAC;IACzBgB,MAAM,CAACC,EAAE,CAAC,UAAU,EAAGC,IAAI,IAAK;MAC9Bf,KAAK,CAACO,MAAM,CAAC,cAAc,EAAE;QAC3BC,QAAQ,EAAEO,IAAI,CAACP,QAAQ;QACvBC,OAAO,EAAEM,IAAI,CAACN,OAAO;QACrBE,IAAI,EAAEI,IAAI,CAACJ;MACb,CAAC;MAED,IAAII,IAAI,CAACP,QAAO,IAAK,GAAG,EAAE;QACxBQ,UAAU,CAAC,MAAM;UACfhB,KAAK,CAACO,MAAM,CAAC,sBAAsB,EAAE,KAAK;QAC5C,CAAC,EAAE,IAAI;MACT;IACF,CAAC;IAED,OAAO;MACLN,OAAO;MACPO,QAAQ;MACRC,OAAO;MACPE;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}