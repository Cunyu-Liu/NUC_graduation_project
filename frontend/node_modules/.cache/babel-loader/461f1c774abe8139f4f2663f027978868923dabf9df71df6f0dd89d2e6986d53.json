{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"cluster\"\n};\nconst _hoisted_2 = {\n  class: \"select-header\"\n};\nconst _hoisted_3 = {\n  class: \"header-actions\"\n};\nconst _hoisted_4 = {\n  class: \"vector-cluster-info\"\n};\nconst _hoisted_5 = {\n  class: \"vector-actions\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"vector-stats\",\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_7 = {\n  class: \"history-header\"\n};\nconst _hoisted_8 = {\n  class: \"result-header\"\n};\nconst _hoisted_9 = {\n  class: \"result-actions-top\"\n};\nconst _hoisted_10 = {\n  class: \"cluster-title\"\n};\nconst _hoisted_11 = {\n  class: \"cluster-name\"\n};\nconst _hoisted_12 = {\n  class: \"cluster-content\"\n};\nconst _hoisted_13 = {\n  key: 2,\n  class: \"paper-list\"\n};\nconst _hoisted_14 = {\n  key: 4\n};\nconst _hoisted_15 = {\n  class: \"rep-abstract\"\n};\nconst _hoisted_16 = {\n  class: \"result-actions\"\n};\nconst _hoisted_17 = {\n  class: \"visualization-container\"\n};\nconst _hoisted_18 = {\n  ref: \"vizCanvas\",\n  class: \"viz-canvas\"\n};\nconst _hoisted_19 = {\n  key: 0,\n  class: \"test-result\"\n};\nconst _hoisted_20 = {\n  key: 0,\n  class: \"test-cluster-result\",\n  style: {\n    \"margin-top\": \"20px\"\n  }\n};\nconst _hoisted_21 = {\n  key: 0,\n  class: \"cluster-preview\",\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_22 = {\n  class: \"preview-paper-list\"\n};\nconst _hoisted_23 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Refresh = _resolveComponent(\"Refresh\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_Connection = _resolveComponent(\"Connection\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_input_number = _resolveComponent(\"el-input-number\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_DataAnalysis = _resolveComponent(\"DataAnalysis\");\n  const _component_el_tab_pane = _resolveComponent(\"el-tab-pane\");\n  const _component_el_alert = _resolveComponent(\"el-alert\");\n  const _component_Upload = _resolveComponent(\"Upload\");\n  const _component_Odometer = _resolveComponent(\"Odometer\");\n  const _component_el_descriptions_item = _resolveComponent(\"el-descriptions-item\");\n  const _component_el_descriptions = _resolveComponent(\"el-descriptions\");\n  const _component_el_tabs = _resolveComponent(\"el-tabs\");\n  const _component_Star = _resolveComponent(\"Star\");\n  const _component_el_space = _resolveComponent(\"el-space\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_el_collapse_item = _resolveComponent(\"el-collapse-item\");\n  const _component_el_collapse = _resolveComponent(\"el-collapse\");\n  const _component_PictureIcon = _resolveComponent(\"PictureIcon\");\n  const _component_Document = _resolveComponent(\"Document\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[37] || (_cache[37] = _createElementVNode(\"h2\", null, \"多篇论文主题聚类分析\", -1 /* CACHED */)), _createVNode(_component_el_card, {\n    class: \"select-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[12] || (_cache[12] = _createElementVNode(\"h3\", null, \"选择要分析的论文（至少2篇）\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_button, {\n      onClick: $setup.refreshFiles,\n      size: \"small\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Refresh)]),\n        _: 1 /* STABLE */\n      }), _cache[10] || (_cache[10] = _createTextVNode(\" 刷新列表 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n      type: \"success\",\n      onClick: $setup.testVectorConnection,\n      size: \"small\",\n      loading: $setup.testingConnection\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Connection)]),\n        _: 1 /* STABLE */\n      }), _cache[11] || (_cache[11] = _createTextVNode(\" 测试向量连接 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\", \"loading\"])])]), _withDirectives((_openBlock(), _createBlock(_component_el_table, {\n      data: $setup.files,\n      style: {\n        \"width\": \"100%\",\n        \"margin-top\": \"20px\"\n      },\n      onSelectionChange: $setup.handleSelectionChange,\n      ref: \"paperTable\",\n      \"row-key\": \"id\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        type: \"selection\",\n        width: \"55\",\n        \"reserve-selection\": true\n      }), _createVNode(_component_el_table_column, {\n        prop: \"title\",\n        label: \"论文标题\",\n        \"min-width\": \"250\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.title || '未命名论文'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"year\",\n        label: \"年份\",\n        width: \"80\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.year || '未知'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"venue\",\n        label: \"期刊/会议\",\n        \"min-width\": \"150\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"向量状态\",\n        width: \"120\",\n        align: \"center\"\n      }, {\n        default: _withCtx(scope => [$setup.isPaperInVectorStore(scope.row.id) ? (_openBlock(), _createBlock(_component_el_tag, {\n          key: 0,\n          type: \"success\",\n          size: \"small\"\n        }, {\n          default: _withCtx(() => [...(_cache[13] || (_cache[13] = [_createTextVNode(\"已同步\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        })) : (_openBlock(), _createBlock(_component_el_tag, {\n          key: 1,\n          type: \"info\",\n          size: \"small\"\n        }, {\n          default: _withCtx(() => [...(_cache[14] || (_cache[14] = [_createTextVNode(\"未同步\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }))]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\", \"onSelectionChange\"])), [[_directive_loading, $setup.loading]])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_card, {\n    class: \"options-card\"\n  }, {\n    default: _withCtx(() => [_cache[19] || (_cache[19] = _createElementVNode(\"h3\", null, \"聚类选项\", -1 /* CACHED */)), _createVNode(_component_el_tabs, {\n      modelValue: $setup.clusterMode,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.clusterMode = $event)\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_tab_pane, {\n        label: \"传统聚类\",\n        name: \"traditional\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_form, {\n          model: $setup.options,\n          \"label-width\": \"120px\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, {\n            label: \"聚类数量\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input_number, {\n              modelValue: $setup.options.nClusters,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.options.nClusters = $event),\n              min: 2,\n              max: 10\n            }, null, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"聚类方法\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_select, {\n              modelValue: $setup.options.method,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.options.method = $event)\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_option, {\n                label: \"K-Means\",\n                value: \"kmeans\"\n              }), _createVNode(_component_el_option, {\n                label: \"DBSCAN\",\n                value: \"dbscan\"\n              }), _createVNode(_component_el_option, {\n                label: \"层次聚类\",\n                value: \"hierarchical\"\n              })]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"论文语言\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_select, {\n              modelValue: $setup.options.language,\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.options.language = $event)\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_option, {\n                label: \"中文\",\n                value: \"chinese\"\n              }), _createVNode(_component_el_option, {\n                label: \"英文\",\n                value: \"english\"\n              })]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"model\"]), _createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"large\",\n          onClick: $setup.startCluster,\n          disabled: $setup.selectedFiles.length < 2,\n          loading: $setup.clustering\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_DataAnalysis)]),\n            _: 1 /* STABLE */\n          }), _cache[15] || (_cache[15] = _createTextVNode(\" 开始传统聚类分析 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\", \"disabled\", \"loading\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_tab_pane, {\n        label: \"向量聚类 (Milvus)\",\n        name: \"vector\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_alert, {\n          title: \"基于向量嵌入的语义聚类\",\n          description: \"使用 Milvus 向量数据库和深度学习模型进行语义层面的论文聚类，能够捕捉论文间的深层语义关联。\",\n          type: \"info\",\n          closable: false,\n          \"show-icon\": \"\"\n        })]), _createVNode(_component_el_form, {\n          model: $setup.vectorOptions,\n          \"label-width\": \"120px\",\n          style: {\n            \"margin-top\": \"16px\"\n          }\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, {\n            label: \"聚类数量\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input_number, {\n              modelValue: $setup.vectorOptions.nClusters,\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.vectorOptions.nClusters = $event),\n              min: 2,\n              max: 20\n            }, null, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"model\"]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"large\",\n          onClick: $setup.startVectorCluster,\n          disabled: $setup.selectedFiles.length < 2,\n          loading: $setup.vectorClustering\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_DataAnalysis)]),\n            _: 1 /* STABLE */\n          }), _cache[16] || (_cache[16] = _createTextVNode(\" 开始向量聚类分析 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\", \"disabled\", \"loading\"]), _createVNode(_component_el_button, {\n          size: \"large\",\n          onClick: $setup.syncToVectorStore,\n          loading: $setup.syncing,\n          disabled: $setup.selectedFiles.length === 0\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_Upload)]),\n            _: 1 /* STABLE */\n          }), _cache[17] || (_cache[17] = _createTextVNode(\" 同步选中论文到向量库 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\", \"loading\", \"disabled\"]), _createVNode(_component_el_button, {\n          type: \"warning\",\n          size: \"large\",\n          onClick: $setup.testVectorCluster,\n          loading: $setup.testingCluster\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_Odometer)]),\n            _: 1 /* STABLE */\n          }), _cache[18] || (_cache[18] = _createTextVNode(\" 测试向量聚类 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\", \"loading\"])]), $setup.vectorStats.total_papers > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createVNode(_component_el_descriptions, {\n          column: 2,\n          border: \"\",\n          size: \"small\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_descriptions_item, {\n            label: \"向量库论文数\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.vectorStats.total_papers), 1 /* TEXT */)]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"向量维度\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.vectorStats.dimension), 1 /* TEXT */)]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"集合名称\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.vectorStats.collection_name), 1 /* TEXT */)]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"连接状态\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_tag, {\n              type: $setup.vectorStats.connected ? 'success' : 'danger'\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.vectorStats.connected ? '已连接' : '未连接'), 1 /* TEXT */)]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"type\"])]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        })])) : _createCommentVNode(\"v-if\", true)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 历史聚类结果 \"), $setup.clusterHistory.length > 0 ? (_openBlock(), _createBlock(_component_el_card, {\n    key: 0,\n    class: \"history-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_7, [_cache[21] || (_cache[21] = _createElementVNode(\"h3\", null, \"历史聚类结果\", -1 /* CACHED */)), _createVNode(_component_el_button, {\n      onClick: $setup.clearHistory,\n      type: \"danger\",\n      size: \"small\",\n      plain: \"\"\n    }, {\n      default: _withCtx(() => [...(_cache[20] || (_cache[20] = [_createTextVNode(\"清空历史\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]), _createVNode(_component_el_table, {\n      data: $setup.clusterHistory,\n      style: {\n        \"width\": \"100%\",\n        \"margin-top\": \"10px\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"createdAt\",\n        label: \"时间\",\n        width: \"180\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString($setup.formatDate(scope.row.createdAt)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"clusterCount\",\n        label: \"聚类数\",\n        width: \"80\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"method\",\n        label: \"方法\",\n        width: \"120\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"paperCount\",\n        label: \"论文数\",\n        width: \"80\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\",\n        width: \"200\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"small\",\n          onClick: $event => $setup.loadHistoryResult(scope.row)\n        }, {\n          default: _withCtx(() => [...(_cache[22] || (_cache[22] = [_createTextVNode(\"查看\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          type: \"danger\",\n          size: \"small\",\n          onClick: $event => $setup.deleteHistoryResult(scope.$index)\n        }, {\n          default: _withCtx(() => [...(_cache[23] || (_cache[23] = [_createTextVNode(\"删除\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"])]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), $setup.result ? (_openBlock(), _createBlock(_component_el_card, {\n    key: 1,\n    class: \"result-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_8, [_cache[25] || (_cache[25] = _createElementVNode(\"h3\", null, \"聚类结果\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_9, [_createVNode(_component_el_tag, {\n      type: \"success\",\n      size: \"large\",\n      effect: \"dark\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.result.clusterCount) + \" 个主题类别 \", 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), $setup.currentResultId ? (_openBlock(), _createBlock(_component_el_button, {\n      key: 0,\n      type: \"warning\",\n      size: \"small\",\n      onClick: $setup.saveCurrentResult\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Star)]),\n        _: 1 /* STABLE */\n      }), _cache[24] || (_cache[24] = _createTextVNode(\" 保存结果 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true)])]), _createVNode(_component_el_collapse, {\n      modelValue: $setup.activeClusters,\n      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.activeClusters = $event)\n    }, {\n      default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Object.entries($setup.result.clusterAnalysis), (cluster, index) => {\n        return _openBlock(), _createBlock(_component_el_collapse_item, {\n          key: cluster[0],\n          name: cluster[0]\n        }, {\n          title: _withCtx(() => [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"span\", _hoisted_11, \"聚类 \" + _toDisplayString(parseInt(cluster[0]) + 1), 1 /* TEXT */), _createVNode(_component_el_tag, {\n            type: \"success\",\n            size: \"small\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(cluster[1]?.paper_count || 0) + \" 篇论文 \", 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */), cluster[1]?.top_keywords?.length > 0 ? (_openBlock(), _createBlock(_component_el_tag, {\n            key: 0,\n            type: \"info\",\n            size: \"small\",\n            style: {\n              \"margin-left\": \"8px\"\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(cluster[1].top_keywords.slice(0, 3).join(', ')), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)) : _createCommentVNode(\"v-if\", true)])]),\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_12, [_cache[26] || (_cache[26] = _createElementVNode(\"h4\", null, \"核心关键词\", -1 /* CACHED */)), cluster[1].top_keywords && cluster[1].top_keywords.length > 0 ? (_openBlock(), _createBlock(_component_el_space, {\n            key: 0,\n            wrap: \"\"\n          }, {\n            default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cluster[1].top_keywords.slice(0, 10), (keyword, kIndex) => {\n              return _openBlock(), _createBlock(_component_el_tag, {\n                key: kIndex,\n                type: \"success\",\n                effect: \"dark\"\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString(keyword), 1 /* TEXT */)]),\n                _: 2 /* DYNAMIC */\n              }, 1024 /* DYNAMIC_SLOTS */);\n            }), 128 /* KEYED_FRAGMENT */))]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)) : (_openBlock(), _createBlock(_component_el_empty, {\n            key: 1,\n            description: \"暂无关键词\",\n            \"image-size\": 60\n          })), _cache[27] || (_cache[27] = _createElementVNode(\"h4\", {\n            style: {\n              \"margin-top\": \"20px\"\n            }\n          }, \"包含论文\", -1 /* CACHED */)), cluster[1].papers && cluster[1].papers.length > 0 ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cluster[1].papers, (paper, pIndex) => {\n            return _openBlock(), _createElementBlock(\"li\", {\n              key: pIndex\n            }, _toDisplayString(paper), 1 /* TEXT */);\n          }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createBlock(_component_el_empty, {\n            key: 3,\n            description: \"暂无论文\",\n            \"image-size\": 60\n          })), _cache[28] || (_cache[28] = _createElementVNode(\"h4\", {\n            style: {\n              \"margin-top\": \"20px\"\n            }\n          }, \"代表性论文\", -1 /* CACHED */)), cluster[1].representative_papers && cluster[1].representative_papers.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cluster[1].representative_papers, (rep, rIndex) => {\n            return _openBlock(), _createElementBlock(\"div\", {\n              key: rIndex,\n              class: \"rep-paper\"\n            }, [_createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, _toDisplayString(rep.title || '无标题'), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_15, _toDisplayString(rep.abstract || '无摘要'), 1 /* TEXT */)]);\n          }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createBlock(_component_el_empty, {\n            key: 5,\n            description: \"暂无代表性论文\",\n            \"image-size\": 60\n          }))])]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"name\"]);\n      }), 128 /* KEYED_FRAGMENT */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_16, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.downloadVisualization\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_PictureIcon)]),\n        _: 1 /* STABLE */\n      }), _cache[29] || (_cache[29] = _createTextVNode(\" 下载高清可视化图 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n      onClick: $setup.downloadReport\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Document)]),\n        _: 1 /* STABLE */\n      }), _cache[30] || (_cache[30] = _createTextVNode(\" 下载聚类报告 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 聚类可视化对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.showVisualization,\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.showVisualization = $event),\n    title: \"聚类可视化\",\n    width: \"90%\",\n    fullscreen: true\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[6] || (_cache[6] = $event => $setup.showVisualization = false)\n    }, {\n      default: _withCtx(() => [...(_cache[31] || (_cache[31] = [_createTextVNode(\"关闭\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.downloadHighResVisualization\n    }, {\n      default: _withCtx(() => [...(_cache[32] || (_cache[32] = [_createTextVNode(\"下载高清图\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]),\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"canvas\", _hoisted_18, null, 512 /* NEED_PATCH */)])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\" 测试结果对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.showTestResult,\n    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $setup.showTestResult = $event),\n    title: \"向量聚类测试结果\",\n    width: \"700px\"\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[8] || (_cache[8] = $event => $setup.showTestResult = false)\n    }, {\n      default: _withCtx(() => [...(_cache[36] || (_cache[36] = [_createTextVNode(\"关闭\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    })]),\n    default: _withCtx(() => [$setup.testResult ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_createVNode(_component_el_descriptions, {\n      column: 2,\n      border: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_descriptions_item, {\n        label: \"测试状态\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_tag, {\n          type: $setup.testResult.success ? 'success' : 'danger'\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.testResult.success ? '成功' : '失败'), 1 /* TEXT */)]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"type\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"向量库连接\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_tag, {\n          type: $setup.testResult.connected ? 'success' : 'danger'\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.testResult.connected ? '正常' : '异常'), 1 /* TEXT */)]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"type\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"集合名称\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.testResult.collection_name || '-'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"向量维度\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.testResult.dimension || '-'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"库中论文数\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.testResult.total_papers || 0), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"可聚类论文数\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.testResult.available_papers || 0), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), $setup.testResult.test_cluster ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [_cache[35] || (_cache[35] = _createElementVNode(\"h4\", null, \"测试聚类结果\", -1 /* CACHED */)), _createVNode(_component_el_descriptions, {\n      column: 1,\n      border: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_descriptions_item, {\n        label: \"聚类数量\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.testResult.test_cluster.n_clusters), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"论文总数\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.testResult.test_cluster.total_papers), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"聚类方法\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.testResult.test_cluster.method), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), $setup.testResult.test_cluster.cluster_analysis ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [_cache[34] || (_cache[34] = _createElementVNode(\"h4\", null, \"聚类预览\", -1 /* CACHED */)), _createVNode(_component_el_collapse, null, {\n      default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.testResult.test_cluster.cluster_analysis, (cluster, key) => {\n        return _openBlock(), _createBlock(_component_el_collapse_item, {\n          key: key,\n          title: `聚类 ${parseInt(key) + 1} (${cluster.paper_count} 篇)`\n        }, {\n          default: _withCtx(() => [_cache[33] || (_cache[33] = _createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, \"论文列表:\")], -1 /* CACHED */)), _createElementVNode(\"ul\", _hoisted_22, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cluster.papers.slice(0, 5), (paper, idx) => {\n            return _openBlock(), _createElementBlock(\"li\", {\n              key: idx\n            }, _toDisplayString(paper), 1 /* TEXT */);\n          }), 128 /* KEYED_FRAGMENT */)), cluster.papers.length > 5 ? (_openBlock(), _createElementBlock(\"li\", _hoisted_23, \"... 还有 \" + _toDisplayString(cluster.papers.length - 5) + \" 篇\", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"title\"]);\n      }), 128 /* KEYED_FRAGMENT */))]),\n      _: 1 /* STABLE */\n    })])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), $setup.testResult.error ? (_openBlock(), _createBlock(_component_el_alert, {\n      key: 1,\n      title: $setup.testResult.error,\n      type: \"error\",\n      style: {\n        \"margin-top\": \"16px\"\n      },\n      \"show-icon\": \"\"\n    }, null, 8 /* PROPS */, [\"title\"])) : _createCommentVNode(\"v-if\", true), $setup.testResult.message ? (_openBlock(), _createBlock(_component_el_alert, {\n      key: 2,\n      title: $setup.testResult.message,\n      type: \"info\",\n      style: {\n        \"margin-top\": \"16px\"\n      },\n      \"show-icon\": \"\"\n    }, null, 8 /* PROPS */, [\"title\"])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","style","ref","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_el_card","_hoisted_2","_hoisted_3","_component_el_button","onClick","$setup","refreshFiles","size","_component_el_icon","_component_Refresh","type","testVectorConnection","loading","testingConnection","_component_Connection","_createBlock","_component_el_table","data","files","onSelectionChange","handleSelectionChange","_component_el_table_column","width","prop","label","default","_withCtx","scope","row","title","year","align","isPaperInVectorStore","id","_component_el_tag","_cache","_component_el_tabs","clusterMode","$event","_component_el_tab_pane","name","_component_el_form","model","options","_component_el_form_item","_component_el_input_number","nClusters","min","max","_component_el_select","method","_component_el_option","value","language","startCluster","disabled","selectedFiles","length","clustering","_component_DataAnalysis","_hoisted_4","_component_el_alert","description","closable","vectorOptions","_hoisted_5","startVectorCluster","vectorClustering","syncToVectorStore","syncing","_component_Upload","testVectorCluster","testingCluster","_component_Odometer","vectorStats","total_papers","_hoisted_6","_component_el_descriptions","column","border","_component_el_descriptions_item","dimension","collection_name","connected","_createCommentVNode","clusterHistory","_hoisted_7","clearHistory","plain","formatDate","createdAt","loadHistoryResult","deleteHistoryResult","$index","result","_hoisted_8","_hoisted_9","effect","clusterCount","currentResultId","saveCurrentResult","_component_Star","_component_el_collapse","activeClusters","_Fragment","_renderList","Object","entries","clusterAnalysis","cluster","index","_component_el_collapse_item","key","_hoisted_10","_hoisted_11","_toDisplayString","parseInt","paper_count","top_keywords","slice","join","_hoisted_12","_component_el_space","wrap","keyword","kIndex","_component_el_empty","papers","_hoisted_13","paper","pIndex","representative_papers","_hoisted_14","rep","rIndex","_hoisted_15","abstract","_hoisted_16","downloadVisualization","_component_PictureIcon","downloadReport","_component_Document","_component_el_dialog","showVisualization","fullscreen","footer","downloadHighResVisualization","_hoisted_17","_hoisted_18","showTestResult","testResult","_hoisted_19","success","available_papers","test_cluster","_hoisted_20","n_clusters","cluster_analysis","_hoisted_21","_hoisted_22","idx","_hoisted_23","error","message"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/Cluster.vue"],"sourcesContent":["<template>\n  <div class=\"cluster\">\n    <h2>多篇论文主题聚类分析</h2>\n\n    <el-card class=\"select-card\">\n      <div class=\"select-header\">\n        <h3>选择要分析的论文（至少2篇）</h3>\n        <div class=\"header-actions\">\n          <el-button @click=\"refreshFiles\" size=\"small\">\n            <el-icon><Refresh /></el-icon>\n            刷新列表\n          </el-button>\n          <el-button type=\"success\" @click=\"testVectorConnection\" size=\"small\" :loading=\"testingConnection\">\n            <el-icon><Connection /></el-icon>\n            测试向量连接\n          </el-button>\n        </div>\n      </div>\n      <el-table\n        :data=\"files\"\n        style=\"width: 100%; margin-top: 20px\"\n        @selection-change=\"handleSelectionChange\"\n        v-loading=\"loading\"\n        ref=\"paperTable\"\n        row-key=\"id\"\n      >\n        <el-table-column type=\"selection\" width=\"55\" :reserve-selection=\"true\" />\n        <el-table-column prop=\"title\" label=\"论文标题\" min-width=\"250\">\n          <template #default=\"scope\">\n            {{ scope.row.title || '未命名论文' }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"year\" label=\"年份\" width=\"80\">\n          <template #default=\"scope\">\n            {{ scope.row.year || '未知' }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"venue\" label=\"期刊/会议\" min-width=\"150\" />\n        <el-table-column label=\"向量状态\" width=\"120\" align=\"center\">\n          <template #default=\"scope\">\n            <el-tag v-if=\"isPaperInVectorStore(scope.row.id)\" type=\"success\" size=\"small\">已同步</el-tag>\n            <el-tag v-else type=\"info\" size=\"small\">未同步</el-tag>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n    <el-card class=\"options-card\">\n      <h3>聚类选项</h3>\n      \n      <el-tabs v-model=\"clusterMode\">\n        <el-tab-pane label=\"传统聚类\" name=\"traditional\">\n          <el-form :model=\"options\" label-width=\"120px\">\n            <el-form-item label=\"聚类数量\">\n              <el-input-number v-model=\"options.nClusters\" :min=\"2\" :max=\"10\" />\n            </el-form-item>\n            <el-form-item label=\"聚类方法\">\n              <el-select v-model=\"options.method\">\n                <el-option label=\"K-Means\" value=\"kmeans\" />\n                <el-option label=\"DBSCAN\" value=\"dbscan\" />\n                <el-option label=\"层次聚类\" value=\"hierarchical\" />\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"论文语言\">\n              <el-select v-model=\"options.language\">\n                <el-option label=\"中文\" value=\"chinese\" />\n                <el-option label=\"英文\" value=\"english\" />\n              </el-select>\n            </el-form-item>\n          </el-form>\n\n          <el-button\n            type=\"primary\"\n            size=\"large\"\n            @click=\"startCluster\"\n            :disabled=\"selectedFiles.length < 2\"\n            :loading=\"clustering\"\n          >\n            <el-icon><DataAnalysis /></el-icon> 开始传统聚类分析\n          </el-button>\n        </el-tab-pane>\n        \n        <el-tab-pane label=\"向量聚类 (Milvus)\" name=\"vector\">\n          <div class=\"vector-cluster-info\">\n            <el-alert\n              title=\"基于向量嵌入的语义聚类\"\n              description=\"使用 Milvus 向量数据库和深度学习模型进行语义层面的论文聚类，能够捕捉论文间的深层语义关联。\"\n              type=\"info\"\n              :closable=\"false\"\n              show-icon\n            />\n          </div>\n          \n          <el-form :model=\"vectorOptions\" label-width=\"120px\" style=\"margin-top: 16px;\">\n            <el-form-item label=\"聚类数量\">\n              <el-input-number v-model=\"vectorOptions.nClusters\" :min=\"2\" :max=\"20\" />\n            </el-form-item>\n          </el-form>\n\n          <div class=\"vector-actions\">\n            <el-button\n              type=\"primary\"\n              size=\"large\"\n              @click=\"startVectorCluster\"\n              :disabled=\"selectedFiles.length < 2\"\n              :loading=\"vectorClustering\"\n            >\n              <el-icon><DataAnalysis /></el-icon> 开始向量聚类分析\n            </el-button>\n            \n            <el-button\n              size=\"large\"\n              @click=\"syncToVectorStore\"\n              :loading=\"syncing\"\n              :disabled=\"selectedFiles.length === 0\"\n            >\n              <el-icon><Upload /></el-icon> 同步选中论文到向量库\n            </el-button>\n            \n            <el-button\n              type=\"warning\"\n              size=\"large\"\n              @click=\"testVectorCluster\"\n              :loading=\"testingCluster\"\n            >\n              <el-icon><Odometer /></el-icon> 测试向量聚类\n            </el-button>\n          </div>\n          \n          <div v-if=\"vectorStats.total_papers > 0\" class=\"vector-stats\" style=\"margin-top: 16px;\">\n            <el-descriptions :column=\"2\" border size=\"small\">\n              <el-descriptions-item label=\"向量库论文数\">{{ vectorStats.total_papers }}</el-descriptions-item>\n              <el-descriptions-item label=\"向量维度\">{{ vectorStats.dimension }}</el-descriptions-item>\n              <el-descriptions-item label=\"集合名称\">{{ vectorStats.collection_name }}</el-descriptions-item>\n              <el-descriptions-item label=\"连接状态\">\n                <el-tag :type=\"vectorStats.connected ? 'success' : 'danger'\">\n                  {{ vectorStats.connected ? '已连接' : '未连接' }}\n                </el-tag>\n              </el-descriptions-item>\n            </el-descriptions>\n          </div>\n        </el-tab-pane>\n      </el-tabs>\n    </el-card>\n\n    <!-- 历史聚类结果 -->\n    <el-card class=\"history-card\" v-if=\"clusterHistory.length > 0\">\n      <div class=\"history-header\">\n        <h3>历史聚类结果</h3>\n        <el-button @click=\"clearHistory\" type=\"danger\" size=\"small\" plain>清空历史</el-button>\n      </div>\n      <el-table :data=\"clusterHistory\" style=\"width: 100%; margin-top: 10px\">\n        <el-table-column prop=\"createdAt\" label=\"时间\" width=\"180\">\n          <template #default=\"scope\">\n            {{ formatDate(scope.row.createdAt) }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"clusterCount\" label=\"聚类数\" width=\"80\" />\n        <el-table-column prop=\"method\" label=\"方法\" width=\"120\" />\n        <el-table-column prop=\"paperCount\" label=\"论文数\" width=\"80\" />\n        <el-table-column label=\"操作\" width=\"200\">\n          <template #default=\"scope\">\n            <el-button type=\"primary\" size=\"small\" @click=\"loadHistoryResult(scope.row)\">查看</el-button>\n            <el-button type=\"danger\" size=\"small\" @click=\"deleteHistoryResult(scope.$index)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n    <el-card class=\"result-card\" v-if=\"result\">\n      <div class=\"result-header\">\n        <h3>聚类结果</h3>\n        <div class=\"result-actions-top\">\n          <el-tag type=\"success\" size=\"large\" effect=\"dark\">\n            {{ result.clusterCount }} 个主题类别\n          </el-tag>\n          <el-button\n            v-if=\"currentResultId\"\n            type=\"warning\"\n            size=\"small\"\n            @click=\"saveCurrentResult\"\n          >\n            <el-icon><Star /></el-icon>\n            保存结果\n          </el-button>\n        </div>\n      </div>\n\n      <el-collapse v-model=\"activeClusters\">\n        <el-collapse-item\n          v-for=\"(cluster, index) in Object.entries(result.clusterAnalysis)\"\n          :key=\"cluster[0]\"\n          :name=\"cluster[0]\"\n        >\n          <template #title>\n            <div class=\"cluster-title\">\n              <span class=\"cluster-name\">聚类 {{ parseInt(cluster[0]) + 1 }}</span>\n              <el-tag type=\"success\" size=\"small\">\n                {{ cluster[1]?.paper_count || 0 }} 篇论文\n              </el-tag>\n              <el-tag\n                v-if=\"cluster[1]?.top_keywords?.length > 0\"\n                type=\"info\"\n                size=\"small\"\n                style=\"margin-left: 8px;\"\n              >\n                {{ cluster[1].top_keywords.slice(0, 3).join(', ') }}\n              </el-tag>\n            </div>\n          </template>\n\n          <div class=\"cluster-content\">\n            <h4>核心关键词</h4>\n            <el-space wrap v-if=\"cluster[1].top_keywords && cluster[1].top_keywords.length > 0\">\n              <el-tag\n                v-for=\"(keyword, kIndex) in cluster[1].top_keywords.slice(0, 10)\"\n                :key=\"kIndex\"\n                type=\"success\"\n                effect=\"dark\"\n              >\n                {{ keyword }}\n              </el-tag>\n            </el-space>\n            <el-empty v-else description=\"暂无关键词\" :image-size=\"60\" />\n\n            <h4 style=\"margin-top: 20px\">包含论文</h4>\n            <ul v-if=\"cluster[1].papers && cluster[1].papers.length > 0\" class=\"paper-list\">\n              <li v-for=\"(paper, pIndex) in cluster[1].papers\" :key=\"pIndex\">\n                {{ paper }}\n              </li>\n            </ul>\n            <el-empty v-else description=\"暂无论文\" :image-size=\"60\" />\n\n            <h4 style=\"margin-top: 20px\">代表性论文</h4>\n            <div\n              v-if=\"cluster[1].representative_papers && cluster[1].representative_papers.length > 0\"\n            >\n              <div\n                v-for=\"(rep, rIndex) in cluster[1].representative_papers\"\n                :key=\"rIndex\"\n                class=\"rep-paper\"\n              >\n                <p><strong>{{ rep.title || '无标题' }}</strong></p>\n                <p class=\"rep-abstract\">{{ rep.abstract || '无摘要' }}</p>\n              </div>\n            </div>\n            <el-empty v-else description=\"暂无代表性论文\" :image-size=\"60\" />\n          </div>\n        </el-collapse-item>\n      </el-collapse>\n\n      <div class=\"result-actions\">\n        <el-button type=\"primary\" @click=\"downloadVisualization\">\n          <el-icon><PictureIcon /></el-icon>\n          下载高清可视化图\n        </el-button>\n        <el-button @click=\"downloadReport\">\n          <el-icon><Document /></el-icon>\n          下载聚类报告\n        </el-button>\n      </div>\n    </el-card>\n\n    <!-- 聚类可视化对话框 -->\n    <el-dialog\n      v-model=\"showVisualization\"\n      title=\"聚类可视化\"\n      width=\"90%\"\n      :fullscreen=\"true\"\n    >\n      <div class=\"visualization-container\">\n        <canvas ref=\"vizCanvas\" class=\"viz-canvas\"></canvas>\n      </div>\n      <template #footer>\n        <el-button @click=\"showVisualization = false\">关闭</el-button>\n        <el-button type=\"primary\" @click=\"downloadHighResVisualization\">下载高清图</el-button>\n      </template>\n    </el-dialog>\n\n    <!-- 测试结果对话框 -->\n    <el-dialog\n      v-model=\"showTestResult\"\n      title=\"向量聚类测试结果\"\n      width=\"700px\"\n    >\n      <div v-if=\"testResult\" class=\"test-result\">\n        <el-descriptions :column=\"2\" border>\n          <el-descriptions-item label=\"测试状态\">\n            <el-tag :type=\"testResult.success ? 'success' : 'danger'\">\n              {{ testResult.success ? '成功' : '失败' }}\n            </el-tag>\n          </el-descriptions-item>\n          <el-descriptions-item label=\"向量库连接\">\n            <el-tag :type=\"testResult.connected ? 'success' : 'danger'\">\n              {{ testResult.connected ? '正常' : '异常' }}\n            </el-tag>\n          </el-descriptions-item>\n          <el-descriptions-item label=\"集合名称\">{{ testResult.collection_name || '-' }}</el-descriptions-item>\n          <el-descriptions-item label=\"向量维度\">{{ testResult.dimension || '-' }}</el-descriptions-item>\n          <el-descriptions-item label=\"库中论文数\">{{ testResult.total_papers || 0 }}</el-descriptions-item>\n          <el-descriptions-item label=\"可聚类论文数\">{{ testResult.available_papers || 0 }}</el-descriptions-item>\n        </el-descriptions>\n        \n        <div v-if=\"testResult.test_cluster\" class=\"test-cluster-result\" style=\"margin-top: 20px;\">\n          <h4>测试聚类结果</h4>\n          <el-descriptions :column=\"1\" border>\n            <el-descriptions-item label=\"聚类数量\">{{ testResult.test_cluster.n_clusters }}</el-descriptions-item>\n            <el-descriptions-item label=\"论文总数\">{{ testResult.test_cluster.total_papers }}</el-descriptions-item>\n            <el-descriptions-item label=\"聚类方法\">{{ testResult.test_cluster.method }}</el-descriptions-item>\n          </el-descriptions>\n          \n          <div v-if=\"testResult.test_cluster.cluster_analysis\" class=\"cluster-preview\" style=\"margin-top: 16px;\">\n            <h4>聚类预览</h4>\n            <el-collapse>\n              <el-collapse-item\n                v-for=\"(cluster, key) in testResult.test_cluster.cluster_analysis\"\n                :key=\"key\"\n                :title=\"`聚类 ${parseInt(key) + 1} (${cluster.paper_count} 篇)`\"\n              >\n                <p><strong>论文列表:</strong></p>\n                <ul class=\"preview-paper-list\">\n                  <li v-for=\"(paper, idx) in cluster.papers.slice(0, 5)\" :key=\"idx\">{{ paper }}</li>\n                  <li v-if=\"cluster.papers.length > 5\">... 还有 {{ cluster.papers.length - 5 }} 篇</li>\n                </ul>\n              </el-collapse-item>\n            </el-collapse>\n          </div>\n        </div>\n        \n        <el-alert\n          v-if=\"testResult.error\"\n          :title=\"testResult.error\"\n          type=\"error\"\n          style=\"margin-top: 16px;\"\n          show-icon\n        />\n        \n        <el-alert\n          v-if=\"testResult.message\"\n          :title=\"testResult.message\"\n          type=\"info\"\n          style=\"margin-top: 16px;\"\n          show-icon\n        />\n      </div>\n      <template #footer>\n        <el-button @click=\"showTestResult = false\">关闭</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport api, { connectSocket } from '@/api'\nimport { ElMessage } from 'element-plus'\nimport { DataAnalysis, Refresh, Star, Picture as PictureIcon, Document, Upload, Connection, Odometer } from '@element-plus/icons-vue'\n\nexport default {\n  name: 'Cluster',\n  components: {\n    DataAnalysis,\n    Refresh,\n    Star,\n    PictureIcon,\n    Document,\n    Upload,\n    Connection,\n    Odometer\n  },\n  setup() {\n    const store = useStore()\n\n    const files = computed(() => store.state.files)\n    const selectedFiles = ref([])\n    const loading = ref(false)\n    const options = ref({\n      nClusters: 5,\n      method: 'kmeans',\n      language: 'chinese'\n    })\n    const clustering = ref(false)\n    const result = ref(null)\n    const activeClusters = ref(['0', '1', '2'])\n    const showVisualization = ref(false)\n    const vizCanvas = ref(null)\n\n    // 向量聚相关\n    const clusterMode = ref('traditional')\n    const vectorOptions = ref({\n      nClusters: 5\n    })\n    const vectorClustering = ref(false)\n    const syncing = ref(false)\n    const vectorStats = ref({\n      total_papers: 0,\n      dimension: 0,\n      connected: false,\n      collection_name: ''\n    })\n    const paperTable = ref(null)\n    const syncedPaperIds = ref(new Set())\n\n    // 测试相关\n    const testingConnection = ref(false)\n    const testingCluster = ref(false)\n    const showTestResult = ref(false)\n    const testResult = ref(null)\n\n    // 当前聚类结果ID\n    const currentResultId = ref(null)\n\n    // 聚类历史记录\n    const clusterHistory = ref([])\n\n    // 从localStorage加载历史记录\n    const loadHistory = () => {\n      try {\n        const saved = localStorage.getItem('cluster_history')\n        if (saved) {\n          clusterHistory.value = JSON.parse(saved)\n        }\n      } catch (e) {\n        console.error('加载历史记录失败:', e)\n      }\n    }\n\n    // 保存历史记录到localStorage\n    const saveHistory = () => {\n      try {\n        localStorage.setItem('cluster_history', JSON.stringify(clusterHistory.value))\n      } catch (e) {\n        console.error('保存历史记录失败:', e)\n      }\n    }\n\n    // 格式化日期\n    const formatDate = (dateStr) => {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      return date.toLocaleString('zh-CN')\n    }\n\n    // 加载历史结果\n    const loadHistoryResult = (historyItem) => {\n      result.value = historyItem.data\n      currentResultId.value = null // 历史结果不需要再保存\n      activeClusters.value = Object.keys(historyItem.data.clusterAnalysis).slice(0, 3)\n      ElMessage.success('已加载历史聚类结果')\n    }\n\n    // 删除历史结果\n    const deleteHistoryResult = (index) => {\n      clusterHistory.value.splice(index, 1)\n      saveHistory()\n      ElMessage.success('已删除')\n    }\n\n    // 清空历史\n    const clearHistory = () => {\n      clusterHistory.value = []\n      saveHistory()\n      ElMessage.success('历史记录已清空')\n    }\n\n    // 保存当前结果\n    const saveCurrentResult = () => {\n      if (!result.value) return\n\n      const historyItem = {\n        id: Date.now().toString(),\n        createdAt: new Date().toISOString(),\n        clusterCount: result.value.clusterCount,\n        method: result.value.method,\n        paperCount: result.value.papers?.length || 0,\n        data: result.value\n      }\n\n      clusterHistory.value.unshift(historyItem)\n      saveHistory()\n      currentResultId.value = null // 已保存，不需要再显示保存按钮\n      ElMessage.success('聚类结果已保存到历史记录')\n    }\n\n    // 检查论文是否在向量库中\n    const isPaperInVectorStore = (paperId) => {\n      return syncedPaperIds.value.has(paperId)\n    }\n\n    // 向量聚类方法\n    const loadVectorStats = async () => {\n      try {\n        const response = await api.getVectorStoreStats()\n        if (response.success) {\n          vectorStats.value = response.data\n        }\n      } catch (error) {\n        console.error('加载向量统计失败:', error)\n      }\n    }\n\n    // 测试向量连接\n    const testVectorConnection = async () => {\n      testingConnection.value = true\n      try {\n        const response = await api.getVectorStoreStats()\n        if (response.success) {\n          vectorStats.value = response.data\n          ElMessage.success(`向量库连接正常，包含 ${response.data.total_papers} 篇论文`)\n        } else {\n          ElMessage.error('向量库连接失败: ' + (response.error || '未知错误'))\n        }\n      } catch (error) {\n        console.error('测试连接失败:', error)\n        ElMessage.error('向量库连接测试失败: ' + (error.message || '请检查Milvus服务'))\n      } finally {\n        testingConnection.value = false\n      }\n    }\n\n    // 测试向量聚类\n    const testVectorCluster = async () => {\n      testingCluster.value = true\n      testResult.value = null\n      \n      try {\n        // 1. 首先检查向量库状态\n        const statsResponse = await api.getVectorStoreStats()\n        \n        if (!statsResponse.success) {\n          testResult.value = {\n            success: false,\n            connected: false,\n            error: '无法连接到向量库: ' + (statsResponse.error || '未知错误')\n          }\n          showTestResult.value = true\n          return\n        }\n        \n        const stats = statsResponse.data\n        \n        if (stats.total_papers < 2) {\n          testResult.value = {\n            success: false,\n            connected: true,\n            collection_name: stats.collection_name,\n            dimension: stats.dimension,\n            total_papers: stats.total_papers,\n            error: '向量库中论文数量不足，无法进行聚类测试。请先同步论文到向量库。'\n          }\n          showTestResult.value = true\n          return\n        }\n        \n        // 2. 尝试进行聚类测试\n        const testClusterCount = Math.min(3, stats.total_papers)\n        \n        ElMessage.info(`正在进行聚类测试，使用 ${stats.total_papers} 篇论文...`)\n        \n        const clusterResponse = await api.clusterPapersVector(testClusterCount)\n        \n        if (clusterResponse.success) {\n          testResult.value = {\n            success: true,\n            connected: true,\n            collection_name: stats.collection_name,\n            dimension: stats.dimension,\n            total_papers: stats.total_papers,\n            available_papers: clusterResponse.data.total_papers || stats.total_papers,\n            test_cluster: clusterResponse.data,\n            message: '向量聚类测试成功！向量库工作正常。'\n          }\n          ElMessage.success('向量聚类测试成功')\n        } else {\n          testResult.value = {\n            success: false,\n            connected: true,\n            collection_name: stats.collection_name,\n            dimension: stats.dimension,\n            total_papers: stats.total_papers,\n            error: '聚类测试失败: ' + (clusterResponse.error || '未知错误')\n          }\n        }\n      } catch (error) {\n        console.error('聚类测试失败:', error)\n        testResult.value = {\n          success: false,\n          connected: false,\n          error: '聚类测试异常: ' + (error.message || '请检查Milvus服务是否正常运行')\n        }\n      } finally {\n        testingCluster.value = false\n        showTestResult.value = true\n      }\n    }\n\n    const syncToVectorStore = async () => {\n      if (selectedFiles.value.length === 0) {\n        ElMessage.warning('请先选择要同步的论文')\n        return\n      }\n\n      syncing.value = true\n      try {\n        const paperIds = selectedFiles.value.map(f => f.id)\n        const response = await api.syncPapersToVectorStore(paperIds)\n        \n        if (response.success) {\n          ElMessage.success(`同步完成: ${response.data.synced} 成功, ${response.data.failed} 失败`)\n          // 更新已同步论文集合\n          paperIds.forEach(id => syncedPaperIds.value.add(id))\n          await loadVectorStats()\n        } else {\n          ElMessage.error(response.error || '同步失败')\n        }\n      } catch (error) {\n        console.error('同步失败:', error)\n        ElMessage.error('同步到向量库失败')\n      } finally {\n        syncing.value = false\n      }\n    }\n\n    const startVectorCluster = async () => {\n      if (selectedFiles.value.length < 2) {\n        ElMessage.warning('请至少选择2篇论文')\n        return\n      }\n\n      vectorClustering.value = true\n      \n      try {\n        const paperIds = selectedFiles.value.map(f => f.id)\n        \n        const response = await api.clusterPapersVector(\n          vectorOptions.value.nClusters,\n          paperIds\n        )\n        \n        if (response.success) {\n          result.value = {\n            clusterCount: response.data.n_clusters,\n            clusterAnalysis: response.data.cluster_analysis,\n            papers: [],\n            method: 'kmeans_vector',\n            createdAt: new Date().toISOString(),\n            inertia: response.data.inertia\n          }\n\n          currentResultId.value = Date.now().toString()\n          \n          ElMessage.success(`向量聚类完成! 共发现 ${response.data.n_clusters} 个主题类别`)\n          \n          const clusterIds = Object.keys(response.data.cluster_analysis)\n          activeClusters.value = clusterIds.slice(0, 3)\n          \n          saveCurrentResult()\n        } else {\n          ElMessage.error(response.error || '向量聚类失败')\n        }\n      } catch (error) {\n        console.error('[ERROR] 向量聚类错误:', error)\n        ElMessage.error('向量聚类失败: ' + (error.response?.data?.error || error.message))\n      } finally {\n        vectorClustering.value = false\n      }\n    }\n\n    const handleSelectionChange = (selection) => {\n      selectedFiles.value = selection\n    }\n\n    const refreshFiles = async () => {\n      loading.value = true\n      try {\n        await store.dispatch('fetchFiles')\n        ElMessage.success('论文列表已刷新')\n      } catch (error) {\n        console.error('刷新失败:', error)\n        ElMessage.error('刷新失败')\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const startCluster = async () => {\n      if (selectedFiles.value.length < 2) {\n        ElMessage.warning('请至少选择2篇论文')\n        return\n      }\n\n      // 验证聚类数量\n      const maxClusters = Math.min(20, selectedFiles.value.length)\n      if (options.value.method !== 'dbscan' && (options.value.nClusters < 2 || options.value.nClusters > maxClusters)) {\n        ElMessage.warning(`聚类数量必须在 2 到 ${maxClusters} 之间`)\n        return\n      }\n\n      // 连接WebSocket\n      connectSocket()\n      store.commit('SHOW_PROGRESS_DIALOG', true)\n      store.commit('SET_PROGRESS', { progress: 0, message: '开始聚类分析...', step: '' })\n\n      clustering.value = true\n\n      try {\n        // 使用论文ID而不是文件路径\n        const paperIds = selectedFiles.value.map(f => f.id)\n\n        console.log('[DEBUG] 开始聚类, paper_ids:', paperIds)\n        console.log('[DEBUG] 聚类选项:', options.value)\n\n        const response = await api.clusterPapers(\n          paperIds,\n          options.value.nClusters,\n          options.value.method,\n          options.value.language\n        )\n\n        console.log('[DEBUG] 聚类响应:', response)\n\n        if (response.success) {\n          // 格式化结果\n          result.value = {\n            clusterCount: response.data.n_clusters,\n            clusterAnalysis: response.data.cluster_analysis,\n            papers: response.data.papers || [],\n            method: options.value.method,\n            createdAt: new Date().toISOString()\n          }\n\n          // 生成新的结果ID\n          currentResultId.value = Date.now().toString()\n\n          store.commit('SET_PROGRESS', { progress: 100, message: '聚类完成!' })\n          ElMessage.success(`聚类分析完成! 共发现 ${response.data.n_clusters} 个主题类别`)\n\n          // 自动展开前3个聚类\n          const clusterIds = Object.keys(response.data.cluster_analysis)\n          activeClusters.value = clusterIds.slice(0, 3)\n\n          // 自动保存到历史记录\n          saveCurrentResult()\n        } else {\n          ElMessage.error({\n            message: response.error || '聚类失败',\n            duration: 5000,\n            showClose: true\n          })\n        }\n      } catch (error) {\n        console.error('[ERROR] 聚类错误:', error)\n\n        // 提供更详细的错误提示\n        let errorMsg = '聚类失败'\n        const errorDetail = error.response?.data?.error || error.message\n\n        if (errorDetail) {\n          if (errorDetail.includes('论文') || errorDetail.includes('PDF')) {\n            errorMsg = '论文加载或解析失败，请检查文件是否完整'\n          } else if (errorDetail.includes('聚类') || errorDetail.includes('算法')) {\n            errorMsg = '聚类算法执行失败，请尝试调整参数'\n          } else if (errorDetail.includes('数量') || errorDetail.includes('不足')) {\n            errorMsg = '可用论文数量不足，无法进行聚类'\n          } else if (errorDetail.includes('timeout') || errorDetail.includes('超时')) {\n            errorMsg = '聚类超时，请减少论文数量或降低聚类数量'\n          } else {\n            errorMsg = `聚类失败: ${errorDetail}`\n          }\n        } else if (error.message) {\n          errorMsg = `聚类失败: ${error.message}`\n        }\n\n        ElMessage.error({\n          message: errorMsg,\n          duration: 5000,\n          showClose: true\n        })\n      } finally {\n        clustering.value = false\n        store.commit('SHOW_PROGRESS_DIALOG', false)\n      }\n    }\n\n    const downloadVisualization = () => {\n      showVisualization.value = true\n      // 在对话框打开后绘制可视化\n      setTimeout(() => {\n        drawVisualization()\n      }, 100)\n    }\n\n    const drawVisualization = () => {\n      const canvas = vizCanvas.value\n      if (!canvas) return\n\n      // 设置高分辨率画布\n      const dpr = window.devicePixelRatio || 1\n      const width = window.innerWidth * 0.85\n      const height = window.innerHeight * 0.75\n\n      canvas.width = width * dpr\n      canvas.height = height * dpr\n      canvas.style.width = width + 'px'\n      canvas.style.height = height + 'px'\n\n      const ctx = canvas.getContext('2d')\n      ctx.scale(dpr, dpr)\n\n      // 背景\n      ctx.fillStyle = '#f8f9fa'\n      ctx.fillRect(0, 0, width, height)\n\n      // 标题\n      ctx.fillStyle = '#333'\n      ctx.font = 'bold 28px Arial'\n      ctx.textAlign = 'center'\n      ctx.fillText('论文主题聚类可视化', width / 2, 50)\n\n      if (!result.value || !result.value.clusterAnalysis) {\n        return\n      }\n\n      // 绘制聚类圆形图\n      const clusters = Object.entries(result.value.clusterAnalysis)\n      const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E2', '#F8B500', '#6C5CE7']\n\n      const centerX = width / 2\n      const centerY = height / 2 + 30\n      const maxRadius = Math.min(width, height) * 0.35\n\n      // 计算总论文数\n      const totalPapers = clusters.reduce((sum, [, info]) => sum + (info.paper_count || 0), 0)\n\n      // 绘制聚类圆圈\n      let currentAngle = 0\n      clusters.forEach(([clusterId, info], index) => {\n        const color = colors[index % colors.length]\n        const ratio = (info.paper_count || 0) / Math.max(totalPapers, 1)\n        const angle = ratio * Math.PI * 2\n\n        // 绘制扇形\n        ctx.beginPath()\n        ctx.moveTo(centerX, centerY)\n        ctx.arc(centerX, centerY, maxRadius, currentAngle, currentAngle + angle)\n        ctx.closePath()\n        ctx.fillStyle = color + '40' // 添加透明度\n        ctx.fill()\n        ctx.strokeStyle = color\n        ctx.lineWidth = 3\n        ctx.stroke()\n\n        // 绘制标签\n        const labelAngle = currentAngle + angle / 2\n        const labelRadius = maxRadius + 40\n        const labelX = centerX + Math.cos(labelAngle) * labelRadius\n        const labelY = centerY + Math.sin(labelAngle) * labelRadius\n\n        ctx.fillStyle = color\n        ctx.font = 'bold 16px Arial'\n        ctx.textAlign = 'center'\n        ctx.fillText(`聚类 ${parseInt(clusterId) + 1}`, labelX, labelY - 10)\n        ctx.font = '14px Arial'\n        ctx.fillStyle = '#666'\n        ctx.fillText(`${info.paper_count || 0}篇`, labelX, labelY + 10)\n\n        currentAngle += angle\n      })\n\n      // 中心圆\n      ctx.beginPath()\n      ctx.arc(centerX, centerY, maxRadius * 0.3, 0, Math.PI * 2)\n      ctx.fillStyle = 'white'\n      ctx.fill()\n      ctx.strokeStyle = '#ddd'\n      ctx.lineWidth = 2\n      ctx.stroke()\n\n      // 中心文字\n      ctx.fillStyle = '#333'\n      ctx.font = 'bold 20px Arial'\n      ctx.textAlign = 'center'\n      ctx.fillText(`${clusters.length}`, centerX, centerY - 5)\n      ctx.font = '14px Arial'\n      ctx.fillStyle = '#666'\n      ctx.fillText('个聚类', centerX, centerY + 15)\n\n      // 绘制图例\n      let legendY = height - 100\n      const legendX = width / 2 - (clusters.length * 150) / 2\n\n      clusters.forEach(([clusterId, info], index) => {\n        const color = colors[index % colors.length]\n        const x = legendX + (index % 5) * 150\n        const y = legendY + Math.floor(index / 5) * 40\n\n        ctx.fillStyle = color\n        ctx.fillRect(x, y, 20, 20)\n        ctx.fillStyle = '#333'\n        ctx.font = '12px Arial'\n        ctx.textAlign = 'left'\n        const keywords = info.top_keywords?.slice(0, 2).join(', ') || '无关键词'\n        ctx.fillText(`聚类${parseInt(clusterId) + 1}: ${keywords}`, x + 30, y + 15)\n      })\n    }\n\n    const downloadHighResVisualization = () => {\n      const canvas = vizCanvas.value\n      if (!canvas) return\n\n      // 创建高分辨率下载\n      const link = document.createElement('a')\n      link.download = `cluster_visualization_${Date.now()}_highres.png`\n      link.href = canvas.toDataURL('image/png', 1.0)\n      link.click()\n      ElMessage.success('高清可视化图下载成功')\n    }\n\n    const downloadReport = async () => {\n      if (!result.value) {\n        ElMessage.warning('没有可导出的聚类结果')\n        return\n      }\n\n      try {\n        // 生成报告内容\n        let content = '论文主题聚类分析报告\\n'\n        content += '=' .repeat(80) + '\\n\\n'\n        content += `生成时间: ${formatDate(result.value.createdAt)}\\n`\n        content += `聚类方法: ${result.value.method || 'K-Means'}\\n`\n        content += `聚类数量: ${result.value.clusterCount}\\n`\n        content += `论文总数: ${result.value.papers?.length || 0}\\n\\n`\n\n        // 每个聚类的详细信息\n        Object.entries(result.value.clusterAnalysis).forEach(([clusterId, info], index) => {\n          content += `\\n${'=' .repeat(80)}\\n`\n          content += `聚类 ${parseInt(clusterId) + 1}\\n`\n          content += `${'-' .repeat(40)}\\n`\n          content += `论文数: ${info.paper_count || 0}\\n`\n          content += `关键词: ${info.top_keywords?.join(', ') || '无'}\\n\\n`\n\n          if (info.papers && info.papers.length > 0) {\n            content += '包含论文:\\n'\n            info.papers.forEach((paper, i) => {\n              content += `  ${i + 1}. ${paper}\\n`\n            })\n          }\n\n          if (info.representative_papers && info.representative_papers.length > 0) {\n            content += '\\n代表性论文:\\n'\n            info.representative_papers.forEach((paper, i) => {\n              content += `  ${i + 1}. ${paper.title || '无标题'}\\n`\n              if (paper.abstract) {\n                content += `     摘要: ${paper.abstract}\\n`\n              }\n            })\n          }\n        })\n\n        content += `\\n${'=' .repeat(80)}\\n`\n        content += '报告结束\\n'\n\n        // 下载文件\n        const blob = new Blob([content], { type: 'text/markdown;charset=utf-8' })\n        const url = URL.createObjectURL(blob)\n        const a = document.createElement('a')\n        a.href = url\n        a.download = `cluster_report_${Date.now()}.md`\n        a.click()\n        URL.revokeObjectURL(url)\n\n        ElMessage.success('聚类报告下载成功')\n      } catch (error) {\n        console.error('[ERROR] 导出报告失败:', error)\n        ElMessage.error('导出报告失败')\n      }\n    }\n\n    onMounted(() => {\n      store.dispatch('fetchFiles')\n      loadHistory()\n      loadVectorStats()\n    })\n\n    return {\n      files,\n      selectedFiles,\n      loading,\n      options,\n      clustering,\n      result,\n      activeClusters,\n      currentResultId,\n      clusterHistory,\n      showVisualization,\n      vizCanvas,\n      clusterMode,\n      vectorOptions,\n      vectorClustering,\n      syncing,\n      vectorStats,\n      testingConnection,\n      testingCluster,\n      showTestResult,\n      testResult,\n      paperTable,\n      handleSelectionChange,\n      refreshFiles,\n      formatDate,\n      startCluster,\n      downloadVisualization,\n      drawVisualization,\n      downloadHighResVisualization,\n      downloadReport,\n      saveCurrentResult,\n      loadHistoryResult,\n      deleteHistoryResult,\n      clearHistory,\n      syncToVectorStore,\n      startVectorCluster,\n      testVectorConnection,\n      testVectorCluster,\n      isPaperInVectorStore\n    }\n  }\n}\n</script>\n\n<style scoped>\n.cluster {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\nh2 {\n  margin-bottom: 20px;\n  color: #303133;\n}\n\n.select-card,\n.options-card,\n.result-card,\n.history-card {\n  margin-bottom: 20px;\n}\n\n.select-header,\n.history-header,\n.result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.select-header h3,\n.history-header h3,\n.result-header h3 {\n  margin: 0;\n}\n\n.header-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.result-actions-top {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.cluster-title {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.cluster-name {\n  font-weight: 600;\n}\n\n.cluster-content h4 {\n  color: #409eff;\n  margin: 20px 0 10px 0;\n}\n\n.paper-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.paper-list li {\n  padding: 8px 0;\n  padding-left: 20px;\n  position: relative;\n  border-bottom: 1px solid #eee;\n}\n\n.paper-list li:before {\n  content: '•';\n  position: absolute;\n  left: 0;\n  color: #409eff;\n  font-weight: bold;\n}\n\n.preview-paper-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.preview-paper-list li {\n  padding: 4px 0;\n  padding-left: 16px;\n  position: relative;\n  font-size: 13px;\n}\n\n.preview-paper-list li:before {\n  content: '•';\n  position: absolute;\n  left: 0;\n  color: #409eff;\n}\n\n.rep-paper {\n  padding: 15px;\n  background: #f5f7fa;\n  border-radius: 4px;\n  margin-bottom: 10px;\n}\n\n.rep-paper p {\n  margin: 5px 0;\n}\n\n.rep-abstract {\n  color: #606266;\n  font-size: 14px;\n  line-height: 1.6;\n}\n\n.result-actions {\n  margin-top: 20px;\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n}\n\n.visualization-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 500px;\n  background: #f8f9fa;\n  border-radius: 8px;\n}\n\n.viz-canvas {\n  max-width: 100%;\n  max-height: 80vh;\n}\n\n/* 向量聚类样式 */\n.vector-cluster-info {\n  margin-bottom: 16px;\n}\n\n.vector-actions {\n  display: flex;\n  gap: 12px;\n  margin-top: 16px;\n  flex-wrap: wrap;\n}\n\n.vector-stats {\n  margin-top: 16px;\n}\n\n/* 测试结果样式 */\n.test-result h4 {\n  color: #409eff;\n  margin: 16px 0 8px 0;\n}\n\n.test-cluster-result {\n  background: #f5f7fa;\n  padding: 16px;\n  border-radius: 8px;\n}\n\n/* 表格样式优化 */\n:deep(.el-table) {\n  font-size: 14px;\n}\n\n:deep(.el-tag) {\n  font-size: 12px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}