{"ast":null,"code":"import { defineComponent, useSlots, computed, ref, provide, openBlock, createBlock, unref, withCtx, createVNode, Transition, mergeProps, withDirectives, createElementVNode, normalizeClass, normalizeStyle, createSlots, renderSlot, createCommentVNode, vShow } from 'vue';\nimport { ElOverlay } from '../../overlay/index.mjs';\nimport ElFocusTrap from '../../focus-trap/src/focus-trap.mjs';\nimport { ElTeleport } from '../../teleport/index.mjs';\nimport ElDialogContent from './dialog-content2.mjs';\nimport { dialogInjectionKey } from './constants.mjs';\nimport { dialogProps, dialogEmits } from './dialog.mjs';\nimport { useDialog } from './use-dialog.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useDeprecated } from '../../../hooks/use-deprecated/index.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useSameTarget } from '../../../hooks/use-same-target/index.mjs';\nconst _hoisted_1 = [\"aria-label\", \"aria-labelledby\", \"aria-describedby\"];\nconst _sfc_main = defineComponent({\n  ...{\n    name: \"ElDialog\",\n    inheritAttrs: false\n  },\n  __name: \"dialog\",\n  props: dialogProps,\n  emits: dialogEmits,\n  setup(__props, {\n    expose: __expose\n  }) {\n    const props = __props;\n    const slots = useSlots();\n    useDeprecated({\n      scope: \"el-dialog\",\n      from: \"the title slot\",\n      replacement: \"the header slot\",\n      version: \"3.0.0\",\n      ref: \"https://element-plus.org/en-US/component/dialog.html#slots\"\n    }, computed(() => !!slots.title));\n    const ns = useNamespace(\"dialog\");\n    const dialogRef = ref();\n    const headerRef = ref();\n    const dialogContentRef = ref();\n    const {\n      visible,\n      titleId,\n      bodyId,\n      style,\n      overlayDialogStyle,\n      rendered,\n      transitionConfig,\n      zIndex,\n      _draggable,\n      _alignCenter,\n      _overflow,\n      handleClose,\n      onModalClick,\n      onOpenAutoFocus,\n      onCloseAutoFocus,\n      onCloseRequested,\n      onFocusoutPrevented,\n      closing\n    } = useDialog(props, dialogRef);\n    provide(dialogInjectionKey, {\n      dialogRef,\n      headerRef,\n      bodyId,\n      ns,\n      rendered,\n      style\n    });\n    const overlayEvent = useSameTarget(onModalClick);\n    const penetrable = computed(() => props.modalPenetrable && !props.modal && !props.fullscreen);\n    const resetPosition = () => {\n      var _a;\n      (_a = dialogContentRef.value) == null ? void 0 : _a.resetPosition();\n    };\n    __expose({\n      visible,\n      dialogContentRef,\n      resetPosition,\n      handleClose\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(ElTeleport), {\n        to: _ctx.appendTo,\n        disabled: _ctx.appendTo !== \"body\" ? false : !_ctx.appendToBody\n      }, {\n        default: withCtx(() => [createVNode(Transition, mergeProps(unref(transitionConfig), {\n          persisted: \"\"\n        }), {\n          default: withCtx(() => {\n            var _a;\n            return [withDirectives(createVNode(unref(ElOverlay), {\n              \"custom-mask-event\": \"\",\n              mask: _ctx.modal,\n              \"overlay-class\": [(_a = _ctx.modalClass) != null ? _a : \"\", `${unref(ns).namespace.value}-modal-dialog`, unref(ns).is(\"penetrable\", penetrable.value)],\n              \"z-index\": unref(zIndex)\n            }, {\n              default: withCtx(() => [createElementVNode(\"div\", {\n                role: \"dialog\",\n                \"aria-modal\": \"true\",\n                \"aria-label\": _ctx.title || void 0,\n                \"aria-labelledby\": !_ctx.title ? unref(titleId) : void 0,\n                \"aria-describedby\": unref(bodyId),\n                class: normalizeClass([`${unref(ns).namespace.value}-overlay-dialog`, unref(ns).is(\"closing\", unref(closing))]),\n                style: normalizeStyle(unref(overlayDialogStyle)),\n                onClick: _cache[0] || (_cache[0] = (...args) => unref(overlayEvent).onClick && unref(overlayEvent).onClick(...args)),\n                onMousedown: _cache[1] || (_cache[1] = (...args) => unref(overlayEvent).onMousedown && unref(overlayEvent).onMousedown(...args)),\n                onMouseup: _cache[2] || (_cache[2] = (...args) => unref(overlayEvent).onMouseup && unref(overlayEvent).onMouseup(...args))\n              }, [createVNode(unref(ElFocusTrap), {\n                loop: \"\",\n                trapped: unref(visible),\n                \"focus-start-el\": \"container\",\n                onFocusAfterTrapped: unref(onOpenAutoFocus),\n                onFocusAfterReleased: unref(onCloseAutoFocus),\n                onFocusoutPrevented: unref(onFocusoutPrevented),\n                onReleaseRequested: unref(onCloseRequested)\n              }, {\n                default: withCtx(() => [unref(rendered) ? (openBlock(), createBlock(ElDialogContent, mergeProps({\n                  key: 0,\n                  ref_key: \"dialogContentRef\",\n                  ref: dialogContentRef\n                }, _ctx.$attrs, {\n                  center: _ctx.center,\n                  \"align-center\": unref(_alignCenter),\n                  \"close-icon\": _ctx.closeIcon,\n                  draggable: unref(_draggable),\n                  overflow: unref(_overflow),\n                  fullscreen: _ctx.fullscreen,\n                  \"header-class\": _ctx.headerClass,\n                  \"body-class\": _ctx.bodyClass,\n                  \"footer-class\": _ctx.footerClass,\n                  \"show-close\": _ctx.showClose,\n                  title: _ctx.title,\n                  \"aria-level\": _ctx.headerAriaLevel,\n                  onClose: unref(handleClose)\n                }), createSlots({\n                  header: withCtx(() => [!_ctx.$slots.title ? renderSlot(_ctx.$slots, \"header\", {\n                    key: 0,\n                    close: unref(handleClose),\n                    titleId: unref(titleId),\n                    titleClass: unref(ns).e(\"title\")\n                  }) : renderSlot(_ctx.$slots, \"title\", {\n                    key: 1\n                  })]),\n                  default: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n                  _: 2\n                }, [_ctx.$slots.footer ? {\n                  name: \"footer\",\n                  fn: withCtx(() => [renderSlot(_ctx.$slots, \"footer\")]),\n                  key: \"0\"\n                } : void 0]), 1040, [\"center\", \"align-center\", \"close-icon\", \"draggable\", \"overflow\", \"fullscreen\", \"header-class\", \"body-class\", \"footer-class\", \"show-close\", \"title\", \"aria-level\", \"onClose\"])) : createCommentVNode(\"v-if\", true)]),\n                _: 3\n              }, 8, [\"trapped\", \"onFocusAfterTrapped\", \"onFocusAfterReleased\", \"onFocusoutPrevented\", \"onReleaseRequested\"])], 46, _hoisted_1)]),\n              _: 3\n            }, 8, [\"mask\", \"overlay-class\", \"z-index\"]), [[vShow, unref(visible)]])];\n          }),\n          _: 3\n        }, 16)]),\n        _: 3\n      }, 8, [\"to\", \"disabled\"]);\n    };\n  }\n});\nvar Dialog = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue\"]]);\nexport { Dialog as default };","map":{"version":3,"names":["props","__props","slots","useSlots","useDeprecated","scope","from","replacement","version","ref","computed","title","ns","useNamespace","dialogRef","headerRef","dialogContentRef","visible","titleId","bodyId","style","overlayDialogStyle","rendered","transitionConfig","zIndex","_draggable","_alignCenter","_overflow","handleClose","onModalClick","onOpenAutoFocus","onCloseAutoFocus","onCloseRequested","onFocusoutPrevented","closing","useDialog","provide","dialogInjectionKey","overlayEvent","useSameTarget","penetrable","modalPenetrable","modal","fullscreen","resetPosition","_a","value","__expose","createBlock","unref","ElTeleport","to","_ctx","appendTo","disabled","appendToBody","default","withCtx","createVNode","Transition","mergeProps","persisted","withDirectives","ElOverlay","mask","modalClass","namespace","is","createElementVNode","role","class","normalizeClass","normalizeStyle","onClick","_cache","args","onMousedown","onMouseup","ElFocusTrap","loop","trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested","openBlock","ElDialogContent","key","ref_key","$attrs","center","closeIcon","draggable","overflow","headerClass","bodyClass","footerClass","showClose","headerAriaLevel","onClose","createSlots","header","$slots","renderSlot","close","titleClass","e","_","footer","name","fn"],"sources":["../../../../../../packages/components/dialog/src/dialog.vue"],"sourcesContent":["<template>\n  <el-teleport\n    :to=\"appendTo\"\n    :disabled=\"appendTo !== 'body' ? false : !appendToBody\"\n  >\n    <transition v-bind=\"transitionConfig\">\n      <el-overlay\n        v-show=\"visible\"\n        custom-mask-event\n        :mask=\"modal\"\n        :overlay-class=\"[\n          modalClass ?? '',\n          `${ns.namespace.value}-modal-dialog`,\n          ns.is('penetrable', penetrable),\n        ]\"\n        :z-index=\"zIndex\"\n      >\n        <div\n          role=\"dialog\"\n          aria-modal=\"true\"\n          :aria-label=\"title || undefined\"\n          :aria-labelledby=\"!title ? titleId : undefined\"\n          :aria-describedby=\"bodyId\"\n          :class=\"[\n            `${ns.namespace.value}-overlay-dialog`,\n            ns.is('closing', closing),\n          ]\"\n          :style=\"overlayDialogStyle\"\n          @click=\"overlayEvent.onClick\"\n          @mousedown=\"overlayEvent.onMousedown\"\n          @mouseup=\"overlayEvent.onMouseup\"\n        >\n          <el-focus-trap\n            loop\n            :trapped=\"visible\"\n            focus-start-el=\"container\"\n            @focus-after-trapped=\"onOpenAutoFocus\"\n            @focus-after-released=\"onCloseAutoFocus\"\n            @focusout-prevented=\"onFocusoutPrevented\"\n            @release-requested=\"onCloseRequested\"\n          >\n            <el-dialog-content\n              v-if=\"rendered\"\n              ref=\"dialogContentRef\"\n              v-bind=\"$attrs\"\n              :center=\"center\"\n              :align-center=\"_alignCenter\"\n              :close-icon=\"closeIcon\"\n              :draggable=\"_draggable\"\n              :overflow=\"_overflow\"\n              :fullscreen=\"fullscreen\"\n              :header-class=\"headerClass\"\n              :body-class=\"bodyClass\"\n              :footer-class=\"footerClass\"\n              :show-close=\"showClose\"\n              :title=\"title\"\n              :aria-level=\"headerAriaLevel\"\n              @close=\"handleClose\"\n            >\n              <template #header>\n                <slot\n                  v-if=\"!$slots.title\"\n                  name=\"header\"\n                  :close=\"handleClose\"\n                  :title-id=\"titleId\"\n                  :title-class=\"ns.e('title')\"\n                />\n                <slot v-else name=\"title\" />\n              </template>\n              <slot />\n              <template v-if=\"$slots.footer\" #footer>\n                <slot name=\"footer\" />\n              </template>\n            </el-dialog-content>\n          </el-focus-trap>\n        </div>\n      </el-overlay>\n    </transition>\n  </el-teleport>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, provide, ref, useSlots } from 'vue'\nimport { ElOverlay } from '@element-plus/components/overlay'\nimport { useDeprecated, useNamespace, useSameTarget } from '@element-plus/hooks'\nimport ElFocusTrap from '@element-plus/components/focus-trap'\nimport ElTeleport from '@element-plus/components/teleport'\nimport ElDialogContent from './dialog-content.vue'\nimport { dialogInjectionKey } from './constants'\nimport { dialogEmits, dialogProps } from './dialog'\nimport { useDialog } from './use-dialog'\n\ndefineOptions({\n  name: 'ElDialog',\n  inheritAttrs: false,\n})\n\nconst props = defineProps(dialogProps)\ndefineEmits(dialogEmits)\nconst slots = useSlots()\n\nuseDeprecated(\n  {\n    scope: 'el-dialog',\n    from: 'the title slot',\n    replacement: 'the header slot',\n    version: '3.0.0',\n    ref: 'https://element-plus.org/en-US/component/dialog.html#slots',\n  },\n  computed(() => !!slots.title)\n)\n\nconst ns = useNamespace('dialog')\nconst dialogRef = ref<HTMLElement>()\nconst headerRef = ref<HTMLElement>()\nconst dialogContentRef = ref()\n\nconst {\n  visible,\n  titleId,\n  bodyId,\n  style,\n  overlayDialogStyle,\n  rendered,\n  transitionConfig,\n  zIndex,\n  _draggable,\n  _alignCenter,\n  _overflow,\n  handleClose,\n  onModalClick,\n  onOpenAutoFocus,\n  onCloseAutoFocus,\n  onCloseRequested,\n  onFocusoutPrevented,\n  closing,\n} = useDialog(props, dialogRef)\n\nprovide(dialogInjectionKey, {\n  dialogRef,\n  headerRef,\n  bodyId,\n  ns,\n  rendered,\n  style,\n})\n\nconst overlayEvent = useSameTarget(onModalClick)\n\nconst penetrable = computed(\n  () => props.modalPenetrable && !props.modal && !props.fullscreen\n)\n\nconst resetPosition = () => {\n  dialogContentRef.value?.resetPosition()\n}\n\ndefineExpose({\n  /** @description whether the dialog is visible */\n  visible,\n  dialogContentRef,\n  resetPosition,\n  handleClose,\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}