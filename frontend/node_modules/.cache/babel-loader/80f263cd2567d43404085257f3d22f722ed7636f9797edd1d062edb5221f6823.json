{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref, onMounted, onUnmounted } from 'vue';\nfunction useKeyRender(table) {\n  const observer = ref();\n  const initWatchDom = () => {\n    const el = table.vnode.el;\n    const columnsWrapper = el.querySelector(\".hidden-columns\");\n    const config = {\n      childList: true,\n      subtree: true\n    };\n    const updateOrderFns = table.store.states.updateOrderFns;\n    observer.value = new MutationObserver(() => {\n      updateOrderFns.forEach(fn => fn());\n    });\n    observer.value.observe(columnsWrapper, config);\n  };\n  onMounted(() => {\n    initWatchDom();\n  });\n  onUnmounted(() => {\n    var _a;\n    (_a = observer.value) == null ? void 0 : _a.disconnect();\n  });\n}\nexport { useKeyRender as default };","map":{"version":3,"names":["useKeyRender","table","observer","ref","initWatchDom","el","vnode","columnsWrapper","querySelector","config","childList","subtree","updateOrderFns","store","states","value","MutationObserver","forEach","fn","observe","onMounted","onUnmounted","_a","disconnect"],"sources":["../../../../../../../packages/components/table/src/table/key-render-helper.ts"],"sourcesContent":["import { onMounted, onUnmounted, ref } from 'vue'\n\nimport type { Table } from './defaults'\n\nexport default function useKeyRender(table: Table<[]>) {\n  const observer = ref<MutationObserver>()\n\n  const initWatchDom = () => {\n    const el = table.vnode.el\n    const columnsWrapper = (el as HTMLElement).querySelector('.hidden-columns')\n    const config = { childList: true, subtree: true }\n    const updateOrderFns = table.store.states.updateOrderFns\n    observer.value = new MutationObserver(() => {\n      updateOrderFns.forEach((fn: () => void) => fn())\n    })\n\n    observer.value.observe(columnsWrapper!, config)\n  }\n\n  onMounted(() => {\n    // fix https://github.com/element-plus/element-plus/issues/8528\n    initWatchDom()\n  })\n\n  onUnmounted(() => {\n    observer.value?.disconnect()\n  })\n}\n"],"mappings":";;;AAIA,SAAwBA,aAAaC,KAAkB;EACrD,MAAMC,QAAA,GAAWC,GAAsB;EAEvC,MAAMC,YAAA,GAAeA,CAAA,KAAM;IACnB,MAAAC,EAAA,GAAKJ,KAAA,CAAMK,KAAM,CAAAD,EAAA;IACjB,MAAAE,cAAA,GAAkBF,EAAmB,CAAAG,aAAA,CAAc,iBAAiB;IAC1E,MAAMC,MAAS;MAAEC,SAAW;MAAMC,OAAA,EAAS;IAAK;IAC1C,MAAAC,cAAA,GAAiBX,KAAM,CAAAY,KAAA,CAAMC,MAAO,CAAAF,cAAA;IACjCV,QAAA,CAAAa,KAAA,GAAQ,IAAIC,gBAAA,CAAiB,MAAM;MAC1CJ,cAAA,CAAeK,OAAQ,CAACC,EAAmB,IAAAA,EAAA,EAAI;IAAA,CAChD;IAEQhB,QAAA,CAAAa,KAAA,CAAMI,OAAQ,CAAAZ,cAAA,EAAiBE,MAAM;EAAA,CAChD;EAEAW,SAAA,CAAU,MAAM;IAEDhB,YAAA;EAAA,CACd;EAEDiB,WAAA,CAAY,MAAM;IAxBpB,IAAAC,EAAA;IAyBI,CAAAA,EAAA,GAAApB,QAAA,CAASa,KAAA,KAAT,IAAgB,YAAAO,EAAA,CAAAC,UAAA;EAAA,CACjB;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}