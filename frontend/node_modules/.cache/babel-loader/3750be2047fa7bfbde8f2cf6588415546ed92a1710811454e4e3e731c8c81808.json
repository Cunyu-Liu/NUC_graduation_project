{"ast":null,"code":"import { unref } from 'vue';\nimport { useTimeout } from '../use-timeout/index.mjs';\nimport { buildProps } from '../../utils/vue/props/runtime.mjs';\nimport { isNumber } from '../../utils/types.mjs';\nconst useDelayedToggleProps = buildProps({\n  showAfter: {\n    type: Number,\n    default: 0\n  },\n  hideAfter: {\n    type: Number,\n    default: 200\n  },\n  autoClose: {\n    type: Number,\n    default: 0\n  }\n});\nconst useDelayedToggle = ({\n  showAfter,\n  hideAfter,\n  autoClose,\n  open,\n  close\n}) => {\n  const {\n    registerTimeout\n  } = useTimeout();\n  const {\n    registerTimeout: registerTimeoutForAutoClose,\n    cancelTimeout: cancelTimeoutForAutoClose\n  } = useTimeout();\n  const onOpen = (event, delay = unref(showAfter)) => {\n    registerTimeout(() => {\n      open(event);\n      const _autoClose = unref(autoClose);\n      if (isNumber(_autoClose) && _autoClose > 0) {\n        registerTimeoutForAutoClose(() => {\n          close(event);\n        }, _autoClose);\n      }\n    }, delay);\n  };\n  const onClose = (event, delay = unref(hideAfter)) => {\n    cancelTimeoutForAutoClose();\n    registerTimeout(() => {\n      close(event);\n    }, delay);\n  };\n  return {\n    onOpen,\n    onClose\n  };\n};\nexport { useDelayedToggle, useDelayedToggleProps };","map":{"version":3,"names":["useDelayedToggleProps","buildProps","showAfter","type","Number","default","hideAfter","autoClose","useDelayedToggle","open","close","registerTimeout","useTimeout","registerTimeoutForAutoClose","cancelTimeout","cancelTimeoutForAutoClose","onOpen","event","delay","unref","_autoClose","isNumber","onClose"],"sources":["../../../../../packages/hooks/use-delayed-toggle/index.ts"],"sourcesContent":["import { unref } from 'vue'\nimport { buildProps, isNumber } from '@element-plus/utils'\nimport { useTimeout } from '../use-timeout'\n\nimport type { ExtractPropTypes, ToRefs } from 'vue'\n\nexport const useDelayedToggleProps = buildProps({\n  /**\n   * @description delay of appearance, in millisecond, not valid in controlled mode\n   */\n  showAfter: {\n    type: Number,\n    default: 0,\n  },\n  /**\n   * @description delay of disappear, in millisecond, not valid in controlled mode\n   */\n  hideAfter: {\n    type: Number,\n    default: 200,\n  },\n  /**\n   * @description disappear automatically, in millisecond, not valid in controlled mode\n   */\n  autoClose: {\n    type: Number,\n    default: 0,\n  },\n} as const)\n\nexport type UseDelayedToggleProps = {\n  open: (event?: Event) => void\n  close: (event?: Event) => void\n} & ToRefs<ExtractPropTypes<typeof useDelayedToggleProps>>\n\nexport const useDelayedToggle = ({\n  showAfter,\n  hideAfter,\n  autoClose,\n  open,\n  close,\n}: UseDelayedToggleProps) => {\n  const { registerTimeout } = useTimeout()\n  const {\n    registerTimeout: registerTimeoutForAutoClose,\n    cancelTimeout: cancelTimeoutForAutoClose,\n  } = useTimeout()\n\n  const onOpen = (event?: Event, delay = unref(showAfter)) => {\n    registerTimeout(() => {\n      open(event)\n\n      const _autoClose = unref(autoClose)\n      if (isNumber(_autoClose) && _autoClose > 0) {\n        registerTimeoutForAutoClose(() => {\n          close(event)\n        }, _autoClose)\n      }\n    }, delay)\n  }\n\n  const onClose = (event?: Event, delay = unref(hideAfter)) => {\n    cancelTimeoutForAutoClose()\n    registerTimeout(() => {\n      close(event)\n    }, delay)\n  }\n\n  return {\n    onOpen,\n    onClose,\n  }\n}\n"],"mappings":";;;;AAMO,MAAMA,qBAAA,GAAwBC,UAAW;EAI9CC,SAAW;IACTC,IAAM,EAAAC,MAAA;IACNC,OAAS;EAAA,CACX;EAIAC,SAAW;IACTH,IAAM,EAAAC,MAAA;IACNC,OAAS;EAAA,CACX;EAIAE,SAAW;IACTJ,IAAM,EAAAC,MAAA;IACNC,OAAS;EAAA;AAEb,CAAU;AAOH,MAAMG,gBAAA,GAAmBA,CAAC;EAC/BN,SAAA;EACAI,SAAA;EACAC,SAAA;EACAE,IAAA;EACAC;AACF,CAA6B;EACrB;IAAEC;EAAgB,IAAIC,UAAW;EACjC;IACJD,eAAiB,EAAAE,2BAAA;IACjBC,aAAe,EAAAC;EAAA,IACbH,UAAW;EAEf,MAAMI,MAAA,GAASA,CAACC,KAAA,EAAeC,KAAQ,GAAAC,KAAA,CAAMjB,SAAS,CAAM;IAC1DS,eAAA,CAAgB,MAAM;MACpBF,IAAA,CAAKQ,KAAK;MAEJ,MAAAG,UAAA,GAAaD,KAAA,CAAMZ,SAAS;MAClC,IAAIc,QAAS,CAAAD,UAAU,CAAK,IAAAA,UAAA,GAAa,CAAG;QAC1CP,2BAAA,CAA4B,MAAM;UAChCH,KAAA,CAAMO,KAAK;QAAA,GACVG,UAAU;MAAA;IACf,GACCF,KAAK;EAAA,CACV;EAEA,MAAMI,OAAA,GAAUA,CAACL,KAAA,EAAeC,KAAQ,GAAAC,KAAA,CAAMb,SAAS,CAAM;IACjCS,yBAAA;IAC1BJ,eAAA,CAAgB,MAAM;MACpBD,KAAA,CAAMO,KAAK;IAAA,GACVC,KAAK;EAAA,CACV;EAEO;IACLF,MAAA;IACAM;EAAA,CACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}