{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { ref, onMounted, computed, watch } from 'vue';\nimport * as d3 from 'd3';\nimport { ElMessage } from 'element-plus';\nimport api from '@/api';\n\n// Props\n\nexport default {\n  __name: 'KnowledgeGraph',\n  props: {\n    paperIds: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n\n    // 响应式数据\n    const loading = ref(false);\n    const graphData = ref({\n      nodes: {},\n      edges: []\n    });\n    const drawerVisible = ref(false);\n    const selectedNode = ref(null);\n    const connectedNodes = ref([]);\n    const relationFilter = ref([]);\n\n    // D3相关\n    const svgElement = ref(null);\n    const graphContainer = ref(null);\n    let svg, g, simulation, zoom;\n\n    // 关系类型颜色映射\n    const relationColors = {\n      'cites': '#FF6B6B',\n      'extends': '#4ECDC4',\n      'improves': '#45B7D1',\n      'applies': '#FFA07A',\n      'contradicts': '#98D8C8'\n    };\n\n    // 计算属性\n    const relationTypes = computed(() => {\n      const types = new Set();\n      graphData.value.edges.forEach(edge => {\n        types.add(edge.type);\n      });\n      return Array.from(types);\n    });\n    const filteredEdges = computed(() => {\n      if (relationFilter.value.length === 0) {\n        return graphData.value.edges;\n      }\n      return graphData.value.edges.filter(edge => relationFilter.value.includes(edge.type));\n    });\n\n    // 方法\n    const initGraph = () => {\n      if (!svgElement.value) return;\n      const container = graphContainer.value;\n      const width = container.clientWidth;\n      const height = container.clientHeight;\n\n      // 创建SVG\n      svg = d3.select(svgElement.value).attr('width', width).attr('height', height);\n\n      // 添加缩放行为\n      zoom = d3.zoom().scaleExtent([0.1, 4]).on('zoom', event => {\n        g.attr('transform', event.transform);\n      });\n      svg.call(zoom);\n\n      // 创建主分组\n      g = svg.append('g').attr('width', width).attr('height', height);\n\n      // 添加箭头标记\n      svg.append('defs').selectAll('marker').data(Object.keys(relationColors)).join('marker').attr('id', d => `arrow-${d}`).attr('viewBox', '0 0 10 10').attr('refX', 20).attr('refY', 5).attr('markerWidth', 6).attr('markerHeight', 6).attr('orient', 'auto-start-reverse').append('path').attr('d', 'M 0 0 L 10 5 L 0 10 z').attr('fill', d => relationColors[d]);\n    };\n    const updateGraph = () => {\n      // 准备节点数据\n      const nodes = Object.entries(graphData.value.nodes).map(([id, data]) => ({\n        id: parseInt(id),\n        ...data\n      }));\n\n      // 创建力导向布局\n      simulation = d3.forceSimulation(nodes).force('link', d3.forceLink(filteredEdges.value).id(d => d.id).distance(100)).force('charge', d3.forceManyBody().strength(-300)).force('center', d3.forceCenter(graphContainer.value.clientWidth / 2, graphContainer.value.clientHeight / 2)).force('collision', d3.forceCollide().radius(30));\n\n      // 绘制边\n      const links = g.append('g').attr('class', 'links').selectAll('line').data(filteredEdges.value).join('line').attr('stroke', d => relationColors[d.type] || '#999').attr('stroke-width', d => Math.max(1, d.strength * 3)).attr('marker-end', d => `url(#arrow-${d.type})`).attr('opacity', 0.6);\n\n      // 绘制节点\n      const nodeElements = g.append('g').attr('class', 'nodes').selectAll('g').data(nodes).join('g').attr('class', 'node').call(d3.drag().on('start', dragstarted).on('drag', dragged).on('end', dragended)).on('click', (event, d) => showNodeDetail(d));\n\n      // 节点圆形\n      nodeElements.append('circle').attr('r', 20).attr('fill', '#4ECDC4').attr('stroke', '#fff').attr('stroke-width', 2);\n\n      // 节点标签\n      nodeElements.append('text').text(d => d.data.title ? d.data.title.substring(0, 15) + '...' : 'Paper').attr('x', 25).attr('y', 5).attr('font-size', '10px').attr('fill', '#333');\n\n      // 更新位置\n      simulation.on('tick', () => {\n        links.attr('x1', d => d.source.x).attr('y1', d => d.source.y).attr('x2', d => d.target.x).attr('y2', d => d.target.y);\n        nodeElements.attr('transform', d => `translate(${d.x},${d.y})`);\n      });\n    };\n    const showNodeDetail = nodeData => {\n      selectedNode.value = {\n        data: nodeData\n      };\n\n      // 查找关联节点\n      connectedNodes.value = [];\n      filteredEdges.value.forEach(edge => {\n        if (edge.source.id === nodeData.id) {\n          const connected = graphData.value.nodes[edge.target.id];\n          if (connected) {\n            connectedNodes.value.push({\n              data: connected,\n              relation: edge.type\n            });\n          }\n        } else if (edge.target.id === nodeData.id) {\n          const connected = graphData.value.nodes[edge.source.id];\n          if (connected) {\n            connectedNodes.value.push({\n              data: connected,\n              relation: edge.type\n            });\n          }\n        }\n      });\n      drawerVisible.value = true;\n    };\n    const focusNode = nodeId => {\n      // 缩放到指定节点\n      const node = graphData.value.nodes[nodeId];\n      if (node && svg) {\n        const transform = d3.zoomIdentity.translate(graphContainer.value.clientWidth / 2, graphContainer.value.clientHeight / 2).scale(2).translate(-node.x || 0, -node.y || 0);\n        svg.transition().duration(750).call(zoom.transform, transform);\n      }\n    };\n    const dragstarted = (event, d) => {\n      if (!event.active) simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    };\n    const dragged = (event, d) => {\n      d.fx = event.x;\n      d.fy = event.y;\n    };\n    const dragended = (event, d) => {\n      if (!event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    };\n    const getRelationColor = type => {\n      return relationColors[type] || '#999';\n    };\n    const refreshGraph = async () => {\n      loading.value = true;\n      try {\n        const response = await api.getKnowledgeGraph(props.paperIds);\n        if (response.success) {\n          graphData.value = response.data;\n          updateGraph();\n          ElMessage.success('图谱刷新成功');\n        }\n      } catch (error) {\n        ElMessage.error('图谱加载失败');\n        console.error(error);\n      } finally {\n        loading.value = false;\n      }\n    };\n    const resetZoom = () => {\n      if (svg && zoom) {\n        svg.transition().duration(750).call(zoom.transform, d3.zoomIdentity);\n      }\n    };\n\n    // 生命周期\n    onMounted(() => {\n      initGraph();\n      refreshGraph();\n\n      // 响应式调整\n      window.addEventListener('resize', () => {\n        if (graphContainer.value && svgElement.value) {\n          const width = graphContainer.value.clientWidth;\n          const height = graphContainer.value.clientHeight;\n          d3.select(svgElement.value).attr('width', width).attr('height', height);\n        }\n      });\n    });\n\n    // 监听props变化\n    watch(() => props.paperIds, () => {\n      refreshGraph();\n    });\n    const __returned__ = {\n      props,\n      loading,\n      graphData,\n      drawerVisible,\n      selectedNode,\n      connectedNodes,\n      relationFilter,\n      svgElement,\n      graphContainer,\n      get svg() {\n        return svg;\n      },\n      set svg(v) {\n        svg = v;\n      },\n      get g() {\n        return g;\n      },\n      set g(v) {\n        g = v;\n      },\n      get simulation() {\n        return simulation;\n      },\n      set simulation(v) {\n        simulation = v;\n      },\n      get zoom() {\n        return zoom;\n      },\n      set zoom(v) {\n        zoom = v;\n      },\n      relationColors,\n      relationTypes,\n      filteredEdges,\n      initGraph,\n      updateGraph,\n      showNodeDetail,\n      focusNode,\n      dragstarted,\n      dragged,\n      dragended,\n      getRelationColor,\n      refreshGraph,\n      resetZoom,\n      ref,\n      onMounted,\n      computed,\n      watch,\n      get d3() {\n        return d3;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get api() {\n        return api;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","watch","d3","ElMessage","api","props","__props","loading","graphData","nodes","edges","drawerVisible","selectedNode","connectedNodes","relationFilter","svgElement","graphContainer","svg","g","simulation","zoom","relationColors","relationTypes","types","Set","value","forEach","edge","add","type","Array","from","filteredEdges","length","filter","includes","initGraph","container","width","clientWidth","height","clientHeight","select","attr","scaleExtent","on","event","transform","call","append","selectAll","data","Object","keys","join","d","updateGraph","entries","map","id","parseInt","forceSimulation","force","forceLink","distance","forceManyBody","strength","forceCenter","forceCollide","radius","links","Math","max","nodeElements","drag","dragstarted","dragged","dragended","showNodeDetail","text","title","substring","source","x","y","target","nodeData","connected","push","relation","focusNode","nodeId","node","zoomIdentity","translate","scale","transition","duration","active","alphaTarget","restart","fx","fy","getRelationColor","refreshGraph","response","getKnowledgeGraph","paperIds","success","error","console","resetZoom","window","addEventListener"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/components/KnowledgeGraph.vue"],"sourcesContent":["<template>\n  <div class=\"knowledge-graph-container\">\n    <div class=\"graph-header\">\n      <h2>知识图谱可视化</h2>\n      <div class=\"controls\">\n        <el-button @click=\"refreshGraph\" icon=\"Refresh\">刷新</el-button>\n        <el-button @click=\"resetZoom\" icon=\"ZoomOut\">重置视图</el-button>\n        <el-select v-model=\"relationFilter\" placeholder=\"关系类型\" multiple style=\"width: 200px\">\n          <el-option v-for=\"type in relationTypes\" :key=\"type\" :label=\"type\" :value=\"type\" />\n        </el-select>\n      </div>\n    </div>\n\n    <!-- SVG容器 -->\n    <div ref=\"graphContainer\" class=\"graph-container\">\n      <svg ref=\"svgElement\" width=\"100%\" height=\"100%\"></svg>\n    </div>\n\n    <!-- 加载状态 -->\n    <div v-if=\"loading\" class=\"loading-overlay\">\n      <el-icon class=\"is-loading\" :size=\"40\"><Loading /></el-icon>\n      <p>正在构建知识图谱...</p>\n    </div>\n\n    <!-- 节点详情面板 -->\n    <el-drawer v-model=\"drawerVisible\" title=\"节点详情\" size=\"400px\" direction=\"rtl\">\n      <div v-if=\"selectedNode\" class=\"node-detail\">\n        <h3>{{ selectedNode.data.title }}</h3>\n        <el-divider />\n\n        <el-descriptions :column=\"1\" border>\n          <el-descriptions-item label=\"ID\">{{ selectedNode.data.id }}</el-descriptions-item>\n          <el-descriptions-item label=\"年份\">{{ selectedNode.data.year || 'N/A' }}</el-descriptions-item>\n          <el-descriptions-item label=\"发表场所\">{{ selectedNode.data.venue || 'N/A' }}</el-descriptions-item>\n          <el-descriptions-item label=\"作者数量\">\n            {{ selectedNode.data.authors?.length || 0 }}\n          </el-descriptions-item>\n          <el-descriptions-item label=\"摘要长度\">\n            {{ selectedNode.data.abstract?.length || 0 }} 字符\n          </el-descriptions-item>\n        </el-descriptions>\n\n        <el-divider />\n\n        <!-- 关联论文 -->\n        <h4>关联论文</h4>\n        <div v-if=\"connectedNodes.length > 0\" class=\"connected-papers\">\n          <el-card\n            v-for=\"node in connectedNodes\"\n            :key=\"node.data.id\"\n            class=\"paper-card\"\n            shadow=\"hover\"\n          >\n            <div class=\"paper-title\" @click=\"focusNode(node.data.id)\">\n              {{ node.data.title }}\n            </div>\n            <div class=\"paper-meta\">\n              <span>{{ node.data.year }}</span>\n              <span>{{ node.data.venue }}</span>\n            </div>\n          </el-card>\n        </div>\n        <el-empty v-else description=\"无关联论文\" />\n      </div>\n    </el-drawer>\n\n    <!-- 图例 -->\n    <div class=\"legend-panel\">\n      <div class=\"legend-title\">关系类型</div>\n      <div v-for=\"type in relationTypes\" :key=\"type\" class=\"legend-item\">\n        <span class=\"legend-color\" :style=\"{ backgroundColor: getRelationColor(type) }\"></span>\n        <span class=\"legend-label\">{{ type }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed, watch } from 'vue'\nimport * as d3 from 'd3'\nimport { ElMessage } from 'element-plus'\nimport api from '@/api'\n\n// Props\nconst props = defineProps({\n  paperIds: {\n    type: Array,\n    default: () => []\n  }\n})\n\n// 响应式数据\nconst loading = ref(false)\nconst graphData = ref({ nodes: {}, edges: [] })\nconst drawerVisible = ref(false)\nconst selectedNode = ref(null)\nconst connectedNodes = ref([])\nconst relationFilter = ref([])\n\n// D3相关\nconst svgElement = ref(null)\nconst graphContainer = ref(null)\nlet svg, g, simulation, zoom\n\n// 关系类型颜色映射\nconst relationColors = {\n  'cites': '#FF6B6B',\n  'extends': '#4ECDC4',\n  'improves': '#45B7D1',\n  'applies': '#FFA07A',\n  'contradicts': '#98D8C8'\n}\n\n// 计算属性\nconst relationTypes = computed(() => {\n  const types = new Set()\n  graphData.value.edges.forEach(edge => {\n    types.add(edge.type)\n  })\n  return Array.from(types)\n})\n\nconst filteredEdges = computed(() => {\n  if (relationFilter.value.length === 0) {\n    return graphData.value.edges\n  }\n  return graphData.value.edges.filter(edge =>\n    relationFilter.value.includes(edge.type)\n  )\n})\n\n// 方法\nconst initGraph = () => {\n  if (!svgElement.value) return\n\n  const container = graphContainer.value\n  const width = container.clientWidth\n  const height = container.clientHeight\n\n  // 创建SVG\n  svg = d3.select(svgElement.value)\n    .attr('width', width)\n    .attr('height', height)\n\n  // 添加缩放行为\n  zoom = d3.zoom()\n    .scaleExtent([0.1, 4])\n    .on('zoom', (event) => {\n      g.attr('transform', event.transform)\n    })\n\n  svg.call(zoom)\n\n  // 创建主分组\n  g = svg.append('g')\n    .attr('width', width)\n    .attr('height', height)\n\n  // 添加箭头标记\n  svg.append('defs').selectAll('marker')\n    .data(Object.keys(relationColors))\n    .join('marker')\n    .attr('id', d => `arrow-${d}`)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', 20)\n    .attr('refY', 5)\n    .attr('markerWidth', 6)\n    .attr('markerHeight', 6)\n    .attr('orient', 'auto-start-reverse')\n    .append('path')\n    .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n    .attr('fill', d => relationColors[d])\n}\n\nconst updateGraph = () => {\n  // 准备节点数据\n  const nodes = Object.entries(graphData.value.nodes).map(([id, data]) => ({\n    id: parseInt(id),\n    ...data\n  }))\n\n  // 创建力导向布局\n  simulation = d3.forceSimulation(nodes)\n    .force('link', d3.forceLink(filteredEdges.value)\n      .id(d => d.id)\n      .distance(100)\n    )\n    .force('charge', d3.forceManyBody().strength(-300))\n    .force('center', d3.forceCenter(\n      graphContainer.value.clientWidth / 2,\n      graphContainer.value.clientHeight / 2\n    ))\n    .force('collision', d3.forceCollide().radius(30))\n\n  // 绘制边\n  const links = g.append('g')\n    .attr('class', 'links')\n    .selectAll('line')\n    .data(filteredEdges.value)\n    .join('line')\n    .attr('stroke', d => relationColors[d.type] || '#999')\n    .attr('stroke-width', d => Math.max(1, d.strength * 3))\n    .attr('marker-end', d => `url(#arrow-${d.type})`)\n    .attr('opacity', 0.6)\n\n  // 绘制节点\n  const nodeElements = g.append('g')\n    .attr('class', 'nodes')\n    .selectAll('g')\n    .data(nodes)\n    .join('g')\n    .attr('class', 'node')\n    .call(d3.drag()\n      .on('start', dragstarted)\n      .on('drag', dragged)\n      .on('end', dragended)\n    )\n    .on('click', (event, d) => showNodeDetail(d))\n\n  // 节点圆形\n  nodeElements.append('circle')\n    .attr('r', 20)\n    .attr('fill', '#4ECDC4')\n    .attr('stroke', '#fff')\n    .attr('stroke-width', 2)\n\n  // 节点标签\n  nodeElements.append('text')\n    .text(d => d.data.title ? d.data.title.substring(0, 15) + '...' : 'Paper')\n    .attr('x', 25)\n    .attr('y', 5)\n    .attr('font-size', '10px')\n    .attr('fill', '#333')\n\n  // 更新位置\n  simulation.on('tick', () => {\n    links\n      .attr('x1', d => d.source.x)\n      .attr('y1', d => d.source.y)\n      .attr('x2', d => d.target.x)\n      .attr('y2', d => d.target.y)\n\n    nodeElements\n      .attr('transform', d => `translate(${d.x},${d.y})`)\n  })\n}\n\nconst showNodeDetail = (nodeData) => {\n  selectedNode.value = { data: nodeData }\n\n  // 查找关联节点\n  connectedNodes.value = []\n  filteredEdges.value.forEach(edge => {\n    if (edge.source.id === nodeData.id) {\n      const connected = graphData.value.nodes[edge.target.id]\n      if (connected) {\n        connectedNodes.value.push({ data: connected, relation: edge.type })\n      }\n    } else if (edge.target.id === nodeData.id) {\n      const connected = graphData.value.nodes[edge.source.id]\n      if (connected) {\n        connectedNodes.value.push({ data: connected, relation: edge.type })\n      }\n    }\n  })\n\n  drawerVisible.value = true\n}\n\nconst focusNode = (nodeId) => {\n  // 缩放到指定节点\n  const node = graphData.value.nodes[nodeId]\n  if (node && svg) {\n    const transform = d3.zoomIdentity\n      .translate(\n        graphContainer.value.clientWidth / 2,\n        graphContainer.value.clientHeight / 2\n      )\n      .scale(2)\n      .translate(-node.x || 0, -node.y || 0)\n\n    svg.transition()\n      .duration(750)\n      .call(zoom.transform, transform)\n  }\n}\n\nconst dragstarted = (event, d) => {\n  if (!event.active) simulation.alphaTarget(0.3).restart()\n  d.fx = d.x\n  d.fy = d.y\n}\n\nconst dragged = (event, d) => {\n  d.fx = event.x\n  d.fy = event.y\n}\n\nconst dragended = (event, d) => {\n  if (!event.active) simulation.alphaTarget(0)\n  d.fx = null\n  d.fy = null\n}\n\nconst getRelationColor = (type) => {\n  return relationColors[type] || '#999'\n}\n\nconst refreshGraph = async () => {\n  loading.value = true\n  try {\n    const response = await api.getKnowledgeGraph(props.paperIds)\n    if (response.success) {\n      graphData.value = response.data\n      updateGraph()\n      ElMessage.success('图谱刷新成功')\n    }\n  } catch (error) {\n    ElMessage.error('图谱加载失败')\n    console.error(error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst resetZoom = () => {\n  if (svg && zoom) {\n    svg.transition()\n      .duration(750)\n      .call(zoom.transform, d3.zoomIdentity)\n  }\n}\n\n// 生命周期\nonMounted(() => {\n  initGraph()\n  refreshGraph()\n\n  // 响应式调整\n  window.addEventListener('resize', () => {\n    if (graphContainer.value && svgElement.value) {\n      const width = graphContainer.value.clientWidth\n      const height = graphContainer.value.clientHeight\n      d3.select(svgElement.value)\n        .attr('width', width)\n        .attr('height', height)\n    }\n  })\n})\n\n// 监听props变化\nwatch(() => props.paperIds, () => {\n  refreshGraph()\n})\n</script>\n\n<style scoped>\n.knowledge-graph-container {\n  width: 100%;\n  height: calc(100vh - 200px);\n  display: flex;\n  flex-direction: column;\n}\n\n.graph-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.graph-header h2 {\n  margin: 0;\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.controls {\n  display: flex;\n  gap: 12px;\n}\n\n.graph-container {\n  flex: 1;\n  position: relative;\n  background: #f8f9fa;\n  overflow: hidden;\n}\n\n.loading-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.9);\n}\n\n.node-detail h3 {\n  font-size: 18px;\n  margin-bottom: 16px;\n  color: #303133;\n}\n\n.connected-papers {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.paper-card {\n  cursor: pointer;\n}\n\n.paper-title {\n  font-size: 14px;\n  font-weight: 600;\n  color: #409EFF;\n  margin-bottom: 8px;\n}\n\n.paper-title:hover {\n  text-decoration: underline;\n}\n\n.paper-meta {\n  display: flex;\n  gap: 12px;\n  font-size: 12px;\n  color: #909399;\n}\n\n.legend-panel {\n  position: absolute;\n  bottom: 20px;\n  right: 20px;\n  background: rgba(255, 255, 255, 0.95);\n  padding: 16px;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n}\n\n.legend-title {\n  font-weight: 600;\n  margin-bottom: 12px;\n}\n\n.legend-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n  font-size: 12px;\n}\n\n.legend-color {\n  width: 20px;\n  height: 4px;\n  border-radius: 2px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}