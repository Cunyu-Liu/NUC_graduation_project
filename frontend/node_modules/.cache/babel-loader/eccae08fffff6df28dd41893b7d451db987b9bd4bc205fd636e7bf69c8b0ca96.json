{"ast":null,"code":"import { ref, getCurrentInstance, inject, computed } from 'vue';\nimport { checkboxGroupContextKey } from '../constants.mjs';\nimport { isUndefined } from '../../../../utils/types.mjs';\nimport { isArray } from '@vue/shared';\nimport { UPDATE_MODEL_EVENT } from '../../../../constants/event.mjs';\nconst useCheckboxModel = props => {\n  const selfModel = ref(false);\n  const {\n    emit\n  } = getCurrentInstance();\n  const checkboxGroup = inject(checkboxGroupContextKey, void 0);\n  const isGroup = computed(() => isUndefined(checkboxGroup) === false);\n  const isLimitExceeded = ref(false);\n  const model = computed({\n    get() {\n      var _a, _b;\n      return isGroup.value ? (_a = checkboxGroup == null ? void 0 : checkboxGroup.modelValue) == null ? void 0 : _a.value : (_b = props.modelValue) != null ? _b : selfModel.value;\n    },\n    set(val) {\n      var _a, _b;\n      if (isGroup.value && isArray(val)) {\n        isLimitExceeded.value = ((_a = checkboxGroup == null ? void 0 : checkboxGroup.max) == null ? void 0 : _a.value) !== void 0 && val.length > (checkboxGroup == null ? void 0 : checkboxGroup.max.value) && val.length > model.value.length;\n        isLimitExceeded.value === false && ((_b = checkboxGroup == null ? void 0 : checkboxGroup.changeEvent) == null ? void 0 : _b.call(checkboxGroup, val));\n      } else {\n        emit(UPDATE_MODEL_EVENT, val);\n        selfModel.value = val;\n      }\n    }\n  });\n  return {\n    model,\n    isGroup,\n    isLimitExceeded\n  };\n};\nexport { useCheckboxModel };","map":{"version":3,"names":["useCheckboxModel","props","selfModel","ref","emit","getCurrentInstance","checkboxGroup","inject","checkboxGroupContextKey","isGroup","computed","isUndefined","isLimitExceeded","model","get","_a","_b","value","modelValue","set","val","isArray","max","length","changeEvent","call","UPDATE_MODEL_EVENT"],"sources":["../../../../../../../packages/components/checkbox/src/composables/use-checkbox-model.ts"],"sourcesContent":["import { computed, getCurrentInstance, inject, ref } from 'vue'\nimport { isArray, isUndefined } from '@element-plus/utils'\nimport { UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport { checkboxGroupContextKey } from '../constants'\n\nimport type { CheckboxProps } from '../checkbox'\n\nexport const useCheckboxModel = (props: CheckboxProps) => {\n  const selfModel = ref<unknown>(false)\n  const { emit } = getCurrentInstance()!\n  const checkboxGroup = inject(checkboxGroupContextKey, undefined)\n  const isGroup = computed(() => isUndefined(checkboxGroup) === false)\n  const isLimitExceeded = ref(false)\n  const model = computed({\n    get() {\n      return isGroup.value\n        ? checkboxGroup?.modelValue?.value\n        : (props.modelValue ?? selfModel.value)\n    },\n\n    set(val: unknown) {\n      if (isGroup.value && isArray(val)) {\n        isLimitExceeded.value =\n          checkboxGroup?.max?.value !== undefined &&\n          val.length > checkboxGroup?.max.value &&\n          val.length > model.value.length\n        isLimitExceeded.value === false && checkboxGroup?.changeEvent?.(val)\n      } else {\n        emit(UPDATE_MODEL_EVENT, val)\n        selfModel.value = val\n      }\n    },\n  })\n\n  return {\n    model,\n    isGroup,\n    isLimitExceeded,\n  }\n}\n\nexport type CheckboxModel = ReturnType<typeof useCheckboxModel>\n"],"mappings":";;;;;AAOa,MAAAA,gBAAA,GAAoBC,KAAyB;EAClD,MAAAC,SAAA,GAAYC,GAAA,CAAa,KAAK;EAC9B;IAAEC;EAAK,IAAIC,kBAAmB;EAC9B,MAAAC,aAAA,GAAgBC,MAAO,CAAAC,uBAAA,EAAyB,KAAS;EAC/D,MAAMC,OAAA,GAAUC,QAAS,OAAMC,WAAY,CAAAL,aAAa,MAAM,KAAK;EAC7D,MAAAM,eAAA,GAAkBT,GAAA,CAAI,KAAK;EACjC,MAAMU,KAAA,GAAQH,QAAS;IACrBI,GAAMA,CAAA;MAdV,IAAAC,EAAA,EAAAC,EAAA;MAea,OAAAP,OAAA,CAAQQ,KAAA,IACXF,EAAe,GAAAT,aAAA,oBAAAA,aAAA,CAAAY,UAAA,KAAf,gBAAAH,EAAA,CAA2BE,KAC1B,IAAAD,EAAA,GAAAf,KAAA,CAAMiB,UAAN,YAAAF,EAAA,GAAoBd,SAAU,CAAAe,KAAA;IAAA,CACrC;IAEAE,IAAIC,GAAc;MApBtB,IAAAL,EAAA,EAAAC,EAAA;MAqBM,IAAIP,OAAQ,CAAAQ,KAAA,IAASI,OAAQ,CAAAD,GAAG,CAAG;QACjCR,eAAA,CAAgBK,KACd,KAAAF,EAAA,GAAAT,aAAA,oBAAAA,aAAA,CAAegB,GAAf,qBAAAP,EAAA,CAAoBE,KAAA,MAAU,KAC9B,KAAAG,GAAA,CAAIG,MAAS,IAAAjB,aAAA,oBAAAA,aAAA,CAAegB,GAAI,CAAAL,KAAA,KAChCG,GAAI,CAAAG,MAAA,GAASV,KAAA,CAAMI,KAAM,CAAAM,MAAA;QAC3BX,eAAA,CAAgBK,KAAU,gBAASD,EAAe,GAAAV,aAAA,oBAAAA,aAAA,CAAAkB,WAAA,KAAf,IAA6B,YAAAR,EAAA,CAAAS,IAAA,CAAAnB,aAAA,EAAAc,GAAA;MAAA,CAC3D;QACLhB,IAAA,CAAKsB,kBAAA,EAAoBN,GAAG;QAC5BlB,SAAA,CAAUe,KAAQ,GAAAG,GAAA;MAAA;IACpB;EACF,CACD;EAEM;IACLP,KAAA;IACAJ,OAAA;IACAG;EAAA,CACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}