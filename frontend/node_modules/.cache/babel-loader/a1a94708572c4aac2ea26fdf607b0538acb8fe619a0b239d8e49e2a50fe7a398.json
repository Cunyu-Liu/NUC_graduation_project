{"ast":null,"code":"import { ref, onMounted, watch } from 'vue';\nimport { isNumber, isUndefined } from '../../utils/types.mjs';\nimport { isObject } from '@vue/shared';\nconst useThrottleRender = (loading, throttle = 0) => {\n  if (throttle === 0) return loading;\n  const initVal = isObject(throttle) && Boolean(throttle.initVal);\n  const throttled = ref(initVal);\n  let timeoutHandle = null;\n  const dispatchThrottling = timer => {\n    if (isUndefined(timer)) {\n      throttled.value = loading.value;\n      return;\n    }\n    if (timeoutHandle) {\n      clearTimeout(timeoutHandle);\n    }\n    timeoutHandle = setTimeout(() => {\n      throttled.value = loading.value;\n    }, timer);\n  };\n  const dispatcher = type => {\n    if (type === \"leading\") {\n      if (isNumber(throttle)) {\n        dispatchThrottling(throttle);\n      } else {\n        dispatchThrottling(throttle.leading);\n      }\n    } else {\n      if (isObject(throttle)) {\n        dispatchThrottling(throttle.trailing);\n      } else {\n        throttled.value = false;\n      }\n    }\n  };\n  onMounted(() => dispatcher(\"leading\"));\n  watch(() => loading.value, val => {\n    dispatcher(val ? \"leading\" : \"trailing\");\n  });\n  return throttled;\n};\nexport { useThrottleRender };","map":{"version":3,"names":["useThrottleRender","loading","throttle","initVal","isObject","Boolean","throttled","ref","timeoutHandle","dispatchThrottling","timer","isUndefined","value","clearTimeout","setTimeout","dispatcher","type","isNumber","leading","trailing","onMounted","watch","val"],"sources":["../../../../../packages/hooks/use-throttle-render/index.ts"],"sourcesContent":["import { onMounted, ref, watch } from 'vue'\nimport { isNumber, isObject, isUndefined } from '@element-plus/utils'\n\nimport type { Ref } from 'vue'\n\nexport type ThrottleType =\n  | { leading?: number; trailing?: number; initVal?: boolean }\n  | number\n\nexport const useThrottleRender = (\n  loading: Ref<boolean>,\n  throttle: ThrottleType = 0\n) => {\n  if (throttle === 0) return loading\n  const initVal = isObject(throttle) && Boolean(throttle.initVal)\n  const throttled = ref(initVal)\n  let timeoutHandle: ReturnType<typeof setTimeout> | null = null\n\n  const dispatchThrottling = (timer: number | undefined) => {\n    if (isUndefined(timer)) {\n      throttled.value = loading.value\n      return\n    }\n    if (timeoutHandle) {\n      clearTimeout(timeoutHandle)\n    }\n    timeoutHandle = setTimeout(() => {\n      throttled.value = loading.value\n    }, timer)\n  }\n\n  const dispatcher = (type: 'leading' | 'trailing') => {\n    if (type === 'leading') {\n      if (isNumber(throttle)) {\n        dispatchThrottling(throttle)\n      } else {\n        dispatchThrottling(throttle.leading)\n      }\n    } else {\n      if (isObject(throttle)) {\n        dispatchThrottling(throttle.trailing)\n      } else {\n        throttled.value = false\n      }\n    }\n  }\n\n  onMounted(() => dispatcher('leading'))\n\n  watch(\n    () => loading.value,\n    (val) => {\n      dispatcher(val ? 'leading' : 'trailing')\n    }\n  )\n\n  return throttled\n}\n"],"mappings":";;;AASO,MAAMA,iBAAoB,GAAAA,CAC/BC,OACA,EAAAC,QAAA,GAAyB,CACtB;EACH,IAAIA,QAAa,QAAU,OAAAD,OAAA;EAC3B,MAAME,OAAA,GAAUC,QAAS,CAAAF,QAAQ,CAAK,IAAAG,OAAA,CAAQH,QAAA,CAASC,OAAO;EACxD,MAAAG,SAAA,GAAYC,GAAA,CAAIJ,OAAO;EAC7B,IAAIK,aAAsD;EAEpD,MAAAC,kBAAA,GAAsBC,KAA8B;IACpD,IAAAC,WAAA,CAAYD,KAAK,CAAG;MACtBJ,SAAA,CAAUM,KAAA,GAAQX,OAAQ,CAAAW,KAAA;MAC1B;IAAA;IAEF,IAAIJ,aAAe;MACjBK,YAAA,CAAaL,aAAa;IAAA;IAE5BA,aAAA,GAAgBM,UAAA,CAAW,MAAM;MAC/BR,SAAA,CAAUM,KAAA,GAAQX,OAAQ,CAAAW,KAAA;IAAA,GACzBF,KAAK;EAAA,CACV;EAEM,MAAAK,UAAA,GAAcC,IAAiC;IACnD,IAAIA,IAAA,KAAS,SAAW;MAClB,IAAAC,QAAA,CAASf,QAAQ,CAAG;QACtBO,kBAAA,CAAmBP,QAAQ;MAAA,CACtB;QACLO,kBAAA,CAAmBP,QAAA,CAASgB,OAAO;MAAA;IACrC,CACK;MACD,IAAAd,QAAA,CAASF,QAAQ,CAAG;QACtBO,kBAAA,CAAmBP,QAAA,CAASiB,QAAQ;MAAA,CAC/B;QACLb,SAAA,CAAUM,KAAQ;MAAA;IACpB;EACF,CACF;EAEUQ,SAAA,OAAML,UAAW,UAAS,CAAC;EAErCM,KAAA,CACE,MAAMpB,OAAQ,CAAAW,KAAA,EACbU,GAAQ;IACIP,UAAA,CAAAO,GAAA,GAAM,YAAY,UAAU;EAAA,CACzC,CACF;EAEO,OAAAhB,SAAA;AACT","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}