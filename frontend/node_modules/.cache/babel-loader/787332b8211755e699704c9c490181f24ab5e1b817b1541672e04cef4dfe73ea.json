{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport ElementPlus from 'element-plus';\nimport 'element-plus/dist/index.css';\nimport zhCn from 'element-plus/es/locale/lang/zh-cn';\nconst app = createApp(App);\napp.use(store);\napp.use(router);\napp.use(ElementPlus, {\n  locale: zhCn\n});\n\n// 应用启动时验证token有效性\nconst token = localStorage.getItem('token');\nif (token) {\n  // 设置认证状态\n  store.commit('SET_TOKEN', token);\n  // 获取用户信息\n  store.dispatch('fetchCurrentUser').then(response => {\n    if (!response.success) {\n      console.log('[App] Token无效，清除认证状态');\n      store.commit('CLEAR_AUTH');\n      // 如果不在登录页，跳转到登录页\n      if (router.currentRoute.value.path !== '/login') {\n        router.push('/login');\n      }\n    }\n  });\n}\napp.mount('#app');","map":{"version":3,"names":["createApp","App","router","store","ElementPlus","zhCn","app","use","locale","token","localStorage","getItem","commit","dispatch","then","response","success","console","log","currentRoute","value","path","push","mount"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/main.js"],"sourcesContent":["import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\nimport ElementPlus from 'element-plus'\nimport 'element-plus/dist/index.css'\nimport zhCn from 'element-plus/es/locale/lang/zh-cn'\n\nconst app = createApp(App)\n\napp.use(store)\napp.use(router)\napp.use(ElementPlus, { locale: zhCn })\n\n// 应用启动时验证token有效性\nconst token = localStorage.getItem('token')\nif (token) {\n  // 设置认证状态\n  store.commit('SET_TOKEN', token)\n  // 获取用户信息\n  store.dispatch('fetchCurrentUser').then(response => {\n    if (!response.success) {\n      console.log('[App] Token无效，清除认证状态')\n      store.commit('CLEAR_AUTH')\n      // 如果不在登录页，跳转到登录页\n      if (router.currentRoute.value.path !== '/login') {\n        router.push('/login')\n      }\n    }\n  })\n}\n\napp.mount('#app')\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,KAAK;AAC/B,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,WAAW,MAAM,cAAc;AACtC,OAAO,6BAA6B;AACpC,OAAOC,IAAI,MAAM,mCAAmC;AAEpD,MAAMC,GAAG,GAAGN,SAAS,CAACC,GAAG,CAAC;AAE1BK,GAAG,CAACC,GAAG,CAACJ,KAAK,CAAC;AACdG,GAAG,CAACC,GAAG,CAACL,MAAM,CAAC;AACfI,GAAG,CAACC,GAAG,CAACH,WAAW,EAAE;EAAEI,MAAM,EAAEH;AAAK,CAAC,CAAC;;AAEtC;AACA,MAAMI,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;AAC3C,IAAIF,KAAK,EAAE;EACT;EACAN,KAAK,CAACS,MAAM,CAAC,WAAW,EAAEH,KAAK,CAAC;EAChC;EACAN,KAAK,CAACU,QAAQ,CAAC,kBAAkB,CAAC,CAACC,IAAI,CAACC,QAAQ,IAAI;IAClD,IAAI,CAACA,QAAQ,CAACC,OAAO,EAAE;MACrBC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnCf,KAAK,CAACS,MAAM,CAAC,YAAY,CAAC;MAC1B;MACA,IAAIV,MAAM,CAACiB,YAAY,CAACC,KAAK,CAACC,IAAI,KAAK,QAAQ,EAAE;QAC/CnB,MAAM,CAACoB,IAAI,CAAC,QAAQ,CAAC;MACvB;IACF;EACF,CAAC,CAAC;AACJ;AAEAhB,GAAG,CAACiB,KAAK,CAAC,MAAM,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}