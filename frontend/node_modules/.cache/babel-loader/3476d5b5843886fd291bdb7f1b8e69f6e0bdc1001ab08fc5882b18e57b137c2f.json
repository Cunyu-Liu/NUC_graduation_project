{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { defineComponent, computed, unref, reactive, toRefs, getCurrentInstance, onBeforeUnmount, nextTick, withDirectives, openBlock, createElementBlock, normalizeClass, withModifiers, renderSlot, createElementVNode, toDisplayString, vShow } from 'vue';\nimport { useOption } from './useOption.mjs';\nimport { COMPONENT_NAME, optionProps } from './option.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useId } from '../../../hooks/use-id/index.mjs';\nconst _sfc_main = defineComponent({\n  name: COMPONENT_NAME,\n  componentName: COMPONENT_NAME,\n  props: optionProps,\n  setup(props) {\n    const ns = useNamespace(\"select\");\n    const id = useId();\n    const containerKls = computed(() => [ns.be(\"dropdown\", \"item\"), ns.is(\"disabled\", unref(isDisabled)), ns.is(\"selected\", unref(itemSelected)), ns.is(\"hovering\", unref(hover))]);\n    const states = reactive({\n      index: -1,\n      groupDisabled: false,\n      visible: true,\n      hover: false\n    });\n    const {\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      hoverItem,\n      updateOption\n    } = useOption(props, states);\n    const {\n      visible,\n      hover\n    } = toRefs(states);\n    const vm = getCurrentInstance().proxy;\n    select.onOptionCreate(vm);\n    onBeforeUnmount(() => {\n      const key = vm.value;\n      nextTick(() => {\n        const {\n          selected: selectedOptions\n        } = select.states;\n        const doesSelected = selectedOptions.some(item => {\n          return item.value === vm.value;\n        });\n        if (select.states.cachedOptions.get(key) === vm && !doesSelected) {\n          select.states.cachedOptions.delete(key);\n        }\n      });\n      select.onOptionDestroy(key, vm);\n    });\n    function selectOptionClick() {\n      if (!isDisabled.value) {\n        select.handleOptionSelect(vm);\n      }\n    }\n    return {\n      ns,\n      id,\n      containerKls,\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      visible,\n      hover,\n      states,\n      hoverItem,\n      updateOption,\n      selectOptionClick\n    };\n  }\n});\nconst _hoisted_1 = [\"id\", \"aria-disabled\", \"aria-selected\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return withDirectives((openBlock(), createElementBlock(\"li\", {\n    id: _ctx.id,\n    class: normalizeClass(_ctx.containerKls),\n    role: \"option\",\n    \"aria-disabled\": _ctx.isDisabled || void 0,\n    \"aria-selected\": _ctx.itemSelected,\n    onMousemove: _cache[0] || (_cache[0] = (...args) => _ctx.hoverItem && _ctx.hoverItem(...args)),\n    onClick: _cache[1] || (_cache[1] = withModifiers((...args) => _ctx.selectOptionClick && _ctx.selectOptionClick(...args), [\"stop\"])),\n    onMousedown: _cache[2] || (_cache[2] = withModifiers(() => {}, [\"prevent\"]))\n  }, [renderSlot(_ctx.$slots, \"default\", {}, () => [createElementVNode(\"span\", null, toDisplayString(_ctx.currentLabel), 1)])], 42, _hoisted_1)), [[vShow, _ctx.visible]]);\n}\nvar Option = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue\"]]);\nexport { Option as default };","map":{"version":3,"names":["_sfc_main","defineComponent","name","COMPONENT_NAME","componentName","props","optionProps","setup","ns","useNamespace","id","useId","containerKls","computed","be","is","unref","isDisabled","itemSelected","hover","states","reactive","index","groupDisabled","visible","currentLabel","select","hoverItem","updateOption","useOption","toRefs","vm","getCurrentInstance","proxy","onOptionCreate","onBeforeUnmount","key","value","nextTick","selected","selectedOptions","doesSelected","some","item","cachedOptions","get","delete","onOptionDestroy","selectOptionClick","handleOptionSelect","createElementBlock","_ctx","class","normalizeClass","role","onMousemove","_cache","args","onClick","withModifiers","onMousedown","renderSlot","$slots","createElementVNode","toDisplayString","_hoisted_1"],"sources":["../../../../../../packages/components/select/src/option.vue"],"sourcesContent":["<template>\n  <li\n    v-show=\"visible\"\n    :id=\"id\"\n    :class=\"containerKls\"\n    role=\"option\"\n    :aria-disabled=\"isDisabled || undefined\"\n    :aria-selected=\"itemSelected\"\n    @mousemove=\"hoverItem\"\n    @click.stop=\"selectOptionClick\"\n    @mousedown.prevent\n  >\n    <slot>\n      <span>{{ currentLabel }}</span>\n    </slot>\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  nextTick,\n  onBeforeUnmount,\n  reactive,\n  toRefs,\n  unref,\n} from 'vue'\nimport { useId, useNamespace } from '@element-plus/hooks'\nimport { useOption } from './useOption'\nimport { COMPONENT_NAME, optionProps } from './option'\n\nimport type {\n  OptionExposed,\n  OptionInternalInstance,\n  OptionStates,\n} from './type'\n\nexport default defineComponent({\n  name: COMPONENT_NAME,\n  componentName: COMPONENT_NAME,\n\n  props: optionProps,\n\n  setup(props) {\n    const ns = useNamespace('select')\n    const id = useId()\n\n    const containerKls = computed(() => [\n      ns.be('dropdown', 'item'),\n      ns.is('disabled', unref(isDisabled)),\n      ns.is('selected', unref(itemSelected)),\n      ns.is('hovering', unref(hover)),\n    ])\n\n    const states = reactive<OptionStates>({\n      index: -1,\n      groupDisabled: false,\n      visible: true,\n      hover: false,\n    })\n\n    const {\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      hoverItem,\n      updateOption,\n    } = useOption(props, states)\n\n    const { visible, hover } = toRefs(states)\n\n    const vm = (getCurrentInstance()! as OptionInternalInstance).proxy\n\n    select.onOptionCreate(vm)\n\n    onBeforeUnmount(() => {\n      const key = vm.value\n\n      // if option is not selected, remove it from cache\n      nextTick(() => {\n        const { selected: selectedOptions } = select.states\n        const doesSelected = selectedOptions.some((item) => {\n          return item.value === vm.value\n        })\n        if (select.states.cachedOptions.get(key) === vm && !doesSelected) {\n          select.states.cachedOptions.delete(key)\n        }\n      })\n      select.onOptionDestroy(key, vm)\n    })\n\n    function selectOptionClick() {\n      if (!isDisabled.value) {\n        select.handleOptionSelect(vm)\n      }\n    }\n\n    return {\n      ns,\n      id,\n      containerKls,\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      visible,\n      hover,\n      states,\n\n      hoverItem,\n      updateOption,\n      selectOptionClick,\n    } satisfies OptionExposed\n  },\n})\n</script>\n"],"mappings":";;;;;;;;AAuCA,MAAKA,SAAA,GAAaC,eAAa;EAC7BC,IAAM,EAAAC,cAAA;EACNC,aAAe,EAAAD,cAAA;EAEfE,KAAO,EAAAC,WAAA;EAEPC,MAAMF,KAAO;IACL,MAAAG,EAAA,GAAKC,YAAA,CAAa,QAAQ;IAChC,MAAMC,EAAA,GAAKC,KAAM;IAEX,MAAAC,YAAA,GAAeC,QAAA,CAAS,MAAM,CAClCL,EAAA,CAAGM,EAAG,aAAY,MAAM,GACxBN,EAAG,CAAAO,EAAA,CAAG,UAAY,EAAAC,KAAA,CAAMC,UAAU,CAAC,GACnCT,EAAG,CAAAO,EAAA,CAAG,UAAY,EAAAC,KAAA,CAAME,YAAY,CAAC,GACrCV,EAAG,CAAAO,EAAA,CAAG,UAAY,EAAAC,KAAA,CAAMG,KAAK,CAAC,EAC/B;IAED,MAAMC,MAAA,GAASC,QAAuB;MACpCC,KAAO;MACPC,aAAe;MACfC,OAAS;MACTL,KAAO;IAAA,CACR;IAEK;MACJM,YAAA;MACAP,YAAA;MACAD,UAAA;MACAS,MAAA;MACAC,SAAA;MACAC;IAAA,CACF,GAAIC,SAAU,CAAAxB,KAAA,EAAOe,MAAM;IAE3B,MAAM;MAAEI,OAAA;MAASL;IAAM,IAAIW,MAAA,CAAOV,MAAM;IAElC,MAAAW,EAAA,GAAMC,kBAAA,EAAiD,CAAAC,KAAA;IAE7DP,MAAA,CAAOQ,cAAA,CAAeH,EAAE;IAExBI,eAAA,CAAgB,MAAM;MACpB,MAAMC,GAAA,GAAML,EAAG,CAAAM,KAAA;MAGfC,QAAA,CAAS,MAAM;QACb,MAAM;UAAEC,QAAA,EAAUC;QAAgB,IAAId,MAAO,CAAAN,MAAA;QAC7C,MAAMqB,YAAe,GAAAD,eAAA,CAAgBE,IAAK,CAACC,IAAS;UAC3C,OAAAA,IAAA,CAAKN,KAAA,KAAUN,EAAG,CAAAM,KAAA;QAAA,CAC1B;QACG,IAAAX,MAAA,CAAON,MAAA,CAAOwB,aAAc,CAAAC,GAAA,CAAIT,GAAG,CAAM,KAAAL,EAAA,IAAM,CAACU,YAAc;UACzDf,MAAA,CAAAN,MAAA,CAAOwB,aAAc,CAAAE,MAAA,CAAOV,GAAG;QAAA;MACxC,CACD;MACMV,MAAA,CAAAqB,eAAA,CAAgBX,GAAA,EAAKL,EAAE;IAAA,CAC/B;IAED,SAASiB,iBAAoBA,CAAA;MACvB,KAAC/B,UAAA,CAAWoB,KAAO;QACrBX,MAAA,CAAOuB,kBAAA,CAAmBlB,EAAE;MAAA;IAC9B;IAGK;MACLvB,EAAA;MACAE,EAAA;MACAE,YAAA;MACAa,YAAA;MACAP,YAAA;MACAD,UAAA;MACAS,MAAA;MACAF,OAAA;MACAL,KAAA;MACAC,MAAA;MAEAO,SAAA;MACAC,YAAA;MACAoB;IAAA,CACF;EAAA;AAEJ,CAAC;;;oCApHC,EAAAE,kBAAA,CAcK;IAZFxC,EAAA,EAAIyC,IAAA,CAAAzC,EAAA;IACJ0C,KAAA,EAAKC,cAAE,CAAAF,IAAA,CAAYvC,YAAA;IACpB0C,IAAK;IACJ,iBAAeH,IAAA,CAAclC,UAAA;IAC7B,iBAAekC,IAAA,CAAAjC,YAAA;IACfqC,WAAS,EAAAC,MAAA,CAAE,OAAAA,MAAA,UAAAC,IAAA,KAAAN,IAAA,CAAAxB,SAAA,IAAAwB,IAAA,CAAAxB,SAAA,IAAA8B,IAAA;IACXC,OAAA,EAAKF,MAAA,QAAAA,MAAA,MAAAG,aAAA,KAAAF,IAAA,KAAON,IAAiB,CAAAH,iBAAA,IAAAG,IAAA,CAAAH,iBAAA,IAAAS,IAAA;IAC7BG,WAAA,EAASJ,MAAV,QAAAA,MAAA,MAAAG,aAAA,SAAkB;EAAA,IAElBE,UAAA,CAEOV,IAAA,CAAAW,MAAA,iBAFP,MAEO,CADLC,kBAAA,CAA+B,cAAAC,eAAA,CAAtBb,IAAA,CAAY1B,YAAA,cAAAwC,UAAA,K,MAXf,EAAAd,IAAA,CAAO3B,OAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}