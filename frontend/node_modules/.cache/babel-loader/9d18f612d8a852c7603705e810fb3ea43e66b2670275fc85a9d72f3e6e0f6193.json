{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nexport default {\n  name: 'Files',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const files = computed(() => store.state.files);\n    const formatSize = (row, column, size) => {\n      return (size / 1024 / 1024).toFixed(2) + ' MB';\n    };\n    const formatTime = (row, column, time) => {\n      return new Date(time).toLocaleString('zh-CN');\n    };\n    const analyzeFile = file => {\n      router.push({\n        path: '/analyze',\n        query: {\n          file: file.filename\n        }\n      });\n    };\n    const deleteFile = async file => {\n      try {\n        await ElMessageBox.confirm(`确定要删除文件 \"${file.filename}\" 吗？`, '确认删除', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        });\n        const success = await store.dispatch('deleteFile', file.filename);\n        if (success) {\n          ElMessage.success('删除成功');\n        } else {\n          ElMessage.error('删除失败');\n        }\n      } catch {\n        // 用户取消\n      }\n    };\n    onMounted(() => {\n      store.dispatch('fetchFiles');\n    });\n    return {\n      files,\n      formatSize,\n      formatTime,\n      analyzeFile,\n      deleteFile\n    };\n  }\n};","map":{"version":3,"names":["computed","onMounted","useStore","useRouter","ElMessage","ElMessageBox","name","setup","store","router","files","state","formatSize","row","column","size","toFixed","formatTime","time","Date","toLocaleString","analyzeFile","file","push","path","query","filename","deleteFile","confirm","confirmButtonText","cancelButtonText","type","success","dispatch","error"],"sources":["/Users/liucunyu/Documents/all_code/nuc_Graduation_project/frontend/src/views/Files.vue"],"sourcesContent":["<template>\n  <div class=\"files\">\n    <h2>文件管理</h2>\n\n    <el-card>\n      <el-table :data=\"files\" style=\"width: 100%\">\n        <el-table-column prop=\"filename\" label=\"文件名\" />\n        <el-table-column prop=\"size\" label=\"大小\" :formatter=\"formatSize\" />\n        <el-table-column prop=\"uploadedAt\" label=\"上传时间\" :formatter=\"formatTime\" />\n        <el-table-column label=\"操作\" width=\"300\">\n          <template #default=\"scope\">\n            <el-button size=\"small\" @click=\"analyzeFile(scope.row)\">\n              <i class=\"el-icon-video-play\"></i> 分析\n            </el-button>\n            <el-button size=\"small\" type=\"danger\" @click=\"deleteFile(scope.row)\">\n              <i class=\"el-icon-delete\"></i> 删除\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-empty v-if=\"files.length === 0\" description=\"暂无文件，请先上传\" />\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\n\nexport default {\n  name: 'Files',\n  setup() {\n    const store = useStore()\n    const router = useRouter()\n\n    const files = computed(() => store.state.files)\n\n    const formatSize = (row, column, size) => {\n      return (size / 1024 / 1024).toFixed(2) + ' MB'\n    }\n\n    const formatTime = (row, column, time) => {\n      return new Date(time).toLocaleString('zh-CN')\n    }\n\n    const analyzeFile = (file) => {\n      router.push({ path: '/analyze', query: { file: file.filename } })\n    }\n\n    const deleteFile = async (file) => {\n      try {\n        await ElMessageBox.confirm(\n          `确定要删除文件 \"${file.filename}\" 吗？`,\n          '确认删除',\n          {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }\n        )\n\n        const success = await store.dispatch('deleteFile', file.filename)\n        if (success) {\n          ElMessage.success('删除成功')\n        } else {\n          ElMessage.error('删除失败')\n        }\n      } catch {\n        // 用户取消\n      }\n    }\n\n    onMounted(() => {\n      store.dispatch('fetchFiles')\n    })\n\n    return {\n      files,\n      formatSize,\n      formatTime,\n      analyzeFile,\n      deleteFile\n    }\n  }\n}\n</script>\n\n<style scoped>\n.files {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\nh2 {\n  margin-bottom: 20px;\n  color: #303133;\n}\n</style>\n"],"mappings":";AA2BA,SAASA,QAAQ,EAAEC,SAAQ,QAAS,KAAI;AACxC,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,SAAS,EAAEC,YAAW,QAAS,cAAa;AAErD,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIN,QAAQ,CAAC;IACvB,MAAMO,MAAK,GAAIN,SAAS,CAAC;IAEzB,MAAMO,KAAI,GAAIV,QAAQ,CAAC,MAAMQ,KAAK,CAACG,KAAK,CAACD,KAAK;IAE9C,MAAME,UAAS,GAAIA,CAACC,GAAG,EAAEC,MAAM,EAAEC,IAAI,KAAK;MACxC,OAAO,CAACA,IAAG,GAAI,IAAG,GAAI,IAAI,EAAEC,OAAO,CAAC,CAAC,IAAI,KAAI;IAC/C;IAEA,MAAMC,UAAS,GAAIA,CAACJ,GAAG,EAAEC,MAAM,EAAEI,IAAI,KAAK;MACxC,OAAO,IAAIC,IAAI,CAACD,IAAI,CAAC,CAACE,cAAc,CAAC,OAAO;IAC9C;IAEA,MAAMC,WAAU,GAAKC,IAAI,IAAK;MAC5Bb,MAAM,CAACc,IAAI,CAAC;QAAEC,IAAI,EAAE,UAAU;QAAEC,KAAK,EAAE;UAAEH,IAAI,EAAEA,IAAI,CAACI;QAAS;MAAE,CAAC;IAClE;IAEA,MAAMC,UAAS,GAAI,MAAOL,IAAI,IAAK;MACjC,IAAI;QACF,MAAMjB,YAAY,CAACuB,OAAO,CACxB,YAAYN,IAAI,CAACI,QAAQ,MAAM,EAC/B,MAAM,EACN;UACEG,iBAAiB,EAAE,IAAI;UACvBC,gBAAgB,EAAE,IAAI;UACtBC,IAAI,EAAE;QACR,CACF;QAEA,MAAMC,OAAM,GAAI,MAAMxB,KAAK,CAACyB,QAAQ,CAAC,YAAY,EAAEX,IAAI,CAACI,QAAQ;QAChE,IAAIM,OAAO,EAAE;UACX5B,SAAS,CAAC4B,OAAO,CAAC,MAAM;QAC1B,OAAO;UACL5B,SAAS,CAAC8B,KAAK,CAAC,MAAM;QACxB;MACF,EAAE,MAAM;QACN;MAAA;IAEJ;IAEAjC,SAAS,CAAC,MAAM;MACdO,KAAK,CAACyB,QAAQ,CAAC,YAAY;IAC7B,CAAC;IAED,OAAO;MACLvB,KAAK;MACLE,UAAU;MACVK,UAAU;MACVI,WAAW;MACXM;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}