{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { defineComponent, inject } from 'vue';\nimport { isEqual } from 'lodash-unified';\nimport { selectKey } from './token.mjs';\nimport { isArray, isString, isFunction } from '@vue/shared';\nvar ElOptions = defineComponent({\n  name: \"ElOptions\",\n  setup(_, {\n    slots\n  }) {\n    const select = inject(selectKey);\n    let cachedValueList = [];\n    return () => {\n      var _a, _b;\n      const children = (_a = slots.default) == null ? void 0 : _a.call(slots);\n      const valueList = [];\n      function filterOptions(children2) {\n        if (!isArray(children2)) return;\n        children2.forEach(item => {\n          var _a2, _b2, _c, _d;\n          const name = (_a2 = (item == null ? void 0 : item.type) || {}) == null ? void 0 : _a2.name;\n          if (name === \"ElOptionGroup\") {\n            filterOptions(!isString(item.children) && !isArray(item.children) && isFunction((_b2 = item.children) == null ? void 0 : _b2.default) ? (_c = item.children) == null ? void 0 : _c.default() : item.children);\n          } else if (name === \"ElOption\") {\n            valueList.push((_d = item.props) == null ? void 0 : _d.value);\n          } else if (isArray(item.children)) {\n            filterOptions(item.children);\n          }\n        });\n      }\n      if (children.length) {\n        filterOptions((_b = children[0]) == null ? void 0 : _b.children);\n      }\n      if (!isEqual(valueList, cachedValueList)) {\n        cachedValueList = valueList;\n        if (select) {\n          select.states.optionValues = valueList;\n        }\n      }\n      return children;\n    };\n  }\n});\nexport { ElOptions as default };","map":{"version":3,"names":["ElOptions","defineComponent","name","setup","_","slots","select","inject","selectKey","cachedValueList","_a","_b","children","default","call","valueList","filterOptions","children2","isArray","forEach","item","_a2","_b2","_c","_d","type","isString","isFunction","push","props","value","length","isEqual","states","optionValues"],"sources":["../../../../../../packages/components/select/src/options.ts"],"sourcesContent":["import { defineComponent, inject } from 'vue'\nimport { isEqual } from 'lodash-unified'\nimport { isArray, isFunction, isString } from '@element-plus/utils'\nimport { selectKey } from './token'\n\nimport type { Component, VNode, VNodeNormalizedChildren } from 'vue'\nimport type { OptionValue } from './type'\n\nexport default defineComponent({\n  name: 'ElOptions',\n  setup(_, { slots }) {\n    const select = inject(selectKey)\n    let cachedValueList: OptionValue[] = []\n\n    return () => {\n      const children = slots.default?.()!\n      const valueList: OptionValue[] = []\n\n      function filterOptions(children?: VNodeNormalizedChildren) {\n        if (!isArray(children)) return\n        ;(children as VNode[]).forEach((item) => {\n          const name = ((item?.type || {}) as Component)?.name\n\n          if (name === 'ElOptionGroup') {\n            filterOptions(\n              !isString(item.children) &&\n                !isArray(item.children) &&\n                isFunction(item.children?.default)\n                ? item.children?.default()\n                : item.children\n            )\n          } else if (name === 'ElOption') {\n            valueList.push(item.props?.value)\n          } else if (isArray(item.children)) {\n            filterOptions(item.children)\n          }\n        })\n      }\n\n      if (children.length) {\n        filterOptions(children[0]?.children)\n      }\n\n      if (!isEqual(valueList, cachedValueList)) {\n        cachedValueList = valueList\n        if (select) {\n          select.states.optionValues = valueList\n        }\n      }\n\n      return children\n    }\n  },\n})\n"],"mappings":";;;;;;;AAQA,IAAAA,SAAA,GAAeC,eAAgB;EAC7BC,IAAM;EACNC,KAAMA,CAAAC,CAAA,EAAG;IAAEC;EAAA,CAAS;IACZ,MAAAC,MAAA,GAASC,MAAA,CAAOC,SAAS;IAC/B,IAAIC,eAAA,GAAiC,EAAC;IAEtC,OAAO,MAAM;MAdjB,IAAAC,EAAA,EAAAC,EAAA;MAeY,MAAAC,QAAA,IAAWF,EAAA,GAAAL,KAAA,CAAMQ,OAAN,qBAAAH,EAAA,CAAAI,IAAA,CAAAT,KAAA;MACjB,MAAMU,SAAA,GAA2B,EAAC;MAElC,SAASC,cAAcC,SAAoC;QACrD,KAACC,OAAA,CAAQD,SAAQ,GAAG;QACtBA,SAAA,CAAqBE,OAAQ,CAACC,IAAS;UApBjD,IAAAC,GAAA,EAAAC,GAAA,EAAAC,EAAA,EAAAC,EAAA;UAqBU,MAAMtB,IAAA,IAASmB,GAAA,IAAAD,IAAA,oBAAAA,IAAA,CAAMK,IAAA,KAAQ,EAAC,KAAf,gBAAAJ,GAAiC,CAAAnB,IAAA;UAEhD,IAAIA,IAAA,KAAS,eAAiB;YAC5Bc,aAAA,CACE,CAACU,QAAA,CAASN,IAAK,CAAAR,QAAQ,KACrB,CAACM,OAAA,CAAQE,IAAK,CAAAR,QAAQ,CACtB,IAAAe,UAAA,EAAWL,GAAA,GAAAF,IAAK,CAAAR,QAAA,KAAL,gBAAAU,GAAe,CAAAT,OAAO,KAC/BU,EAAK,GAAAH,IAAA,CAAAR,QAAA,KAAL,IAAe,YAAAW,EAAA,CAAAV,OAAA,KACfO,IAAK,CAAAR,QAAA,CACX;UAAA,CACF,UAAWV,IAAA,KAAS,UAAY;YAC9Ba,SAAA,CAAUa,IAAK,EAAAJ,EAAA,GAAAJ,IAAA,CAAKS,KAAL,qBAAAL,EAAA,CAAYM,KAAK;UAAA,CACvB,UAAAZ,OAAA,CAAQE,IAAK,CAAAR,QAAQ,CAAG;YACjCI,aAAA,CAAcI,IAAA,CAAKR,QAAQ;UAAA;QAC7B,CACD;MAAA;MAGH,IAAIA,QAAA,CAASmB,MAAQ;QACLf,aAAA,EAAAL,EAAA,GAAAC,QAAA,CAAS,CAAT,sBAAAD,EAAA,CAAaC,QAAQ;MAAA;MAGrC,IAAI,CAACoB,OAAA,CAAQjB,SAAW,EAAAN,eAAe,CAAG;QACtBA,eAAA,GAAAM,SAAA;QAClB,IAAIT,MAAQ;UACVA,MAAA,CAAO2B,MAAA,CAAOC,YAAe,GAAAnB,SAAA;QAAA;MAC/B;MAGK,OAAAH,QAAA;IAAA,CACT;EAAA;AAEJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}