{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { defineComponent, getCurrentInstance, ref, computed, watch, watchEffect, provide, reactive, onMounted, h, withDirectives, nextTick } from 'vue';\nimport { useResizeObserver, unrefElement } from '@vueuse/core';\nimport { isNil } from 'lodash-unified';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { More } from '@element-plus/icons-vue';\nimport Menu$1 from './utils/menu-bar.mjs';\nimport ElMenuCollapseTransition from './menu-collapse-transition.mjs';\nimport SubMenu from './sub-menu.mjs';\nimport { useMenuCssVar } from './use-menu-css-var.mjs';\nimport { MENU_INJECTION_KEY, SUB_MENU_INJECTION_KEY } from './tokens.mjs';\nimport ClickOutside from '../../../directives/click-outside/index.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props/runtime.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { flattedChildren } from '../../../utils/vue/vnode.mjs';\nimport { mutable } from '../../../utils/typescript.mjs';\nimport { iconPropType } from '../../../utils/vue/icon.mjs';\nimport { isString, isObject, isArray } from '@vue/shared';\nimport { isUndefined } from '../../../utils/types.mjs';\nconst menuProps = buildProps({\n  mode: {\n    type: String,\n    values: [\"horizontal\", \"vertical\"],\n    default: \"vertical\"\n  },\n  defaultActive: {\n    type: String,\n    default: \"\"\n  },\n  defaultOpeneds: {\n    type: definePropType(Array),\n    default: () => mutable([])\n  },\n  uniqueOpened: Boolean,\n  router: Boolean,\n  menuTrigger: {\n    type: String,\n    values: [\"hover\", \"click\"],\n    default: \"hover\"\n  },\n  collapse: Boolean,\n  backgroundColor: String,\n  textColor: String,\n  activeTextColor: String,\n  closeOnClickOutside: Boolean,\n  collapseTransition: {\n    type: Boolean,\n    default: true\n  },\n  ellipsis: {\n    type: Boolean,\n    default: true\n  },\n  popperOffset: {\n    type: Number,\n    default: 6\n  },\n  ellipsisIcon: {\n    type: iconPropType,\n    default: () => More\n  },\n  popperEffect: {\n    type: definePropType(String),\n    default: \"dark\"\n  },\n  popperClass: String,\n  popperStyle: {\n    type: definePropType([String, Object])\n  },\n  showTimeout: {\n    type: Number,\n    default: 300\n  },\n  hideTimeout: {\n    type: Number,\n    default: 300\n  },\n  persistent: {\n    type: Boolean,\n    default: true\n  }\n});\nconst checkIndexPath = indexPath => isArray(indexPath) && indexPath.every(path => isString(path));\nconst menuEmits = {\n  close: (index, indexPath) => isString(index) && checkIndexPath(indexPath),\n  open: (index, indexPath) => isString(index) && checkIndexPath(indexPath),\n  select: (index, indexPath, item, routerResult) => isString(index) && checkIndexPath(indexPath) && isObject(item) && (isUndefined(routerResult) || routerResult instanceof Promise)\n};\nconst DEFAULT_MORE_ITEM_WIDTH = 64;\nvar Menu = defineComponent({\n  name: \"ElMenu\",\n  props: menuProps,\n  emits: menuEmits,\n  setup(props, {\n    emit,\n    slots,\n    expose\n  }) {\n    const instance = getCurrentInstance();\n    const router = instance.appContext.config.globalProperties.$router;\n    const menu = ref();\n    const subMenu = ref();\n    const nsMenu = useNamespace(\"menu\");\n    const nsSubMenu = useNamespace(\"sub-menu\");\n    let moreItemWidth = DEFAULT_MORE_ITEM_WIDTH;\n    const sliceIndex = ref(-1);\n    const openedMenus = ref(props.defaultOpeneds && !props.collapse ? props.defaultOpeneds.slice(0) : []);\n    const activeIndex = ref(props.defaultActive);\n    const items = ref({});\n    const subMenus = ref({});\n    const isMenuPopup = computed(() => props.mode === \"horizontal\" || props.mode === \"vertical\" && props.collapse);\n    const initMenu = () => {\n      const activeItem = activeIndex.value && items.value[activeIndex.value];\n      if (!activeItem || props.mode === \"horizontal\" || props.collapse) return;\n      const indexPath = activeItem.indexPath;\n      indexPath.forEach(index => {\n        const subMenu2 = subMenus.value[index];\n        subMenu2 && openMenu(index, subMenu2.indexPath);\n      });\n    };\n    const openMenu = (index, indexPath) => {\n      if (openedMenus.value.includes(index)) return;\n      if (props.uniqueOpened) {\n        openedMenus.value = openedMenus.value.filter(index2 => indexPath.includes(index2));\n      }\n      openedMenus.value.push(index);\n      emit(\"open\", index, indexPath);\n    };\n    const close = index => {\n      const i = openedMenus.value.indexOf(index);\n      if (i !== -1) {\n        openedMenus.value.splice(i, 1);\n      }\n    };\n    const closeMenu = (index, indexPath) => {\n      close(index);\n      emit(\"close\", index, indexPath);\n    };\n    const handleSubMenuClick = ({\n      index,\n      indexPath\n    }) => {\n      const isOpened = openedMenus.value.includes(index);\n      isOpened ? closeMenu(index, indexPath) : openMenu(index, indexPath);\n    };\n    const handleMenuItemClick = menuItem => {\n      if (props.mode === \"horizontal\" || props.collapse) {\n        openedMenus.value = [];\n      }\n      const {\n        index,\n        indexPath\n      } = menuItem;\n      if (isNil(index) || isNil(indexPath)) return;\n      if (props.router && router) {\n        const route = menuItem.route || index;\n        const routerResult = router.push(route).then(res => {\n          if (!res) activeIndex.value = index;\n          return res;\n        });\n        emit(\"select\", index, indexPath, {\n          index,\n          indexPath,\n          route\n        }, routerResult);\n      } else {\n        activeIndex.value = index;\n        emit(\"select\", index, indexPath, {\n          index,\n          indexPath\n        });\n      }\n    };\n    const updateActiveIndex = val => {\n      var _a;\n      const itemsInData = items.value;\n      const item = itemsInData[val] || activeIndex.value && itemsInData[activeIndex.value] || itemsInData[props.defaultActive];\n      activeIndex.value = (_a = item == null ? void 0 : item.index) != null ? _a : val;\n    };\n    const calcMenuItemWidth = menuItem => {\n      const computedStyle = getComputedStyle(menuItem);\n      const marginLeft = Number.parseInt(computedStyle.marginLeft, 10);\n      const marginRight = Number.parseInt(computedStyle.marginRight, 10);\n      return menuItem.offsetWidth + marginLeft + marginRight || 0;\n    };\n    const calcSliceIndex = () => {\n      if (!menu.value) return -1;\n      const items2 = Array.from(menu.value.childNodes).filter(item => item.nodeName !== \"#comment\" && (item.nodeName !== \"#text\" || item.nodeValue));\n      const computedMenuStyle = getComputedStyle(menu.value);\n      const paddingLeft = Number.parseInt(computedMenuStyle.paddingLeft, 10);\n      const paddingRight = Number.parseInt(computedMenuStyle.paddingRight, 10);\n      const menuWidth = menu.value.clientWidth - paddingLeft - paddingRight;\n      let calcWidth = 0;\n      let sliceIndex2 = 0;\n      items2.forEach((item, index) => {\n        calcWidth += calcMenuItemWidth(item);\n        if (calcWidth <= menuWidth - moreItemWidth) {\n          sliceIndex2 = index + 1;\n        }\n      });\n      return sliceIndex2 === items2.length ? -1 : sliceIndex2;\n    };\n    const getIndexPath = index => subMenus.value[index].indexPath;\n    const debounce = (fn, wait = 33.34) => {\n      let timer;\n      return () => {\n        timer && clearTimeout(timer);\n        timer = setTimeout(() => {\n          fn();\n        }, wait);\n      };\n    };\n    let isFirstTimeRender = true;\n    const handleResize = () => {\n      const el = unrefElement(subMenu);\n      if (el) moreItemWidth = calcMenuItemWidth(el) || DEFAULT_MORE_ITEM_WIDTH;\n      if (sliceIndex.value === calcSliceIndex()) return;\n      const callback = () => {\n        sliceIndex.value = -1;\n        nextTick(() => {\n          sliceIndex.value = calcSliceIndex();\n        });\n      };\n      isFirstTimeRender ? callback() : debounce(callback)();\n      isFirstTimeRender = false;\n    };\n    watch(() => props.defaultActive, currentActive => {\n      if (!items.value[currentActive]) {\n        activeIndex.value = \"\";\n      }\n      updateActiveIndex(currentActive);\n    });\n    watch(() => props.collapse, value => {\n      if (value) openedMenus.value = [];\n    });\n    watch(items.value, initMenu);\n    let resizeStopper;\n    watchEffect(() => {\n      if (props.mode === \"horizontal\" && props.ellipsis) resizeStopper = useResizeObserver(menu, handleResize).stop;else resizeStopper == null ? void 0 : resizeStopper();\n    });\n    const mouseInChild = ref(false);\n    {\n      const addSubMenu = item => {\n        subMenus.value[item.index] = item;\n      };\n      const removeSubMenu = item => {\n        delete subMenus.value[item.index];\n      };\n      const addMenuItem = item => {\n        items.value[item.index] = item;\n      };\n      const removeMenuItem = item => {\n        delete items.value[item.index];\n      };\n      provide(MENU_INJECTION_KEY, reactive({\n        props,\n        openedMenus,\n        items,\n        subMenus,\n        activeIndex,\n        isMenuPopup,\n        addMenuItem,\n        removeMenuItem,\n        addSubMenu,\n        removeSubMenu,\n        openMenu,\n        closeMenu,\n        handleMenuItemClick,\n        handleSubMenuClick\n      }));\n      provide(`${SUB_MENU_INJECTION_KEY}${instance.uid}`, {\n        addSubMenu,\n        removeSubMenu,\n        mouseInChild,\n        level: 0\n      });\n    }\n    onMounted(() => {\n      if (props.mode === \"horizontal\") {\n        new Menu$1(instance.vnode.el, nsMenu.namespace.value);\n      }\n    });\n    {\n      const open = index => {\n        const {\n          indexPath\n        } = subMenus.value[index];\n        indexPath.forEach(i => openMenu(i, indexPath));\n      };\n      expose({\n        open,\n        close,\n        updateActiveIndex,\n        handleResize\n      });\n    }\n    const ulStyle = useMenuCssVar(props, 0);\n    return () => {\n      var _a, _b;\n      let slot = (_b = (_a = slots.default) == null ? void 0 : _a.call(slots)) != null ? _b : [];\n      const vShowMore = [];\n      if (props.mode === \"horizontal\" && menu.value) {\n        const originalSlot = flattedChildren(slot).filter(vnode => {\n          return (vnode == null ? void 0 : vnode.shapeFlag) !== 8;\n        });\n        const slotDefault = sliceIndex.value === -1 ? originalSlot : originalSlot.slice(0, sliceIndex.value);\n        const slotMore = sliceIndex.value === -1 ? [] : originalSlot.slice(sliceIndex.value);\n        if ((slotMore == null ? void 0 : slotMore.length) && props.ellipsis) {\n          slot = slotDefault;\n          vShowMore.push(h(SubMenu, {\n            ref: subMenu,\n            index: \"sub-menu-more\",\n            class: nsSubMenu.e(\"hide-arrow\"),\n            popperOffset: props.popperOffset\n          }, {\n            title: () => h(ElIcon, {\n              class: nsSubMenu.e(\"icon-more\")\n            }, {\n              default: () => h(props.ellipsisIcon)\n            }),\n            default: () => slotMore\n          }));\n        }\n      }\n      const directives = props.closeOnClickOutside ? [[ClickOutside, () => {\n        if (!openedMenus.value.length) return;\n        if (!mouseInChild.value) {\n          openedMenus.value.forEach(openedMenu => emit(\"close\", openedMenu, getIndexPath(openedMenu)));\n          openedMenus.value = [];\n        }\n      }]] : [];\n      const vMenu = withDirectives(h(\"ul\", {\n        key: String(props.collapse),\n        role: \"menubar\",\n        ref: menu,\n        style: ulStyle.value,\n        class: {\n          [nsMenu.b()]: true,\n          [nsMenu.m(props.mode)]: true,\n          [nsMenu.m(\"collapse\")]: props.collapse\n        }\n      }, [...slot, ...vShowMore]), directives);\n      if (props.collapseTransition && props.mode === \"vertical\") {\n        return h(ElMenuCollapseTransition, () => vMenu);\n      }\n      return vMenu;\n    };\n  }\n});\nexport { Menu as default, menuEmits, menuProps };","map":{"version":3,"names":["menuProps","buildProps","mode","type","String","values","default","defaultActive","defaultOpeneds","definePropType","Array","mutable","uniqueOpened","Boolean","router","menuTrigger","collapse","backgroundColor","textColor","activeTextColor","closeOnClickOutside","collapseTransition","ellipsis","popperOffset","Number","ellipsisIcon","iconPropType","More","popperEffect","popperClass","popperStyle","Object","showTimeout","hideTimeout","persistent","checkIndexPath","indexPath","isArray","every","path","isString","menuEmits","close","index","open","select","item","routerResult","isObject","isUndefined","Promise","DEFAULT_MORE_ITEM_WIDTH","Menu","defineComponent","name","props","emits","setup","emit","slots","expose","instance","getCurrentInstance","appContext","config","globalProperties","$router","menu","ref","subMenu","nsMenu","useNamespace","nsSubMenu","moreItemWidth","sliceIndex","openedMenus","slice","activeIndex","items","subMenus","isMenuPopup","computed","initMenu","activeItem","value","forEach","subMenu2","openMenu","includes","filter","index2","push","i","indexOf","splice","closeMenu","handleSubMenuClick","isOpened","handleMenuItemClick","menuItem","isNil","route","then","res","updateActiveIndex","val","_a","itemsInData","calcMenuItemWidth","computedStyle","getComputedStyle","marginLeft","parseInt","marginRight","offsetWidth","calcSliceIndex","items2","from","childNodes","nodeName","nodeValue","computedMenuStyle","paddingLeft","paddingRight","menuWidth","clientWidth","calcWidth","sliceIndex2","length","getIndexPath","debounce","fn","wait","timer","clearTimeout","setTimeout","isFirstTimeRender","handleResize","el","unrefElement","callback","nextTick","watch","currentActive","resizeStopper","watchEffect","useResizeObserver","stop","mouseInChild","addSubMenu","removeSubMenu","addMenuItem","removeMenuItem","provide","MENU_INJECTION_KEY","reactive","SUB_MENU_INJECTION_KEY","uid","level","onMounted","Menu$1","vnode","namespace","ulStyle","useMenuCssVar","_b","slot","call","vShowMore","originalSlot","flattedChildren","shapeFlag","slotDefault","slotMore","h","SubMenu","class","e","title","ElIcon","directives","ClickOutside","openedMenu","vMenu","withDirectives","key","role","style","b","m","ElMenuCollapseTransition"],"sources":["../../../../../../packages/components/menu/src/menu.ts"],"sourcesContent":["import {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  h,\n  nextTick,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  watch,\n  watchEffect,\n  withDirectives,\n} from 'vue'\nimport { unrefElement, useResizeObserver } from '@vueuse/core'\nimport { isNil } from 'lodash-unified'\nimport ElIcon from '@element-plus/components/icon'\nimport { More } from '@element-plus/icons-vue'\nimport {\n  buildProps,\n  definePropType,\n  flattedChildren,\n  iconPropType,\n  isArray,\n  isObject,\n  isString,\n  isUndefined,\n  mutable,\n} from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { ClickOutside as vClickoutside } from '@element-plus/directives'\nimport Menubar from './utils/menu-bar'\nimport ElMenuCollapseTransition from './menu-collapse-transition.vue'\nimport ElSubMenu from './sub-menu'\nimport { useMenuCssVar } from './use-menu-css-var'\nimport { MENU_INJECTION_KEY, SUB_MENU_INJECTION_KEY } from './tokens'\n\nimport type { PopperEffect } from '@element-plus/components/popper'\nimport type { MenuItemClicked, MenuProvider, SubMenuProvider } from './types'\nimport type { NavigationFailure, Router } from 'vue-router'\nimport type {\n  CSSProperties,\n  Component,\n  DirectiveArguments,\n  ExtractPropTypes,\n  ExtractPublicPropTypes,\n  VNode,\n  VNodeArrayChildren,\n} from 'vue'\nimport type { UseResizeObserverReturn } from '@vueuse/core'\n\nexport const menuProps = buildProps({\n  /**\n   * @description menu display mode\n   */\n  mode: {\n    type: String,\n    values: ['horizontal', 'vertical'],\n    default: 'vertical',\n  },\n  /**\n   * @description index of active menu on page load\n   */\n  defaultActive: {\n    type: String,\n    default: '',\n  },\n  /**\n   * @description array that contains indexes of currently active sub-menus\n   */\n  defaultOpeneds: {\n    type: definePropType<string[]>(Array),\n    default: () => mutable([] as const),\n  },\n  /**\n   * @description whether only one sub-menu can be active\n   */\n  uniqueOpened: Boolean,\n  /**\n   * @description whether `vue-router` mode is activated. If true, index will be used as 'path' to activate the route action. Use with `default-active` to set the active item on load.\n   */\n  router: Boolean,\n  /**\n   * @description how sub-menus are triggered, only works when `mode` is 'horizontal'\n   */\n  menuTrigger: {\n    type: String,\n    values: ['hover', 'click'],\n    default: 'hover',\n  },\n  /**\n   * @description whether the menu is collapsed (available only in vertical mode)\n   */\n  collapse: Boolean,\n  /**\n   * @description background color of Menu (hex format) (deprecated, use `--bg-color` instead)\n   * @deprecated use `--bg-color` instead\n   */\n  backgroundColor: String,\n  /**\n   * @description text color of Menu (hex format) (deprecated, use `--text-color` instead)\n   * @deprecated use `--text-color` instead\n   */\n  textColor: String,\n  /**\n   * @description text color of currently active menu item (hex format) (deprecated, use `--active-color` instead)\n   * @deprecated use `--active-color` instead\n   */\n  activeTextColor: String,\n  /**\n   * @description optional, whether menu is collapsed when clicking outside\n   */\n  closeOnClickOutside: Boolean,\n  /**\n   * @description whether to enable the collapse transition\n   */\n  collapseTransition: {\n    type: Boolean,\n    default: true,\n  },\n  /**\n   * @description whether the menu is ellipsis (available only in horizontal mode)\n   */\n  ellipsis: {\n    type: Boolean,\n    default: true,\n  },\n  /**\n   * @description offset of the popper (effective for all submenus)\n   */\n  popperOffset: {\n    type: Number,\n    default: 6,\n  },\n  /**\n   * @description custom ellipsis icon (available only in horizontal mode and ellipsis is true)\n   */\n  ellipsisIcon: {\n    type: iconPropType,\n    default: () => More,\n  },\n  /**\n   * @description Tooltip theme, built-in theme: `dark` / `light` when menu is collapsed\n   */\n  popperEffect: {\n    type: definePropType<PopperEffect>(String),\n    default: 'dark',\n  },\n  /**\n   * @description custom class name for all popup menus\n   */\n  popperClass: String,\n  /**\n   * @description custom style for all popup menus\n   */\n  popperStyle: {\n    type: definePropType<string | CSSProperties>([String, Object]),\n  },\n  /**\n   * @description control timeout for all menus before showing\n   */\n  showTimeout: {\n    type: Number,\n    default: 300,\n  },\n  /**\n   * @description control timeout for all menus before hiding\n   */\n  hideTimeout: {\n    type: Number,\n    default: 300,\n  },\n  /**\n   * @description when menu inactive and `persistent` is `false` , dropdown menu will be destroyed\n   */\n  persistent: {\n    type: Boolean,\n    default: true,\n  },\n} as const)\nexport type MenuProps = ExtractPropTypes<typeof menuProps>\nexport type MenuPropsPublic = ExtractPublicPropTypes<typeof menuProps>\n\nconst checkIndexPath = (indexPath: unknown): indexPath is string[] =>\n  isArray(indexPath) && indexPath.every((path) => isString(path))\n\nexport const menuEmits = {\n  close: (index: string, indexPath: string[]) =>\n    isString(index) && checkIndexPath(indexPath),\n\n  open: (index: string, indexPath: string[]) =>\n    isString(index) && checkIndexPath(indexPath),\n\n  select: (\n    index: string,\n    indexPath: string[],\n    item: MenuItemClicked,\n    routerResult?: Promise<void | NavigationFailure>\n  ) =>\n    isString(index) &&\n    checkIndexPath(indexPath) &&\n    isObject(item) &&\n    (isUndefined(routerResult) || routerResult instanceof Promise),\n}\nexport type MenuEmits = typeof menuEmits\n\nconst DEFAULT_MORE_ITEM_WIDTH = 64\n\nexport default defineComponent({\n  name: 'ElMenu',\n\n  props: menuProps,\n  emits: menuEmits,\n\n  setup(props, { emit, slots, expose }) {\n    const instance = getCurrentInstance()!\n    const router = instance.appContext.config.globalProperties.$router as Router\n    const menu = ref<HTMLUListElement>()\n    const subMenu = ref<HTMLElement>()\n    const nsMenu = useNamespace('menu')\n    const nsSubMenu = useNamespace('sub-menu')\n    let moreItemWidth = DEFAULT_MORE_ITEM_WIDTH\n\n    // data\n    const sliceIndex = ref(-1)\n\n    const openedMenus = ref<MenuProvider['openedMenus']>(\n      props.defaultOpeneds && !props.collapse\n        ? props.defaultOpeneds.slice(0)\n        : []\n    )\n    const activeIndex = ref<MenuProvider['activeIndex']>(props.defaultActive)\n    const items = ref<MenuProvider['items']>({})\n    const subMenus = ref<MenuProvider['subMenus']>({})\n\n    // computed\n    const isMenuPopup = computed<MenuProvider['isMenuPopup']>(\n      () =>\n        props.mode === 'horizontal' ||\n        (props.mode === 'vertical' && props.collapse)\n    )\n\n    // methods\n    const initMenu = () => {\n      const activeItem = activeIndex.value && items.value[activeIndex.value]\n      if (!activeItem || props.mode === 'horizontal' || props.collapse) return\n\n      const indexPath = activeItem.indexPath\n\n      // 展开该菜单项的路径上所有子菜单\n      // expand all subMenus of the menu item\n      indexPath.forEach((index) => {\n        const subMenu = subMenus.value[index]\n        subMenu && openMenu(index, subMenu.indexPath)\n      })\n    }\n\n    const openMenu: MenuProvider['openMenu'] = (index, indexPath) => {\n      if (openedMenus.value.includes(index)) return\n      // 将不在该菜单路径下的其余菜单收起\n      // collapse all menu that are not under current menu item\n      if (props.uniqueOpened) {\n        openedMenus.value = openedMenus.value.filter((index: string) =>\n          indexPath.includes(index)\n        )\n      }\n      openedMenus.value.push(index)\n      emit('open', index, indexPath)\n    }\n\n    const close = (index: string) => {\n      const i = openedMenus.value.indexOf(index)\n      if (i !== -1) {\n        openedMenus.value.splice(i, 1)\n      }\n    }\n\n    const closeMenu: MenuProvider['closeMenu'] = (index, indexPath) => {\n      close(index)\n      emit('close', index, indexPath)\n    }\n\n    const handleSubMenuClick: MenuProvider['handleSubMenuClick'] = ({\n      index,\n      indexPath,\n    }) => {\n      const isOpened = openedMenus.value.includes(index)\n\n      isOpened ? closeMenu(index, indexPath) : openMenu(index, indexPath)\n    }\n\n    const handleMenuItemClick: MenuProvider['handleMenuItemClick'] = (\n      menuItem\n    ) => {\n      if (props.mode === 'horizontal' || props.collapse) {\n        openedMenus.value = []\n      }\n      const { index, indexPath } = menuItem\n      if (isNil(index) || isNil(indexPath)) return\n\n      if (props.router && router) {\n        const route = menuItem.route || index\n        const routerResult = router.push(route).then((res) => {\n          if (!res) activeIndex.value = index\n          return res\n        })\n        emit(\n          'select',\n          index,\n          indexPath,\n          { index, indexPath, route },\n          routerResult\n        )\n      } else {\n        activeIndex.value = index\n        emit('select', index, indexPath, { index, indexPath })\n      }\n    }\n\n    const updateActiveIndex = (val: string) => {\n      const itemsInData = items.value\n      const item =\n        itemsInData[val] ||\n        (activeIndex.value && itemsInData[activeIndex.value]) ||\n        itemsInData[props.defaultActive]\n\n      activeIndex.value = item?.index ?? val\n    }\n\n    const calcMenuItemWidth = (menuItem: HTMLElement) => {\n      const computedStyle = getComputedStyle(menuItem)\n      const marginLeft = Number.parseInt(computedStyle.marginLeft, 10)\n      const marginRight = Number.parseInt(computedStyle.marginRight, 10)\n      return menuItem.offsetWidth + marginLeft + marginRight || 0\n    }\n\n    const calcSliceIndex = () => {\n      if (!menu.value) return -1\n\n      const items = Array.from(menu.value.childNodes).filter(\n        (item) =>\n          item.nodeName !== '#comment' &&\n          (item.nodeName !== '#text' || item.nodeValue)\n      ) as HTMLElement[]\n\n      const computedMenuStyle = getComputedStyle(menu.value)\n      const paddingLeft = Number.parseInt(computedMenuStyle.paddingLeft, 10)\n      const paddingRight = Number.parseInt(computedMenuStyle.paddingRight, 10)\n      const menuWidth = menu.value.clientWidth - paddingLeft - paddingRight\n\n      let calcWidth = 0\n      let sliceIndex = 0\n      items.forEach((item, index) => {\n        calcWidth += calcMenuItemWidth(item)\n        if (calcWidth <= menuWidth - moreItemWidth) {\n          sliceIndex = index + 1\n        }\n      })\n      return sliceIndex === items.length ? -1 : sliceIndex\n    }\n\n    const getIndexPath = (index: string) => subMenus.value[index].indexPath\n\n    // Common computer monitor FPS is 60Hz, which means 60 redraws per second. Calculation formula: 1000ms/60 ≈ 16.67ms, In order to avoid a certain chance of repeated triggering when `resize`, set wait to 16.67 * 2 = 33.34\n    const debounce = (fn: () => void, wait = 33.34) => {\n      let timer: ReturnType<typeof setTimeout> | null\n      return () => {\n        timer && clearTimeout(timer)\n        timer = setTimeout(() => {\n          fn()\n        }, wait)\n      }\n    }\n\n    let isFirstTimeRender = true\n    const handleResize = () => {\n      const el = unrefElement(subMenu)\n      if (el) moreItemWidth = calcMenuItemWidth(el) || DEFAULT_MORE_ITEM_WIDTH\n      if (sliceIndex.value === calcSliceIndex()) return\n      const callback = () => {\n        sliceIndex.value = -1\n        nextTick(() => {\n          sliceIndex.value = calcSliceIndex()\n        })\n      }\n      // execute callback directly when first time resize to avoid shaking\n      isFirstTimeRender ? callback() : debounce(callback)()\n      isFirstTimeRender = false\n    }\n\n    watch(\n      () => props.defaultActive,\n      (currentActive) => {\n        if (!items.value[currentActive]) {\n          activeIndex.value = ''\n        }\n        updateActiveIndex(currentActive)\n      }\n    )\n\n    watch(\n      () => props.collapse,\n      (value) => {\n        if (value) openedMenus.value = []\n      }\n    )\n\n    watch(items.value, initMenu)\n\n    let resizeStopper: UseResizeObserverReturn['stop']\n    watchEffect(() => {\n      if (props.mode === 'horizontal' && props.ellipsis)\n        resizeStopper = useResizeObserver(menu, handleResize).stop\n      else resizeStopper?.()\n    })\n\n    const mouseInChild = ref(false)\n\n    // provide\n    {\n      const addSubMenu: MenuProvider['addSubMenu'] = (item) => {\n        subMenus.value[item.index] = item\n      }\n\n      const removeSubMenu: MenuProvider['removeSubMenu'] = (item) => {\n        delete subMenus.value[item.index]\n      }\n\n      const addMenuItem: MenuProvider['addMenuItem'] = (item) => {\n        items.value[item.index] = item\n      }\n\n      const removeMenuItem: MenuProvider['removeMenuItem'] = (item) => {\n        delete items.value[item.index]\n      }\n\n      provide<MenuProvider>(\n        MENU_INJECTION_KEY,\n        reactive({\n          props,\n          openedMenus,\n          items,\n          subMenus,\n          activeIndex,\n          isMenuPopup,\n\n          addMenuItem,\n          removeMenuItem,\n          addSubMenu,\n          removeSubMenu,\n          openMenu,\n          closeMenu,\n          handleMenuItemClick,\n          handleSubMenuClick,\n        })\n      )\n\n      provide<SubMenuProvider>(`${SUB_MENU_INJECTION_KEY}${instance.uid}`, {\n        addSubMenu,\n        removeSubMenu,\n        mouseInChild,\n        level: 0,\n      })\n    }\n\n    // lifecycle\n    onMounted(() => {\n      if (props.mode === 'horizontal') {\n        new Menubar(instance.vnode.el!, nsMenu.namespace.value)\n      }\n    })\n\n    {\n      const open = (index: string) => {\n        const { indexPath } = subMenus.value[index]\n        indexPath.forEach((i) => openMenu(i, indexPath))\n      }\n\n      expose({\n        open,\n        close,\n        updateActiveIndex,\n        handleResize,\n      })\n    }\n\n    const ulStyle = useMenuCssVar(props, 0)\n\n    return () => {\n      let slot: VNodeArrayChildren = slots.default?.() ?? []\n      const vShowMore: VNode[] = []\n\n      if (props.mode === 'horizontal' && menu.value) {\n        const originalSlot = (\n          flattedChildren(slot) as VNodeArrayChildren\n        ).filter((vnode) => {\n          // Filter text and comment nodes (https://github.com/vuejs/core/blob/c875019d49b4c36a88d929ccadc31ad414747c7b/packages/shared/src/shapeFlags.ts#L5)\n          return (vnode as VNode)?.shapeFlag !== 8\n        })\n        const slotDefault =\n          sliceIndex.value === -1\n            ? originalSlot\n            : originalSlot.slice(0, sliceIndex.value)\n\n        const slotMore =\n          sliceIndex.value === -1 ? [] : originalSlot.slice(sliceIndex.value)\n\n        if (slotMore?.length && props.ellipsis) {\n          slot = slotDefault\n          vShowMore.push(\n            h(\n              ElSubMenu,\n              {\n                ref: subMenu,\n                index: 'sub-menu-more',\n                class: nsSubMenu.e('hide-arrow'),\n                popperOffset: props.popperOffset,\n              },\n              {\n                title: () =>\n                  h(\n                    ElIcon,\n                    {\n                      class: nsSubMenu.e('icon-more'),\n                    },\n                    {\n                      default: () => h(props.ellipsisIcon as Component),\n                    }\n                  ),\n                default: () => slotMore,\n              }\n            )\n          )\n        }\n      }\n\n      const directives: DirectiveArguments = props.closeOnClickOutside\n        ? [\n            [\n              vClickoutside,\n              () => {\n                if (!openedMenus.value.length) return\n\n                if (!mouseInChild.value) {\n                  openedMenus.value.forEach((openedMenu) =>\n                    emit('close', openedMenu, getIndexPath(openedMenu))\n                  )\n\n                  openedMenus.value = []\n                }\n              },\n            ],\n          ]\n        : []\n\n      const vMenu = withDirectives(\n        h(\n          'ul',\n          {\n            key: String(props.collapse),\n            role: 'menubar',\n            ref: menu,\n            style: ulStyle.value,\n            class: {\n              [nsMenu.b()]: true,\n              [nsMenu.m(props.mode)]: true,\n              [nsMenu.m('collapse')]: props.collapse,\n            },\n          },\n          [...slot, ...vShowMore]\n        ),\n        directives\n      )\n\n      if (props.collapseTransition && props.mode === 'vertical') {\n        return h(ElMenuCollapseTransition, () => vMenu)\n      }\n\n      return vMenu\n    }\n  },\n})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}