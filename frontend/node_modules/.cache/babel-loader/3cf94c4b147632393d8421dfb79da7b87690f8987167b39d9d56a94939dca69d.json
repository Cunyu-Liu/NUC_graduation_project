{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, computed, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport api from '@/api';\n\n// 响应式数据\n\nexport default {\n  __name: 'ResearchGaps',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const loading = ref(false);\n    const gaps = ref([]);\n    const selectedGap = ref({});\n    const showDetailDialog = ref(false);\n    const showEditDialog = ref(false);\n    const editForm = ref(null);\n    const saving = ref(false);\n\n    // 筛选器\n    const filters = ref({\n      importance: '',\n      difficulty: '',\n      gapType: '',\n      status: ''\n    });\n\n    // 统计数据\n    const stats = ref({\n      total: 0,\n      high_priority: 0,\n      code_generated: 0,\n      implemented: 0\n    });\n\n    // 分页\n    const pagination = ref({\n      page: 1,\n      pageSize: 20,\n      total: 0\n    });\n\n    // 计算属性\n    const filteredGaps = computed(() => {\n      return gaps.value.filter(gap => {\n        if (filters.value.importance && gap.importance !== filters.value.importance) return false;\n        if (filters.value.difficulty && gap.difficulty !== filters.value.difficulty) return false;\n        if (filters.value.gapType && gap.gap_type !== filters.value.gapType) return false;\n        if (filters.value.status && gap.status !== filters.value.status) return false;\n        return true;\n      });\n    });\n\n    // 方法\n    const loadGaps = async () => {\n      loading.value = true;\n      try {\n        const response = await api.getPriorityGaps(1000);\n        if (response.success) {\n          const allGaps = response.data || [];\n          if (allGaps.length === 0) {\n            ElMessage.info('暂无研究空白数据，请先分析论文');\n            gaps.value = [];\n            pagination.value.total = 0;\n            updateStats();\n            return;\n          }\n\n          // 添加评分字段\n          gaps.value = allGaps.map(gap => ({\n            ...gap,\n            importance_level: {\n              'high': 3,\n              'medium': 2,\n              'low': 1\n            }[gap.importance] || 2,\n            difficulty_level: {\n              'low': 1,\n              'medium': 2,\n              'high': 3\n            }[gap.difficulty] || 2\n          }));\n          pagination.value.total = allGaps.length;\n          updateStats();\n          ElMessage.success(`成功加载 ${allGaps.length} 个研究空白`);\n        } else {\n          ElMessage.error(response.error || '加载研究空白失败');\n        }\n      } catch (error) {\n        console.error('加载研究空白失败:', error);\n        if (error.response) {\n          ElMessage.error(`服务器错误: ${error.response.status}`);\n        } else if (error.request) {\n          ElMessage.error('网络错误，请检查后端服务是否启动');\n        } else {\n          ElMessage.error('加载研究空白失败: ' + error.message);\n        }\n      } finally {\n        loading.value = false;\n      }\n    };\n    const updateStats = () => {\n      stats.value = {\n        total: gaps.value.length,\n        high_priority: gaps.value.filter(g => g.importance === 'high').length,\n        code_generated: gaps.value.filter(g => g.generated_code_id).length,\n        implemented: gaps.value.filter(g => g.status === 'implemented').length\n      };\n    };\n    const applyFilters = () => {\n      // 触发计算属性重新计算\n      ElMessage.success('筛选已应用');\n    };\n    const resetFilters = () => {\n      filters.value = {\n        importance: '',\n        difficulty: '',\n        gapType: '',\n        status: ''\n      };\n      ElMessage.info('筛选已重置');\n    };\n    const getGapTypeLabel = type => {\n      const labels = {\n        'methodological': '方法论',\n        'theoretical': '理论',\n        'data': '数据',\n        'application': '应用',\n        'evaluation': '评估'\n      };\n      return labels[type] || type;\n    };\n    const getGapTypeColor = type => {\n      const colors = {\n        'methodological': 'primary',\n        'theoretical': 'success',\n        'data': 'warning',\n        'application': 'info',\n        'evaluation': 'danger'\n      };\n      return colors[type] || '';\n    };\n    const getStatusLabel = status => {\n      const labels = {\n        'identified': '已识别',\n        'code_generating': '生成中',\n        'implemented': '已实现',\n        'verified': '已验证'\n      };\n      return labels[status] || status;\n    };\n    const getStatusType = status => {\n      const types = {\n        'identified': 'info',\n        'code_generating': 'warning',\n        'implemented': 'success',\n        'verified': 'success'\n      };\n      return types[status] || 'info';\n    };\n    const getImportanceLabel = importance => {\n      const labels = {\n        'high': '高',\n        'medium': '中',\n        'low': '低'\n      };\n      return labels[importance] || importance;\n    };\n    const getDifficultyLabel = difficulty => {\n      const labels = {\n        'high': '高',\n        'medium': '中',\n        'low': '低'\n      };\n      return labels[difficulty] || difficulty;\n    };\n    const getRowClassName = ({\n      row\n    }) => {\n      if (row.importance === 'high') {\n        return 'high-priority-row';\n      }\n      return '';\n    };\n    const showGapDetail = row => {\n      selectedGap.value = row;\n      showDetailDialog.value = true;\n    };\n    const generatingCode = ref(false);\n    const currentGeneratingGap = ref(null);\n    const generateCode = async gap => {\n      // 防止重复点击\n      if (generatingCode.value) {\n        ElMessage.warning('正在生成代码，请稍候...');\n        return;\n      }\n      try {\n        generatingCode.value = true;\n        currentGeneratingGap.value = gap.id;\n\n        // 更新本地状态显示生成中\n        gap.status = 'code_generating';\n        ElMessage.info('正在生成代码，这可能需要一些时间...');\n        const response = await api.generateCode(gap.id, 'method_improvement');\n        if (response.success) {\n          ElMessage.success('代码生成成功！');\n          // 更新本地状态\n          gap.generated_code_id = response.data.id;\n          gap.status = 'implemented';\n          await loadGaps();\n        } else {\n          // 恢复状态\n          gap.status = 'identified';\n          ElMessage.error(response.error || '代码生成失败');\n        }\n      } catch (error) {\n        // 恢复状态\n        gap.status = 'identified';\n        console.error('代码生成错误:', error);\n\n        // 提供更详细的错误信息\n        let errorMsg = '代码生成失败';\n        if (error.response?.data?.error) {\n          errorMsg += `: ${error.response.data.error}`;\n        } else if (error.message) {\n          errorMsg += `: ${error.message}`;\n        }\n        ElMessage.error(errorMsg);\n      } finally {\n        generatingCode.value = false;\n        currentGeneratingGap.value = null;\n      }\n    };\n    const editGap = gap => {\n      // 创建编辑表单的副本\n      editForm.value = {\n        id: gap.id,\n        gap_type: gap.gap_type || '',\n        description: gap.description || '',\n        importance: gap.importance || 'medium',\n        difficulty: gap.difficulty || 'medium',\n        potential_approach: gap.potential_approach || '',\n        expected_impact: gap.expected_impact || '',\n        status: gap.status || 'identified'\n      };\n      showEditDialog.value = true;\n    };\n    const saveEdit = async () => {\n      try {\n        saving.value = true;\n        const response = await api.updateGap(editForm.value.id, {\n          gap_type: editForm.value.gap_type,\n          description: editForm.value.description,\n          importance: editForm.value.importance,\n          difficulty: editForm.value.difficulty,\n          potential_approach: editForm.value.potential_approach,\n          expected_impact: editForm.value.expected_impact,\n          status: editForm.value.status\n        });\n        if (response.success) {\n          ElMessage.success('保存成功');\n          showEditDialog.value = false;\n          // 刷新列表\n          await loadGaps();\n        } else {\n          ElMessage.error(response.error || '保存失败');\n        }\n      } catch (error) {\n        console.error('保存失败:', error);\n        ElMessage.error('保存失败: ' + (error.message || '未知错误'));\n      } finally {\n        saving.value = false;\n      }\n    };\n    const viewGeneratedCode = codeId => {\n      // 跳转到代码编辑器\n      window.open(`#/code-editor/${codeId}`, '_blank');\n    };\n    const handleCommand = (command, row) => {\n      switch (command) {\n        case 'viewPaper':\n          window.open(`#/papers/${row.analysis_id}`, '_blank');\n          break;\n        case 'viewAnalysis':\n          window.open(`#/analysis/${row.analysis_id}`, '_blank');\n          break;\n        case 'export':\n          exportSingleGap(row);\n          break;\n      }\n    };\n    const exportSingleGap = gap => {\n      const content = `\n研究空白详情 #${gap.id}\n\n类型: ${getGapTypeLabel(gap.gap_type)}\n重要性: ${gap.importance}\n难度: ${gap.difficulty}\n\n描述:\n${gap.description}\n\n潜在方法:\n${gap.potential_approach}\n\n预期影响:\n${gap.expected_impact}\n  `.trim();\n      const blob = new Blob([content], {\n        type: 'text/plain'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `research_gap_${gap.id}.txt`;\n      a.click();\n      URL.revokeObjectURL(url);\n      ElMessage.success('导出成功');\n    };\n    const exportGaps = () => {\n      try {\n        if (filteredGaps.value.length === 0) {\n          ElMessage.warning('没有可导出的研究空白');\n          return;\n        }\n\n        // 创建导出内容\n        let content = '研究空白汇总报告\\n';\n        content += '='.repeat(80) + '\\n\\n';\n        content += `导出时间: ${new Date().toLocaleString('zh-CN')}\\n`;\n        content += `总计: ${filteredGaps.value.length} 个研究空白\\n\\n`;\n\n        // 统计信息\n        content += '统计信息\\n';\n        content += '-'.repeat(40) + '\\n';\n        content += `高优先级: ${filteredGaps.value.filter(g => g.importance === 'high').length}\\n`;\n        content += `已生成代码: ${filteredGaps.value.filter(g => g.generated_code_id).length}\\n`;\n        content += `已实现: ${filteredGaps.value.filter(g => g.status === 'implemented').length}\\n\\n`;\n\n        // 按类型分组\n        const gapsByType = {};\n        filteredGaps.value.forEach(gap => {\n          const type = getGapTypeLabel(gap.gap_type);\n          if (!gapsByType[type]) gapsByType[type] = [];\n          gapsByType[type].push(gap);\n        });\n\n        // 详细列表\n        content += '详细列表\\n';\n        content += '='.repeat(80) + '\\n\\n';\n        Object.keys(gapsByType).forEach((type, typeIndex) => {\n          content += `\\n${typeIndex + 1}. ${type}类空白 (${gapsByType[type].length}个)\\n`;\n          content += '-'.repeat(80) + '\\n';\n          gapsByType[type].forEach((gap, index) => {\n            content += `\\n[${index + 1}] 空白ID: ${gap.id}\\n`;\n            content += `     类型: ${getGapTypeLabel(gap.gap_type)}\\n`;\n            content += `     重要性: ${gap.importance} | 难度: ${gap.difficulty}\\n`;\n            content += `     描述: ${gap.description}\\n`;\n            if (gap.potential_approach) {\n              content += `     潜在方法: ${gap.potential_approach}\\n`;\n            }\n            if (gap.expected_impact) {\n              content += `     预期影响: ${gap.expected_impact}\\n`;\n            }\n            content += `     状态: ${getStatusLabel(gap.status)}\\n`;\n          });\n        });\n        content += '\\n' + '='.repeat(80) + '\\n';\n        content += '报告结束\\n';\n\n        // 下载文件\n        const blob = new Blob([content], {\n          type: 'text/plain;charset=utf-8'\n        });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `research_gaps_export_${new Date().getTime()}.txt`;\n        a.click();\n        URL.revokeObjectURL(url);\n        ElMessage.success(`成功导出 ${filteredGaps.value.length} 个研究空白`);\n      } catch (error) {\n        ElMessage.error('导出失败: ' + error.message);\n        console.error('Export error:', error);\n      }\n    };\n    const refreshGaps = () => {\n      loadGaps();\n    };\n    const handlePageChange = page => {\n      pagination.value.page = page;\n    };\n    const handleSizeChange = size => {\n      pagination.value.pageSize = size;\n    };\n\n    // 生命周期\n    onMounted(() => {\n      loadGaps();\n    });\n    const __returned__ = {\n      loading,\n      gaps,\n      selectedGap,\n      showDetailDialog,\n      showEditDialog,\n      editForm,\n      saving,\n      filters,\n      stats,\n      pagination,\n      filteredGaps,\n      loadGaps,\n      updateStats,\n      applyFilters,\n      resetFilters,\n      getGapTypeLabel,\n      getGapTypeColor,\n      getStatusLabel,\n      getStatusType,\n      getImportanceLabel,\n      getDifficultyLabel,\n      getRowClassName,\n      showGapDetail,\n      generatingCode,\n      currentGeneratingGap,\n      generateCode,\n      editGap,\n      saveEdit,\n      viewGeneratedCode,\n      handleCommand,\n      exportSingleGap,\n      exportGaps,\n      refreshGaps,\n      handlePageChange,\n      handleSizeChange,\n      ref,\n      computed,\n      onMounted,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get api() {\n        return api;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","ElMessage","api","loading","gaps","selectedGap","showDetailDialog","showEditDialog","editForm","saving","filters","importance","difficulty","gapType","status","stats","total","high_priority","code_generated","implemented","pagination","page","pageSize","filteredGaps","value","filter","gap","gap_type","loadGaps","response","getPriorityGaps","success","allGaps","data","length","info","updateStats","map","importance_level","difficulty_level","error","console","request","message","g","generated_code_id","applyFilters","resetFilters","getGapTypeLabel","type","labels","getGapTypeColor","colors","getStatusLabel","getStatusType","types","getImportanceLabel","getDifficultyLabel","getRowClassName","row","showGapDetail","generatingCode","currentGeneratingGap","generateCode","warning","id","errorMsg","editGap","description","potential_approach","expected_impact","saveEdit","updateGap","viewGeneratedCode","codeId","window","open","handleCommand","command","analysis_id","exportSingleGap","content","trim","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","exportGaps","repeat","Date","toLocaleString","gapsByType","forEach","push","Object","keys","typeIndex","index","getTime","refreshGaps","handlePageChange","handleSizeChange","size"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/ResearchGaps.vue"],"sourcesContent":["<template>\n  <div class=\"research-gaps-manager\">\n    <div class=\"gaps-header\">\n      <h2>研究空白管理</h2>\n      <div class=\"header-actions\">\n        <el-button @click=\"refreshGaps\" icon=\"Refresh\">刷新</el-button>\n        <el-button @click=\"exportGaps\" icon=\"Download\">导出报告</el-button>\n      </div>\n    </div>\n\n    <!-- 筛选器 -->\n    <div class=\"gaps-filter\">\n      <el-form :inline=\"true\">\n        <el-form-item label=\"重要性\">\n          <el-select v-model=\"filters.importance\" placeholder=\"全部\" clearable style=\"width: 120px\">\n            <el-option label=\"高\" value=\"high\" />\n            <el-option label=\"中\" value=\"medium\" />\n            <el-option label=\"低\" value=\"low\" />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"难度\">\n          <el-select v-model=\"filters.difficulty\" placeholder=\"全部\" clearable style=\"width: 120px\">\n            <el-option label=\"低\" value=\"low\" />\n            <el-option label=\"中\" value=\"medium\" />\n            <el-option label=\"高\" value=\"high\" />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"类型\">\n          <el-select v-model=\"filters.gapType\" placeholder=\"全部\" clearable style=\"width: 150px\">\n            <el-option label=\"方法论\" value=\"methodological\" />\n            <el-option label=\"理论\" value=\"theoretical\" />\n            <el-option label=\"数据\" value=\"data\" />\n            <el-option label=\"应用\" value=\"application\" />\n            <el-option label=\"评估\" value=\"evaluation\" />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"状态\">\n          <el-select v-model=\"filters.status\" placeholder=\"全部\" clearable style=\"width: 130px\">\n            <el-option label=\"已识别\" value=\"identified\" />\n            <el-option label=\"生成中\" value=\"code_generating\" />\n            <el-option label=\"已实现\" value=\"implemented\" />\n            <el-option label=\"已验证\" value=\"verified\" />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"applyFilters\">应用筛选</el-button>\n          <el-button @click=\"resetFilters\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <!-- 统计卡片 -->\n    <div class=\"stats-cards\">\n      <el-row :gutter=\"16\">\n        <el-col :span=\"6\">\n          <el-card class=\"stat-card\">\n            <div class=\"stat-content\">\n              <div class=\"stat-number\">{{ stats.total }}</div>\n              <div class=\"stat-label\">总空白数</div>\n            </div>\n          </el-card>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-card class=\"stat-card priority-high\">\n            <div class=\"stat-content\">\n              <div class=\"stat-number\">{{ stats.high_priority }}</div>\n              <div class=\"stat-label\">高优先级</div>\n            </div>\n          </el-card>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-card class=\"stat-card code-generated\">\n            <div class=\"stat-content\">\n              <div class=\"stat-number\">{{ stats.code_generated }}</div>\n              <div class=\"stat-label\">已生成代码</div>\n            </div>\n          </el-card>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-card class=\"stat-card implemented\">\n            <div class=\"stat-content\">\n              <div class=\"stat-number\">{{ stats.implemented }}</div>\n              <div class=\"stat-label\">已实现</div>\n            </div>\n          </el-card>\n        </el-col>\n      </el-row>\n    </div>\n\n    <!-- 空白列表 -->\n    <div class=\"gaps-table-container\">\n      <el-table\n        :data=\"filteredGaps\"\n        v-loading=\"loading\"\n        style=\"width: 100%\"\n        :row-class-name=\"getRowClassName\"\n        @row-click=\"showGapDetail\"\n      >\n        <el-table-column prop=\"id\" label=\"ID\" width=\"60\" />\n\n        <el-table-column label=\"描述\" min-width=\"300\">\n          <template #default=\"{ row }\">\n            <div class=\"gap-description\">{{ row.description }}</div>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"类型\" width=\"130\">\n          <template #default=\"{ row }\">\n            <el-tag :type=\"getGapTypeColor(row.gap_type)\">\n              {{ getGapTypeLabel(row.gap_type) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"重要性\" width=\"90\" align=\"center\">\n          <template #default=\"{ row }\">\n            <el-tag :type=\"row.importance === 'high' ? 'danger' : row.importance === 'medium' ? 'warning' : 'info'\" size=\"small\">\n              {{ getImportanceLabel(row.importance) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"难度\" width=\"90\" align=\"center\">\n          <template #default=\"{ row }\">\n            <el-tag :type=\"row.difficulty === 'high' ? 'danger' : row.difficulty === 'medium' ? 'warning' : 'info'\" size=\"small\">\n              {{ getDifficultyLabel(row.difficulty) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"状态\" width=\"110\" align=\"center\">\n          <template #default=\"{ row }\">\n            <el-tag :type=\"getStatusType(row.status)\">\n              {{ getStatusLabel(row.status) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"操作\" width=\"240\" align=\"center\">\n          <template #default=\"{ row }\">\n            <el-button-group>\n              <el-button\n                size=\"small\"\n                @click.stop=\"generateCode(row)\"\n                :disabled=\"row.status !== 'identified' || generatingCode\"\n                :loading=\"generatingCode && currentGeneratingGap === row.id\"\n                icon=\"MagicStick\"\n              >\n                {{ generatingCode && currentGeneratingGap === row.id ? '生成中...' : '生成代码' }}\n              </el-button>\n              <el-button\n                size=\"small\"\n                @click.stop=\"editGap(row)\"\n                icon=\"Edit\"\n              >\n                编辑\n              </el-button>\n              <el-dropdown @command=\"(cmd) => handleCommand(cmd, row)\">\n                <el-button size=\"small\" icon=\"More\">\n                  更多<el-icon class=\"el-icon--right\"><ArrowDown /></el-icon>\n                </el-button>\n                <template #dropdown>\n                  <el-dropdown-item command=\"viewPaper\" icon=\"Document\">\n                    查看论文\n                  </el-dropdown-item>\n                  <el-dropdown-item command=\"viewAnalysis\" icon=\"DataAnalysis\">\n                    查看分析\n                  </el-dropdown-item>\n                  <el-dropdown-item command=\"export\" icon=\"Download\">\n                    导出\n                  </el-dropdown-item>\n                </template>\n              </el-dropdown>\n            </el-button-group>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页 -->\n      <div class=\"pagination-container\">\n        <el-pagination\n          v-model:current-page=\"pagination.page\"\n          v-model:page-size=\"pagination.pageSize\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          :total=\"pagination.total\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handlePageChange\"\n        />\n      </div>\n    </div>\n\n    <!-- 详情对话框 -->\n    <el-dialog\n      v-model=\"showDetailDialog\"\n      :title=\"selectedGap ? `研究空白详情 #${selectedGap.id}` : '研究空白详情'\"\n      width=\"70%\"\n    >\n      <div v-if=\"selectedGap\" class=\"gap-detail\">\n        <!-- 基本信息 -->\n        <el-descriptions :column=\"2\" border>\n          <el-descriptions-item label=\"类型\">\n            <el-tag :type=\"getGapTypeColor(selectedGap.gap_type)\">\n              {{ getGapTypeLabel(selectedGap.gap_type) }}\n            </el-tag>\n          </el-descriptions-item>\n          <el-descriptions-item label=\"重要性\">\n            <el-tag :type=\"selectedGap.importance === 'high' ? 'danger' : selectedGap.importance === 'medium' ? 'warning' : 'info'\">\n              {{ getImportanceLabel(selectedGap.importance) }}\n            </el-tag>\n          </el-descriptions-item>\n          <el-descriptions-item label=\"难度\">\n            <el-tag :type=\"selectedGap.difficulty === 'high' ? 'danger' : selectedGap.difficulty === 'medium' ? 'warning' : 'info'\">\n              {{ getDifficultyLabel(selectedGap.difficulty) }}\n            </el-tag>\n          </el-descriptions-item>\n          <el-descriptions-item label=\"状态\">\n            <el-tag :type=\"getStatusType(selectedGap.status)\">\n              {{ getStatusLabel(selectedGap.status) }}\n            </el-tag>\n          </el-descriptions-item>\n        </el-descriptions>\n\n        <el-divider />\n\n        <!-- 详细描述 -->\n        <h3>研究空白描述</h3>\n        <p class=\"gap-description-full\">{{ selectedGap.description }}</p>\n\n        <!-- 潜在方法 -->\n        <h3>潜在解决方法</h3>\n        <p class=\"gap-text-content\">{{ selectedGap.potential_approach || '暂无' }}</p>\n\n        <!-- 预期影响 -->\n        <h3>预期影响</h3>\n        <p class=\"gap-text-content\">{{ selectedGap.expected_impact || '暂无' }}</p>\n\n        <!-- 已生成代码 -->\n        <div v-if=\"selectedGap.generated_code_id\">\n          <h3>生成的代码</h3>\n          <el-button @click=\"viewGeneratedCode(selectedGap.generated_code_id)\">\n            查看代码\n          </el-button>\n        </div>\n      </div>\n    </el-dialog>\n\n    <!-- 编辑对话框 -->\n    <el-dialog\n      v-model=\"showEditDialog\"\n      :title=\"editForm ? `编辑研究空白 #${editForm.id}` : '编辑研究空白'\"\n      width=\"60%\"\n    >\n      <el-form :model=\"editForm\" label-width=\"120px\" v-if=\"editForm\">\n        <el-form-item label=\"类型\">\n          <el-select v-model=\"editForm.gap_type\" placeholder=\"请选择类型\">\n            <el-option label=\"方法论\" value=\"methodological\" />\n            <el-option label=\"理论\" value=\"theoretical\" />\n            <el-option label=\"数据\" value=\"data\" />\n            <el-option label=\"应用\" value=\"application\" />\n            <el-option label=\"评估\" value=\"evaluation\" />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"描述\">\n          <el-input\n            type=\"textarea\"\n            :rows=\"4\"\n            v-model=\"editForm.description\"\n            placeholder=\"请详细描述研究空白\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"重要性\">\n          <el-select v-model=\"editForm.importance\" placeholder=\"请选择重要性\">\n            <el-option label=\"高\" value=\"high\" />\n            <el-option label=\"中\" value=\"medium\" />\n            <el-option label=\"低\" value=\"low\" />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"难度\">\n          <el-select v-model=\"editForm.difficulty\" placeholder=\"请选择难度\">\n            <el-option label=\"低\" value=\"low\" />\n            <el-option label=\"中\" value=\"medium\" />\n            <el-option label=\"高\" value=\"high\" />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"潜在解决方法\">\n          <el-input\n            type=\"textarea\"\n            :rows=\"4\"\n            v-model=\"editForm.potential_approach\"\n            placeholder=\"请详细描述可能的解决方案、实现路径等\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"预期影响\">\n          <el-input\n            type=\"textarea\"\n            :rows=\"4\"\n            v-model=\"editForm.expected_impact\"\n            placeholder=\"请描述实施该方案的预期学术贡献和实际影响\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"状态\">\n          <el-select v-model=\"editForm.status\" placeholder=\"请选择状态\">\n            <el-option label=\"已识别\" value=\"identified\" />\n            <el-option label=\"生成中\" value=\"code_generating\" />\n            <el-option label=\"已实现\" value=\"implemented\" />\n            <el-option label=\"已验证\" value=\"verified\" />\n          </el-select>\n        </el-form-item>\n      </el-form>\n\n      <template #footer>\n        <el-button @click=\"showEditDialog = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveEdit\" :loading=\"saving\">保存</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport api from '@/api'\n\n// 响应式数据\nconst loading = ref(false)\nconst gaps = ref([])\nconst selectedGap = ref({})\nconst showDetailDialog = ref(false)\nconst showEditDialog = ref(false)\nconst editForm = ref(null)\nconst saving = ref(false)\n\n// 筛选器\nconst filters = ref({\n  importance: '',\n  difficulty: '',\n  gapType: '',\n  status: ''\n})\n\n// 统计数据\nconst stats = ref({\n  total: 0,\n  high_priority: 0,\n  code_generated: 0,\n  implemented: 0\n})\n\n// 分页\nconst pagination = ref({\n  page: 1,\n  pageSize: 20,\n  total: 0\n})\n\n// 计算属性\nconst filteredGaps = computed(() => {\n  return gaps.value.filter(gap => {\n    if (filters.value.importance && gap.importance !== filters.value.importance) return false\n    if (filters.value.difficulty && gap.difficulty !== filters.value.difficulty) return false\n    if (filters.value.gapType && gap.gap_type !== filters.value.gapType) return false\n    if (filters.value.status && gap.status !== filters.value.status) return false\n    return true\n  })\n})\n\n// 方法\nconst loadGaps = async () => {\n  loading.value = true\n  try {\n    const response = await api.getPriorityGaps(1000)\n\n    if (response.success) {\n      const allGaps = response.data || []\n\n      if (allGaps.length === 0) {\n        ElMessage.info('暂无研究空白数据，请先分析论文')\n        gaps.value = []\n        pagination.value.total = 0\n        updateStats()\n        return\n      }\n\n      // 添加评分字段\n      gaps.value = allGaps.map(gap => ({\n        ...gap,\n        importance_level: { 'high': 3, 'medium': 2, 'low': 1 }[gap.importance] || 2,\n        difficulty_level: { 'low': 1, 'medium': 2, 'high': 3 }[gap.difficulty] || 2\n      }))\n\n      pagination.value.total = allGaps.length\n      updateStats()\n      ElMessage.success(`成功加载 ${allGaps.length} 个研究空白`)\n    } else {\n      ElMessage.error(response.error || '加载研究空白失败')\n    }\n  } catch (error) {\n    console.error('加载研究空白失败:', error)\n    if (error.response) {\n      ElMessage.error(`服务器错误: ${error.response.status}`)\n    } else if (error.request) {\n      ElMessage.error('网络错误，请检查后端服务是否启动')\n    } else {\n      ElMessage.error('加载研究空白失败: ' + error.message)\n    }\n  } finally {\n    loading.value = false\n  }\n}\n\nconst updateStats = () => {\n  stats.value = {\n    total: gaps.value.length,\n    high_priority: gaps.value.filter(g => g.importance === 'high').length,\n    code_generated: gaps.value.filter(g => g.generated_code_id).length,\n    implemented: gaps.value.filter(g => g.status === 'implemented').length\n  }\n}\n\nconst applyFilters = () => {\n  // 触发计算属性重新计算\n  ElMessage.success('筛选已应用')\n}\n\nconst resetFilters = () => {\n  filters.value = {\n    importance: '',\n    difficulty: '',\n    gapType: '',\n    status: ''\n  }\n  ElMessage.info('筛选已重置')\n}\n\nconst getGapTypeLabel = (type) => {\n  const labels = {\n    'methodological': '方法论',\n    'theoretical': '理论',\n    'data': '数据',\n    'application': '应用',\n    'evaluation': '评估'\n  }\n  return labels[type] || type\n}\n\nconst getGapTypeColor = (type) => {\n  const colors = {\n    'methodological': 'primary',\n    'theoretical': 'success',\n    'data': 'warning',\n    'application': 'info',\n    'evaluation': 'danger'\n  }\n  return colors[type] || ''\n}\n\nconst getStatusLabel = (status) => {\n  const labels = {\n    'identified': '已识别',\n    'code_generating': '生成中',\n    'implemented': '已实现',\n    'verified': '已验证'\n  }\n  return labels[status] || status\n}\n\nconst getStatusType = (status) => {\n  const types = {\n    'identified': 'info',\n    'code_generating': 'warning',\n    'implemented': 'success',\n    'verified': 'success'\n  }\n  return types[status] || 'info'\n}\n\nconst getImportanceLabel = (importance) => {\n  const labels = {\n    'high': '高',\n    'medium': '中',\n    'low': '低'\n  }\n  return labels[importance] || importance\n}\n\nconst getDifficultyLabel = (difficulty) => {\n  const labels = {\n    'high': '高',\n    'medium': '中',\n    'low': '低'\n  }\n  return labels[difficulty] || difficulty\n}\n\nconst getRowClassName = ({ row }) => {\n  if (row.importance === 'high') {\n    return 'high-priority-row'\n  }\n  return ''\n}\n\nconst showGapDetail = (row) => {\n  selectedGap.value = row\n  showDetailDialog.value = true\n}\n\nconst generatingCode = ref(false)\nconst currentGeneratingGap = ref(null)\n\nconst generateCode = async (gap) => {\n  // 防止重复点击\n  if (generatingCode.value) {\n    ElMessage.warning('正在生成代码，请稍候...')\n    return\n  }\n  \n  try {\n    generatingCode.value = true\n    currentGeneratingGap.value = gap.id\n    \n    // 更新本地状态显示生成中\n    gap.status = 'code_generating'\n    \n    ElMessage.info('正在生成代码，这可能需要一些时间...')\n    \n    const response = await api.generateCode(gap.id, 'method_improvement')\n    \n    if (response.success) {\n      ElMessage.success('代码生成成功！')\n      // 更新本地状态\n      gap.generated_code_id = response.data.id\n      gap.status = 'implemented'\n      await loadGaps()\n    } else {\n      // 恢复状态\n      gap.status = 'identified'\n      ElMessage.error(response.error || '代码生成失败')\n    }\n  } catch (error) {\n    // 恢复状态\n    gap.status = 'identified'\n    console.error('代码生成错误:', error)\n    \n    // 提供更详细的错误信息\n    let errorMsg = '代码生成失败'\n    if (error.response?.data?.error) {\n      errorMsg += `: ${error.response.data.error}`\n    } else if (error.message) {\n      errorMsg += `: ${error.message}`\n    }\n    ElMessage.error(errorMsg)\n  } finally {\n    generatingCode.value = false\n    currentGeneratingGap.value = null\n  }\n}\n\nconst editGap = (gap) => {\n  // 创建编辑表单的副本\n  editForm.value = {\n    id: gap.id,\n    gap_type: gap.gap_type || '',\n    description: gap.description || '',\n    importance: gap.importance || 'medium',\n    difficulty: gap.difficulty || 'medium',\n    potential_approach: gap.potential_approach || '',\n    expected_impact: gap.expected_impact || '',\n    status: gap.status || 'identified'\n  }\n  showEditDialog.value = true\n}\n\nconst saveEdit = async () => {\n  try {\n    saving.value = true\n\n    const response = await api.updateGap(editForm.value.id, {\n      gap_type: editForm.value.gap_type,\n      description: editForm.value.description,\n      importance: editForm.value.importance,\n      difficulty: editForm.value.difficulty,\n      potential_approach: editForm.value.potential_approach,\n      expected_impact: editForm.value.expected_impact,\n      status: editForm.value.status\n    })\n\n    if (response.success) {\n      ElMessage.success('保存成功')\n      showEditDialog.value = false\n      // 刷新列表\n      await loadGaps()\n    } else {\n      ElMessage.error(response.error || '保存失败')\n    }\n  } catch (error) {\n    console.error('保存失败:', error)\n    ElMessage.error('保存失败: ' + (error.message || '未知错误'))\n  } finally {\n    saving.value = false\n  }\n}\n\nconst viewGeneratedCode = (codeId) => {\n  // 跳转到代码编辑器\n  window.open(`#/code-editor/${codeId}`, '_blank')\n}\n\nconst handleCommand = (command, row) => {\n  switch (command) {\n    case 'viewPaper':\n      window.open(`#/papers/${row.analysis_id}`, '_blank')\n      break\n    case 'viewAnalysis':\n      window.open(`#/analysis/${row.analysis_id}`, '_blank')\n      break\n    case 'export':\n      exportSingleGap(row)\n      break\n  }\n}\n\nconst exportSingleGap = (gap) => {\n  const content = `\n研究空白详情 #${gap.id}\n\n类型: ${getGapTypeLabel(gap.gap_type)}\n重要性: ${gap.importance}\n难度: ${gap.difficulty}\n\n描述:\n${gap.description}\n\n潜在方法:\n${gap.potential_approach}\n\n预期影响:\n${gap.expected_impact}\n  `.trim()\n\n  const blob = new Blob([content], { type: 'text/plain' })\n  const url = URL.createObjectURL(blob)\n  const a = document.createElement('a')\n  a.href = url\n  a.download = `research_gap_${gap.id}.txt`\n  a.click()\n  URL.revokeObjectURL(url)\n  ElMessage.success('导出成功')\n}\n\nconst exportGaps = () => {\n  try {\n    if (filteredGaps.value.length === 0) {\n      ElMessage.warning('没有可导出的研究空白')\n      return\n    }\n\n    // 创建导出内容\n    let content = '研究空白汇总报告\\n'\n    content += '=' .repeat(80) + '\\n\\n'\n    content += `导出时间: ${new Date().toLocaleString('zh-CN')}\\n`\n    content += `总计: ${filteredGaps.value.length} 个研究空白\\n\\n`\n\n    // 统计信息\n    content += '统计信息\\n'\n    content += '-' .repeat(40) + '\\n'\n    content += `高优先级: ${filteredGaps.value.filter(g => g.importance === 'high').length}\\n`\n    content += `已生成代码: ${filteredGaps.value.filter(g => g.generated_code_id).length}\\n`\n    content += `已实现: ${filteredGaps.value.filter(g => g.status === 'implemented').length}\\n\\n`\n\n    // 按类型分组\n    const gapsByType = {}\n    filteredGaps.value.forEach(gap => {\n      const type = getGapTypeLabel(gap.gap_type)\n      if (!gapsByType[type]) gapsByType[type] = []\n      gapsByType[type].push(gap)\n    })\n\n    // 详细列表\n    content += '详细列表\\n'\n    content += '=' .repeat(80) + '\\n\\n'\n\n    Object.keys(gapsByType).forEach((type, typeIndex) => {\n      content += `\\n${typeIndex + 1}. ${type}类空白 (${gapsByType[type].length}个)\\n`\n      content += '-' .repeat(80) + '\\n'\n\n      gapsByType[type].forEach((gap, index) => {\n        content += `\\n[${index + 1}] 空白ID: ${gap.id}\\n`\n        content += `     类型: ${getGapTypeLabel(gap.gap_type)}\\n`\n        content += `     重要性: ${gap.importance} | 难度: ${gap.difficulty}\\n`\n        content += `     描述: ${gap.description}\\n`\n        if (gap.potential_approach) {\n          content += `     潜在方法: ${gap.potential_approach}\\n`\n        }\n        if (gap.expected_impact) {\n          content += `     预期影响: ${gap.expected_impact}\\n`\n        }\n        content += `     状态: ${getStatusLabel(gap.status)}\\n`\n      })\n    })\n\n    content += '\\n' + '=' .repeat(80) + '\\n'\n    content += '报告结束\\n'\n\n    // 下载文件\n    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' })\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = `research_gaps_export_${new Date().getTime()}.txt`\n    a.click()\n    URL.revokeObjectURL(url)\n\n    ElMessage.success(`成功导出 ${filteredGaps.value.length} 个研究空白`)\n  } catch (error) {\n    ElMessage.error('导出失败: ' + error.message)\n    console.error('Export error:', error)\n  }\n}\n\nconst refreshGaps = () => {\n  loadGaps()\n}\n\nconst handlePageChange = (page) => {\n  pagination.value.page = page\n}\n\nconst handleSizeChange = (size) => {\n  pagination.value.pageSize = size\n}\n\n// 生命周期\nonMounted(() => {\n  loadGaps()\n})\n</script>\n\n<style scoped>\n.research-gaps-manager {\n  padding: 20px;\n}\n\n.gaps-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.gaps-header h2 {\n  margin: 0;\n  font-size: 24px;\n  font-weight: 600;\n}\n\n.gaps-filter {\n  margin-bottom: 20px;\n  padding: 16px;\n  background: #f5f7fa;\n  border-radius: 8px;\n}\n\n.stats-cards {\n  margin-bottom: 20px;\n}\n\n.stat-card {\n  text-align: center;\n}\n\n.stat-content {\n  padding: 16px;\n}\n\n.stat-number {\n  font-size: 32px;\n  font-weight: 700;\n  margin-bottom: 8px;\n}\n\n.stat-label {\n  font-size: 14px;\n  color: #606266;\n}\n\n.priority-high .stat-number {\n  color: #F56C6C;\n}\n\n.code-generated .stat-number {\n  color: #409EFF;\n}\n\n.implemented .stat-number {\n  color: #67C23A;\n}\n\n.gaps-table-container {\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.gap-description {\n  font-size: 14px;\n  color: #303133;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.gaps-table :deep(.el-table__row) {\n  cursor: pointer;\n}\n\n.gaps-table :deep(.high-priority-row) {\n  background: #fef0f0;\n}\n\n.gaps-table :deep(.el-table__row:hover) {\n  background: #f5f7fa;\n}\n\n.pagination-container {\n  padding: 16px;\n  display: flex;\n  justify-content: center;\n}\n\n.gap-detail h3 {\n  font-size: 16px;\n  font-weight: 600;\n  margin: 16px 0 8px 0;\n  color: #303133;\n}\n\n.gap-description-full {\n  padding: 12px;\n  background: #f5f7fa;\n  border-radius: 4px;\n  line-height: 1.6;\n  color: #606266;\n  margin-bottom: 16px;\n}\n\n.gap-text-content {\n  padding: 12px;\n  background: #ffffff;\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  line-height: 1.8;\n  color: #606266;\n  margin-bottom: 16px;\n  min-height: 60px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}