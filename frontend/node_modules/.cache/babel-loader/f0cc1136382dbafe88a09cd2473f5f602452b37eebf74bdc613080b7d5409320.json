{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { defineComponent, inject, watch } from 'vue';\nimport { selectKey } from '../../select/src/token.mjs';\nimport { isClient } from '@vueuse/core';\nvar CacheOptions = defineComponent({\n  props: {\n    data: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup(props) {\n    const select = inject(selectKey);\n    watch(() => props.data, () => {\n      var _a;\n      props.data.forEach(item => {\n        if (!select.states.cachedOptions.has(item.value)) {\n          select.states.cachedOptions.set(item.value, item);\n        }\n      });\n      const inputs = ((_a = select.selectRef) == null ? void 0 : _a.querySelectorAll(\"input\")) || [];\n      if (isClient && !Array.from(inputs).includes(document.activeElement)) {\n        select.setSelected();\n      }\n    }, {\n      flush: \"post\",\n      immediate: true\n    });\n    return () => void 0;\n  }\n});\nexport { CacheOptions as default };","map":{"version":3,"names":["CacheOptions","defineComponent","props","data","type","Array","default","setup","select","inject","selectKey","watch","_a","forEach","item","states","cachedOptions","has","value","set","inputs","selectRef","querySelectorAll","isClient","from","includes","document","activeElement","setSelected","flush","immediate"],"sources":["../../../../../../packages/components/tree-select/src/cache-options.ts"],"sourcesContent":["import { defineComponent, inject, watch } from 'vue'\nimport { selectKey } from '@element-plus/components/select'\nimport { isClient } from '@element-plus/utils'\n\nimport type { SelectContext } from '@element-plus/components/select'\nimport type { PropType } from 'vue'\n\n// same as el-option instance,\n// these are required for `cachedOptions`\nexport type CacheOption = {\n  value: string | number | boolean | object\n  currentLabel: string | number\n  isDisabled: boolean\n}\n\nexport default defineComponent({\n  props: {\n    data: {\n      type: Array as PropType<CacheOption[]>,\n      default: () => [],\n    },\n  },\n  setup(props) {\n    const select = inject(selectKey) as NonNullable<SelectContext>\n\n    watch(\n      () => props.data,\n      () => {\n        props.data.forEach((item) => {\n          if (!select.states.cachedOptions.has(item.value)) {\n            // TODO: the type of 'item' is not compatible with the type of 'cachedOptions',\n            // which may indicate potential runtime issues.\n            // @ts-expect-error\n            select.states.cachedOptions.set(item.value, item)\n          }\n        })\n\n        // fork from packages/select/src/useSelect.ts#330\n        const inputs = select.selectRef?.querySelectorAll('input') || []\n        if (\n          isClient &&\n          !Array.from(inputs).includes(\n            document.activeElement as HTMLInputElement\n          )\n        ) {\n          select.setSelected()\n        }\n      },\n      { flush: 'post', immediate: true }\n    )\n\n    return () => undefined\n  },\n})\n"],"mappings":";;;;;AAeA,IAAAA,YAAA,GAAeC,eAAgB;EAC7BC,KAAO;IACLC,IAAM;MACJC,IAAM,EAAAC,KAAA;MACNC,OAAA,EAASA,CAAA,KAAM;IAAC;EAClB,CACF;EACAC,MAAML,KAAO;IACL,MAAAM,MAAA,GAASC,MAAA,CAAOC,SAAS;IAE/BC,KAAA,CACE,MAAMT,KAAM,CAAAC,IAAA,EACZ,MAAM;MA3BZ,IAAAS,EAAA;MA4BcV,KAAA,CAAAC,IAAA,CAAKU,OAAQ,CAACC,IAAS;QAC3B,IAAI,CAACN,MAAO,CAAAO,MAAA,CAAOC,aAAA,CAAcC,GAAI,CAAAH,IAAA,CAAKI,KAAK,CAAG;UAIhDV,MAAA,CAAOO,MAAO,CAAAC,aAAA,CAAcG,GAAI,CAAAL,IAAA,CAAKI,KAAA,EAAOJ,IAAI;QAAA;MAClD,CACD;MAGD,MAAMM,MAAA,KAASR,EAAO,GAAAJ,MAAA,CAAAa,SAAA,KAAP,IAAkB,YAAAT,EAAA,CAAAU,gBAAA,CAAiB,aAAY,EAAC;MAC/D,IACEC,QACA,KAAClB,KAAM,CAAAmB,IAAA,CAAKJ,MAAM,CAAE,CAAAK,QAAA,CAClBC,QAAS,CAAAC,aAAA,CAEX;QACAnB,MAAA,CAAOoB,WAAY;MAAA;IACrB,CACF,EACA;MAAEC,KAAA,EAAO,MAAQ;MAAAC,SAAA,EAAW;IAAK,EACnC;IAEA,OAAO,MAAM;EAAA;AAEjB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}