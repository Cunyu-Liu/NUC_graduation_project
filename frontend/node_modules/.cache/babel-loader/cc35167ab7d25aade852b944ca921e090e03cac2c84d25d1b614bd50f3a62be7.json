{"ast":null,"code":"import { defineComponent, getCurrentInstance, inject, toRef, computed, reactive, onMounted, onBeforeUnmount, openBlock, createElementBlock, normalizeClass, unref, createBlock, withCtx, renderSlot, createElementVNode, Fragment } from 'vue';\nimport { ElTooltip } from '../../tooltip/index.mjs';\nimport useMenu from './use-menu.mjs';\nimport { menuItemProps, menuItemEmits } from './menu-item.mjs';\nimport { MENU_INJECTION_KEY, SUB_MENU_INJECTION_KEY } from './tokens.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { isPropAbsent } from '../../../utils/types.mjs';\nimport { debugWarn, throwError } from '../../../utils/error.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nconst COMPONENT_NAME = \"ElMenuItem\";\nconst _sfc_main = defineComponent({\n  ...{\n    name: COMPONENT_NAME\n  },\n  __name: \"menu-item\",\n  props: menuItemProps,\n  emits: menuItemEmits,\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    const props = __props;\n    const emit = __emit;\n    isPropAbsent(props.index) && debugWarn(COMPONENT_NAME, 'Missing required prop: \"index\"');\n    const instance = getCurrentInstance();\n    const rootMenu = inject(MENU_INJECTION_KEY);\n    const nsMenu = useNamespace(\"menu\");\n    const nsMenuItem = useNamespace(\"menu-item\");\n    if (!rootMenu) throwError(COMPONENT_NAME, \"can not inject root menu\");\n    const {\n      parentMenu,\n      indexPath\n    } = useMenu(instance, toRef(props, \"index\"));\n    const subMenu = inject(`${SUB_MENU_INJECTION_KEY}${parentMenu.value.uid}`);\n    if (!subMenu) throwError(COMPONENT_NAME, \"can not inject sub menu\");\n    const active = computed(() => props.index === rootMenu.activeIndex);\n    const item = reactive({\n      index: props.index,\n      indexPath,\n      active\n    });\n    const handleClick = () => {\n      if (!props.disabled) {\n        rootMenu.handleMenuItemClick({\n          index: props.index,\n          indexPath: indexPath.value,\n          route: props.route\n        });\n        emit(\"click\", item);\n      }\n    };\n    onMounted(() => {\n      subMenu.addSubMenu(item);\n      rootMenu.addMenuItem(item);\n    });\n    onBeforeUnmount(() => {\n      subMenu.removeSubMenu(item);\n      rootMenu.removeMenuItem(item);\n    });\n    __expose({\n      parentMenu,\n      rootMenu,\n      active,\n      nsMenu,\n      nsMenuItem,\n      handleClick\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"li\", {\n        class: normalizeClass([unref(nsMenuItem).b(), unref(nsMenuItem).is(\"active\", active.value), unref(nsMenuItem).is(\"disabled\", _ctx.disabled)]),\n        role: \"menuitem\",\n        tabindex: \"-1\",\n        onClick: handleClick\n      }, [unref(parentMenu).type.name === \"ElMenu\" && unref(rootMenu).props.collapse && _ctx.$slots.title ? (openBlock(), createBlock(unref(ElTooltip), {\n        key: 0,\n        effect: unref(rootMenu).props.popperEffect,\n        placement: \"right\",\n        \"fallback-placements\": [\"left\"],\n        \"popper-class\": unref(rootMenu).props.popperClass,\n        \"popper-style\": unref(rootMenu).props.popperStyle,\n        persistent: unref(rootMenu).props.persistent,\n        \"focus-on-target\": \"\"\n      }, {\n        content: withCtx(() => [renderSlot(_ctx.$slots, \"title\")]),\n        default: withCtx(() => [createElementVNode(\"div\", {\n          class: normalizeClass(unref(nsMenu).be(\"tooltip\", \"trigger\"))\n        }, [renderSlot(_ctx.$slots, \"default\")], 2)]),\n        _: 3\n      }, 8, [\"effect\", \"popper-class\", \"popper-style\", \"persistent\"])) : (openBlock(), createElementBlock(Fragment, {\n        key: 1\n      }, [renderSlot(_ctx.$slots, \"default\"), renderSlot(_ctx.$slots, \"title\")], 64))], 2);\n    };\n  }\n});\nvar MenuItem = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue\"]]);\nexport { MenuItem as default };","map":{"version":3,"names":["COMPONENT_NAME","props","__props","emit","__emit","isPropAbsent","index","debugWarn","instance","getCurrentInstance","rootMenu","inject","MENU_INJECTION_KEY","nsMenu","useNamespace","nsMenuItem","throwError","parentMenu","indexPath","useMenu","toRef","subMenu","SUB_MENU_INJECTION_KEY","value","uid","active","computed","activeIndex","item","reactive","handleClick","disabled","handleMenuItemClick","route","onMounted","addSubMenu","addMenuItem","onBeforeUnmount","removeSubMenu","removeMenuItem","__expose","openBlock","createElementBlock","class","normalizeClass","unref","b","is","_ctx","role","tabindex","onClick","type","name","collapse","$slots","title","createBlock","ElTooltip","key","effect","popperEffect","placement","popperClass","popperStyle","persistent","content","withCtx","renderSlot","default","createElementVNode","be","Fragment"],"sources":["../../../../../../packages/components/menu/src/menu-item.vue"],"sourcesContent":["<template>\n  <li\n    :class=\"[\n      nsMenuItem.b(),\n      nsMenuItem.is('active', active),\n      nsMenuItem.is('disabled', disabled),\n    ]\"\n    role=\"menuitem\"\n    tabindex=\"-1\"\n    @click=\"handleClick\"\n  >\n    <el-tooltip\n      v-if=\"\n        parentMenu.type.name === 'ElMenu' &&\n        rootMenu.props.collapse &&\n        $slots.title\n      \"\n      :effect=\"rootMenu.props.popperEffect\"\n      placement=\"right\"\n      :fallback-placements=\"['left']\"\n      :popper-class=\"rootMenu.props.popperClass\"\n      :popper-style=\"rootMenu.props.popperStyle\"\n      :persistent=\"rootMenu.props.persistent\"\n      focus-on-target\n    >\n      <template #content>\n        <slot name=\"title\" />\n      </template>\n      <div :class=\"nsMenu.be('tooltip', 'trigger')\">\n        <slot />\n      </div>\n    </el-tooltip>\n    <template v-else>\n      <slot />\n      <slot name=\"title\" />\n    </template>\n  </li>\n</template>\n\n<script lang=\"ts\" setup>\n// @ts-nocheck\nimport {\n  computed,\n  getCurrentInstance,\n  inject,\n  onBeforeUnmount,\n  onMounted,\n  reactive,\n  toRef,\n} from 'vue'\nimport ElTooltip from '@element-plus/components/tooltip'\nimport { debugWarn, isPropAbsent, throwError } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport useMenu from './use-menu'\nimport { menuItemEmits, menuItemProps } from './menu-item'\nimport { MENU_INJECTION_KEY, SUB_MENU_INJECTION_KEY } from './tokens'\n\nimport type { MenuItemRegistered, MenuProvider, SubMenuProvider } from './types'\n\nconst COMPONENT_NAME = 'ElMenuItem'\ndefineOptions({\n  name: COMPONENT_NAME,\n})\nconst props = defineProps(menuItemProps)\nconst emit = defineEmits(menuItemEmits)\n\nisPropAbsent(props.index) &&\n  debugWarn(COMPONENT_NAME, 'Missing required prop: \"index\"')\n\nconst instance = getCurrentInstance()!\nconst rootMenu = inject<MenuProvider>(MENU_INJECTION_KEY)\nconst nsMenu = useNamespace('menu')\nconst nsMenuItem = useNamespace('menu-item')\nif (!rootMenu) throwError(COMPONENT_NAME, 'can not inject root menu')\n\nconst { parentMenu, indexPath } = useMenu(instance, toRef(props, 'index'))\n\nconst subMenu = inject<SubMenuProvider>(\n  `${SUB_MENU_INJECTION_KEY}${parentMenu.value.uid}`\n)\nif (!subMenu) throwError(COMPONENT_NAME, 'can not inject sub menu')\n\nconst active = computed(() => props.index === rootMenu.activeIndex)\nconst item: MenuItemRegistered = reactive({\n  index: props.index,\n  indexPath,\n  active,\n})\n\nconst handleClick = () => {\n  if (!props.disabled) {\n    rootMenu.handleMenuItemClick({\n      index: props.index,\n      indexPath: indexPath.value,\n      route: props.route,\n    })\n    emit('click', item)\n  }\n}\n\nonMounted(() => {\n  subMenu.addSubMenu(item)\n  rootMenu.addMenuItem(item)\n})\n\nonBeforeUnmount(() => {\n  subMenu.removeSubMenu(item)\n  rootMenu.removeMenuItem(item)\n})\n\ndefineExpose({\n  parentMenu,\n  rootMenu,\n  active,\n  nsMenu,\n  nsMenuItem,\n  handleClick,\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}