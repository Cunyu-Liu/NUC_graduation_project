{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter, useRoute } from 'vue-router';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { Document, Upload, ArrowDown, User, SwitchButton, HomeFilled, DataAnalysis, Folder, Search, Share } from '@element-plus/icons-vue';\nimport UploadDialog from '@/components/UploadDialog.vue';\nimport ProgressDialog from '@/components/ProgressDialog.vue';\nexport default {\n  name: 'App',\n  components: {\n    UploadDialog,\n    ProgressDialog,\n    Document,\n    Upload,\n    ArrowDown,\n    User,\n    SwitchButton,\n    HomeFilled,\n    DataAnalysis,\n    Folder,\n    Search,\n    Share\n  },\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const route = useRoute();\n    const isAuthenticated = computed(() => store.getters.isAuthenticated);\n    const currentUser = computed(() => store.getters.currentUser);\n    const currentRoute = computed(() => route.path);\n\n    // 用户头像（默认使用首字母）\n    const userAvatar = computed(() => currentUser.value?.avatar || '');\n    const userInitial = computed(() => {\n      const name = currentUser.value?.full_name || currentUser.value?.username || '';\n      return name.charAt(0).toUpperCase();\n    });\n    const showUploadDialog = () => {\n      store.commit('SHOW_UPLOAD_DIALOG', true);\n    };\n    const handleFileUploaded = file => {\n      store.dispatch('fetchFiles');\n    };\n\n    // 处理用户下拉菜单命令\n    const handleUserCommand = async command => {\n      switch (command) {\n        case 'profile':\n          router.push('/profile');\n          break;\n        case 'logout':\n          try {\n            await ElMessageBox.confirm('确定要退出登录吗？', '提示', {\n              confirmButtonText: '确定',\n              cancelButtonText: '取消',\n              type: 'warning'\n            });\n            await store.dispatch('logout');\n            ElMessage.success('已退出登录');\n            router.push('/login');\n          } catch (error) {\n            // 用户取消\n          }\n          break;\n      }\n    };\n    return {\n      isAuthenticated,\n      currentUser,\n      currentRoute,\n      userAvatar,\n      userInitial,\n      showUploadDialog,\n      handleFileUploaded,\n      handleUserCommand\n    };\n  }\n};","map":{"version":3,"names":["computed","useStore","useRouter","useRoute","ElMessage","ElMessageBox","Document","Upload","ArrowDown","User","SwitchButton","HomeFilled","DataAnalysis","Folder","Search","Share","UploadDialog","ProgressDialog","name","components","setup","store","router","route","isAuthenticated","getters","currentUser","currentRoute","path","userAvatar","value","avatar","userInitial","full_name","username","charAt","toUpperCase","showUploadDialog","commit","handleFileUploaded","file","dispatch","handleUserCommand","command","push","confirm","confirmButtonText","cancelButtonText","type","success","error"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <el-container v-if=\"isAuthenticated\">\n      <!-- 顶部导航栏 -->\n      <el-header class=\"header\">\n        <div class=\"header-content\">\n          <div class=\"logo\">\n            <el-icon :size=\"28\" color=\"#fff\"><Document /></el-icon>\n            <h1 class=\"title\">科研文献智能分析系统</h1>\n          </div>\n          <div class=\"header-right\">\n            <el-button type=\"primary\" @click=\"showUploadDialog\" class=\"upload-btn\">\n              <el-icon><Upload /></el-icon>\n              <span>上传论文</span>\n            </el-button>\n\n            <!-- 用户信息 -->\n            <el-dropdown @command=\"handleUserCommand\" class=\"user-dropdown\">\n              <div class=\"user-info\">\n                <el-avatar :size=\"32\" :src=\"userAvatar\" class=\"user-avatar\">\n                  {{ userInitial }}\n                </el-avatar>\n                <span class=\"username\">{{ currentUser?.full_name || currentUser?.username }}</span>\n                <el-icon color=\"#fff\"><ArrowDown /></el-icon>\n              </div>\n              <template #dropdown>\n                <el-dropdown-menu>\n                  <el-dropdown-item disabled class=\"user-info-item\">\n                    <div class=\"user-detail\">\n                      <div class=\"user-detail-name\">{{ currentUser?.full_name || currentUser?.username }}</div>\n                      <div class=\"user-detail-email\">{{ currentUser?.email }}</div>\n                    </div>\n                  </el-dropdown-item>\n                  <el-dropdown-item divided command=\"profile\">\n                    <el-icon><User /></el-icon> 个人信息\n                  </el-dropdown-item>\n                  <el-dropdown-item command=\"logout\">\n                    <el-icon><SwitchButton /></el-icon> 退出登录\n                  </el-dropdown-item>\n                </el-dropdown-menu>\n              </template>\n            </el-dropdown>\n          </div>\n        </div>\n      </el-header>\n\n      <el-container>\n        <!-- 侧边栏菜单 -->\n        <el-aside width=\"220px\" class=\"aside\">\n          <el-menu\n            :default-active=\"currentRoute\"\n            router\n            class=\"menu\"\n            background-color=\"#001529\"\n            text-color=\"rgba(255,255,255,0.65)\"\n            active-text-color=\"#fff\"\n            :collapse-transition=\"false\"\n          >\n            <el-menu-item index=\"/home\">\n              <el-icon><HomeFilled /></el-icon>\n              <span>首页</span>\n            </el-menu-item>\n\n            <el-menu-item index=\"/analyze\">\n              <el-icon><Document /></el-icon>\n              <span>单篇分析</span>\n            </el-menu-item>\n\n            <el-menu-item index=\"/cluster\">\n              <el-icon><DataAnalysis /></el-icon>\n              <span>聚类分析</span>\n            </el-menu-item>\n\n            <el-menu-item index=\"/files\">\n              <el-icon><Folder /></el-icon>\n              <span>文件管理</span>\n            </el-menu-item>\n\n            <el-menu-item index=\"/gaps\">\n              <el-icon><Search /></el-icon>\n              <span>研究空白</span>\n            </el-menu-item>\n\n            <el-menu-item index=\"/knowledge-graph\">\n              <el-icon><Share /></el-icon>\n              <span>知识图谱</span>\n            </el-menu-item>\n          </el-menu>\n        </el-aside>\n\n        <!-- 主内容区 -->\n        <el-main class=\"main\">\n          <router-view />\n        </el-main>\n      </el-container>\n    </el-container>\n\n    <!-- 未登录时只显示路由内容 -->\n    <router-view v-else />\n\n    <!-- 上传对话框 -->\n    <UploadDialog ref=\"uploadDialog\" @uploaded=\"handleFileUploaded\" />\n\n    <!-- 进度条 -->\n    <ProgressDialog ref=\"progressDialog\" />\n  </div>\n</template>\n\n<script>\nimport { computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter, useRoute } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport {\n  Document, Upload, ArrowDown, User, SwitchButton,\n  HomeFilled, DataAnalysis, Folder, Search, Share\n} from '@element-plus/icons-vue'\nimport UploadDialog from '@/components/UploadDialog.vue'\nimport ProgressDialog from '@/components/ProgressDialog.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    UploadDialog,\n    ProgressDialog,\n    Document, Upload, ArrowDown, User, SwitchButton,\n    HomeFilled, DataAnalysis, Folder, Search, Share\n  },\n  setup() {\n    const store = useStore()\n    const router = useRouter()\n    const route = useRoute()\n\n    const isAuthenticated = computed(() => store.getters.isAuthenticated)\n    const currentUser = computed(() => store.getters.currentUser)\n    const currentRoute = computed(() => route.path)\n\n    // 用户头像（默认使用首字母）\n    const userAvatar = computed(() => currentUser.value?.avatar || '')\n    const userInitial = computed(() => {\n      const name = currentUser.value?.full_name || currentUser.value?.username || ''\n      return name.charAt(0).toUpperCase()\n    })\n\n    const showUploadDialog = () => {\n      store.commit('SHOW_UPLOAD_DIALOG', true)\n    }\n\n    const handleFileUploaded = (file) => {\n      store.dispatch('fetchFiles')\n    }\n\n    // 处理用户下拉菜单命令\n    const handleUserCommand = async (command) => {\n      switch (command) {\n        case 'profile':\n          router.push('/profile')\n          break\n        case 'logout':\n          try {\n            await ElMessageBox.confirm(\n              '确定要退出登录吗？',\n              '提示',\n              {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n              }\n            )\n            await store.dispatch('logout')\n            ElMessage.success('已退出登录')\n            router.push('/login')\n          } catch (error) {\n            // 用户取消\n          }\n          break\n      }\n    }\n\n    return {\n      isAuthenticated,\n      currentUser,\n      currentRoute,\n      userAvatar,\n      userInitial,\n      showUploadDialog,\n      handleFileUploaded,\n      handleUserCommand\n    }\n  }\n}\n</script>\n\n<style>\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n#app {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n    'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n    'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100vh;\n}\n\n.el-container {\n  height: 100%;\n}\n\n/* 顶部导航栏 - 深色简洁风格 */\n.header {\n  background-color: #001529;\n  color: white;\n  padding: 0 !important;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);\n  height: 64px !important;\n  line-height: 64px;\n}\n\n.header-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 100%;\n  padding: 0 24px;\n}\n\n.logo {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.title {\n  font-size: 20px;\n  font-weight: 500;\n  margin: 0;\n  color: #fff;\n  letter-spacing: 0.5px;\n}\n\n/* 侧边栏 - 深色菜单 */\n.aside {\n  background-color: #001529;\n  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.15);\n  z-index: 10;\n}\n\n.menu {\n  border: none;\n  height: 100%;\n  padding-top: 16px;\n}\n\n.menu .el-menu-item {\n  height: 48px;\n  line-height: 48px;\n  margin: 4px 0;\n  padding-left: 24px !important;\n  font-size: 14px;\n  transition: all 0.3s;\n}\n\n.menu .el-menu-item:hover {\n  background-color: #1890ff !important;\n  color: #fff !important;\n}\n\n.menu .el-menu-item.is-active {\n  background-color: #1890ff !important;\n  color: #fff !important;\n}\n\n.menu .el-menu-item i {\n  margin-right: 10px;\n  font-size: 16px;\n}\n\n/* 主内容区 */\n.main {\n  background-color: #f0f2f5;\n  padding: 24px;\n  overflow-y: auto;\n}\n\n/* 头部右侧 */\n.header-right {\n  display: flex;\n  align-items: center;\n  gap: 24px;\n}\n\n.upload-btn {\n  background-color: #1890ff;\n  border-color: #1890ff;\n  height: 36px;\n  padding: 0 20px;\n}\n\n.upload-btn:hover {\n  background-color: #40a9ff;\n  border-color: #40a9ff;\n}\n\n.upload-btn span {\n  margin-left: 6px;\n}\n\n.user-dropdown {\n  cursor: pointer;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 4px 8px;\n  border-radius: 4px;\n  transition: background-color 0.3s;\n}\n\n.user-info:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.user-avatar {\n  background-color: #1890ff;\n  color: white;\n  font-weight: 500;\n}\n\n.username {\n  font-size: 14px;\n  font-weight: 400;\n  color: rgba(255, 255, 255, 0.85);\n  max-width: 120px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.user-info-item {\n  padding: 0 !important;\n}\n\n.user-detail {\n  padding: 12px 16px;\n  min-width: 160px;\n}\n\n.user-detail-name {\n  font-size: 14px;\n  font-weight: 500;\n  color: #262626;\n  margin-bottom: 4px;\n}\n\n.user-detail-email {\n  font-size: 12px;\n  color: #8c8c8c;\n}\n\n/* 卡片样式统一 */\n.el-card {\n  border-radius: 8px;\n  border: none;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06), 0 1px 6px rgba(0, 0, 0, 0.04) !important;\n  transition: all 0.3s;\n}\n\n.el-card:hover {\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.08), 0 6px 16px rgba(0, 0, 0, 0.06) !important;\n}\n\n/* 按钮样式 */\n.el-button {\n  border-radius: 6px;\n  font-weight: 400;\n}\n\n.el-button--primary {\n  background-color: #1890ff;\n  border-color: #1890ff;\n}\n\n.el-button--primary:hover {\n  background-color: #40a9ff;\n  border-color: #40a9ff;\n}\n\n.el-button--success {\n  background-color: #52c41a;\n  border-color: #52c41a;\n}\n\n.el-button--success:hover {\n  background-color: #73d13d;\n  border-color: #73d13d;\n}\n\n.el-button--danger {\n  background-color: #ff4d4f;\n  border-color: #ff4d4f;\n}\n\n.el-button--danger:hover {\n  background-color: #ff7875;\n  border-color: #ff7875;\n}\n\n/* 表格样式 */\n.el-table {\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.el-table th {\n  background-color: #fafafa !important;\n  font-weight: 500;\n  color: #262626;\n}\n\n/* 标签样式 */\n.el-tag {\n  border-radius: 4px;\n  font-weight: 400;\n}\n\n/* 输入框样式 */\n.el-input__wrapper {\n  border-radius: 6px;\n}\n\n/* 分页样式 */\n.el-pagination {\n  justify-content: flex-end;\n  margin-top: 16px;\n}\n\n/* 空状态样式 */\n.el-empty {\n  padding: 48px 0;\n}\n\n/* 对话框样式 */\n.el-dialog {\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n.el-dialog__header {\n  border-bottom: 1px solid #f0f0f0;\n  padding: 20px 24px;\n  margin-right: 0;\n}\n\n.el-dialog__title {\n  font-weight: 500;\n  font-size: 16px;\n}\n\n.el-dialog__body {\n  padding: 24px;\n}\n\n.el-dialog__footer {\n  border-top: 1px solid #f0f0f0;\n  padding: 16px 24px;\n}\n</style>\n"],"mappings":";AA6GA,SAASA,QAAO,QAAS,KAAI;AAC7B,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAW;AAC/C,SAASC,SAAS,EAAEC,YAAW,QAAS,cAAa;AACrD,SACEC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,EAAEC,IAAI,EAAEC,YAAY,EAC/CC,UAAU,EAAEC,YAAY,EAAEC,MAAM,EAAEC,MAAM,EAAEC,KAAI,QACzC,yBAAwB;AAC/B,OAAOC,YAAW,MAAO,+BAA8B;AACvD,OAAOC,cAAa,MAAO,iCAAgC;AAE3D,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,UAAU,EAAE;IACVH,YAAY;IACZC,cAAc;IACdX,QAAQ;IAAEC,MAAM;IAAEC,SAAS;IAAEC,IAAI;IAAEC,YAAY;IAC/CC,UAAU;IAAEC,YAAY;IAAEC,MAAM;IAAEC,MAAM;IAAEC;EAC5C,CAAC;EACDK,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIpB,QAAQ,CAAC;IACvB,MAAMqB,MAAK,GAAIpB,SAAS,CAAC;IACzB,MAAMqB,KAAI,GAAIpB,QAAQ,CAAC;IAEvB,MAAMqB,eAAc,GAAIxB,QAAQ,CAAC,MAAMqB,KAAK,CAACI,OAAO,CAACD,eAAe;IACpE,MAAME,WAAU,GAAI1B,QAAQ,CAAC,MAAMqB,KAAK,CAACI,OAAO,CAACC,WAAW;IAC5D,MAAMC,YAAW,GAAI3B,QAAQ,CAAC,MAAMuB,KAAK,CAACK,IAAI;;IAE9C;IACA,MAAMC,UAAS,GAAI7B,QAAQ,CAAC,MAAM0B,WAAW,CAACI,KAAK,EAAEC,MAAK,IAAK,EAAE;IACjE,MAAMC,WAAU,GAAIhC,QAAQ,CAAC,MAAM;MACjC,MAAMkB,IAAG,GAAIQ,WAAW,CAACI,KAAK,EAAEG,SAAQ,IAAKP,WAAW,CAACI,KAAK,EAAEI,QAAO,IAAK,EAAC;MAC7E,OAAOhB,IAAI,CAACiB,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC;IACpC,CAAC;IAED,MAAMC,gBAAe,GAAIA,CAAA,KAAM;MAC7BhB,KAAK,CAACiB,MAAM,CAAC,oBAAoB,EAAE,IAAI;IACzC;IAEA,MAAMC,kBAAiB,GAAKC,IAAI,IAAK;MACnCnB,KAAK,CAACoB,QAAQ,CAAC,YAAY;IAC7B;;IAEA;IACA,MAAMC,iBAAgB,GAAI,MAAOC,OAAO,IAAK;MAC3C,QAAQA,OAAO;QACb,KAAK,SAAS;UACZrB,MAAM,CAACsB,IAAI,CAAC,UAAU;UACtB;QACF,KAAK,QAAQ;UACX,IAAI;YACF,MAAMvC,YAAY,CAACwC,OAAO,CACxB,WAAW,EACX,IAAI,EACJ;cACEC,iBAAiB,EAAE,IAAI;cACvBC,gBAAgB,EAAE,IAAI;cACtBC,IAAI,EAAE;YACR,CACF;YACA,MAAM3B,KAAK,CAACoB,QAAQ,CAAC,QAAQ;YAC7BrC,SAAS,CAAC6C,OAAO,CAAC,OAAO;YACzB3B,MAAM,CAACsB,IAAI,CAAC,QAAQ;UACtB,EAAE,OAAOM,KAAK,EAAE;YACd;UAAA;UAEF;MACJ;IACF;IAEA,OAAO;MACL1B,eAAe;MACfE,WAAW;MACXC,YAAY;MACZE,UAAU;MACVG,WAAW;MACXK,gBAAgB;MAChBE,kBAAkB;MAClBG;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}