{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, resolveDynamicComponent as _resolveDynamicComponent, withKeys as _withKeys } from \"vue\";\nconst _hoisted_1 = {\n  class: \"ai-chat-container\"\n};\nconst _hoisted_2 = {\n  class: \"sidebar-header\"\n};\nconst _hoisted_3 = {\n  class: \"chat-history\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  class: \"chat-title\"\n};\nconst _hoisted_6 = {\n  class: \"chat-main\"\n};\nconst _hoisted_7 = {\n  class: \"chat-toolbar\"\n};\nconst _hoisted_8 = {\n  class: \"toolbar-left\"\n};\nconst _hoisted_9 = {\n  class: \"chat-title\"\n};\nconst _hoisted_10 = {\n  class: \"toolbar-right\"\n};\nconst _hoisted_11 = {\n  ref: \"messagesContainer\",\n  class: \"messages-container\"\n};\nconst _hoisted_12 = {\n  key: 0,\n  class: \"welcome-screen\"\n};\nconst _hoisted_13 = {\n  class: \"welcome-icon\"\n};\nconst _hoisted_14 = {\n  class: \"quick-actions\"\n};\nconst _hoisted_15 = {\n  class: \"quick-action-buttons\"\n};\nconst _hoisted_16 = {\n  key: 0,\n  class: \"typing-indicator\"\n};\nconst _hoisted_17 = {\n  class: \"input-area\"\n};\nconst _hoisted_18 = {\n  class: \"input-toolbar\"\n};\nconst _hoisted_19 = {\n  class: \"input-box\"\n};\nconst _hoisted_20 = {\n  class: \"input-hint\"\n};\nconst _hoisted_21 = {\n  key: 0,\n  class: \"selected-papers\"\n};\nconst _hoisted_22 = {\n  class: \"paper-selector\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_dropdown_item = _resolveComponent(\"el-dropdown-item\");\n  const _component_el_dropdown_menu = _resolveComponent(\"el-dropdown-menu\");\n  const _component_el_dropdown = _resolveComponent(\"el-dropdown\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_slider = _resolveComponent(\"el-slider\");\n  const _component_el_input_number = _resolveComponent(\"el-input-number\");\n  const _component_el_switch = _resolveComponent(\"el-switch\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 左侧边栏 - 对话历史 \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"chat-sidebar\", {\n      'collapsed': $setup.sidebarCollapsed\n    }])\n  }, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    class: \"new-chat-btn\",\n    onClick: $setup.createNewChat\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode($setup[\"Plus\"])]),\n      _: 1 /* STABLE */\n    }), _cache[14] || (_cache[14] = _createElementVNode(\"span\", null, \"新建对话\", -1 /* CACHED */))]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_button, {\n    class: \"collapse-btn\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.sidebarCollapsed = !$setup.sidebarCollapsed)\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [!$setup.sidebarCollapsed ? (_openBlock(), _createBlock($setup[\"Fold\"], {\n        key: 0\n      })) : (_openBlock(), _createBlock($setup[\"Expand\"], {\n        key: 1\n      }))]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.chatHistory, chat => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: chat.id,\n      class: _normalizeClass([\"chat-item\", {\n        active: $setup.currentChatId === chat.id\n      }]),\n      onClick: $event => $setup.loadChat(chat.id)\n    }, [_createVNode(_component_el_icon, {\n      class: \"chat-icon\"\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"ChatLineRound\"])]),\n      _: 1 /* STABLE */\n    }), _createElementVNode(\"span\", _hoisted_5, _toDisplayString(chat.title), 1 /* TEXT */), _createVNode(_component_el_dropdown, {\n      trigger: \"click\",\n      onCommand: $event => $setup.handleChatCommand($event, chat.id)\n    }, {\n      dropdown: _withCtx(() => [_createVNode(_component_el_dropdown_menu, null, {\n        default: _withCtx(() => [_createVNode(_component_el_dropdown_item, {\n          command: \"rename\"\n        }, {\n          default: _withCtx(() => [...(_cache[15] || (_cache[15] = [_createTextVNode(\"重命名\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_dropdown_item, {\n          command: \"delete\",\n          type: \"danger\"\n        }, {\n          default: _withCtx(() => [...(_cache[16] || (_cache[16] = [_createTextVNode(\"删除\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })]),\n      default: _withCtx(() => [_createVNode(_component_el_icon, {\n        class: \"chat-more\",\n        onClick: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"stop\"]))\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"MoreFilled\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onCommand\"])], 10 /* CLASS, PROPS */, _hoisted_4);\n  }), 128 /* KEYED_FRAGMENT */))])], 2 /* CLASS */), _createCommentVNode(\" 主聊天区域 \"), _createElementVNode(\"div\", _hoisted_6, [_createCommentVNode(\" 顶部工具栏 \"), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h2\", _hoisted_9, _toDisplayString($setup.currentChatTitle), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_10, [_createVNode(_component_el_select, {\n    modelValue: $setup.selectedModel,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.selectedModel = $event),\n    size: \"small\",\n    class: \"model-select\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_option, {\n      label: \"GLM-4-Plus\",\n      value: \"glm-4-plus\"\n    }), _createVNode(_component_el_option, {\n      label: \"GLM-4-Flash\",\n      value: \"glm-4-flash\"\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n    size: \"small\",\n    onClick: _cache[3] || (_cache[3] = $event => $setup.showSettings = true)\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode($setup[\"Setting\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })])]), _createCommentVNode(\" 消息列表 \"), _createElementVNode(\"div\", _hoisted_11, [$setup.messages.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_createVNode(_component_el_icon, {\n    size: 64,\n    color: \"#10b981\"\n  }, {\n    default: _withCtx(() => [_createVNode($setup[\"ChatDotRound\"])]),\n    _: 1 /* STABLE */\n  })]), _cache[18] || (_cache[18] = _createElementVNode(\"h1\", {\n    class: \"welcome-title\"\n  }, \"AI 科研助手\", -1 /* CACHED */)), _cache[19] || (_cache[19] = _createElementVNode(\"p\", {\n    class: \"welcome-desc\"\n  }, \"基于您的论文库，为您提供智能问答、文献综述、研究建议等服务\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_14, [_cache[17] || (_cache[17] = _createElementVNode(\"div\", {\n    class: \"quick-action-title\"\n  }, \"快捷功能：\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_15, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.quickActions, action => {\n    return _createVNode(_component_el_button, {\n      key: action.key,\n      type: \"default\",\n      class: \"quick-action-btn\",\n      onClick: $event => $setup.sendQuickAction(action.prompt)\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [(_openBlock(), _createBlock(_resolveDynamicComponent(action.icon)))]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */), _createTextVNode(\" \" + _toDisplayString(action.label), 1 /* TEXT */)]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]);\n  }), 64 /* STABLE_FRAGMENT */))])])])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.messages, (message, index) => {\n    return _openBlock(), _createBlock($setup[\"ChatMessage\"], {\n      key: index,\n      content: message.content,\n      \"is-user\": message.isUser,\n      timestamp: message.timestamp,\n      references: message.references || [],\n      onViewReference: $setup.viewPaper\n    }, null, 8 /* PROPS */, [\"content\", \"is-user\", \"timestamp\", \"references\"]);\n  }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\" 正在输入提示 \"), $setup.isTyping ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [...(_cache[20] || (_cache[20] = [_createElementVNode(\"div\", {\n    class: \"typing-dot\"\n  }, null, -1 /* CACHED */), _createElementVNode(\"div\", {\n    class: \"typing-dot\"\n  }, null, -1 /* CACHED */), _createElementVNode(\"div\", {\n    class: \"typing-dot\"\n  }, null, -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */))], 512 /* NEED_PATCH */), _createCommentVNode(\" 输入区域 \"), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"div\", _hoisted_18, [_createVNode(_component_el_tooltip, {\n    content: \"上传文件\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      circle: \"\",\n      size: \"small\",\n      onClick: $setup.handleUpload\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"Paperclip\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_tooltip, {\n    content: \"关联论文\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      circle: \"\",\n      size: \"small\",\n      onClick: _cache[4] || (_cache[4] = $event => $setup.showPaperSelector = true)\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"Document\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_tooltip, {\n    content: \"清空对话\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      circle: \"\",\n      size: \"small\",\n      onClick: $setup.clearMessages\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"Delete\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_19, [_createVNode(_component_el_input, {\n    modelValue: $setup.inputMessage,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.inputMessage = $event),\n    type: \"textarea\",\n    rows: 3,\n    placeholder: \"输入您的问题，AI 将基于您的论文库进行回答...\",\n    resize: \"none\",\n    onKeydown: _withKeys(_withModifiers($setup.handleEnter, [\"prevent\"]), [\"enter\"])\n  }, null, 8 /* PROPS */, [\"modelValue\", \"onKeydown\"]), _createVNode(_component_el_button, {\n    type: \"primary\",\n    class: \"send-btn\",\n    disabled: !$setup.inputMessage.trim() || $setup.isTyping,\n    onClick: $setup.sendMessage\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode($setup[\"Position\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"disabled\"])]), _createElementVNode(\"div\", _hoisted_20, [_cache[21] || (_cache[21] = _createElementVNode(\"span\", null, \"Enter 发送，Shift + Enter 换行\", -1 /* CACHED */)), $setup.selectedPapers.length > 0 ? (_openBlock(), _createElementBlock(\"span\", _hoisted_21, \" 已选择 \" + _toDisplayString($setup.selectedPapers.length) + \" 篇论文 \", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])])]), _createCommentVNode(\" 论文选择对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.showPaperSelector,\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $setup.showPaperSelector = $event),\n    title: \"选择关联论文\",\n    width: \"60%\"\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[7] || (_cache[7] = $event => $setup.showPaperSelector = false)\n    }, {\n      default: _withCtx(() => [...(_cache[22] || (_cache[22] = [_createTextVNode(\"取消\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.confirmPaperSelection\n    }, {\n      default: _withCtx(() => [...(_cache[23] || (_cache[23] = [_createTextVNode(\"确定\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    })]),\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_22, [_createVNode(_component_el_input, {\n      modelValue: $setup.paperSearch,\n      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.paperSearch = $event),\n      placeholder: \"搜索论文...\",\n      clearable: \"\",\n      class: \"paper-search\"\n    }, {\n      prefix: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"Search\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_table, {\n      data: $setup.filteredPapers,\n      style: {\n        \"width\": \"100%\"\n      },\n      \"max-height\": \"400\",\n      onSelectionChange: $setup.handleSelectionChange\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        type: \"selection\",\n        width: \"55\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"title\",\n        label: \"论文标题\",\n        \"show-overflow-tooltip\": \"\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"year\",\n        label: \"年份\",\n        width: \"80\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"venue\",\n        label: \"期刊/会议\",\n        \"show-overflow-tooltip\": \"\"\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\" 设置对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.showSettings,\n    \"onUpdate:modelValue\": _cache[13] || (_cache[13] = $event => $setup.showSettings = $event),\n    title: \"聊天设置\",\n    width: \"400px\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      \"label-width\": \"100px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"模型\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $setup.settings.model,\n          \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $setup.settings.model = $event),\n          style: {\n            \"width\": \"100%\"\n          }\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"GLM-4-Plus\",\n            value: \"glm-4-plus\"\n          }), _createVNode(_component_el_option, {\n            label: \"GLM-4-Flash\",\n            value: \"glm-4-flash\"\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"温度\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_slider, {\n          modelValue: $setup.settings.temperature,\n          \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => $setup.settings.temperature = $event),\n          min: 0,\n          max: 1,\n          step: 0.1\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"最大长度\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input_number, {\n          modelValue: $setup.settings.maxTokens,\n          \"onUpdate:modelValue\": _cache[11] || (_cache[11] = $event => $setup.settings.maxTokens = $event),\n          min: 1000,\n          max: 8000,\n          step: 1000\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"引用论文\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_switch, {\n          modelValue: $setup.settings.includeReferences,\n          \"onUpdate:modelValue\": _cache[12] || (_cache[12] = $event => $setup.settings.includeReferences = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","ref","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_normalizeClass","$setup","sidebarCollapsed","_hoisted_2","_createVNode","_component_el_button","type","onClick","createNewChat","_component_el_icon","_cache","$event","_createBlock","key","_hoisted_3","_Fragment","_renderList","chatHistory","chat","id","active","currentChatId","loadChat","_hoisted_5","_toDisplayString","title","_component_el_dropdown","trigger","onCommand","handleChatCommand","dropdown","_withCtx","_component_el_dropdown_menu","_component_el_dropdown_item","command","_withModifiers","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","currentChatTitle","_hoisted_10","_component_el_select","selectedModel","size","_component_el_option","label","value","showSettings","_hoisted_11","messages","length","_hoisted_12","_hoisted_13","color","_hoisted_14","_hoisted_15","quickActions","action","sendQuickAction","prompt","_resolveDynamicComponent","icon","message","index","content","isUser","timestamp","references","onViewReference","viewPaper","isTyping","_hoisted_16","_hoisted_17","_hoisted_18","_component_el_tooltip","circle","handleUpload","showPaperSelector","clearMessages","_hoisted_19","_component_el_input","inputMessage","rows","placeholder","resize","onKeydown","_withKeys","handleEnter","disabled","trim","sendMessage","_hoisted_20","selectedPapers","_hoisted_21","_component_el_dialog","width","footer","confirmPaperSelection","_hoisted_22","paperSearch","clearable","prefix","_component_el_table","data","filteredPapers","style","onSelectionChange","handleSelectionChange","_component_el_table_column","prop","_component_el_form","_component_el_form_item","settings","model","_component_el_slider","temperature","min","max","step","_component_el_input_number","maxTokens","_component_el_switch","includeReferences"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/AIChat.vue"],"sourcesContent":["<template>\n  <div class=\"ai-chat-container\">\n    <!-- 左侧边栏 - 对话历史 -->\n    <div class=\"chat-sidebar\" :class=\"{ 'collapsed': sidebarCollapsed }\">\n      <div class=\"sidebar-header\">\n        <el-button type=\"primary\" class=\"new-chat-btn\" @click=\"createNewChat\">\n          <el-icon><Plus /></el-icon>\n          <span>新建对话</span>\n        </el-button>\n        <el-button class=\"collapse-btn\" @click=\"sidebarCollapsed = !sidebarCollapsed\">\n          <el-icon><Fold v-if=\"!sidebarCollapsed\" /><Expand v-else /></el-icon>\n        </el-button>\n      </div>\n      \n      <div class=\"chat-history\">\n        <div\n          v-for=\"chat in chatHistory\"\n          :key=\"chat.id\"\n          class=\"chat-item\"\n          :class=\"{ active: currentChatId === chat.id }\"\n          @click=\"loadChat(chat.id)\"\n        >\n          <el-icon class=\"chat-icon\"><ChatLineRound /></el-icon>\n          <span class=\"chat-title\">{{ chat.title }}</span>\n          <el-dropdown trigger=\"click\" @command=\"handleChatCommand($event, chat.id)\">\n            <el-icon class=\"chat-more\" @click.stop><MoreFilled /></el-icon>\n            <template #dropdown>\n              <el-dropdown-menu>\n                <el-dropdown-item command=\"rename\">重命名</el-dropdown-item>\n                <el-dropdown-item command=\"delete\" type=\"danger\">删除</el-dropdown-item>\n              </el-dropdown-menu>\n            </template>\n          </el-dropdown>\n        </div>\n      </div>\n    </div>\n\n    <!-- 主聊天区域 -->\n    <div class=\"chat-main\">\n      <!-- 顶部工具栏 -->\n      <div class=\"chat-toolbar\">\n        <div class=\"toolbar-left\">\n          <h2 class=\"chat-title\">{{ currentChatTitle }}</h2>\n        </div>\n        <div class=\"toolbar-right\">\n          <el-select v-model=\"selectedModel\" size=\"small\" class=\"model-select\">\n            <el-option label=\"GLM-4-Plus\" value=\"glm-4-plus\" />\n            <el-option label=\"GLM-4-Flash\" value=\"glm-4-flash\" />\n          </el-select>\n          <el-button size=\"small\" @click=\"showSettings = true\">\n            <el-icon><Setting /></el-icon>\n          </el-button>\n        </div>\n      </div>\n\n      <!-- 消息列表 -->\n      <div ref=\"messagesContainer\" class=\"messages-container\">\n        <div v-if=\"messages.length === 0\" class=\"welcome-screen\">\n          <div class=\"welcome-icon\">\n            <el-icon :size=\"64\" color=\"#10b981\"><ChatDotRound /></el-icon>\n          </div>\n          <h1 class=\"welcome-title\">AI 科研助手</h1>\n          <p class=\"welcome-desc\">基于您的论文库，为您提供智能问答、文献综述、研究建议等服务</p>\n          \n          <div class=\"quick-actions\">\n            <div class=\"quick-action-title\">快捷功能：</div>\n            <div class=\"quick-action-buttons\">\n              <el-button\n                v-for=\"action in quickActions\"\n                :key=\"action.key\"\n                type=\"default\"\n                class=\"quick-action-btn\"\n                @click=\"sendQuickAction(action.prompt)\"\n              >\n                <el-icon><component :is=\"action.icon\" /></el-icon>\n                {{ action.label }}\n              </el-button>\n            </div>\n          </div>\n        </div>\n\n        <template v-else>\n          <ChatMessage\n            v-for=\"(message, index) in messages\"\n            :key=\"index\"\n            :content=\"message.content\"\n            :is-user=\"message.isUser\"\n            :timestamp=\"message.timestamp\"\n            :references=\"message.references || []\"\n            @view-reference=\"viewPaper\"\n          />\n          \n          <!-- 正在输入提示 -->\n          <div v-if=\"isTyping\" class=\"typing-indicator\">\n            <div class=\"typing-dot\"></div>\n            <div class=\"typing-dot\"></div>\n            <div class=\"typing-dot\"></div>\n          </div>\n        </template>\n      </div>\n\n      <!-- 输入区域 -->\n      <div class=\"input-area\">\n        <div class=\"input-toolbar\">\n          <el-tooltip content=\"上传文件\">\n            <el-button circle size=\"small\" @click=\"handleUpload\">\n              <el-icon><Paperclip /></el-icon>\n            </el-button>\n          </el-tooltip>\n          <el-tooltip content=\"关联论文\">\n            <el-button circle size=\"small\" @click=\"showPaperSelector = true\">\n              <el-icon><Document /></el-icon>\n            </el-button>\n          </el-tooltip>\n          <el-tooltip content=\"清空对话\">\n            <el-button circle size=\"small\" @click=\"clearMessages\">\n              <el-icon><Delete /></el-icon>\n            </el-button>\n          </el-tooltip>\n        </div>\n        \n        <div class=\"input-box\">\n          <el-input\n            v-model=\"inputMessage\"\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"输入您的问题，AI 将基于您的论文库进行回答...\"\n            resize=\"none\"\n            @keydown.enter.prevent=\"handleEnter\"\n          />\n          <el-button\n            type=\"primary\"\n            class=\"send-btn\"\n            :disabled=\"!inputMessage.trim() || isTyping\"\n            @click=\"sendMessage\"\n          >\n            <el-icon><Position /></el-icon>\n          </el-button>\n        </div>\n        \n        <div class=\"input-hint\">\n          <span>Enter 发送，Shift + Enter 换行</span>\n          <span v-if=\"selectedPapers.length > 0\" class=\"selected-papers\">\n            已选择 {{ selectedPapers.length }} 篇论文\n          </span>\n        </div>\n      </div>\n    </div>\n\n    <!-- 论文选择对话框 -->\n    <el-dialog v-model=\"showPaperSelector\" title=\"选择关联论文\" width=\"60%\">\n      <div class=\"paper-selector\">\n        <el-input\n          v-model=\"paperSearch\"\n          placeholder=\"搜索论文...\"\n          clearable\n          class=\"paper-search\"\n        >\n          <template #prefix>\n            <el-icon><Search /></el-icon>\n          </template>\n        </el-input>\n        \n        <el-table\n          :data=\"filteredPapers\"\n          style=\"width: 100%\"\n          max-height=\"400\"\n          @selection-change=\"handleSelectionChange\"\n        >\n          <el-table-column type=\"selection\" width=\"55\" />\n          <el-table-column prop=\"title\" label=\"论文标题\" show-overflow-tooltip />\n          <el-table-column prop=\"year\" label=\"年份\" width=\"80\" />\n          <el-table-column prop=\"venue\" label=\"期刊/会议\" show-overflow-tooltip />\n        </el-table>\n      </div>\n      \n      <template #footer>\n        <el-button @click=\"showPaperSelector = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmPaperSelection\">确定</el-button>\n      </template>\n    </el-dialog>\n\n    <!-- 设置对话框 -->\n    <el-dialog v-model=\"showSettings\" title=\"聊天设置\" width=\"400px\">\n      <el-form label-width=\"100px\">\n        <el-form-item label=\"模型\">\n          <el-select v-model=\"settings.model\" style=\"width: 100%\">\n            <el-option label=\"GLM-4-Plus\" value=\"glm-4-plus\" />\n            <el-option label=\"GLM-4-Flash\" value=\"glm-4-flash\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"温度\">\n          <el-slider v-model=\"settings.temperature\" :min=\"0\" :max=\"1\" :step=\"0.1\" />\n        </el-form-item>\n        <el-form-item label=\"最大长度\">\n          <el-input-number v-model=\"settings.maxTokens\" :min=\"1000\" :max=\"8000\" :step=\"1000\" />\n        </el-form-item>\n        <el-form-item label=\"引用论文\">\n          <el-switch v-model=\"settings.includeReferences\" />\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, nextTick, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport {\n  Plus, Fold, Expand, ChatLineRound, MoreFilled,\n  ChatDotRound, Setting, Paperclip, Document,\n  Delete, Position, Search\n} from '@element-plus/icons-vue'\nimport ChatMessage from '@/components/ChatMessage.vue'\nimport api from '@/api'\n\nconst store = useStore()\n\n// 状态\nconst sidebarCollapsed = ref(false)\nconst currentChatId = ref(null)\nconst messages = ref([])\nconst inputMessage = ref('')\nconst isTyping = ref(false)\nconst selectedModel = ref('glm-4-plus')\nconst messagesContainer = ref(null)\nconst showPaperSelector = ref(false)\nconst showSettings = ref(false)\nconst paperSearch = ref('')\nconst selectedPapers = ref([])\nconst papers = ref([])\n\n// 设置\nconst settings = ref({\n  model: 'glm-4-plus',\n  temperature: 0.7,\n  maxTokens: 4000,\n  includeReferences: true\n})\n\n// 聊天历史\nconst chatHistory = ref([\n  { id: 1, title: '论文综述讨论', timestamp: Date.now() },\n  { id: 2, title: '研究方法分析', timestamp: Date.now() - 86400000 },\n])\n\n// 当前聊天标题\nconst currentChatTitle = computed(() => {\n  const chat = chatHistory.value.find(c => c.id === currentChatId.value)\n  return chat?.title || '新对话'\n})\n\n// 快捷功能\nconst quickActions = [\n  { key: 'summary', label: '生成文献综述', icon: 'Document', prompt: '请基于我的论文库生成一份文献综述' },\n  { key: 'gaps', label: '分析研究空白', icon: 'Search', prompt: '请分析当前研究领域的主要空白' },\n  { key: 'trends', label: '研究趋势分析', icon: 'TrendCharts', prompt: '请分析该领域的研究趋势' },\n  { key: 'methods', label: '方法论对比', icon: 'DataAnalysis', prompt: '请对比不同研究方法的优缺点' },\n]\n\n// 过滤后的论文\nconst filteredPapers = computed(() => {\n  if (!paperSearch.value) return papers.value\n  const query = paperSearch.value.toLowerCase()\n  return papers.value.filter(p => \n    (p.title || '').toLowerCase().includes(query) ||\n    (p.abstract || '').toLowerCase().includes(query)\n  )\n})\n\n// 加载论文列表\nconst loadPapers = async () => {\n  try {\n    const response = await api.getPapersList({ limit: 100 })\n    if (response.success) {\n      papers.value = response.data.items || []\n    }\n  } catch (error) {\n    console.error('加载论文失败:', error)\n  }\n}\n\n// 发送消息\nconst sendMessage = async () => {\n  const message = inputMessage.value.trim()\n  if (!message || isTyping.value) return\n\n  // 添加用户消息\n  messages.value.push({\n    content: message,\n    isUser: true,\n    timestamp: new Date()\n  })\n\n  inputMessage.value = ''\n  isTyping.value = true\n  scrollToBottom()\n\n  try {\n    // 调用 API\n    const response = await api.chatWithAI({\n      message,\n      chatId: currentChatId.value,\n      model: selectedModel.value,\n      papers: selectedPapers.value.map(p => p.id),\n      settings: settings.value\n    })\n\n    if (response.success) {\n      messages.value.push({\n        content: response.data.content,\n        isUser: false,\n        timestamp: new Date(),\n        references: response.data.references || []\n      })\n    } else {\n      throw new Error(response.error || '请求失败')\n    }\n  } catch (error) {\n    ElMessage.error('AI 响应失败: ' + error.message)\n    messages.value.push({\n      content: '抱歉，我暂时无法回答您的问题。请稍后再试。',\n      isUser: false,\n      timestamp: new Date()\n    })\n  } finally {\n    isTyping.value = false\n    scrollToBottom()\n  }\n}\n\n// 处理 Enter 键\nconst handleEnter = (e) => {\n  if (!e.shiftKey) {\n    sendMessage()\n  }\n}\n\n// 快捷功能\nconst sendQuickAction = (prompt) => {\n  inputMessage.value = prompt\n  sendMessage()\n}\n\n// 滚动到底部\nconst scrollToBottom = () => {\n  nextTick(() => {\n    if (messagesContainer.value) {\n      messagesContainer.value.scrollTop = messagesContainer.value.scrollHeight\n    }\n  })\n}\n\n// 新建对话\nconst createNewChat = () => {\n  const newId = Date.now()\n  chatHistory.value.unshift({\n    id: newId,\n    title: '新对话',\n    timestamp: Date.now()\n  })\n  currentChatId.value = newId\n  messages.value = []\n}\n\n// 加载对话\nconst loadChat = (chatId) => {\n  currentChatId.value = chatId\n  // TODO: 从后端加载历史消息\n  messages.value = []\n}\n\n// 处理对话命令\nconst handleChatCommand = async (command, chatId) => {\n  if (command === 'delete') {\n    try {\n      await ElMessageBox.confirm('确定要删除这个对话吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n      chatHistory.value = chatHistory.value.filter(c => c.id !== chatId)\n      if (currentChatId.value === chatId) {\n        currentChatId.value = null\n        messages.value = []\n      }\n    } catch {\n      // 取消\n    }\n  } else if (command === 'rename') {\n    // TODO: 重命名对话框\n  }\n}\n\n// 清空消息\nconst clearMessages = () => {\n  messages.value = []\n}\n\n// 处理论文选择\nconst handleSelectionChange = (selection) => {\n  selectedPapers.value = selection\n}\n\n// 确认论文选择\nconst confirmPaperSelection = () => {\n  showPaperSelector.value = false\n  ElMessage.success(`已选择 ${selectedPapers.value.length} 篇论文`)\n}\n\n// 查看论文\nconst viewPaper = (paper) => {\n  if (paper.id) {\n    window.open(`#/papers/${paper.id}`, '_blank')\n  }\n}\n\n// 处理上传\nconst handleUpload = () => {\n  ElMessage.info('文件上传功能开发中')\n}\n\nonMounted(() => {\n  loadPapers()\n})\n</script>\n\n<style scoped>\n.ai-chat-container {\n  display: flex;\n  height: calc(100vh - 64px);\n  background: #f8fafc;\n}\n\n/* 侧边栏 */\n.chat-sidebar {\n  width: 260px;\n  background: #fff;\n  border-right: 1px solid #e5e7eb;\n  display: flex;\n  flex-direction: column;\n  transition: width 0.3s;\n}\n\n.chat-sidebar.collapsed {\n  width: 60px;\n}\n\n.sidebar-header {\n  padding: 16px;\n  display: flex;\n  gap: 8px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.new-chat-btn {\n  flex: 1;\n}\n\n.collapsed .new-chat-btn span {\n  display: none;\n}\n\n.collapse-btn {\n  padding: 8px;\n}\n\n.chat-history {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n}\n\n.chat-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 12px;\n  border-radius: 8px;\n  cursor: pointer;\n  margin-bottom: 4px;\n  transition: all 0.2s;\n}\n\n.chat-item:hover {\n  background: #f3f4f6;\n}\n\n.chat-item.active {\n  background: #dbeafe;\n  color: #1d4ed8;\n}\n\n.chat-icon {\n  font-size: 16px;\n}\n\n.chat-title {\n  flex: 1;\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.chat-more {\n  opacity: 0;\n  transition: opacity 0.2s;\n}\n\n.chat-item:hover .chat-more {\n  opacity: 1;\n}\n\n.collapsed .chat-title,\n.collapsed .chat-more {\n  display: none;\n}\n\n/* 主聊天区域 */\n.chat-main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.chat-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 24px;\n  background: #fff;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.toolbar-left h2 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 500;\n}\n\n.toolbar-right {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n}\n\n.model-select {\n  width: 140px;\n}\n\n/* 消息区域 */\n.messages-container {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n}\n\n.welcome-screen {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  text-align: center;\n  padding: 40px;\n}\n\n.welcome-icon {\n  margin-bottom: 24px;\n}\n\n.welcome-title {\n  font-size: 28px;\n  font-weight: 600;\n  color: #1f2937;\n  margin-bottom: 12px;\n}\n\n.welcome-desc {\n  font-size: 15px;\n  color: #6b7280;\n  max-width: 500px;\n  margin-bottom: 32px;\n}\n\n.quick-actions {\n  width: 100%;\n  max-width: 600px;\n}\n\n.quick-action-title {\n  font-size: 14px;\n  color: #9ca3af;\n  margin-bottom: 12px;\n}\n\n.quick-action-buttons {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n}\n\n.quick-action-btn {\n  justify-content: flex-start;\n  padding: 16px;\n  height: auto;\n  border: 1px solid #e5e7eb;\n}\n\n.quick-action-btn:hover {\n  border-color: #10b981;\n  color: #10b981;\n}\n\n.typing-indicator {\n  display: flex;\n  gap: 4px;\n  padding: 16px 20px;\n  align-items: center;\n}\n\n.typing-dot {\n  width: 8px;\n  height: 8px;\n  background: #10b981;\n  border-radius: 50%;\n  animation: typing 1.4s infinite ease-in-out both;\n}\n\n.typing-dot:nth-child(1) { animation-delay: -0.32s; }\n.typing-dot:nth-child(2) { animation-delay: -0.16s; }\n\n@keyframes typing {\n  0%, 80%, 100% { transform: scale(0); }\n  40% { transform: scale(1); }\n}\n\n/* 输入区域 */\n.input-area {\n  background: #fff;\n  border-top: 1px solid #e5e7eb;\n  padding: 16px 24px;\n}\n\n.input-toolbar {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n\n.input-box {\n  display: flex;\n  gap: 12px;\n  align-items: flex-end;\n}\n\n.input-box :deep(.el-textarea__inner) {\n  border-radius: 12px;\n  padding: 12px 16px;\n  font-size: 14px;\n  resize: none;\n}\n\n.send-btn {\n  height: 44px;\n  width: 44px;\n  border-radius: 12px;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.input-hint {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 8px;\n  font-size: 12px;\n  color: #9ca3af;\n}\n\n.selected-papers {\n  color: #10b981;\n}\n\n/* 论文选择器 */\n.paper-selector {\n  max-height: 500px;\n}\n\n.paper-search {\n  margin-bottom: 16px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}