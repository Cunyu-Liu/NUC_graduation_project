{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"chain-workflow-container\"\n};\nconst _hoisted_2 = {\n  class: \"chain-input-panel\"\n};\nconst _hoisted_3 = {\n  class: \"input-section\"\n};\nconst _hoisted_4 = {\n  class: \"templates-section\"\n};\nconst _hoisted_5 = {\n  class: \"template-buttons\"\n};\nconst _hoisted_6 = {\n  class: \"chain-config-panel\"\n};\nconst _hoisted_7 = {\n  class: \"panel-header\"\n};\nconst _hoisted_8 = {\n  class: \"nodes-list\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n  class: \"node-index\"\n};\nconst _hoisted_11 = {\n  class: \"node-info\"\n};\nconst _hoisted_12 = {\n  class: \"node-name\"\n};\nconst _hoisted_13 = {\n  class: \"node-type\"\n};\nconst _hoisted_14 = {\n  class: \"node-status\"\n};\nconst _hoisted_15 = {\n  class: \"node-actions\"\n};\nconst _hoisted_16 = {\n  key: 0,\n  class: \"chain-connections\"\n};\nconst _hoisted_17 = {\n  class: \"panel-footer\"\n};\nconst _hoisted_18 = {\n  key: 0,\n  class: \"node-config-panel\"\n};\nconst _hoisted_19 = {\n  class: \"panel-header\"\n};\nconst _hoisted_20 = {\n  class: \"variables-preview\"\n};\nconst _hoisted_21 = {\n  class: \"variable-list\"\n};\nconst _hoisted_22 = {\n  class: \"execution-panel\"\n};\nconst _hoisted_23 = {\n  class: \"panel-header\"\n};\nconst _hoisted_24 = {\n  key: 0,\n  class: \"execution-stats\"\n};\nconst _hoisted_25 = {\n  key: 0,\n  class: \"execution-progress\"\n};\nconst _hoisted_26 = {\n  class: \"current-step\"\n};\nconst _hoisted_27 = {\n  key: 1,\n  class: \"results-list\"\n};\nconst _hoisted_28 = [\"onClick\"];\nconst _hoisted_29 = {\n  class: \"result-title\"\n};\nconst _hoisted_30 = {\n  class: \"step-number\"\n};\nconst _hoisted_31 = {\n  class: \"node-name\"\n};\nconst _hoisted_32 = {\n  class: \"result-meta\"\n};\nconst _hoisted_33 = {\n  key: 0,\n  class: \"result-content\"\n};\nconst _hoisted_34 = {\n  class: \"result-section\"\n};\nconst _hoisted_35 = {\n  class: \"section-content input\"\n};\nconst _hoisted_36 = {\n  class: \"result-section\"\n};\nconst _hoisted_37 = {\n  class: \"section-content output\"\n};\nconst _hoisted_38 = {\n  key: 0,\n  class: \"result-section\"\n};\nconst _hoisted_39 = {\n  class: \"section-content error\"\n};\nconst _hoisted_40 = {\n  key: 2,\n  class: \"panel-footer\"\n};\nimport { ref, computed, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport { Plus, VideoPlay, Refresh, ArrowUp, ArrowDown, Delete, CircleCheck, CircleClose, Loading, Timer, Bottom, ArrowRight, Download, Save } from '@element-plus/icons-vue';\nimport api from '@/api';\n\n// 状态\n\nexport default {\n  __name: 'ChainWorkflow',\n  setup(__props) {\n    const showAddNode = ref(false);\n    const showSaveWorkflow = ref(false);\n    const workflowName = ref('');\n    const workflowDescription = ref('');\n    const currentNode = ref(null);\n    const isExecuting = ref(false);\n    const executionProgress = ref(0);\n    const executionStatus = ref('');\n    const executionTime = ref(0);\n    const currentExecutingNode = ref(null);\n    const executionResults = ref([]);\n\n    // 链式节点\n    const chainNodes = ref([]);\n\n    // 新节点配置\n    const newNode = ref({\n      type: 'analysis',\n      name: '',\n      template: ''\n    });\n\n    // 可用模板\n    const availableTemplates = [{\n      label: '生成摘要',\n      value: 'summary',\n      type: 'analysis'\n    }, {\n      label: '提取要点',\n      value: 'keypoints',\n      type: 'analysis'\n    }, {\n      label: '识别研究空白',\n      value: 'gaps',\n      type: 'analysis'\n    }, {\n      label: '主题分析',\n      value: 'topic',\n      type: 'analysis'\n    }, {\n      label: '生成代码',\n      value: 'code',\n      type: 'generation'\n    }, {\n      label: '生成报告',\n      value: 'report',\n      type: 'generation'\n    }, {\n      label: '文献综述',\n      value: 'review',\n      type: 'generation'\n    }, {\n      label: '质量评估',\n      value: 'quality',\n      type: 'evaluation'\n    }, {\n      label: '创新性评估',\n      value: 'innovation',\n      type: 'evaluation'\n    }, {\n      label: '方法评估',\n      value: 'method',\n      type: 'evaluation'\n    }, {\n      label: '数据清洗',\n      value: 'clean',\n      type: 'transform'\n    }, {\n      label: '格式转换',\n      value: 'format',\n      type: 'transform'\n    }];\n\n    // 计算属性\n    const previousNodes = computed(() => {\n      if (!currentNode.value) return [];\n      const index = chainNodes.value.findIndex(n => n.id === currentNode.value.id);\n      return chainNodes.value.slice(0, index);\n    });\n    const availableVariables = computed(() => {\n      const vars = [{\n        name: '{{input}}',\n        description: '当前节点的输入内容'\n      }, {\n        name: '{{original}}',\n        description: '原始输入内容'\n      }];\n      previousNodes.value.forEach((node, idx) => {\n        vars.push({\n          name: `{{step${idx + 1}}}`,\n          description: `${node.name} 的输出`\n        });\n      });\n      return vars;\n    });\n\n    // 方法\n    const getNodeTypeLabel = type => {\n      const labels = {\n        analysis: '分析',\n        generation: '生成',\n        evaluation: '评估',\n        transform: '转换'\n      };\n      return labels[type] || type;\n    };\n    const getNodeTypeTag = type => {\n      const tags = {\n        analysis: 'primary',\n        generation: 'success',\n        evaluation: 'warning',\n        transform: 'info'\n      };\n      return tags[type] || '';\n    };\n    const addNode = () => {\n      if (!newNode.value.name) {\n        ElMessage.warning('请输入节点名称');\n        return;\n      }\n      const template = availableTemplates.find(t => t.value === newNode.value.template);\n      const node = {\n        id: Date.now(),\n        name: newNode.value.name,\n        type: newNode.value.type,\n        template: newNode.value.template,\n        prompt: getDefaultPrompt(newNode.value.template),\n        model: 'glm-4-plus',\n        temperature: 0.7,\n        maxTokens: 4000,\n        inputSource: chainNodes.value.length === 0 ? 'original' : chainNodes.value[chainNodes.value.length - 1].id,\n        outputFormat: 'text',\n        conditional: false,\n        condition: '',\n        status: 'pending'\n      };\n      chainNodes.value.push(node);\n      currentNode.value = node;\n      showAddNode.value = false;\n\n      // 重置新节点表单\n      newNode.value = {\n        type: 'analysis',\n        name: '',\n        template: ''\n      };\n    };\n    const getDefaultPrompt = template => {\n      const prompts = {\n        summary: '请对以下内容生成一份简洁的摘要：\\n\\n{{input}}',\n        keypoints: '请从以下内容中提取核心要点：\\n\\n{{input}}',\n        gaps: '请分析以下内容，识别研究空白：\\n\\n{{input}}',\n        topic: '请分析以下内容的主题：\\n\\n{{input}}',\n        code: '请根据以下需求生成代码：\\n\\n{{input}}',\n        report: '请根据以下内容生成报告：\\n\\n{{input}}',\n        review: '请对以下内容进行综述：\\n\\n{{input}}',\n        quality: '请评估以下内容的质量：\\n\\n{{input}}',\n        innovation: '请评估以下内容的创新性：\\n\\n{{input}}',\n        method: '请评估以下方法的合理性：\\n\\n{{input}}',\n        clean: '请清洗以下数据：\\n\\n{{input}}',\n        format: '请将以下内容转换为标准格式：\\n\\n{{input}}'\n      };\n      return prompts[template] || '请处理以下内容：\\n\\n{{input}}';\n    };\n    const removeNode = index => {\n      chainNodes.value.splice(index, 1);\n      if (currentNode.value && chainNodes.value.findIndex(n => n.id === currentNode.value.id) === -1) {\n        currentNode.value = chainNodes.value[0] || null;\n      }\n    };\n    const moveNode = (index, direction) => {\n      const newIndex = index + direction;\n      if (newIndex >= 0 && newIndex < chainNodes.value.length) {\n        const temp = chainNodes.value[index];\n        chainNodes.value[index] = chainNodes.value[newIndex];\n        chainNodes.value[newIndex] = temp;\n      }\n    };\n    const selectNode = node => {\n      currentNode.value = node;\n    };\n    const applyTemplate = template => {\n      if (currentNode.value && template) {\n        currentNode.value.prompt = getDefaultPrompt(template);\n      }\n    };\n    const workflowInput = ref('');\n    const executeChain = async () => {\n      if (chainNodes.value.length === 0) {\n        ElMessage.warning('请先添加工作流节点');\n        return;\n      }\n\n      // 如果没有输入内容，提示用户\n      if (!workflowInput.value.trim()) {\n        ElMessage.warning('请输入工作流处理内容');\n        return;\n      }\n      isExecuting.value = true;\n      executionProgress.value = 0;\n      executionStatus.value = '';\n      executionResults.value = [];\n      const startTime = Date.now();\n      try {\n        // 重置所有节点状态\n        chainNodes.value.forEach(node => {\n          node.status = 'pending';\n          node.output = null;\n          node.error = null;\n        });\n\n        // 准备节点配置\n        const nodesConfig = chainNodes.value.map(node => ({\n          id: node.id,\n          name: node.name,\n          type: node.type,\n          prompt: node.prompt,\n          model: node.model,\n          temperature: node.temperature,\n          maxTokens: node.maxTokens,\n          inputSource: node.inputSource,\n          outputFormat: node.outputFormat,\n          conditional: node.conditional,\n          condition: node.condition\n        }));\n\n        // 调用后端 API\n        const response = await api.executeWorkflow(nodesConfig, {\n          content: workflowInput.value\n        });\n        if (response.success) {\n          // 更新执行结果\n          executionResults.value = response.data.results.map((result, index) => ({\n            nodeName: result.node_name,\n            nodeType: result.node_type,\n            input: result.input_preview || '',\n            output: result.full_output || result.output_preview || '',\n            success: result.status === 'completed',\n            error: result.error,\n            expanded: index === response.data.results.length - 1\n          }));\n\n          // 更新节点状态\n          response.data.results.forEach((result, index) => {\n            if (chainNodes.value[index]) {\n              chainNodes.value[index].status = result.status;\n              chainNodes.value[index].output = result.full_output;\n              chainNodes.value[index].error = result.error;\n            }\n          });\n          executionProgress.value = 100;\n          executionStatus.value = 'success';\n          executionTime.value = response.data.total_time * 1000;\n          ElMessage.success(`工作流执行完成，耗时 ${response.data.total_time.toFixed(2)}s`);\n        } else {\n          throw new Error(response.error || '执行失败');\n        }\n      } catch (error) {\n        console.error('工作流执行错误:', error);\n        executionStatus.value = 'exception';\n        ElMessage.error(`执行失败: ${error.message}`);\n\n        // 标记当前运行的节点为错误状态\n        const runningNode = chainNodes.value.find(n => n.status === 'running');\n        if (runningNode) {\n          runningNode.status = 'error';\n          runningNode.error = error.message;\n        }\n      } finally {\n        isExecuting.value = false;\n        currentExecutingNode.value = null;\n      }\n    };\n\n    // 加载工作流模板\n    const loadTemplate = async templateId => {\n      try {\n        const response = await api.getWorkflowTemplates();\n        if (response.success) {\n          const template = response.data.find(t => t.id === templateId);\n          if (template) {\n            // 清空现有节点\n            chainNodes.value = [];\n\n            // 根据模板创建节点\n            template.nodes.forEach((nodeConfig, index) => {\n              const newNode = {\n                id: `node_${Date.now()}_${index}`,\n                name: nodeConfig.name,\n                type: nodeConfig.type,\n                template: nodeConfig.template,\n                prompt: getDefaultPrompt(nodeConfig.template),\n                model: nodeConfig.model || 'glm-4-plus',\n                temperature: 0.7,\n                maxTokens: 4000,\n                inputSource: index === 0 ? 'original' : chainNodes.value[index - 1]?.id || 'original',\n                outputFormat: 'text',\n                conditional: false,\n                condition: '',\n                status: 'pending'\n              };\n              chainNodes.value.push(newNode);\n            });\n            ElMessage.success(`已加载模板: ${template.name}`);\n          }\n        }\n      } catch (error) {\n        console.error('加载模板失败:', error);\n        ElMessage.error('加载模板失败');\n      }\n    };\n    const resetChain = () => {\n      chainNodes.value.forEach(node => {\n        node.status = 'pending';\n      });\n      executionResults.value = [];\n      executionProgress.value = 0;\n      executionTime.value = 0;\n      ElMessage.success('已重置工作流');\n    };\n    const exportResults = () => {\n      const data = JSON.stringify(executionResults.value, null, 2);\n      const blob = new Blob([data], {\n        type: 'application/json'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `workflow-results-${Date.now()}.json`;\n      a.click();\n      ElMessage.success('结果已导出');\n    };\n    const saveWorkflow = () => {\n      showSaveWorkflow.value = true;\n    };\n    const confirmSaveWorkflow = async () => {\n      if (!workflowName.value) {\n        ElMessage.warning('请输入工作流名称');\n        return;\n      }\n      try {\n        // 调用 API 保存工作流\n        await api.saveWorkflow({\n          name: workflowName.value,\n          description: workflowDescription.value,\n          nodes: chainNodes.value\n        });\n        ElMessage.success('工作流保存成功');\n        showSaveWorkflow.value = false;\n      } catch (error) {\n        ElMessage.error('保存失败: ' + error.message);\n      }\n    };\n    onMounted(() => {\n      // 加载模板列表\n      loadTemplate('summary');\n    });\n    return (_ctx, _cache) => {\n      const _component_el_input = _resolveComponent(\"el-input\");\n      const _component_el_button = _resolveComponent(\"el-button\");\n      const _component_el_icon = _resolveComponent(\"el-icon\");\n      const _component_el_tooltip = _resolveComponent(\"el-tooltip\");\n      const _component_el_empty = _resolveComponent(\"el-empty\");\n      const _component_el_tag = _resolveComponent(\"el-tag\");\n      const _component_el_form_item = _resolveComponent(\"el-form-item\");\n      const _component_el_option = _resolveComponent(\"el-option\");\n      const _component_el_select = _resolveComponent(\"el-select\");\n      const _component_el_option_group = _resolveComponent(\"el-option-group\");\n      const _component_el_slider = _resolveComponent(\"el-slider\");\n      const _component_el_input_number = _resolveComponent(\"el-input-number\");\n      const _component_el_radio = _resolveComponent(\"el-radio\");\n      const _component_el_radio_group = _resolveComponent(\"el-radio-group\");\n      const _component_el_switch = _resolveComponent(\"el-switch\");\n      const _component_el_form = _resolveComponent(\"el-form\");\n      const _component_el_progress = _resolveComponent(\"el-progress\");\n      const _component_el_radio_button = _resolveComponent(\"el-radio-button\");\n      const _component_el_dialog = _resolveComponent(\"el-dialog\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[30] || (_cache[30] = _createElementVNode(\"div\", {\n        class: \"panel-header\"\n      }, [_createElementVNode(\"h2\", null, \"输入内容\")], -1)), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_input, {\n        modelValue: workflowInput.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => workflowInput.value = $event),\n        type: \"textarea\",\n        rows: 10,\n        placeholder: \"输入要处理的论文内容、研究问题或其他文本...\",\n        resize: \"none\"\n      }, null, 8, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_4, [_cache[29] || (_cache[29] = _createElementVNode(\"h3\", null, \"快速加载模板\", -1)), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_button, {\n        size: \"small\",\n        onClick: _cache[1] || (_cache[1] = $event => loadTemplate('summary'))\n      }, {\n        default: _withCtx(() => [...(_cache[25] || (_cache[25] = [_createTextVNode(\"论文分析\", -1)]))]),\n        _: 1\n      }), _createVNode(_component_el_button, {\n        size: \"small\",\n        onClick: _cache[2] || (_cache[2] = $event => loadTemplate('review'))\n      }, {\n        default: _withCtx(() => [...(_cache[26] || (_cache[26] = [_createTextVNode(\"文献综述\", -1)]))]),\n        _: 1\n      }), _createVNode(_component_el_button, {\n        size: \"small\",\n        onClick: _cache[3] || (_cache[3] = $event => loadTemplate('code'))\n      }, {\n        default: _withCtx(() => [...(_cache[27] || (_cache[27] = [_createTextVNode(\"代码生成\", -1)]))]),\n        _: 1\n      }), _createVNode(_component_el_button, {\n        size: \"small\",\n        onClick: _cache[4] || (_cache[4] = $event => loadTemplate('topic'))\n      }, {\n        default: _withCtx(() => [...(_cache[28] || (_cache[28] = [_createTextVNode(\"主题研究\", -1)]))]),\n        _: 1\n      })])])]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_cache[31] || (_cache[31] = _createElementVNode(\"h2\", null, \"链式工作流配置\", -1)), _createVNode(_component_el_tooltip, {\n        content: \"添加节点\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          circle: \"\",\n          onClick: _cache[5] || (_cache[5] = $event => showAddNode.value = true)\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_unref(Plus))]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      })]), _createElementVNode(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(chainNodes.value, (node, index) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: node.id,\n          class: _normalizeClass([\"chain-node\", {\n            'active': currentNode.value?.id === node.id,\n            'completed': node.status === 'completed',\n            'running': node.status === 'running',\n            'error': node.status === 'error'\n          }]),\n          onClick: $event => selectNode(node)\n        }, [_createElementVNode(\"div\", _hoisted_10, _toDisplayString(index + 1), 1), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, _toDisplayString(node.name), 1), _createElementVNode(\"div\", _hoisted_13, _toDisplayString(getNodeTypeLabel(node.type)), 1)]), _createElementVNode(\"div\", _hoisted_14, [node.status === 'completed' ? (_openBlock(), _createBlock(_component_el_icon, {\n          key: 0,\n          class: \"status-icon success\"\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(CircleCheck))]),\n          _: 1\n        })) : node.status === 'running' ? (_openBlock(), _createBlock(_component_el_icon, {\n          key: 1,\n          class: \"status-icon running\"\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(Loading))]),\n          _: 1\n        })) : node.status === 'error' ? (_openBlock(), _createBlock(_component_el_icon, {\n          key: 2,\n          class: \"status-icon error\"\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(CircleClose))]),\n          _: 1\n        })) : (_openBlock(), _createBlock(_component_el_icon, {\n          key: 3,\n          class: \"status-icon pending\"\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(Timer))]),\n          _: 1\n        }))]), _createElementVNode(\"div\", _hoisted_15, [index > 0 ? (_openBlock(), _createBlock(_component_el_icon, {\n          key: 0,\n          class: \"action-btn\",\n          onClick: _withModifiers($event => moveNode(index, -1), [\"stop\"])\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(ArrowUp))]),\n          _: 1\n        }, 8, [\"onClick\"])) : _createCommentVNode(\"\", true), index < chainNodes.value.length - 1 ? (_openBlock(), _createBlock(_component_el_icon, {\n          key: 1,\n          class: \"action-btn\",\n          onClick: _withModifiers($event => moveNode(index, 1), [\"stop\"])\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(ArrowDown))]),\n          _: 1\n        }, 8, [\"onClick\"])) : _createCommentVNode(\"\", true), _createVNode(_component_el_icon, {\n          class: \"action-btn delete\",\n          onClick: _withModifiers($event => removeNode(index), [\"stop\"])\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(Delete))]),\n          _: 1\n        }, 8, [\"onClick\"])])], 10, _hoisted_9);\n      }), 128)), chainNodes.value.length === 0 ? (_openBlock(), _createBlock(_component_el_empty, {\n        key: 0,\n        description: \"暂无节点，点击右上角添加\"\n      })) : _createCommentVNode(\"\", true)]), chainNodes.value.length > 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(chainNodes.value.length - 1, i => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: i,\n          class: \"connection-line\"\n        }, [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_unref(Bottom))]),\n          _: 1\n        })]);\n      }), 128))])) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_17, [_createVNode(_component_el_button, {\n        type: \"primary\",\n        size: \"large\",\n        class: \"execute-btn\",\n        loading: isExecuting.value,\n        disabled: chainNodes.value.length === 0,\n        onClick: executeChain\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_unref(VideoPlay))]),\n          _: 1\n        }), _cache[32] || (_cache[32] = _createTextVNode(\" 执行链式调用 \", -1))]),\n        _: 1\n      }, 8, [\"loading\", \"disabled\"]), _createVNode(_component_el_button, {\n        size: \"large\",\n        onClick: resetChain\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_unref(Refresh))]),\n          _: 1\n        }), _cache[33] || (_cache[33] = _createTextVNode(\" 重置 \", -1))]),\n        _: 1\n      })])]), currentNode.value ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"h3\", null, _toDisplayString(currentNode.value.name), 1), _createVNode(_component_el_tag, {\n        type: getNodeTypeTag(currentNode.value.type)\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(getNodeTypeLabel(currentNode.value.type)), 1)]),\n        _: 1\n      }, 8, [\"type\"])]), _createVNode(_component_el_form, {\n        \"label-width\": \"100px\",\n        class: \"node-form\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_form_item, {\n          label: \"节点名称\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: currentNode.value.name,\n            \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => currentNode.value.name = $event),\n            placeholder: \"输入节点名称\"\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"输入源\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_select, {\n            modelValue: currentNode.value.inputSource,\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => currentNode.value.inputSource = $event),\n            style: {\n              \"width\": \"100%\"\n            }\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_option, {\n              label: \"原始输入\",\n              value: \"original\"\n            }), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(previousNodes.value, (node, idx) => {\n              return _openBlock(), _createBlock(_component_el_option, {\n                key: node.id,\n                label: `步骤 ${idx + 1}: ${node.name}`,\n                value: node.id\n              }, null, 8, [\"label\", \"value\"]);\n            }), 128))]),\n            _: 1\n          }, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"提示词模板\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_select, {\n            modelValue: currentNode.value.template,\n            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => currentNode.value.template = $event),\n            placeholder: \"选择预设模板\",\n            style: {\n              \"width\": \"100%\"\n            },\n            onChange: applyTemplate\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_option_group, {\n              label: \"分析类\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_option, {\n                label: \"生成摘要\",\n                value: \"summary\"\n              }), _createVNode(_component_el_option, {\n                label: \"提取要点\",\n                value: \"keypoints\"\n              }), _createVNode(_component_el_option, {\n                label: \"识别研究空白\",\n                value: \"gaps\"\n              }), _createVNode(_component_el_option, {\n                label: \"主题分析\",\n                value: \"topic\"\n              })]),\n              _: 1\n            }), _createVNode(_component_el_option_group, {\n              label: \"生成类\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_option, {\n                label: \"生成代码\",\n                value: \"code\"\n              }), _createVNode(_component_el_option, {\n                label: \"生成报告\",\n                value: \"report\"\n              }), _createVNode(_component_el_option, {\n                label: \"文献综述\",\n                value: \"review\"\n              })]),\n              _: 1\n            }), _createVNode(_component_el_option_group, {\n              label: \"评估类\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_option, {\n                label: \"质量评估\",\n                value: \"quality\"\n              }), _createVNode(_component_el_option, {\n                label: \"创新性评估\",\n                value: \"innovation\"\n              }), _createVNode(_component_el_option, {\n                label: \"方法评估\",\n                value: \"method\"\n              })]),\n              _: 1\n            })]),\n            _: 1\n          }, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"自定义提示\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: currentNode.value.prompt,\n            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => currentNode.value.prompt = $event),\n            type: \"textarea\",\n            rows: 6,\n            placeholder: \"输入自定义提示词，使用 {{input}} 引用输入内容\"\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"模型\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_select, {\n            modelValue: currentNode.value.model,\n            \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => currentNode.value.model = $event),\n            style: {\n              \"width\": \"100%\"\n            }\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_option, {\n              label: \"GLM-4-Plus\",\n              value: \"glm-4-plus\"\n            }), _createVNode(_component_el_option, {\n              label: \"GLM-4-Flash\",\n              value: \"glm-4-flash\"\n            })]),\n            _: 1\n          }, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"温度\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_slider, {\n            modelValue: currentNode.value.temperature,\n            \"onUpdate:modelValue\": _cache[11] || (_cache[11] = $event => currentNode.value.temperature = $event),\n            min: 0,\n            max: 1,\n            step: 0.1,\n            \"show-stops\": \"\"\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"最大长度\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input_number, {\n            modelValue: currentNode.value.maxTokens,\n            \"onUpdate:modelValue\": _cache[12] || (_cache[12] = $event => currentNode.value.maxTokens = $event),\n            min: 500,\n            max: 8000,\n            step: 500\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"输出格式\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_radio_group, {\n            modelValue: currentNode.value.outputFormat,\n            \"onUpdate:modelValue\": _cache[13] || (_cache[13] = $event => currentNode.value.outputFormat = $event)\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_radio, {\n              label: \"text\"\n            }, {\n              default: _withCtx(() => [...(_cache[34] || (_cache[34] = [_createTextVNode(\"纯文本\", -1)]))]),\n              _: 1\n            }), _createVNode(_component_el_radio, {\n              label: \"json\"\n            }, {\n              default: _withCtx(() => [...(_cache[35] || (_cache[35] = [_createTextVNode(\"JSON\", -1)]))]),\n              _: 1\n            }), _createVNode(_component_el_radio, {\n              label: \"markdown\"\n            }, {\n              default: _withCtx(() => [...(_cache[36] || (_cache[36] = [_createTextVNode(\"Markdown\", -1)]))]),\n              _: 1\n            })]),\n            _: 1\n          }, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"条件执行\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_switch, {\n            modelValue: currentNode.value.conditional,\n            \"onUpdate:modelValue\": _cache[14] || (_cache[14] = $event => currentNode.value.conditional = $event)\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }), currentNode.value.conditional ? (_openBlock(), _createBlock(_component_el_form_item, {\n          key: 0,\n          label: \"条件表达式\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: currentNode.value.condition,\n            \"onUpdate:modelValue\": _cache[15] || (_cache[15] = $event => currentNode.value.condition = $event),\n            placeholder: \"例如: input.score > 0.8\"\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        })) : _createCommentVNode(\"\", true)]),\n        _: 1\n      }), _createElementVNode(\"div\", _hoisted_20, [_cache[37] || (_cache[37] = _createElementVNode(\"div\", {\n        class: \"preview-title\"\n      }, \"可用变量\", -1)), _createElementVNode(\"div\", _hoisted_21, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableVariables.value, variable => {\n        return _openBlock(), _createBlock(_component_el_tag, {\n          key: variable.name,\n          size: \"small\",\n          class: \"variable-tag\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(variable.name) + \": \" + _toDisplayString(variable.description), 1)]),\n          _: 2\n        }, 1024);\n      }), 128))])])])) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"div\", _hoisted_23, [_cache[38] || (_cache[38] = _createElementVNode(\"h3\", null, \"执行结果\", -1)), executionTime.value > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [_createVNode(_component_el_tag, {\n        size: \"small\",\n        type: \"info\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_unref(Timer))]),\n          _: 1\n        }), _createTextVNode(\" \" + _toDisplayString(executionTime.value) + \"ms \", 1)]),\n        _: 1\n      })])) : _createCommentVNode(\"\", true)]), isExecuting.value ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [_createVNode(_component_el_progress, {\n        percentage: executionProgress.value,\n        status: executionStatus.value,\n        \"stroke-width\": 8\n      }, null, 8, [\"percentage\", \"status\"]), _createElementVNode(\"div\", _hoisted_26, \"正在执行: \" + _toDisplayString(currentExecutingNode.value?.name), 1)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(executionResults.value, (result, index) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: index,\n          class: _normalizeClass([\"result-item\", {\n            'expanded': result.expanded\n          }])\n        }, [_createElementVNode(\"div\", {\n          class: \"result-header\",\n          onClick: $event => result.expanded = !result.expanded\n        }, [_createElementVNode(\"div\", _hoisted_29, [_createElementVNode(\"span\", _hoisted_30, \"步骤 \" + _toDisplayString(index + 1), 1), _createElementVNode(\"span\", _hoisted_31, _toDisplayString(result.nodeName), 1)]), _createElementVNode(\"div\", _hoisted_32, [_createVNode(_component_el_tag, {\n          size: \"small\",\n          type: result.success ? 'success' : 'danger'\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(result.success ? '成功' : '失败'), 1)]),\n          _: 2\n        }, 1032, [\"type\"]), _createVNode(_component_el_icon, {\n          class: \"expand-icon\"\n        }, {\n          default: _withCtx(() => [result.expanded ? (_openBlock(), _createBlock(_unref(ArrowDown), {\n            key: 0\n          })) : (_openBlock(), _createBlock(_unref(ArrowRight), {\n            key: 1\n          }))]),\n          _: 2\n        }, 1024)])], 8, _hoisted_28), result.expanded ? (_openBlock(), _createElementBlock(\"div\", _hoisted_33, [_createElementVNode(\"div\", _hoisted_34, [_cache[39] || (_cache[39] = _createElementVNode(\"div\", {\n          class: \"section-title\"\n        }, \"输入\", -1)), _createElementVNode(\"pre\", _hoisted_35, _toDisplayString(result.input), 1)]), _createElementVNode(\"div\", _hoisted_36, [_cache[40] || (_cache[40] = _createElementVNode(\"div\", {\n          class: \"section-title\"\n        }, \"输出\", -1)), _createElementVNode(\"pre\", _hoisted_37, _toDisplayString(result.output), 1)]), result.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_38, [_cache[41] || (_cache[41] = _createElementVNode(\"div\", {\n          class: \"section-title\"\n        }, \"错误\", -1)), _createElementVNode(\"pre\", _hoisted_39, _toDisplayString(result.error), 1)])) : _createCommentVNode(\"\", true)])) : _createCommentVNode(\"\", true)], 2);\n      }), 128)), executionResults.value.length === 0 ? (_openBlock(), _createBlock(_component_el_empty, {\n        key: 0,\n        description: \"尚未执行，请配置工作流并点击执行\"\n      })) : _createCommentVNode(\"\", true)])), executionResults.value.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_40, [_createVNode(_component_el_button, {\n        onClick: exportResults\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_unref(Download))]),\n          _: 1\n        }), _cache[42] || (_cache[42] = _createTextVNode(\" 导出结果 \", -1))]),\n        _: 1\n      }), _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: saveWorkflow\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_unref(Save))]),\n          _: 1\n        }), _cache[43] || (_cache[43] = _createTextVNode(\" 保存工作流 \", -1))]),\n        _: 1\n      })])) : _createCommentVNode(\"\", true)]), _createVNode(_component_el_dialog, {\n        modelValue: showAddNode.value,\n        \"onUpdate:modelValue\": _cache[20] || (_cache[20] = $event => showAddNode.value = $event),\n        title: \"添加节点\",\n        width: \"500px\"\n      }, {\n        footer: _withCtx(() => [_createVNode(_component_el_button, {\n          onClick: _cache[19] || (_cache[19] = $event => showAddNode.value = false)\n        }, {\n          default: _withCtx(() => [...(_cache[48] || (_cache[48] = [_createTextVNode(\"取消\", -1)]))]),\n          _: 1\n        }), _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: addNode\n        }, {\n          default: _withCtx(() => [...(_cache[49] || (_cache[49] = [_createTextVNode(\"确定\", -1)]))]),\n          _: 1\n        })]),\n        default: _withCtx(() => [_createVNode(_component_el_form, {\n          \"label-width\": \"80px\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, {\n            label: \"节点类型\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_radio_group, {\n              modelValue: newNode.value.type,\n              \"onUpdate:modelValue\": _cache[16] || (_cache[16] = $event => newNode.value.type = $event)\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_radio_button, {\n                label: \"analysis\"\n              }, {\n                default: _withCtx(() => [...(_cache[44] || (_cache[44] = [_createTextVNode(\"分析\", -1)]))]),\n                _: 1\n              }), _createVNode(_component_el_radio_button, {\n                label: \"generation\"\n              }, {\n                default: _withCtx(() => [...(_cache[45] || (_cache[45] = [_createTextVNode(\"生成\", -1)]))]),\n                _: 1\n              }), _createVNode(_component_el_radio_button, {\n                label: \"evaluation\"\n              }, {\n                default: _withCtx(() => [...(_cache[46] || (_cache[46] = [_createTextVNode(\"评估\", -1)]))]),\n                _: 1\n              }), _createVNode(_component_el_radio_button, {\n                label: \"transform\"\n              }, {\n                default: _withCtx(() => [...(_cache[47] || (_cache[47] = [_createTextVNode(\"转换\", -1)]))]),\n                _: 1\n              })]),\n              _: 1\n            }, 8, [\"modelValue\"])]),\n            _: 1\n          }), _createVNode(_component_el_form_item, {\n            label: \"节点名称\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: newNode.value.name,\n              \"onUpdate:modelValue\": _cache[17] || (_cache[17] = $event => newNode.value.name = $event),\n              placeholder: \"输入节点名称\"\n            }, null, 8, [\"modelValue\"])]),\n            _: 1\n          }), _createVNode(_component_el_form_item, {\n            label: \"模板\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_select, {\n              modelValue: newNode.value.template,\n              \"onUpdate:modelValue\": _cache[18] || (_cache[18] = $event => newNode.value.template = $event),\n              placeholder: \"选择预设模板\",\n              style: {\n                \"width\": \"100%\"\n              }\n            }, {\n              default: _withCtx(() => [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(availableTemplates, template => {\n                return _createVNode(_component_el_option, {\n                  key: template.value,\n                  label: template.label,\n                  value: template.value\n                }, null, 8, [\"label\", \"value\"]);\n              }), 64))]),\n              _: 1\n            }, 8, [\"modelValue\"])]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"modelValue\"]), _createVNode(_component_el_dialog, {\n        modelValue: showSaveWorkflow.value,\n        \"onUpdate:modelValue\": _cache[24] || (_cache[24] = $event => showSaveWorkflow.value = $event),\n        title: \"保存工作流\",\n        width: \"400px\"\n      }, {\n        footer: _withCtx(() => [_createVNode(_component_el_button, {\n          onClick: _cache[23] || (_cache[23] = $event => showSaveWorkflow.value = false)\n        }, {\n          default: _withCtx(() => [...(_cache[50] || (_cache[50] = [_createTextVNode(\"取消\", -1)]))]),\n          _: 1\n        }), _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: confirmSaveWorkflow\n        }, {\n          default: _withCtx(() => [...(_cache[51] || (_cache[51] = [_createTextVNode(\"保存\", -1)]))]),\n          _: 1\n        })]),\n        default: _withCtx(() => [_createVNode(_component_el_form, {\n          \"label-width\": \"80px\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, {\n            label: \"名称\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: workflowName.value,\n              \"onUpdate:modelValue\": _cache[21] || (_cache[21] = $event => workflowName.value = $event),\n              placeholder: \"输入工作流名称\"\n            }, null, 8, [\"modelValue\"])]),\n            _: 1\n          }), _createVNode(_component_el_form_item, {\n            label: \"描述\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: workflowDescription.value,\n              \"onUpdate:modelValue\": _cache[22] || (_cache[22] = $event => workflowDescription.value = $event),\n              type: \"textarea\",\n              rows: 3,\n              placeholder: \"输入工作流描述\"\n            }, null, 8, [\"modelValue\"])]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"modelValue\"])]);\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","ElMessage","Plus","VideoPlay","Refresh","ArrowUp","ArrowDown","Delete","CircleCheck","CircleClose","Loading","Timer","Bottom","ArrowRight","Download","Save","api","showAddNode","showSaveWorkflow","workflowName","workflowDescription","currentNode","isExecuting","executionProgress","executionStatus","executionTime","currentExecutingNode","executionResults","chainNodes","newNode","type","name","template","availableTemplates","label","value","previousNodes","index","findIndex","n","id","slice","availableVariables","vars","description","forEach","node","idx","push","getNodeTypeLabel","labels","analysis","generation","evaluation","transform","getNodeTypeTag","tags","addNode","warning","find","t","Date","now","prompt","getDefaultPrompt","model","temperature","maxTokens","inputSource","length","outputFormat","conditional","condition","status","prompts","summary","keypoints","gaps","topic","code","report","review","quality","innovation","method","clean","format","removeNode","splice","moveNode","direction","newIndex","temp","selectNode","applyTemplate","workflowInput","executeChain","trim","startTime","output","error","nodesConfig","map","response","executeWorkflow","content","success","data","results","result","nodeName","node_name","nodeType","node_type","input","input_preview","full_output","output_preview","expanded","total_time","toFixed","Error","console","message","runningNode","loadTemplate","templateId","getWorkflowTemplates","nodes","nodeConfig","resetChain","exportResults","JSON","stringify","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","click","saveWorkflow","confirmSaveWorkflow","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","class","_hoisted_3","_createVNode","_component_el_input","$event","rows","placeholder","resize","_hoisted_4","_hoisted_5","_component_el_button","size","onClick","_cache","_hoisted_6","_hoisted_7","_component_el_tooltip","circle","_component_el_icon","_unref","_hoisted_8","_Fragment","_renderList","key","_normalizeClass","_hoisted_10","_toDisplayString","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_createBlock","_hoisted_15","_withModifiers","_component_el_empty","_hoisted_16","i","_hoisted_17","loading","disabled","_hoisted_18","_hoisted_19","_component_el_tag","_component_el_form","_component_el_form_item","_component_el_select","style","_component_el_option","onChange","_component_el_option_group","_component_el_slider","min","max","step","_component_el_input_number","_component_el_radio_group","_component_el_radio","_component_el_switch","_hoisted_20","_hoisted_21","variable","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_component_el_progress","percentage","_hoisted_26","_hoisted_27","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_component_el_dialog","title","width","footer","_withCtx","_component_el_radio_button"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/ChainWorkflow.vue"],"sourcesContent":["<template>\n  <div class=\"chain-workflow-container\">\n    <!-- 左侧：输入和配置面板 -->\n    <div class=\"chain-input-panel\">\n      <div class=\"panel-header\">\n        <h2>输入内容</h2>\n      </div>\n      \n      <div class=\"input-section\">\n        <el-input\n          v-model=\"workflowInput\"\n          type=\"textarea\"\n          :rows=\"10\"\n          placeholder=\"输入要处理的论文内容、研究问题或其他文本...\"\n          resize=\"none\"\n        />\n      </div>\n      \n      <div class=\"templates-section\">\n        <h3>快速加载模板</h3>\n        <div class=\"template-buttons\">\n          <el-button size=\"small\" @click=\"loadTemplate('summary')\">论文分析</el-button>\n          <el-button size=\"small\" @click=\"loadTemplate('review')\">文献综述</el-button>\n          <el-button size=\"small\" @click=\"loadTemplate('code')\">代码生成</el-button>\n          <el-button size=\"small\" @click=\"loadTemplate('topic')\">主题研究</el-button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 中间：链式配置面板 -->\n    <div class=\"chain-config-panel\">\n      <div class=\"panel-header\">\n        <h2>链式工作流配置</h2>\n        <el-tooltip content=\"添加节点\">\n          <el-button type=\"primary\" circle @click=\"showAddNode = true\">\n            <el-icon><Plus /></el-icon>\n          </el-button>\n        </el-tooltip>\n      </div>\n\n      <!-- 节点列表 -->\n      <div class=\"nodes-list\">\n        <div\n          v-for=\"(node, index) in chainNodes\"\n          :key=\"node.id\"\n          class=\"chain-node\"\n          :class=\"{ \n            'active': currentNode?.id === node.id,\n            'completed': node.status === 'completed',\n            'running': node.status === 'running',\n            'error': node.status === 'error'\n          }\"\n          @click=\"selectNode(node)\"\n        >\n          <div class=\"node-index\">{{ index + 1 }}</div>\n          <div class=\"node-info\">\n            <div class=\"node-name\">{{ node.name }}</div>\n            <div class=\"node-type\">{{ getNodeTypeLabel(node.type) }}</div>\n          </div>\n          <div class=\"node-status\">\n            <el-icon v-if=\"node.status === 'completed'\" class=\"status-icon success\"><CircleCheck /></el-icon>\n            <el-icon v-else-if=\"node.status === 'running'\" class=\"status-icon running\"><Loading /></el-icon>\n            <el-icon v-else-if=\"node.status === 'error'\" class=\"status-icon error\"><CircleClose /></el-icon>\n            <el-icon v-else class=\"status-icon pending\"><Timer /></el-icon>\n          </div>\n          <div class=\"node-actions\">\n            <el-icon class=\"action-btn\" @click.stop=\"moveNode(index, -1)\" v-if=\"index > 0\"><ArrowUp /></el-icon>\n            <el-icon class=\"action-btn\" @click.stop=\"moveNode(index, 1)\" v-if=\"index < chainNodes.length - 1\"><ArrowDown /></el-icon>\n            <el-icon class=\"action-btn delete\" @click.stop=\"removeNode(index)\"><Delete /></el-icon>\n          </div>\n        </div>\n\n        <!-- 空状态 -->\n        <el-empty v-if=\"chainNodes.length === 0\" description=\"暂无节点，点击右上角添加\" />\n      </div>\n\n      <!-- 连接箭头 -->\n      <div v-if=\"chainNodes.length > 1\" class=\"chain-connections\">\n        <div\n          v-for=\"i in chainNodes.length - 1\"\n          :key=\"i\"\n          class=\"connection-line\"\n        >\n          <el-icon><Bottom /></el-icon>\n        </div>\n      </div>\n\n      <!-- 执行按钮 -->\n      <div class=\"panel-footer\">\n        <el-button \n          type=\"primary\" \n          size=\"large\" \n          class=\"execute-btn\"\n          :loading=\"isExecuting\"\n          :disabled=\"chainNodes.length === 0\"\n          @click=\"executeChain\"\n        >\n          <el-icon><VideoPlay /></el-icon>\n          执行链式调用\n        </el-button>\n        <el-button size=\"large\" @click=\"resetChain\">\n          <el-icon><Refresh /></el-icon>\n          重置\n        </el-button>\n      </div>\n    </div>\n\n    <!-- 中间：节点配置详情 -->\n    <div class=\"node-config-panel\" v-if=\"currentNode\">\n      <div class=\"panel-header\">\n        <h3>{{ currentNode.name }}</h3>\n        <el-tag :type=\"getNodeTypeTag(currentNode.type)\">\n          {{ getNodeTypeLabel(currentNode.type) }}\n        </el-tag>\n      </div>\n\n      <el-form label-width=\"100px\" class=\"node-form\">\n        <!-- 节点名称 -->\n        <el-form-item label=\"节点名称\">\n          <el-input v-model=\"currentNode.name\" placeholder=\"输入节点名称\" />\n        </el-form-item>\n\n        <!-- 输入源 -->\n        <el-form-item label=\"输入源\">\n          <el-select v-model=\"currentNode.inputSource\" style=\"width: 100%\">\n            <el-option label=\"原始输入\" value=\"original\" />\n            <el-option \n              v-for=\"(node, idx) in previousNodes\" \n              :key=\"node.id\"\n              :label=\"`步骤 ${idx + 1}: ${node.name}`\"\n              :value=\"node.id\"\n            />\n          </el-select>\n        </el-form-item>\n\n        <!-- 提示词模板 -->\n        <el-form-item label=\"提示词模板\">\n          <el-select \n            v-model=\"currentNode.template\" \n            placeholder=\"选择预设模板\"\n            style=\"width: 100%\"\n            @change=\"applyTemplate\"\n          >\n            <el-option-group label=\"分析类\">\n              <el-option label=\"生成摘要\" value=\"summary\" />\n              <el-option label=\"提取要点\" value=\"keypoints\" />\n              <el-option label=\"识别研究空白\" value=\"gaps\" />\n              <el-option label=\"主题分析\" value=\"topic\" />\n            </el-option-group>\n            <el-option-group label=\"生成类\">\n              <el-option label=\"生成代码\" value=\"code\" />\n              <el-option label=\"生成报告\" value=\"report\" />\n              <el-option label=\"文献综述\" value=\"review\" />\n            </el-option-group>\n            <el-option-group label=\"评估类\">\n              <el-option label=\"质量评估\" value=\"quality\" />\n              <el-option label=\"创新性评估\" value=\"innovation\" />\n              <el-option label=\"方法评估\" value=\"method\" />\n            </el-option-group>\n          </el-select>\n        </el-form-item>\n\n        <!-- 自定义提示词 -->\n        <el-form-item label=\"自定义提示\">\n          <el-input\n            v-model=\"currentNode.prompt\"\n            type=\"textarea\"\n            :rows=\"6\"\n            placeholder=\"输入自定义提示词，使用 {{input}} 引用输入内容\"\n          />\n        </el-form-item>\n\n        <!-- 模型配置 -->\n        <el-form-item label=\"模型\">\n          <el-select v-model=\"currentNode.model\" style=\"width: 100%\">\n            <el-option label=\"GLM-4-Plus\" value=\"glm-4-plus\" />\n            <el-option label=\"GLM-4-Flash\" value=\"glm-4-flash\" />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"温度\">\n          <el-slider v-model=\"currentNode.temperature\" :min=\"0\" :max=\"1\" :step=\"0.1\" show-stops />\n        </el-form-item>\n\n        <el-form-item label=\"最大长度\">\n          <el-input-number v-model=\"currentNode.maxTokens\" :min=\"500\" :max=\"8000\" :step=\"500\" />\n        </el-form-item>\n\n        <!-- 输出处理 -->\n        <el-form-item label=\"输出格式\">\n          <el-radio-group v-model=\"currentNode.outputFormat\">\n            <el-radio label=\"text\">纯文本</el-radio>\n            <el-radio label=\"json\">JSON</el-radio>\n            <el-radio label=\"markdown\">Markdown</el-radio>\n          </el-radio-group>\n        </el-form-item>\n\n        <!-- 条件分支 -->\n        <el-form-item label=\"条件执行\">\n          <el-switch v-model=\"currentNode.conditional\" />\n        </el-form-item>\n\n        <el-form-item v-if=\"currentNode.conditional\" label=\"条件表达式\">\n          <el-input\n            v-model=\"currentNode.condition\"\n            placeholder=\"例如: input.score > 0.8\"\n          />\n        </el-form-item>\n      </el-form>\n\n      <!-- 变量预览 -->\n      <div class=\"variables-preview\">\n        <div class=\"preview-title\">可用变量</div>\n        <div class=\"variable-list\">\n          <el-tag v-for=\"variable in availableVariables\" :key=\"variable.name\" size=\"small\" class=\"variable-tag\">\n            {{ variable.name }}: {{ variable.description }}\n          </el-tag>\n        </div>\n      </div>\n    </div>\n\n    <!-- 右侧：执行结果 -->\n    <div class=\"execution-panel\">\n      <div class=\"panel-header\">\n        <h3>执行结果</h3>\n        <div class=\"execution-stats\" v-if=\"executionTime > 0\">\n          <el-tag size=\"small\" type=\"info\">\n            <el-icon><Timer /></el-icon>\n            {{ executionTime }}ms\n          </el-tag>\n        </div>\n      </div>\n\n      <!-- 进度条 -->\n      <div v-if=\"isExecuting\" class=\"execution-progress\">\n        <el-progress \n          :percentage=\"executionProgress\" \n          :status=\"executionStatus\"\n          :stroke-width=\"8\"\n        />\n        <div class=\"current-step\">正在执行: {{ currentExecutingNode?.name }}</div>\n      </div>\n\n      <!-- 结果列表 -->\n      <div class=\"results-list\" v-else>\n        <div\n          v-for=\"(result, index) in executionResults\"\n          :key=\"index\"\n          class=\"result-item\"\n          :class=\"{ 'expanded': result.expanded }\"\n        >\n          <div class=\"result-header\" @click=\"result.expanded = !result.expanded\">\n            <div class=\"result-title\">\n              <span class=\"step-number\">步骤 {{ index + 1 }}</span>\n              <span class=\"node-name\">{{ result.nodeName }}</span>\n            </div>\n            <div class=\"result-meta\">\n              <el-tag size=\"small\" :type=\"result.success ? 'success' : 'danger'\">\n                {{ result.success ? '成功' : '失败' }}\n              </el-tag>\n              <el-icon class=\"expand-icon\"><ArrowDown v-if=\"result.expanded\" /><ArrowRight v-else /></el-icon>\n            </div>\n          </div>\n          \n          <div v-if=\"result.expanded\" class=\"result-content\">\n            <div class=\"result-section\">\n              <div class=\"section-title\">输入</div>\n              <pre class=\"section-content input\">{{ result.input }}</pre>\n            </div>\n            <div class=\"result-section\">\n              <div class=\"section-title\">输出</div>\n              <pre class=\"section-content output\">{{ result.output }}</pre>\n            </div>\n            <div v-if=\"result.error\" class=\"result-section\">\n              <div class=\"section-title\">错误</div>\n              <pre class=\"section-content error\">{{ result.error }}</pre>\n            </div>\n          </div>\n        </div>\n\n        <!-- 空状态 -->\n        <el-empty v-if=\"executionResults.length === 0\" description=\"尚未执行，请配置工作流并点击执行\" />\n      </div>\n\n      <!-- 操作按钮 -->\n      <div class=\"panel-footer\" v-if=\"executionResults.length > 0\">\n        <el-button @click=\"exportResults\">\n          <el-icon><Download /></el-icon>\n          导出结果\n        </el-button>\n        <el-button type=\"primary\" @click=\"saveWorkflow\">\n          <el-icon><Save /></el-icon>\n          保存工作流\n        </el-button>\n      </div>\n    </div>\n\n    <!-- 添加节点对话框 -->\n    <el-dialog v-model=\"showAddNode\" title=\"添加节点\" width=\"500px\">\n      <el-form label-width=\"80px\">\n        <el-form-item label=\"节点类型\">\n          <el-radio-group v-model=\"newNode.type\">\n            <el-radio-button label=\"analysis\">分析</el-radio-button>\n            <el-radio-button label=\"generation\">生成</el-radio-button>\n            <el-radio-button label=\"evaluation\">评估</el-radio-button>\n            <el-radio-button label=\"transform\">转换</el-radio-button>\n          </el-radio-group>\n        </el-form-item>\n        \n        <el-form-item label=\"节点名称\">\n          <el-input v-model=\"newNode.name\" placeholder=\"输入节点名称\" />\n        </el-form-item>\n\n        <el-form-item label=\"模板\">\n          <el-select v-model=\"newNode.template\" placeholder=\"选择预设模板\" style=\"width: 100%\">\n            <el-option\n              v-for=\"template in availableTemplates\"\n              :key=\"template.value\"\n              :label=\"template.label\"\n              :value=\"template.value\"\n            />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      \n      <template #footer>\n        <el-button @click=\"showAddNode = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"addNode\">确定</el-button>\n      </template>\n    </el-dialog>\n\n    <!-- 保存工作流对话框 -->\n    <el-dialog v-model=\"showSaveWorkflow\" title=\"保存工作流\" width=\"400px\">\n      <el-form label-width=\"80px\">\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"workflowName\" placeholder=\"输入工作流名称\" />\n        </el-form-item>\n        <el-form-item label=\"描述\">\n          <el-input v-model=\"workflowDescription\" type=\"textarea\" :rows=\"3\" placeholder=\"输入工作流描述\" />\n        </el-form-item>\n      </el-form>\n      \n      <template #footer>\n        <el-button @click=\"showSaveWorkflow = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmSaveWorkflow\">保存</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport {\n  Plus, VideoPlay, Refresh, ArrowUp, ArrowDown, Delete,\n  CircleCheck, CircleClose, Loading, Timer, Bottom,\n  ArrowRight,\n  Download, Save\n} from '@element-plus/icons-vue'\nimport api from '@/api'\n\n// 状态\nconst showAddNode = ref(false)\nconst showSaveWorkflow = ref(false)\nconst workflowName = ref('')\nconst workflowDescription = ref('')\nconst currentNode = ref(null)\nconst isExecuting = ref(false)\nconst executionProgress = ref(0)\nconst executionStatus = ref('')\nconst executionTime = ref(0)\nconst currentExecutingNode = ref(null)\nconst executionResults = ref([])\n\n// 链式节点\nconst chainNodes = ref([])\n\n// 新节点配置\nconst newNode = ref({\n  type: 'analysis',\n  name: '',\n  template: ''\n})\n\n// 可用模板\nconst availableTemplates = [\n  { label: '生成摘要', value: 'summary', type: 'analysis' },\n  { label: '提取要点', value: 'keypoints', type: 'analysis' },\n  { label: '识别研究空白', value: 'gaps', type: 'analysis' },\n  { label: '主题分析', value: 'topic', type: 'analysis' },\n  { label: '生成代码', value: 'code', type: 'generation' },\n  { label: '生成报告', value: 'report', type: 'generation' },\n  { label: '文献综述', value: 'review', type: 'generation' },\n  { label: '质量评估', value: 'quality', type: 'evaluation' },\n  { label: '创新性评估', value: 'innovation', type: 'evaluation' },\n  { label: '方法评估', value: 'method', type: 'evaluation' },\n  { label: '数据清洗', value: 'clean', type: 'transform' },\n  { label: '格式转换', value: 'format', type: 'transform' }\n]\n\n// 计算属性\nconst previousNodes = computed(() => {\n  if (!currentNode.value) return []\n  const index = chainNodes.value.findIndex(n => n.id === currentNode.value.id)\n  return chainNodes.value.slice(0, index)\n})\n\nconst availableVariables = computed(() => {\n  const vars = [\n    { name: '{{input}}', description: '当前节点的输入内容' },\n    { name: '{{original}}', description: '原始输入内容' }\n  ]\n  \n  previousNodes.value.forEach((node, idx) => {\n    vars.push({\n      name: `{{step${idx + 1}}}`,\n      description: `${node.name} 的输出`\n    })\n  })\n  \n  return vars\n})\n\n// 方法\nconst getNodeTypeLabel = (type) => {\n  const labels = {\n    analysis: '分析',\n    generation: '生成',\n    evaluation: '评估',\n    transform: '转换'\n  }\n  return labels[type] || type\n}\n\nconst getNodeTypeTag = (type) => {\n  const tags = {\n    analysis: 'primary',\n    generation: 'success',\n    evaluation: 'warning',\n    transform: 'info'\n  }\n  return tags[type] || ''\n}\n\nconst addNode = () => {\n  if (!newNode.value.name) {\n    ElMessage.warning('请输入节点名称')\n    return\n  }\n  \n  const template = availableTemplates.find(t => t.value === newNode.value.template)\n  \n  const node = {\n    id: Date.now(),\n    name: newNode.value.name,\n    type: newNode.value.type,\n    template: newNode.value.template,\n    prompt: getDefaultPrompt(newNode.value.template),\n    model: 'glm-4-plus',\n    temperature: 0.7,\n    maxTokens: 4000,\n    inputSource: chainNodes.value.length === 0 ? 'original' : chainNodes.value[chainNodes.value.length - 1].id,\n    outputFormat: 'text',\n    conditional: false,\n    condition: '',\n    status: 'pending'\n  }\n  \n  chainNodes.value.push(node)\n  currentNode.value = node\n  showAddNode.value = false\n  \n  // 重置新节点表单\n  newNode.value = { type: 'analysis', name: '', template: '' }\n}\n\nconst getDefaultPrompt = (template) => {\n  const prompts = {\n    summary: '请对以下内容生成一份简洁的摘要：\\n\\n{{input}}',\n    keypoints: '请从以下内容中提取核心要点：\\n\\n{{input}}',\n    gaps: '请分析以下内容，识别研究空白：\\n\\n{{input}}',\n    topic: '请分析以下内容的主题：\\n\\n{{input}}',\n    code: '请根据以下需求生成代码：\\n\\n{{input}}',\n    report: '请根据以下内容生成报告：\\n\\n{{input}}',\n    review: '请对以下内容进行综述：\\n\\n{{input}}',\n    quality: '请评估以下内容的质量：\\n\\n{{input}}',\n    innovation: '请评估以下内容的创新性：\\n\\n{{input}}',\n    method: '请评估以下方法的合理性：\\n\\n{{input}}',\n    clean: '请清洗以下数据：\\n\\n{{input}}',\n    format: '请将以下内容转换为标准格式：\\n\\n{{input}}'\n  }\n  return prompts[template] || '请处理以下内容：\\n\\n{{input}}'\n}\n\nconst removeNode = (index) => {\n  chainNodes.value.splice(index, 1)\n  if (currentNode.value && chainNodes.value.findIndex(n => n.id === currentNode.value.id) === -1) {\n    currentNode.value = chainNodes.value[0] || null\n  }\n}\n\nconst moveNode = (index, direction) => {\n  const newIndex = index + direction\n  if (newIndex >= 0 && newIndex < chainNodes.value.length) {\n    const temp = chainNodes.value[index]\n    chainNodes.value[index] = chainNodes.value[newIndex]\n    chainNodes.value[newIndex] = temp\n  }\n}\n\nconst selectNode = (node) => {\n  currentNode.value = node\n}\n\nconst applyTemplate = (template) => {\n  if (currentNode.value && template) {\n    currentNode.value.prompt = getDefaultPrompt(template)\n  }\n}\n\nconst workflowInput = ref('')\n\nconst executeChain = async () => {\n  if (chainNodes.value.length === 0) {\n    ElMessage.warning('请先添加工作流节点')\n    return\n  }\n  \n  // 如果没有输入内容，提示用户\n  if (!workflowInput.value.trim()) {\n    ElMessage.warning('请输入工作流处理内容')\n    return\n  }\n  \n  isExecuting.value = true\n  executionProgress.value = 0\n  executionStatus.value = ''\n  executionResults.value = []\n  \n  const startTime = Date.now()\n  \n  try {\n    // 重置所有节点状态\n    chainNodes.value.forEach(node => {\n      node.status = 'pending'\n      node.output = null\n      node.error = null\n    })\n    \n    // 准备节点配置\n    const nodesConfig = chainNodes.value.map(node => ({\n      id: node.id,\n      name: node.name,\n      type: node.type,\n      prompt: node.prompt,\n      model: node.model,\n      temperature: node.temperature,\n      maxTokens: node.maxTokens,\n      inputSource: node.inputSource,\n      outputFormat: node.outputFormat,\n      conditional: node.conditional,\n      condition: node.condition\n    }))\n    \n    // 调用后端 API\n    const response = await api.executeWorkflow(nodesConfig, {\n      content: workflowInput.value\n    })\n    \n    if (response.success) {\n      // 更新执行结果\n      executionResults.value = response.data.results.map((result, index) => ({\n        nodeName: result.node_name,\n        nodeType: result.node_type,\n        input: result.input_preview || '',\n        output: result.full_output || result.output_preview || '',\n        success: result.status === 'completed',\n        error: result.error,\n        expanded: index === response.data.results.length - 1\n      }))\n      \n      // 更新节点状态\n      response.data.results.forEach((result, index) => {\n        if (chainNodes.value[index]) {\n          chainNodes.value[index].status = result.status\n          chainNodes.value[index].output = result.full_output\n          chainNodes.value[index].error = result.error\n        }\n      })\n      \n      executionProgress.value = 100\n      executionStatus.value = 'success'\n      executionTime.value = response.data.total_time * 1000\n      \n      ElMessage.success(`工作流执行完成，耗时 ${response.data.total_time.toFixed(2)}s`)\n    } else {\n      throw new Error(response.error || '执行失败')\n    }\n    \n  } catch (error) {\n    console.error('工作流执行错误:', error)\n    executionStatus.value = 'exception'\n    ElMessage.error(`执行失败: ${error.message}`)\n    \n    // 标记当前运行的节点为错误状态\n    const runningNode = chainNodes.value.find(n => n.status === 'running')\n    if (runningNode) {\n      runningNode.status = 'error'\n      runningNode.error = error.message\n    }\n  } finally {\n    isExecuting.value = false\n    currentExecutingNode.value = null\n  }\n}\n\n// 加载工作流模板\nconst loadTemplate = async (templateId) => {\n  try {\n    const response = await api.getWorkflowTemplates()\n    if (response.success) {\n      const template = response.data.find(t => t.id === templateId)\n      if (template) {\n        // 清空现有节点\n        chainNodes.value = []\n        \n        // 根据模板创建节点\n        template.nodes.forEach((nodeConfig, index) => {\n          const newNode = {\n            id: `node_${Date.now()}_${index}`,\n            name: nodeConfig.name,\n            type: nodeConfig.type,\n            template: nodeConfig.template,\n            prompt: getDefaultPrompt(nodeConfig.template),\n            model: nodeConfig.model || 'glm-4-plus',\n            temperature: 0.7,\n            maxTokens: 4000,\n            inputSource: index === 0 ? 'original' : chainNodes.value[index - 1]?.id || 'original',\n            outputFormat: 'text',\n            conditional: false,\n            condition: '',\n            status: 'pending'\n          }\n          chainNodes.value.push(newNode)\n        })\n        \n        ElMessage.success(`已加载模板: ${template.name}`)\n      }\n    }\n  } catch (error) {\n    console.error('加载模板失败:', error)\n    ElMessage.error('加载模板失败')\n  }\n}\n\nconst resetChain = () => {\n  chainNodes.value.forEach(node => {\n    node.status = 'pending'\n  })\n  executionResults.value = []\n  executionProgress.value = 0\n  executionTime.value = 0\n  ElMessage.success('已重置工作流')\n}\n\nconst exportResults = () => {\n  const data = JSON.stringify(executionResults.value, null, 2)\n  const blob = new Blob([data], { type: 'application/json' })\n  const url = URL.createObjectURL(blob)\n  const a = document.createElement('a')\n  a.href = url\n  a.download = `workflow-results-${Date.now()}.json`\n  a.click()\n  ElMessage.success('结果已导出')\n}\n\nconst saveWorkflow = () => {\n  showSaveWorkflow.value = true\n}\n\nconst confirmSaveWorkflow = async () => {\n  if (!workflowName.value) {\n    ElMessage.warning('请输入工作流名称')\n    return\n  }\n  \n  try {\n    // 调用 API 保存工作流\n    await api.saveWorkflow({\n      name: workflowName.value,\n      description: workflowDescription.value,\n      nodes: chainNodes.value\n    })\n    \n    ElMessage.success('工作流保存成功')\n    showSaveWorkflow.value = false\n  } catch (error) {\n    ElMessage.error('保存失败: ' + error.message)\n  }\n}\n\nonMounted(() => {\n  // 加载模板列表\n  loadTemplate('summary')\n})\n</script>\n\n<style scoped>\n.chain-workflow-container {\n  display: flex;\n  height: calc(100vh - 64px);\n  background: #f5f7fa;\n}\n\n/* 左侧输入面板 */\n.chain-input-panel {\n  width: 320px;\n  background: #fff;\n  border-right: 1px solid #e4e7ed;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n}\n\n.chain-input-panel .panel-header {\n  padding-bottom: 12px;\n  border-bottom: 1px solid #e4e7ed;\n  margin-bottom: 12px;\n}\n\n.chain-input-panel .panel-header h2 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.input-section {\n  flex: 1;\n  margin-bottom: 16px;\n}\n\n.input-section :deep(.el-textarea__inner) {\n  height: 100%;\n  min-height: 200px;\n}\n\n.templates-section h3 {\n  font-size: 14px;\n  color: #606266;\n  margin-bottom: 10px;\n}\n\n.template-buttons {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n/* 中间配置面板 */\n.chain-config-panel {\n  width: 320px;\n  background: #fff;\n  border-right: 1px solid #e4e7ed;\n  display: flex;\n  flex-direction: column;\n}\n\n.panel-header {\n  padding: 16px 20px;\n  border-bottom: 1px solid #e4e7ed;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.panel-header h2 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.panel-header h3 {\n  margin: 0;\n  font-size: 15px;\n  font-weight: 500;\n}\n\n.nodes-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 12px;\n  position: relative;\n}\n\n.chain-node {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: #fff;\n  border: 2px solid #e4e7ed;\n  border-radius: 8px;\n  margin-bottom: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.chain-node:hover {\n  border-color: #409eff;\n  box-shadow: 0 2px 8px rgba(64, 158, 255, 0.15);\n}\n\n.chain-node.active {\n  border-color: #409eff;\n  background: #f0f9ff;\n}\n\n.chain-node.completed {\n  border-color: #67c23a;\n}\n\n.chain-node.running {\n  border-color: #e6a23c;\n  animation: pulse 1.5s infinite;\n}\n\n.chain-node.error {\n  border-color: #f56c6c;\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.7; }\n}\n\n.node-index {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background: #409eff;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.node-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.node-name {\n  font-size: 14px;\n  font-weight: 500;\n  color: #303133;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.node-type {\n  font-size: 12px;\n  color: #909399;\n  margin-top: 2px;\n}\n\n.node-status {\n  display: flex;\n  align-items: center;\n}\n\n.status-icon {\n  font-size: 18px;\n}\n\n.status-icon.success {\n  color: #67c23a;\n}\n\n.status-icon.running {\n  color: #e6a23c;\n}\n\n.status-icon.error {\n  color: #f56c6c;\n}\n\n.status-icon.pending {\n  color: #c0c4cc;\n}\n\n.node-actions {\n  display: flex;\n  gap: 4px;\n  opacity: 0;\n  transition: opacity 0.2s;\n}\n\n.chain-node:hover .node-actions {\n  opacity: 1;\n}\n\n.action-btn {\n  font-size: 14px;\n  color: #909399;\n  cursor: pointer;\n  padding: 2px;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n\n.action-btn:hover {\n  background: #f5f7fa;\n  color: #409eff;\n}\n\n.action-btn.delete:hover {\n  color: #f56c6c;\n}\n\n.chain-connections {\n  position: absolute;\n  left: 32px;\n  top: 40px;\n  display: flex;\n  flex-direction: column;\n  gap: 44px;\n  pointer-events: none;\n  color: #c0c4cc;\n}\n\n.connection-line {\n  font-size: 16px;\n}\n\n.panel-footer {\n  padding: 16px 20px;\n  border-top: 1px solid #e4e7ed;\n  display: flex;\n  gap: 12px;\n}\n\n.execute-btn {\n  flex: 1;\n}\n\n/* 中间配置面板 */\n.node-config-panel {\n  width: 400px;\n  background: #fff;\n  border-right: 1px solid #e4e7ed;\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n}\n\n.node-form {\n  padding: 20px;\n}\n\n.variables-preview {\n  padding: 0 20px 20px;\n}\n\n.preview-title {\n  font-size: 13px;\n  color: #606266;\n  margin-bottom: 8px;\n}\n\n.variable-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n}\n\n.variable-tag {\n  cursor: help;\n}\n\n/* 右侧执行面板 */\n.execution-panel {\n  flex: 1;\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.execution-stats {\n  display: flex;\n  gap: 8px;\n}\n\n.execution-progress {\n  padding: 20px;\n  border-bottom: 1px solid #e4e7ed;\n}\n\n.current-step {\n  text-align: center;\n  margin-top: 8px;\n  color: #606266;\n  font-size: 13px;\n}\n\n.results-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 16px;\n}\n\n.result-item {\n  border: 1px solid #e4e7ed;\n  border-radius: 8px;\n  margin-bottom: 12px;\n  overflow: hidden;\n}\n\n.result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: #f5f7fa;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.result-header:hover {\n  background: #e4e7ed;\n}\n\n.result-title {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.step-number {\n  font-size: 12px;\n  color: #909399;\n  background: #fff;\n  padding: 2px 8px;\n  border-radius: 4px;\n}\n\n.node-name {\n  font-weight: 500;\n  color: #303133;\n}\n\n.result-meta {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.expand-icon {\n  color: #909399;\n  transition: transform 0.2s;\n}\n\n.result-content {\n  padding: 16px;\n}\n\n.result-section {\n  margin-bottom: 16px;\n}\n\n.result-section:last-child {\n  margin-bottom: 0;\n}\n\n.section-title {\n  font-size: 12px;\n  color: #909399;\n  margin-bottom: 8px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.section-content {\n  background: #f5f7fa;\n  padding: 12px;\n  border-radius: 6px;\n  font-size: 13px;\n  line-height: 1.6;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  font-family: 'Monaco', 'Menlo', monospace;\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.section-content.input {\n  background: #ecf5ff;\n  color: #409eff;\n}\n\n.section-content.output {\n  background: #f0f9ff;\n  color: #303133;\n}\n\n.section-content.error {\n  background: #fef0f0;\n  color: #f56c6c;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}