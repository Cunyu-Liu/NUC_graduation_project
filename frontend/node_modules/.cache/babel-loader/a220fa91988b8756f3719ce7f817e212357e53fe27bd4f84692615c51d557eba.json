{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"progress-content\"\n};\nconst _hoisted_2 = {\n  class: \"message\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"step\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_progress = _resolveComponent(\"el-progress\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: $setup.visible,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.visible = $event),\n    title: \"处理中\",\n    width: \"400px\",\n    \"close-on-click-modal\": false,\n    \"show-close\": false\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_progress, {\n      percentage: $setup.progress,\n      status: $setup.progress === 100 ? 'success' : undefined\n    }, null, 8, [\"percentage\", \"status\"]), _createElementVNode(\"p\", _hoisted_2, _toDisplayString($setup.message), 1), $setup.step ? (_openBlock(), _createElementBlock(\"p\", _hoisted_3, _toDisplayString($setup.step), 1)) : _createCommentVNode(\"\", true)])]),\n    _: 1\n  }, 8, [\"modelValue\"]);\n}","map":{"version":3,"names":["class","_createBlock","_component_el_dialog","$setup","visible","$event","title","width","_createElementVNode","_hoisted_1","_createVNode","_component_el_progress","percentage","progress","status","undefined","_hoisted_2","_toDisplayString","message","step","_createElementBlock","_hoisted_3"],"sources":["/Users/liucunyu/Documents/all_code/nuc_Graduation_project/frontend/src/components/ProgressDialog.vue"],"sourcesContent":["<template>\n  <el-dialog\n    v-model=\"visible\"\n    title=\"处理中\"\n    width=\"400px\"\n    :close-on-click-modal=\"false\"\n    :show-close=\"false\"\n  >\n    <div class=\"progress-content\">\n      <el-progress\n        :percentage=\"progress\"\n        :status=\"progress === 100 ? 'success' : undefined\"\n      />\n      <p class=\"message\">{{ message }}</p>\n      <p class=\"step\" v-if=\"step\">{{ step }}</p>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { getSocket } from '@/api'\n\nexport default {\n  name: 'ProgressDialog',\n  setup() {\n    const store = useStore()\n\n    const visible = computed({\n      get: () => store.state.showProgressDialog,\n      set: (val) => store.commit('SHOW_PROGRESS_DIALOG', val)\n    })\n\n    const progress = computed(() => store.state.progress)\n    const message = computed(() => store.state.progressMessage)\n    const step = computed(() => store.state.progressStep)\n\n    // 监听WebSocket进度\n    const socket = getSocket()\n    socket.on('progress', (data) => {\n      store.commit('SET_PROGRESS', {\n        progress: data.progress,\n        message: data.message,\n        step: data.step\n      })\n\n      if (data.progress >= 100) {\n        setTimeout(() => {\n          store.commit('SHOW_PROGRESS_DIALOG', false)\n        }, 1000)\n      }\n    })\n\n    return {\n      visible,\n      progress,\n      message,\n      step\n    }\n  }\n}\n</script>\n\n<style scoped>\n.progress-content {\n  padding: 20px 0;\n  text-align: center;\n}\n\n.message {\n  margin-top: 20px;\n  font-size: 16px;\n  color: #303133;\n}\n\n.step {\n  margin-top: 10px;\n  font-size: 14px;\n  color: #909399;\n}\n</style>\n"],"mappings":";;EAQSA,KAAK,EAAC;AAAkB;;EAKxBA,KAAK,EAAC;AAAS;;;EACfA,KAAK,EAAC;;;;;uBAbbC,YAAA,CAeYC,oBAAA;gBAdDC,MAAA,CAAAC,OAAO;+DAAPD,MAAA,CAAAC,OAAO,GAAAC,MAAA;IAChBC,KAAK,EAAC,KAAK;IACXC,KAAK,EAAC,OAAO;IACZ,sBAAoB,EAAE,KAAK;IAC3B,YAAU,EAAE;;sBAEb,MAOM,CAPNC,mBAAA,CAOM,OAPNC,UAOM,GANJC,YAAA,CAGEC,sBAAA;MAFCC,UAAU,EAAET,MAAA,CAAAU,QAAQ;MACpBC,MAAM,EAAEX,MAAA,CAAAU,QAAQ,uBAAuBE;2CAE1CP,mBAAA,CAAoC,KAApCQ,UAAoC,EAAAC,gBAAA,CAAdd,MAAA,CAAAe,OAAO,OACPf,MAAA,CAAAgB,IAAI,I,cAA1BC,mBAAA,CAA0C,KAA1CC,UAA0C,EAAAJ,gBAAA,CAAXd,MAAA,CAAAgB,IAAI,S","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}