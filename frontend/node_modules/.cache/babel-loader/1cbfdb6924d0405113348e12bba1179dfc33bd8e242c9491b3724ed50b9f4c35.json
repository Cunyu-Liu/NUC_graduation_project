{"ast":null,"code":"import { defineComponent, getCurrentInstance, inject, ref, computed, openBlock, createBlock, unref, normalizeClass, withCtx, createElementBlock, Fragment, renderList, createVNode, createTextVNode, toDisplayString, renderSlot, createCommentVNode } from 'vue';\nimport { ElScrollbar } from '../../scrollbar/index.mjs';\nimport { Loading } from '@element-plus/icons-vue';\nimport { ElIcon } from '../../icon/index.mjs';\nimport ElCascaderNode from './node2.mjs';\nimport { CASCADER_PANEL_INJECTION_KEY } from './types.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nimport { useId } from '../../../hooks/use-id/index.mjs';\nconst _sfc_main = defineComponent({\n  ...{\n    name: \"ElCascaderMenu\"\n  },\n  __name: \"menu\",\n  props: {\n    nodes: {\n      type: Array,\n      required: true\n    },\n    index: {\n      type: Number,\n      required: true\n    }\n  },\n  setup(__props) {\n    const props = __props;\n    const instance = getCurrentInstance();\n    const ns = useNamespace(\"cascader-menu\");\n    const {\n      t\n    } = useLocale();\n    const id = useId();\n    let activeNode;\n    let hoverTimer;\n    const panel = inject(CASCADER_PANEL_INJECTION_KEY);\n    const hoverZone = ref();\n    const isEmpty = computed(() => !props.nodes.length);\n    const isLoading = computed(() => !panel.initialLoaded);\n    const menuId = computed(() => `${id.value}-${props.index}`);\n    const handleExpand = e => {\n      activeNode = e.target;\n    };\n    const handleMouseMove = e => {\n      var _a;\n      if (!panel.isHoverMenu || !activeNode || !hoverZone.value) return;\n      if (activeNode.contains(e.target)) {\n        clearHoverTimer();\n        const el = instance.vnode.el;\n        const {\n          left\n        } = el.getBoundingClientRect();\n        const {\n          offsetWidth,\n          offsetHeight\n        } = el;\n        const startX = e.clientX - left;\n        const top = activeNode.offsetTop;\n        const bottom = top + activeNode.offsetHeight;\n        const scrollTop = ((_a = el.querySelector(`.${ns.e(\"wrap\")}`)) == null ? void 0 : _a.scrollTop) || 0;\n        hoverZone.value.innerHTML = `\n          <path style=\"pointer-events: auto;\" fill=\"transparent\" d=\"M${startX} ${top} L${offsetWidth} ${scrollTop} V${top} Z\" />\n          <path style=\"pointer-events: auto;\" fill=\"transparent\" d=\"M${startX} ${bottom} L${offsetWidth} ${offsetHeight + scrollTop} V${bottom} Z\" />\n        `;\n      } else if (!hoverTimer) {\n        hoverTimer = window.setTimeout(clearHoverZone, panel.config.hoverThreshold);\n      }\n    };\n    const clearHoverTimer = () => {\n      if (!hoverTimer) return;\n      clearTimeout(hoverTimer);\n      hoverTimer = void 0;\n    };\n    const clearHoverZone = () => {\n      if (!hoverZone.value) return;\n      hoverZone.value.innerHTML = \"\";\n      clearHoverTimer();\n    };\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(ElScrollbar), {\n        key: menuId.value,\n        tag: \"ul\",\n        role: \"menu\",\n        class: normalizeClass(unref(ns).b()),\n        \"wrap-class\": unref(ns).e(\"wrap\"),\n        \"view-class\": [unref(ns).e(\"list\"), unref(ns).is(\"empty\", isEmpty.value)],\n        onMousemove: handleMouseMove,\n        onMouseleave: clearHoverZone\n      }, {\n        default: withCtx(() => {\n          var _a;\n          return [(openBlock(true), createElementBlock(Fragment, null, renderList(__props.nodes, node => {\n            return openBlock(), createBlock(ElCascaderNode, {\n              key: node.uid,\n              node,\n              \"menu-id\": menuId.value,\n              onExpand: handleExpand\n            }, null, 8, [\"node\", \"menu-id\"]);\n          }), 128)), isLoading.value ? (openBlock(), createElementBlock(\"div\", {\n            key: 0,\n            class: normalizeClass(unref(ns).e(\"empty-text\"))\n          }, [createVNode(unref(ElIcon), {\n            size: \"14\",\n            class: normalizeClass(unref(ns).is(\"loading\"))\n          }, {\n            default: withCtx(() => [createVNode(unref(Loading))]),\n            _: 1\n          }, 8, [\"class\"]), createTextVNode(\" \" + toDisplayString(unref(t)(\"el.cascader.loading\")), 1)], 2)) : isEmpty.value ? (openBlock(), createElementBlock(\"div\", {\n            key: 1,\n            class: normalizeClass(unref(ns).e(\"empty-text\"))\n          }, [renderSlot(_ctx.$slots, \"empty\", {}, () => [createTextVNode(toDisplayString(unref(t)(\"el.cascader.noData\")), 1)])], 2)) : ((_a = unref(panel)) == null ? void 0 : _a.isHoverMenu) ? (openBlock(), createElementBlock(Fragment, {\n            key: 2\n          }, [createCommentVNode(\" eslint-disable-next-line vue/html-self-closing \"), (openBlock(), createElementBlock(\"svg\", {\n            ref_key: \"hoverZone\",\n            ref: hoverZone,\n            class: normalizeClass(unref(ns).e(\"hover-zone\"))\n          }, null, 2))], 2112)) : createCommentVNode(\"v-if\", true)];\n        }),\n        _: 3\n      }, 8, [\"class\", \"wrap-class\", \"view-class\"]);\n    };\n  }\n});\nvar ElCascaderMenu = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue\"]]);\nexport { ElCascaderMenu as default };","map":{"version":3,"names":["props","__props","instance","getCurrentInstance","ns","useNamespace","t","useLocale","id","useId","activeNode","hoverTimer","panel","inject","CASCADER_PANEL_INJECTION_KEY","hoverZone","ref","isEmpty","computed","nodes","length","isLoading","initialLoaded","menuId","value","index","handleExpand","e","target","handleMouseMove","isHoverMenu","contains","clearHoverTimer","el","vnode","left","getBoundingClientRect","offsetWidth","offsetHeight","startX","clientX","top","offsetTop","bottom","scrollTop","_a","querySelector","innerHTML","window","setTimeout","clearHoverZone","config","hoverThreshold","clearTimeout","createBlock","unref","ElScrollbar","key","tag","role","class","normalizeClass","b","is","onMousemove","onMouseleave","default","withCtx","openBlock","createElementBlock","Fragment","renderList","node","ElCascaderNode","uid","onExpand","createVNode","ElIcon","size","Loading","_","toDisplayString","renderSlot","_ctx","$slots","createTextVNode","createCommentVNode","ref_key"],"sources":["../../../../../../packages/components/cascader-panel/src/menu.vue"],"sourcesContent":["<template>\n  <el-scrollbar\n    :key=\"menuId\"\n    tag=\"ul\"\n    role=\"menu\"\n    :class=\"ns.b()\"\n    :wrap-class=\"ns.e('wrap')\"\n    :view-class=\"[ns.e('list'), ns.is('empty', isEmpty)]\"\n    @mousemove=\"handleMouseMove\"\n    @mouseleave=\"clearHoverZone\"\n  >\n    <el-cascader-node\n      v-for=\"node in nodes\"\n      :key=\"node.uid\"\n      :node=\"node\"\n      :menu-id=\"menuId\"\n      @expand=\"handleExpand\"\n    />\n    <div v-if=\"isLoading\" :class=\"ns.e('empty-text')\">\n      <el-icon size=\"14\" :class=\"ns.is('loading')\">\n        <loading />\n      </el-icon>\n      {{ t('el.cascader.loading') }}\n    </div>\n    <div v-else-if=\"isEmpty\" :class=\"ns.e('empty-text')\">\n      <slot name=\"empty\">{{ t('el.cascader.noData') }}</slot>\n    </div>\n    <!-- eslint-disable-next-line vue/html-self-closing -->\n    <svg\n      v-else-if=\"panel?.isHoverMenu\"\n      ref=\"hoverZone\"\n      :class=\"ns.e('hover-zone')\"\n    ></svg>\n  </el-scrollbar>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, getCurrentInstance, inject, ref } from 'vue'\nimport ElScrollbar from '@element-plus/components/scrollbar'\nimport { useId, useLocale, useNamespace } from '@element-plus/hooks'\nimport { Loading } from '@element-plus/icons-vue'\nimport ElIcon from '@element-plus/components/icon'\nimport ElCascaderNode from './node.vue'\nimport { CASCADER_PANEL_INJECTION_KEY } from './types'\n\nimport type { CascaderNode } from './types'\nimport type { PropType } from 'vue'\n\ndefineOptions({\n  name: 'ElCascaderMenu',\n})\n\nconst props = defineProps({\n  nodes: {\n    type: Array as PropType<CascaderNode[]>,\n    required: true,\n  },\n  index: {\n    type: Number,\n    required: true,\n  },\n})\n\nconst instance = getCurrentInstance()!\nconst ns = useNamespace('cascader-menu')\n\nconst { t } = useLocale()\nconst id = useId()\nlet activeNode: HTMLElement\nlet hoverTimer: number | undefined\n\nconst panel = inject(CASCADER_PANEL_INJECTION_KEY)!\n\nconst hoverZone = ref<SVGSVGElement>()\n\nconst isEmpty = computed(() => !props.nodes.length)\nconst isLoading = computed(() => !panel.initialLoaded)\nconst menuId = computed(() => `${id.value}-${props.index}`)\n\nconst handleExpand = (e: MouseEvent) => {\n  activeNode = e.target as HTMLElement\n}\n\nconst handleMouseMove = (e: MouseEvent) => {\n  if (!panel.isHoverMenu || !activeNode || !hoverZone.value) return\n\n  if (activeNode.contains(e.target as HTMLElement)) {\n    clearHoverTimer()\n\n    const el = instance.vnode.el as HTMLElement\n    const { left } = el.getBoundingClientRect()\n    const { offsetWidth, offsetHeight } = el\n    const startX = e.clientX - left\n    const top = activeNode.offsetTop\n    const bottom = top + activeNode.offsetHeight\n    const scrollTop = el.querySelector(`.${ns.e('wrap')}`)?.scrollTop || 0\n\n    hoverZone.value.innerHTML = `\n          <path style=\"pointer-events: auto;\" fill=\"transparent\" d=\"M${startX} ${top} L${offsetWidth} ${scrollTop} V${top} Z\" />\n          <path style=\"pointer-events: auto;\" fill=\"transparent\" d=\"M${startX} ${bottom} L${offsetWidth} ${offsetHeight + scrollTop} V${bottom} Z\" />\n        `\n  } else if (!hoverTimer) {\n    hoverTimer = window.setTimeout(clearHoverZone, panel.config.hoverThreshold)\n  }\n}\n\nconst clearHoverTimer = () => {\n  if (!hoverTimer) return\n  clearTimeout(hoverTimer)\n  hoverTimer = undefined\n}\n\nconst clearHoverZone = () => {\n  if (!hoverZone.value) return\n  hoverZone.value.innerHTML = ''\n  clearHoverTimer()\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}