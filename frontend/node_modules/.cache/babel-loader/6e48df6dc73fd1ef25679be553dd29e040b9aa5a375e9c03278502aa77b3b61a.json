{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref, watch, unref, watchEffect, computed, onMounted, nextTick } from 'vue';\nimport { useEventListener, useResizeObserver } from '@vueuse/core';\nimport { useFormSize } from '../../../form/src/hooks/use-form-common-props.mjs';\nfunction useStyle(props, layout, store, table) {\n  const isHidden = ref(false);\n  const renderExpanded = ref(null);\n  const resizeProxyVisible = ref(false);\n  const setDragVisible = visible => {\n    resizeProxyVisible.value = visible;\n  };\n  const resizeState = ref({\n    width: null,\n    height: null,\n    headerHeight: null\n  });\n  const isGroup = ref(false);\n  const scrollbarViewStyle = {\n    display: \"inline-block\",\n    verticalAlign: \"middle\"\n  };\n  const tableWidth = ref();\n  const tableScrollHeight = ref(0);\n  const bodyScrollHeight = ref(0);\n  const headerScrollHeight = ref(0);\n  const footerScrollHeight = ref(0);\n  const appendScrollHeight = ref(0);\n  watch(() => props.height, value => {\n    layout.setHeight(value != null ? value : null);\n  }, {\n    immediate: true\n  });\n  watch(() => props.maxHeight, value => {\n    layout.setMaxHeight(value != null ? value : null);\n  }, {\n    immediate: true\n  });\n  watch(() => [props.currentRowKey, store.states.rowKey], ([currentRowKey, rowKey]) => {\n    if (!unref(rowKey) || !unref(currentRowKey)) return;\n    store.setCurrentRowKey(`${currentRowKey}`);\n  }, {\n    immediate: true\n  });\n  watch(() => props.data, data => {\n    table.store.commit(\"setData\", data);\n  }, {\n    immediate: true,\n    deep: true\n  });\n  watchEffect(() => {\n    if (props.expandRowKeys) {\n      store.setExpandRowKeysAdapter(props.expandRowKeys);\n    }\n  });\n  const handleMouseLeave = () => {\n    table.store.commit(\"setHoverRow\", null);\n    if (table.hoverState) table.hoverState = null;\n  };\n  const handleHeaderFooterMousewheel = (_event, data) => {\n    const {\n      pixelX,\n      pixelY\n    } = data;\n    if (Math.abs(pixelX) >= Math.abs(pixelY)) {\n      table.refs.bodyWrapper.scrollLeft += data.pixelX / 5;\n    }\n  };\n  const shouldUpdateHeight = computed(() => {\n    return props.height || props.maxHeight || store.states.fixedColumns.value.length > 0 || store.states.rightFixedColumns.value.length > 0;\n  });\n  const tableBodyStyles = computed(() => {\n    return {\n      width: layout.bodyWidth.value ? `${layout.bodyWidth.value}px` : \"\"\n    };\n  });\n  const doLayout = () => {\n    if (shouldUpdateHeight.value) {\n      layout.updateElsHeight();\n    }\n    layout.updateColumnsWidth();\n    if (typeof window === \"undefined\") return;\n    requestAnimationFrame(syncPosition);\n  };\n  onMounted(async () => {\n    await nextTick();\n    store.updateColumns();\n    bindEvents();\n    requestAnimationFrame(doLayout);\n    const el = table.vnode.el;\n    const tableHeader = table.refs.headerWrapper;\n    if (props.flexible && el && el.parentElement) {\n      el.parentElement.style.minWidth = \"0\";\n    }\n    resizeState.value = {\n      width: tableWidth.value = el.offsetWidth,\n      height: el.offsetHeight,\n      headerHeight: props.showHeader && tableHeader ? tableHeader.offsetHeight : null\n    };\n    store.states.columns.value.forEach(column => {\n      if (column.filteredValue && column.filteredValue.length) {\n        table.store.commit(\"filterChange\", {\n          column,\n          values: column.filteredValue,\n          silent: true\n        });\n      }\n    });\n    table.$ready = true;\n  });\n  const setScrollClassByEl = (el, className) => {\n    if (!el) return;\n    const classList = Array.from(el.classList).filter(item => !item.startsWith(\"is-scrolling-\"));\n    classList.push(layout.scrollX.value ? className : \"is-scrolling-none\");\n    el.className = classList.join(\" \");\n  };\n  const setScrollClass = className => {\n    const {\n      tableWrapper\n    } = table.refs;\n    setScrollClassByEl(tableWrapper, className);\n  };\n  const hasScrollClass = className => {\n    const {\n      tableWrapper\n    } = table.refs;\n    return !!(tableWrapper && tableWrapper.classList.contains(className));\n  };\n  const syncPosition = function () {\n    if (!table.refs.scrollBarRef) return;\n    if (!layout.scrollX.value) {\n      const scrollingNoneClass = \"is-scrolling-none\";\n      if (!hasScrollClass(scrollingNoneClass)) {\n        setScrollClass(scrollingNoneClass);\n      }\n      return;\n    }\n    const scrollContainer = table.refs.scrollBarRef.wrapRef;\n    if (!scrollContainer) return;\n    const {\n      scrollLeft,\n      offsetWidth,\n      scrollWidth\n    } = scrollContainer;\n    const {\n      headerWrapper,\n      footerWrapper\n    } = table.refs;\n    if (headerWrapper) headerWrapper.scrollLeft = scrollLeft;\n    if (footerWrapper) footerWrapper.scrollLeft = scrollLeft;\n    const maxScrollLeftPosition = scrollWidth - offsetWidth - 1;\n    if (scrollLeft >= maxScrollLeftPosition) {\n      setScrollClass(\"is-scrolling-right\");\n    } else if (scrollLeft === 0) {\n      setScrollClass(\"is-scrolling-left\");\n    } else {\n      setScrollClass(\"is-scrolling-middle\");\n    }\n  };\n  const bindEvents = () => {\n    if (!table.refs.scrollBarRef) return;\n    if (table.refs.scrollBarRef.wrapRef) {\n      useEventListener(table.refs.scrollBarRef.wrapRef, \"scroll\", syncPosition, {\n        passive: true\n      });\n    }\n    if (props.fit) {\n      useResizeObserver(table.vnode.el, resizeListener);\n    } else {\n      useEventListener(window, \"resize\", resizeListener);\n    }\n    useResizeObserver(table.refs.tableInnerWrapper, () => {\n      var _a, _b;\n      resizeListener();\n      (_b = (_a = table.refs) == null ? void 0 : _a.scrollBarRef) == null ? void 0 : _b.update();\n    });\n  };\n  const resizeListener = () => {\n    var _a, _b, _c, _d;\n    const el = table.vnode.el;\n    if (!table.$ready || !el) return;\n    let shouldUpdateLayout = false;\n    const {\n      width: oldWidth,\n      height: oldHeight,\n      headerHeight: oldHeaderHeight\n    } = resizeState.value;\n    const width = tableWidth.value = el.offsetWidth;\n    if (oldWidth !== width) {\n      shouldUpdateLayout = true;\n    }\n    const height = el.offsetHeight;\n    if ((props.height || shouldUpdateHeight.value) && oldHeight !== height) {\n      shouldUpdateLayout = true;\n    }\n    const tableHeader = props.tableLayout === \"fixed\" ? table.refs.headerWrapper : (_a = table.refs.tableHeaderRef) == null ? void 0 : _a.$el;\n    if (props.showHeader && (tableHeader == null ? void 0 : tableHeader.offsetHeight) !== oldHeaderHeight) {\n      shouldUpdateLayout = true;\n    }\n    tableScrollHeight.value = ((_b = table.refs.tableWrapper) == null ? void 0 : _b.scrollHeight) || 0;\n    headerScrollHeight.value = (tableHeader == null ? void 0 : tableHeader.scrollHeight) || 0;\n    footerScrollHeight.value = ((_c = table.refs.footerWrapper) == null ? void 0 : _c.offsetHeight) || 0;\n    appendScrollHeight.value = ((_d = table.refs.appendWrapper) == null ? void 0 : _d.offsetHeight) || 0;\n    bodyScrollHeight.value = tableScrollHeight.value - headerScrollHeight.value - footerScrollHeight.value - appendScrollHeight.value;\n    if (shouldUpdateLayout) {\n      resizeState.value = {\n        width,\n        height,\n        headerHeight: props.showHeader && (tableHeader == null ? void 0 : tableHeader.offsetHeight) || 0\n      };\n      doLayout();\n    }\n  };\n  const tableSize = useFormSize();\n  const bodyWidth = computed(() => {\n    const {\n      bodyWidth: bodyWidth_,\n      scrollY,\n      gutterWidth\n    } = layout;\n    return bodyWidth_.value ? `${bodyWidth_.value - (scrollY.value ? gutterWidth : 0)}px` : \"\";\n  });\n  const tableLayout = computed(() => {\n    if (props.maxHeight) return \"fixed\";\n    return props.tableLayout;\n  });\n  const emptyBlockStyle = computed(() => {\n    if (props.data && props.data.length) return;\n    let height = \"100%\";\n    if (props.height && bodyScrollHeight.value) {\n      height = `${bodyScrollHeight.value}px`;\n    }\n    const width = tableWidth.value;\n    return {\n      width: width ? `${width}px` : \"\",\n      height\n    };\n  });\n  const scrollbarStyle = computed(() => {\n    if (props.height) {\n      return {\n        height: \"100%\"\n      };\n    }\n    if (props.maxHeight) {\n      if (!Number.isNaN(Number(props.maxHeight))) {\n        return {\n          maxHeight: `${+props.maxHeight - headerScrollHeight.value - footerScrollHeight.value}px`\n        };\n      } else {\n        return {\n          maxHeight: `calc(${props.maxHeight} - ${headerScrollHeight.value + footerScrollHeight.value}px)`\n        };\n      }\n    }\n    return {};\n  });\n  return {\n    isHidden,\n    renderExpanded,\n    setDragVisible,\n    isGroup,\n    handleMouseLeave,\n    handleHeaderFooterMousewheel,\n    tableSize,\n    emptyBlockStyle,\n    resizeProxyVisible,\n    bodyWidth,\n    resizeState,\n    doLayout,\n    tableBodyStyles,\n    tableLayout,\n    scrollbarViewStyle,\n    scrollbarStyle\n  };\n}\nexport { useStyle as default };","map":{"version":3,"names":["useStyle","props","layout","store","table","isHidden","ref","renderExpanded","resizeProxyVisible","setDragVisible","visible","value","resizeState","width","height","headerHeight","isGroup","scrollbarViewStyle","display","verticalAlign","tableWidth","tableScrollHeight","bodyScrollHeight","headerScrollHeight","footerScrollHeight","appendScrollHeight","watch","setHeight","immediate","maxHeight","setMaxHeight","currentRowKey","states","rowKey","unref","setCurrentRowKey","data","commit","deep","watchEffect","expandRowKeys","setExpandRowKeysAdapter","handleMouseLeave","hoverState","handleHeaderFooterMousewheel","_event","pixelX","pixelY","Math","abs","refs","bodyWrapper","scrollLeft","shouldUpdateHeight","computed","fixedColumns","length","rightFixedColumns","tableBodyStyles","bodyWidth","doLayout","updateElsHeight","updateColumnsWidth","window","requestAnimationFrame","syncPosition","onMounted","nextTick","updateColumns","bindEvents","el","vnode","tableHeader","headerWrapper","flexible","parentElement","style","minWidth","offsetWidth","offsetHeight","showHeader","columns","forEach","column","filteredValue","values","silent","$ready","setScrollClassByEl","className","classList","Array","from","filter","item","startsWith","push","scrollX","join","setScrollClass","tableWrapper","hasScrollClass","contains","scrollBarRef","scrollingNoneClass","scrollContainer","wrapRef","scrollWidth","footerWrapper","maxScrollLeftPosition","useEventListener","passive","fit","useResizeObserver","resizeListener","tableInnerWrapper","_a","_b","update","_c","_d","shouldUpdateLayout","oldWidth","oldHeight","oldHeaderHeight","tableLayout","tableHeaderRef","$el","scrollHeight","appendWrapper","tableSize","useFormSize","bodyWidth_","scrollY","gutterWidth","emptyBlockStyle","scrollbarStyle","Number","isNaN"],"sources":["../../../../../../../packages/components/table/src/table/style-helper.ts"],"sourcesContent":["import {\n  computed,\n  nextTick,\n  onMounted,\n  ref,\n  unref,\n  watch,\n  watchEffect,\n} from 'vue'\nimport { useEventListener, useResizeObserver } from '@vueuse/core'\nimport { useFormSize } from '@element-plus/components/form'\n\nimport type { DefaultRow, RenderExpanded, Table, TableProps } from './defaults'\nimport type { Store } from '../store'\nimport type TableLayout from '../table-layout'\nimport type { TableColumnCtx } from '../table-column/defaults'\n\nfunction useStyle<T extends DefaultRow>(\n  props: TableProps<T>,\n  layout: TableLayout<T>,\n  store: Store<T>,\n  table: Table<T>\n) {\n  const isHidden = ref(false)\n  const renderExpanded = ref<RenderExpanded<T> | null>(null)\n  const resizeProxyVisible = ref(false)\n  const setDragVisible = (visible: boolean) => {\n    resizeProxyVisible.value = visible\n  }\n  const resizeState = ref<{\n    width: null | number\n    height: null | number\n    headerHeight: null | number\n  }>({\n    width: null,\n    height: null,\n    headerHeight: null,\n  })\n  const isGroup = ref(false)\n  const scrollbarViewStyle = {\n    display: 'inline-block',\n    verticalAlign: 'middle',\n  }\n  const tableWidth = ref()\n  const tableScrollHeight = ref(0)\n  const bodyScrollHeight = ref(0)\n  const headerScrollHeight = ref(0)\n  const footerScrollHeight = ref(0)\n  const appendScrollHeight = ref(0)\n\n  watch(\n    () => props.height,\n    (value) => {\n      layout.setHeight(value ?? null)\n    },\n    { immediate: true }\n  )\n  watch(\n    () => props.maxHeight,\n    (value) => {\n      layout.setMaxHeight(value ?? null)\n    },\n    { immediate: true }\n  )\n  watch(\n    () => [props.currentRowKey, store.states.rowKey],\n    ([currentRowKey, rowKey]) => {\n      if (!unref(rowKey) || !unref(currentRowKey)) return\n      store.setCurrentRowKey(`${currentRowKey}`)\n    },\n    {\n      immediate: true,\n    }\n  )\n  watch(\n    () => props.data,\n    (data) => {\n      table.store.commit('setData', data)\n    },\n    {\n      immediate: true,\n      deep: true,\n    }\n  )\n  watchEffect(() => {\n    if (props.expandRowKeys) {\n      store.setExpandRowKeysAdapter(props.expandRowKeys)\n    }\n  })\n\n  const handleMouseLeave = () => {\n    table.store.commit('setHoverRow', null)\n    if (table.hoverState) table.hoverState = null\n  }\n\n  const handleHeaderFooterMousewheel = (_event: WheelEvent, data: any) => {\n    const { pixelX, pixelY } = data\n    if (Math.abs(pixelX) >= Math.abs(pixelY)) {\n      table.refs.bodyWrapper.scrollLeft += data.pixelX / 5\n    }\n  }\n\n  const shouldUpdateHeight = computed(() => {\n    return (\n      props.height ||\n      props.maxHeight ||\n      store.states.fixedColumns.value.length > 0 ||\n      store.states.rightFixedColumns.value.length > 0\n    )\n  })\n\n  const tableBodyStyles = computed(() => {\n    return {\n      width: layout.bodyWidth.value ? `${layout.bodyWidth.value}px` : '',\n    }\n  })\n\n  const doLayout = () => {\n    if (shouldUpdateHeight.value) {\n      layout.updateElsHeight()\n    }\n    layout.updateColumnsWidth()\n\n    // When the test case is running, the context environment simulated by jsdom may have been destroyed,\n    // and window.requestAnimationFrame does not exist at this time.\n    if (typeof window === 'undefined') return\n    requestAnimationFrame(syncPosition)\n  }\n  onMounted(async () => {\n    await nextTick()\n    store.updateColumns()\n    bindEvents()\n    requestAnimationFrame(doLayout)\n\n    const el: HTMLElement = table.vnode.el as HTMLElement\n    const tableHeader: HTMLElement = table.refs.headerWrapper\n    if (props.flexible && el && el.parentElement) {\n      // Automatic minimum size of flex-items\n      // Ensure that the main axis does not follow the width of the items\n      el.parentElement.style.minWidth = '0'\n    }\n\n    resizeState.value = {\n      width: (tableWidth.value = el.offsetWidth),\n      height: el.offsetHeight,\n      headerHeight:\n        props.showHeader && tableHeader ? tableHeader.offsetHeight : null,\n    }\n\n    // init filters\n    store.states.columns.value.forEach((column: TableColumnCtx<T>) => {\n      if (column.filteredValue && column.filteredValue.length) {\n        table.store.commit('filterChange', {\n          column,\n          values: column.filteredValue,\n          silent: true,\n        })\n      }\n    })\n    table.$ready = true\n  })\n  const setScrollClassByEl = (el: HTMLElement, className: string) => {\n    if (!el) return\n    const classList = Array.from(el.classList).filter(\n      (item) => !item.startsWith('is-scrolling-')\n    )\n    classList.push(layout.scrollX.value ? className : 'is-scrolling-none')\n    el.className = classList.join(' ')\n  }\n  const setScrollClass = (className: string) => {\n    const { tableWrapper } = table.refs\n    setScrollClassByEl(tableWrapper, className)\n  }\n  const hasScrollClass = (className: string) => {\n    const { tableWrapper } = table.refs\n    return !!(tableWrapper && tableWrapper.classList.contains(className))\n  }\n  const syncPosition = function () {\n    if (!table.refs.scrollBarRef) return\n    if (!layout.scrollX.value) {\n      const scrollingNoneClass = 'is-scrolling-none'\n      if (!hasScrollClass(scrollingNoneClass)) {\n        setScrollClass(scrollingNoneClass)\n      }\n      return\n    }\n    const scrollContainer = table.refs.scrollBarRef.wrapRef\n    if (!scrollContainer) return\n    const { scrollLeft, offsetWidth, scrollWidth } = scrollContainer\n    const { headerWrapper, footerWrapper } = table.refs\n    if (headerWrapper) headerWrapper.scrollLeft = scrollLeft\n    if (footerWrapper) footerWrapper.scrollLeft = scrollLeft\n    const maxScrollLeftPosition = scrollWidth - offsetWidth - 1\n    if (scrollLeft >= maxScrollLeftPosition) {\n      setScrollClass('is-scrolling-right')\n    } else if (scrollLeft === 0) {\n      setScrollClass('is-scrolling-left')\n    } else {\n      setScrollClass('is-scrolling-middle')\n    }\n  }\n\n  const bindEvents = () => {\n    if (!table.refs.scrollBarRef) return\n    if (table.refs.scrollBarRef.wrapRef) {\n      useEventListener(\n        table.refs.scrollBarRef.wrapRef,\n        'scroll',\n        syncPosition,\n        {\n          passive: true,\n        }\n      )\n    }\n    if (props.fit) {\n      useResizeObserver(table.vnode.el as HTMLElement, resizeListener)\n    } else {\n      useEventListener(window, 'resize', resizeListener)\n    }\n\n    useResizeObserver(table.refs.tableInnerWrapper, () => {\n      resizeListener()\n      table.refs?.scrollBarRef?.update()\n    })\n  }\n  const resizeListener = () => {\n    const el = table.vnode.el\n    if (!table.$ready || !el) return\n\n    let shouldUpdateLayout = false\n    const {\n      width: oldWidth,\n      height: oldHeight,\n      headerHeight: oldHeaderHeight,\n    } = resizeState.value\n\n    const width = (tableWidth.value = el.offsetWidth)\n    if (oldWidth !== width) {\n      shouldUpdateLayout = true\n    }\n\n    const height = el.offsetHeight\n    if ((props.height || shouldUpdateHeight.value) && oldHeight !== height) {\n      shouldUpdateLayout = true\n    }\n\n    const tableHeader: HTMLElement =\n      props.tableLayout === 'fixed'\n        ? table.refs.headerWrapper\n        : table.refs.tableHeaderRef?.$el\n    if (props.showHeader && tableHeader?.offsetHeight !== oldHeaderHeight) {\n      shouldUpdateLayout = true\n    }\n\n    tableScrollHeight.value = table.refs.tableWrapper?.scrollHeight || 0\n    headerScrollHeight.value = tableHeader?.scrollHeight || 0\n    footerScrollHeight.value = table.refs.footerWrapper?.offsetHeight || 0\n    appendScrollHeight.value = table.refs.appendWrapper?.offsetHeight || 0\n    bodyScrollHeight.value =\n      tableScrollHeight.value -\n      headerScrollHeight.value -\n      footerScrollHeight.value -\n      appendScrollHeight.value\n\n    if (shouldUpdateLayout) {\n      resizeState.value = {\n        width,\n        height,\n        headerHeight: (props.showHeader && tableHeader?.offsetHeight) || 0,\n      }\n      doLayout()\n    }\n  }\n  const tableSize = useFormSize()\n  const bodyWidth = computed(() => {\n    const { bodyWidth: bodyWidth_, scrollY, gutterWidth } = layout\n    return bodyWidth_.value\n      ? `${(bodyWidth_.value as number) - (scrollY.value ? gutterWidth : 0)}px`\n      : ''\n  })\n\n  const tableLayout = computed(() => {\n    if (props.maxHeight) return 'fixed'\n    return props.tableLayout\n  })\n\n  const emptyBlockStyle = computed(() => {\n    if (props.data && props.data.length) return\n    let height = '100%'\n    if (props.height && bodyScrollHeight.value) {\n      height = `${bodyScrollHeight.value}px`\n    }\n    const width = tableWidth.value\n    return {\n      width: width ? `${width}px` : '',\n      height,\n    }\n  })\n\n  const scrollbarStyle = computed(() => {\n    if (props.height) {\n      return {\n        height: '100%',\n      }\n    }\n    if (props.maxHeight) {\n      if (!Number.isNaN(Number(props.maxHeight))) {\n        return {\n          maxHeight: `${\n            +props.maxHeight -\n            headerScrollHeight.value -\n            footerScrollHeight.value\n          }px`,\n        }\n      } else {\n        return {\n          maxHeight: `calc(${props.maxHeight} - ${\n            headerScrollHeight.value + footerScrollHeight.value\n          }px)`,\n        }\n      }\n    }\n\n    return {}\n  })\n\n  return {\n    isHidden,\n    renderExpanded,\n    setDragVisible,\n    isGroup,\n    handleMouseLeave,\n    handleHeaderFooterMousewheel,\n    tableSize,\n    emptyBlockStyle,\n    resizeProxyVisible,\n    bodyWidth,\n    resizeState,\n    doLayout,\n    tableBodyStyles,\n    tableLayout,\n    scrollbarViewStyle,\n    scrollbarStyle,\n  }\n}\n\nexport default useStyle\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}