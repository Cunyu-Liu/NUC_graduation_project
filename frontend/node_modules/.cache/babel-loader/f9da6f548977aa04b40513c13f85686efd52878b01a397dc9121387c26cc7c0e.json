{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineComponent, ref, computed, openBlock, createBlock, unref, withCtx, normalizeClass, resolveDynamicComponent, createCommentVNode, createElementBlock, Fragment, renderList } from 'vue';\nimport dayjs from 'dayjs';\nimport customParseFormat from 'dayjs/plugin/customParseFormat.js';\nimport { ElSelect } from '../../select/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { timeSelectProps } from './time-select.mjs';\nimport { parseTime, formatTime, compareTime, nextTime } from './utils.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { CHANGE_EVENT, UPDATE_MODEL_EVENT } from '../../../constants/event.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useFormDisabled } from '../../form/src/hooks/use-form-common-props.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nconst _sfc_main = defineComponent({\n  ...{\n    name: \"ElTimeSelect\"\n  },\n  __name: \"time-select\",\n  props: timeSelectProps,\n  emits: [CHANGE_EVENT, \"blur\", \"focus\", \"clear\", UPDATE_MODEL_EVENT],\n  setup(__props, {\n    expose: __expose\n  }) {\n    dayjs.extend(customParseFormat);\n    const {\n      Option: ElOption\n    } = ElSelect;\n    const props = __props;\n    const nsInput = useNamespace(\"input\");\n    const select = ref();\n    const _disabled = useFormDisabled();\n    const {\n      lang\n    } = useLocale();\n    const value = computed(() => props.modelValue);\n    const start = computed(() => {\n      const time = parseTime(props.start);\n      return time ? formatTime(time) : null;\n    });\n    const end = computed(() => {\n      const time = parseTime(props.end);\n      return time ? formatTime(time) : null;\n    });\n    const step = computed(() => {\n      const time = parseTime(props.step);\n      return time ? formatTime(time) : null;\n    });\n    const minTime = computed(() => {\n      const time = parseTime(props.minTime || \"\");\n      return time ? formatTime(time) : null;\n    });\n    const maxTime = computed(() => {\n      const time = parseTime(props.maxTime || \"\");\n      return time ? formatTime(time) : null;\n    });\n    const items = computed(() => {\n      var _a;\n      const result = [];\n      const push = (formattedValue, rawValue) => {\n        result.push({\n          value: formattedValue,\n          disabled: compareTime(rawValue, minTime.value || \"-1:-1\") <= 0 || compareTime(rawValue, maxTime.value || \"100:100\") >= 0\n        });\n      };\n      if (props.start && props.end && props.step) {\n        let current = start.value;\n        let currentTime;\n        while (current && end.value && compareTime(current, end.value) <= 0) {\n          currentTime = dayjs(current, \"HH:mm\").locale(lang.value).format(props.format);\n          push(currentTime, current);\n          current = nextTime(current, step.value);\n        }\n        if (props.includeEndTime && end.value && ((_a = result[result.length - 1]) == null ? void 0 : _a.value) !== end.value) {\n          const formattedValue = dayjs(end.value, \"HH:mm\").locale(lang.value).format(props.format);\n          push(formattedValue, end.value);\n        }\n      }\n      return result;\n    });\n    const blur = () => {\n      var _a, _b;\n      (_b = (_a = select.value) == null ? void 0 : _a.blur) == null ? void 0 : _b.call(_a);\n    };\n    const focus = () => {\n      var _a, _b;\n      (_b = (_a = select.value) == null ? void 0 : _a.focus) == null ? void 0 : _b.call(_a);\n    };\n    __expose({\n      blur,\n      focus\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(ElSelect), {\n        ref_key: \"select\",\n        ref: select,\n        \"model-value\": value.value,\n        disabled: unref(_disabled),\n        clearable: _ctx.clearable,\n        \"clear-icon\": _ctx.clearIcon,\n        size: _ctx.size,\n        effect: _ctx.effect,\n        placeholder: _ctx.placeholder,\n        \"default-first-option\": \"\",\n        filterable: _ctx.editable,\n        \"empty-values\": _ctx.emptyValues,\n        \"value-on-clear\": _ctx.valueOnClear,\n        \"popper-class\": _ctx.popperClass,\n        \"popper-style\": _ctx.popperStyle,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = event => _ctx.$emit(unref(UPDATE_MODEL_EVENT), event)),\n        onChange: _cache[1] || (_cache[1] = event => _ctx.$emit(unref(CHANGE_EVENT), event)),\n        onBlur: _cache[2] || (_cache[2] = event => _ctx.$emit(\"blur\", event)),\n        onFocus: _cache[3] || (_cache[3] = event => _ctx.$emit(\"focus\", event)),\n        onClear: _cache[4] || (_cache[4] = () => _ctx.$emit(\"clear\"))\n      }, {\n        prefix: withCtx(() => [_ctx.prefixIcon ? (openBlock(), createBlock(unref(ElIcon), {\n          key: 0,\n          class: normalizeClass(unref(nsInput).e(\"prefix-icon\"))\n        }, {\n          default: withCtx(() => [(openBlock(), createBlock(resolveDynamicComponent(_ctx.prefixIcon)))]),\n          _: 1\n        }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true)]),\n        default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(items.value, item => {\n          return openBlock(), createBlock(unref(ElOption), {\n            key: item.value,\n            label: item.value,\n            value: item.value,\n            disabled: item.disabled\n          }, null, 8, [\"label\", \"value\", \"disabled\"]);\n        }), 128))]),\n        _: 1\n      }, 8, [\"model-value\", \"disabled\", \"clearable\", \"clear-icon\", \"size\", \"effect\", \"placeholder\", \"filterable\", \"empty-values\", \"value-on-clear\", \"popper-class\", \"popper-style\"]);\n    };\n  }\n});\nvar TimeSelect = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/time-select/src/time-select.vue\"]]);\nexport { TimeSelect as default };","map":{"version":3,"names":["dayjs","extend","customParseFormat","Option","ElOption","ElSelect","props","__props","nsInput","useNamespace","select","ref","_disabled","useFormDisabled","lang","useLocale","value","computed","modelValue","start","time","parseTime","formatTime","end","step","minTime","maxTime","items","result","push","formattedValue","rawValue","disabled","compareTime","current","currentTime","locale","format","nextTime","includeEndTime","_a","length","blur","_b","call","focus","__expose","createBlock","unref","ref_key","clearable","_ctx","clearIcon","size","effect","placeholder","filterable","editable","emptyValues","valueOnClear","popperClass","popperStyle","_cache","event","$emit","UPDATE_MODEL_EVENT","onChange","CHANGE_EVENT","onBlur","onFocus","onClear","prefix","withCtx","prefixIcon","openBlock","ElIcon","key","class","normalizeClass","e","default","resolveDynamicComponent","_","createElementBlock","Fragment","renderList","item","label"],"sources":["../../../../../../packages/components/time-select/src/time-select.vue"],"sourcesContent":["<template>\n  <el-select\n    ref=\"select\"\n    :model-value=\"value\"\n    :disabled=\"_disabled\"\n    :clearable=\"clearable\"\n    :clear-icon=\"clearIcon\"\n    :size=\"size\"\n    :effect=\"effect\"\n    :placeholder=\"placeholder\"\n    default-first-option\n    :filterable=\"editable\"\n    :empty-values=\"emptyValues\"\n    :value-on-clear=\"valueOnClear\"\n    :popper-class=\"popperClass\"\n    :popper-style=\"popperStyle\"\n    @update:model-value=\"(event) => $emit(UPDATE_MODEL_EVENT, event)\"\n    @change=\"(event) => $emit(CHANGE_EVENT, event)\"\n    @blur=\"(event) => $emit('blur', event)\"\n    @focus=\"(event) => $emit('focus', event)\"\n    @clear=\"() => $emit('clear')\"\n  >\n    <el-option\n      v-for=\"item in items\"\n      :key=\"item.value\"\n      :label=\"item.value\"\n      :value=\"item.value\"\n      :disabled=\"item.disabled\"\n    />\n    <template #prefix>\n      <el-icon v-if=\"prefixIcon\" :class=\"nsInput.e('prefix-icon')\">\n        <component :is=\"prefixIcon\" />\n      </el-icon>\n    </template>\n  </el-select>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, ref } from 'vue'\nimport dayjs from 'dayjs'\nimport customParseFormat from 'dayjs/plugin/customParseFormat.js'\nimport ElSelect from '@element-plus/components/select'\nimport { useFormDisabled } from '@element-plus/components/form'\nimport ElIcon from '@element-plus/components/icon'\nimport { useLocale, useNamespace } from '@element-plus/hooks'\nimport { CHANGE_EVENT, UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport { timeSelectProps } from './time-select'\nimport { compareTime, formatTime, nextTime, parseTime } from './utils'\n\ndayjs.extend(customParseFormat)\n\nconst { Option: ElOption } = ElSelect\n\ndefineOptions({\n  name: 'ElTimeSelect',\n})\n\ndefineEmits([CHANGE_EVENT, 'blur', 'focus', 'clear', UPDATE_MODEL_EVENT])\n\nconst props = defineProps(timeSelectProps)\n\nconst nsInput = useNamespace('input')\nconst select = ref<typeof ElSelect>()\n\nconst _disabled = useFormDisabled()\nconst { lang } = useLocale()\n\nconst value = computed(() => props.modelValue)\nconst start = computed(() => {\n  const time = parseTime(props.start)\n  return time ? formatTime(time) : null\n})\n\nconst end = computed(() => {\n  const time = parseTime(props.end)\n  return time ? formatTime(time) : null\n})\n\nconst step = computed(() => {\n  const time = parseTime(props.step)\n  return time ? formatTime(time) : null\n})\n\nconst minTime = computed(() => {\n  const time = parseTime(props.minTime || '')\n  return time ? formatTime(time) : null\n})\n\nconst maxTime = computed(() => {\n  const time = parseTime(props.maxTime || '')\n  return time ? formatTime(time) : null\n})\n\nconst items = computed(() => {\n  const result: { value: string; disabled: boolean }[] = []\n  const push = (formattedValue: string, rawValue: string) => {\n    result.push({\n      value: formattedValue,\n      disabled:\n        compareTime(rawValue, minTime.value || '-1:-1') <= 0 ||\n        compareTime(rawValue, maxTime.value || '100:100') >= 0,\n    })\n  }\n\n  if (props.start && props.end && props.step) {\n    let current = start.value\n    let currentTime: string\n    while (current && end.value && compareTime(current, end.value) <= 0) {\n      currentTime = dayjs(current, 'HH:mm')\n        .locale(lang.value)\n        .format(props.format)\n      push(currentTime, current)\n      current = nextTime(current, step.value!)\n    }\n    if (\n      props.includeEndTime &&\n      end.value &&\n      result[result.length - 1]?.value !== end.value\n    ) {\n      const formattedValue = dayjs(end.value, 'HH:mm')\n        .locale(lang.value)\n        .format(props.format)\n      push(formattedValue, end.value)\n    }\n  }\n  return result\n})\n\nconst blur = () => {\n  select.value?.blur?.()\n}\n\nconst focus = () => {\n  select.value?.focus?.()\n}\n\ndefineExpose({\n  /**\n   * @description blur the Input component\n   */\n  blur,\n  /**\n   * @description focus the Input component\n   */\n  focus,\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}