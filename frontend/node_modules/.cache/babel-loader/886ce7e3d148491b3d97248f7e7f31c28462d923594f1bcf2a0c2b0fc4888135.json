{"ast":null,"code":"import { ref, watch } from 'vue';\nimport { isEqual, get } from 'lodash-unified';\nconst defaultProps = {\n  label: \"label\",\n  value: \"value\",\n  disabled: \"disabled\",\n  options: \"options\"\n};\nfunction useProps(props) {\n  const aliasProps = ref({\n    ...defaultProps,\n    ...props.props\n  });\n  let cache = {\n    ...props.props\n  };\n  watch(() => props.props, val => {\n    if (!isEqual(val, cache)) {\n      aliasProps.value = {\n        ...defaultProps,\n        ...val\n      };\n      cache = {\n        ...val\n      };\n    }\n  }, {\n    deep: true\n  });\n  const getLabel = option => get(option, aliasProps.value.label);\n  const getValue = option => get(option, aliasProps.value.value);\n  const getDisabled = option => get(option, aliasProps.value.disabled);\n  const getOptions = option => get(option, aliasProps.value.options);\n  return {\n    aliasProps,\n    getLabel,\n    getValue,\n    getDisabled,\n    getOptions\n  };\n}\nexport { defaultProps, useProps };","map":{"version":3,"names":["defaultProps","label","value","disabled","options","useProps","props","aliasProps","ref","cache","watch","val","isEqual","deep","getLabel","option","get","getValue","getDisabled","getOptions"],"sources":["../../../../../../packages/components/select-v2/src/useProps.ts"],"sourcesContent":["import { ref, watch } from 'vue'\nimport { get, isEqual } from 'lodash-unified'\n\nimport type { SelectV2Props } from './token'\nimport type { Option } from './select.types'\n\nexport interface Props {\n  label?: string\n  value?: string\n  disabled?: string\n  options?: string\n}\n\nexport const defaultProps: Required<Props> = {\n  label: 'label',\n  value: 'value',\n  disabled: 'disabled',\n  options: 'options',\n}\n\nexport function useProps(props: Pick<SelectV2Props, 'props'>) {\n  const aliasProps = ref({ ...defaultProps, ...props.props })\n  let cache = { ...props.props }\n\n  watch(\n    () => props.props,\n    (val) => {\n      // The props is an object, and its properties may be modified without changing the reference. In this case, the watch values before and after are equal. Here, we compare using the cached previous value.\n      if (!isEqual(val, cache)) {\n        aliasProps.value = { ...defaultProps, ...val }\n        cache = { ...val }\n      }\n    },\n    { deep: true }\n  )\n\n  const getLabel = (option: Option) => get(option, aliasProps.value.label)\n  const getValue = (option: Option) => get(option, aliasProps.value.value)\n  const getDisabled = (option: Option) => get(option, aliasProps.value.disabled)\n  const getOptions = (option: Option) => get(option, aliasProps.value.options)\n\n  return {\n    aliasProps,\n    getLabel,\n    getValue,\n    getDisabled,\n    getOptions,\n  }\n}\n"],"mappings":";;AAaO,MAAMA,YAAgC;EAC3CC,KAAO;EACPC,KAAO;EACPC,QAAU;EACVC,OAAS;AACX;AAEO,SAASC,SAASC,KAAqC;EACtD,MAAAC,UAAA,GAAaC,GAAA,CAAI;IAAE,GAAGR,YAAA;IAAc,GAAGM,KAAA,CAAMA;EAAA,CAAO;EAC1D,IAAIG,KAAQ;IAAE,GAAGH,KAAA,CAAMA;EAAM;EAE7BI,KAAA,CACE,MAAMJ,KAAM,CAAAA,KAAA,EACXK,GAAQ;IAEP,IAAI,CAACC,OAAA,CAAQD,GAAK,EAAAF,KAAK,CAAG;MACxBF,UAAA,CAAWL,KAAQ;QAAE,GAAGF,YAAA;QAAc,GAAGW;MAAI;MACrCF,KAAA;QAAE,GAAGE;MAAI;IAAA;EACnB,CACF,EACA;IAAEE,IAAA,EAAM;EAAK,EACf;EAEA,MAAMC,QAAA,GAAYC,MAAA,IAAmBC,GAAA,CAAID,MAAQ,EAAAR,UAAA,CAAWL,KAAA,CAAMD,KAAK;EACvE,MAAMgB,QAAA,GAAYF,MAAA,IAAmBC,GAAA,CAAID,MAAQ,EAAAR,UAAA,CAAWL,KAAA,CAAMA,KAAK;EACvE,MAAMgB,WAAA,GAAeH,MAAA,IAAmBC,GAAA,CAAID,MAAQ,EAAAR,UAAA,CAAWL,KAAA,CAAMC,QAAQ;EAC7E,MAAMgB,UAAA,GAAcJ,MAAA,IAAmBC,GAAA,CAAID,MAAQ,EAAAR,UAAA,CAAWL,KAAA,CAAME,OAAO;EAEpE;IACLG,UAAA;IACAO,QAAA;IACAG,QAAA;IACAC,WAAA;IACAC;EAAA,CACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}