{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"cluster\"\n};\nconst _hoisted_2 = {\n  class: \"select-header\"\n};\nconst _hoisted_3 = {\n  class: \"history-header\"\n};\nconst _hoisted_4 = {\n  class: \"result-header\"\n};\nconst _hoisted_5 = {\n  class: \"result-actions-top\"\n};\nconst _hoisted_6 = {\n  class: \"cluster-title\"\n};\nconst _hoisted_7 = {\n  class: \"cluster-name\"\n};\nconst _hoisted_8 = {\n  class: \"cluster-content\"\n};\nconst _hoisted_9 = {\n  key: 2,\n  class: \"paper-list\"\n};\nconst _hoisted_10 = {\n  key: 4\n};\nconst _hoisted_11 = {\n  class: \"rep-abstract\"\n};\nconst _hoisted_12 = {\n  class: \"result-actions\"\n};\nconst _hoisted_13 = {\n  class: \"visualization-container\"\n};\nconst _hoisted_14 = {\n  ref: \"vizCanvas\",\n  class: \"viz-canvas\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Refresh = _resolveComponent(\"Refresh\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_input_number = _resolveComponent(\"el-input-number\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_DataAnalysis = _resolveComponent(\"DataAnalysis\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_Star = _resolveComponent(\"Star\");\n  const _component_el_space = _resolveComponent(\"el-space\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_el_collapse_item = _resolveComponent(\"el-collapse-item\");\n  const _component_el_collapse = _resolveComponent(\"el-collapse\");\n  const _component_PictureIcon = _resolveComponent(\"PictureIcon\");\n  const _component_Document = _resolveComponent(\"Document\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[23] || (_cache[23] = _createElementVNode(\"h2\", null, \"多篇论文主题聚类分析\", -1 /* CACHED */)), _createVNode(_component_el_card, {\n    class: \"select-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[7] || (_cache[7] = _createElementVNode(\"h3\", null, \"选择要分析的论文（至少2篇）\", -1 /* CACHED */)), _createVNode(_component_el_button, {\n      onClick: $setup.refreshFiles,\n      size: \"small\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Refresh)]),\n        _: 1 /* STABLE */\n      }), _cache[6] || (_cache[6] = _createTextVNode(\" 刷新列表 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]), _withDirectives((_openBlock(), _createBlock(_component_el_table, {\n      data: $setup.files,\n      style: {\n        \"width\": \"100%\",\n        \"margin-top\": \"20px\"\n      },\n      onSelectionChange: $setup.handleSelectionChange\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        type: \"selection\",\n        width: \"55\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"title\",\n        label: \"论文标题\",\n        \"min-width\": \"250\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.title || '未命名论文'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"year\",\n        label: \"年份\",\n        width: \"80\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.year || '未知'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"venue\",\n        label: \"期刊/会议\",\n        \"min-width\": \"150\"\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\", \"onSelectionChange\"])), [[_directive_loading, $setup.loading]])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_card, {\n    class: \"options-card\"\n  }, {\n    default: _withCtx(() => [_cache[9] || (_cache[9] = _createElementVNode(\"h3\", null, \"聚类选项\", -1 /* CACHED */)), _createVNode(_component_el_form, {\n      model: $setup.options,\n      \"label-width\": \"120px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"聚类数量\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input_number, {\n          modelValue: $setup.options.nClusters,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.options.nClusters = $event),\n          min: 2,\n          max: 10\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"聚类方法\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $setup.options.method,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.options.method = $event)\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"K-Means\",\n            value: \"kmeans\"\n          }), _createVNode(_component_el_option, {\n            label: \"DBSCAN\",\n            value: \"dbscan\"\n          }), _createVNode(_component_el_option, {\n            label: \"层次聚类\",\n            value: \"hierarchical\"\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"论文语言\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $setup.options.language,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.options.language = $event)\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"中文\",\n            value: \"chinese\"\n          }), _createVNode(_component_el_option, {\n            label: \"英文\",\n            value: \"english\"\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"]), _createVNode(_component_el_button, {\n      type: \"primary\",\n      size: \"large\",\n      onClick: $setup.startCluster,\n      disabled: $setup.selectedFiles.length < 2,\n      loading: $setup.clustering\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_DataAnalysis)]),\n        _: 1 /* STABLE */\n      }), _cache[8] || (_cache[8] = _createTextVNode(\" 开始聚类分析 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\", \"disabled\", \"loading\"])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 历史聚类结果 \"), $setup.clusterHistory.length > 0 ? (_openBlock(), _createBlock(_component_el_card, {\n    key: 0,\n    class: \"history-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_cache[11] || (_cache[11] = _createElementVNode(\"h3\", null, \"历史聚类结果\", -1 /* CACHED */)), _createVNode(_component_el_button, {\n      onClick: $setup.clearHistory,\n      type: \"danger\",\n      size: \"small\",\n      plain: \"\"\n    }, {\n      default: _withCtx(() => [...(_cache[10] || (_cache[10] = [_createTextVNode(\"清空历史\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]), _createVNode(_component_el_table, {\n      data: $setup.clusterHistory,\n      style: {\n        \"width\": \"100%\",\n        \"margin-top\": \"10px\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"createdAt\",\n        label: \"时间\",\n        width: \"180\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString($setup.formatDate(scope.row.createdAt)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"clusterCount\",\n        label: \"聚类数\",\n        width: \"80\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"method\",\n        label: \"方法\",\n        width: \"120\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"paperCount\",\n        label: \"论文数\",\n        width: \"80\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\",\n        width: \"200\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"small\",\n          onClick: $event => $setup.loadHistoryResult(scope.row)\n        }, {\n          default: _withCtx(() => [...(_cache[12] || (_cache[12] = [_createTextVNode(\"查看\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          type: \"danger\",\n          size: \"small\",\n          onClick: $event => $setup.deleteHistoryResult(scope.$index)\n        }, {\n          default: _withCtx(() => [...(_cache[13] || (_cache[13] = [_createTextVNode(\"删除\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"])]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), $setup.result ? (_openBlock(), _createBlock(_component_el_card, {\n    key: 1,\n    class: \"result-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_cache[15] || (_cache[15] = _createElementVNode(\"h3\", null, \"聚类结果\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_tag, {\n      type: \"success\",\n      size: \"large\",\n      effect: \"dark\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.result.clusterCount) + \" 个主题类别 \", 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), $setup.currentResultId ? (_openBlock(), _createBlock(_component_el_button, {\n      key: 0,\n      type: \"warning\",\n      size: \"small\",\n      onClick: $setup.saveCurrentResult\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Star)]),\n        _: 1 /* STABLE */\n      }), _cache[14] || (_cache[14] = _createTextVNode(\" 保存结果 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true)])]), _createVNode(_component_el_collapse, {\n      modelValue: $setup.activeClusters,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.activeClusters = $event)\n    }, {\n      default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Object.entries($setup.result.clusterAnalysis), (cluster, index) => {\n        return _openBlock(), _createBlock(_component_el_collapse_item, {\n          key: cluster[0],\n          name: cluster[0]\n        }, {\n          title: _withCtx(() => [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", _hoisted_7, \"聚类 \" + _toDisplayString(parseInt(cluster[0]) + 1), 1 /* TEXT */), _createVNode(_component_el_tag, {\n            type: \"success\",\n            size: \"small\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(cluster[1]?.paper_count || 0) + \" 篇论文 \", 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */), cluster[1]?.top_keywords?.length > 0 ? (_openBlock(), _createBlock(_component_el_tag, {\n            key: 0,\n            type: \"info\",\n            size: \"small\",\n            style: {\n              \"margin-left\": \"8px\"\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(cluster[1].top_keywords.slice(0, 3).join(', ')), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)) : _createCommentVNode(\"v-if\", true)])]),\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_8, [_cache[16] || (_cache[16] = _createElementVNode(\"h4\", null, \"核心关键词\", -1 /* CACHED */)), cluster[1].top_keywords && cluster[1].top_keywords.length > 0 ? (_openBlock(), _createBlock(_component_el_space, {\n            key: 0,\n            wrap: \"\"\n          }, {\n            default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cluster[1].top_keywords.slice(0, 10), (keyword, kIndex) => {\n              return _openBlock(), _createBlock(_component_el_tag, {\n                key: kIndex,\n                type: \"success\",\n                effect: \"dark\"\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString(keyword), 1 /* TEXT */)]),\n                _: 2 /* DYNAMIC */\n              }, 1024 /* DYNAMIC_SLOTS */);\n            }), 128 /* KEYED_FRAGMENT */))]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)) : (_openBlock(), _createBlock(_component_el_empty, {\n            key: 1,\n            description: \"暂无关键词\",\n            \"image-size\": 60\n          })), _cache[17] || (_cache[17] = _createElementVNode(\"h4\", {\n            style: {\n              \"margin-top\": \"20px\"\n            }\n          }, \"包含论文\", -1 /* CACHED */)), cluster[1].papers && cluster[1].papers.length > 0 ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_9, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cluster[1].papers, (paper, pIndex) => {\n            return _openBlock(), _createElementBlock(\"li\", {\n              key: pIndex\n            }, _toDisplayString(paper), 1 /* TEXT */);\n          }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createBlock(_component_el_empty, {\n            key: 3,\n            description: \"暂无论文\",\n            \"image-size\": 60\n          })), _cache[18] || (_cache[18] = _createElementVNode(\"h4\", {\n            style: {\n              \"margin-top\": \"20px\"\n            }\n          }, \"代表性论文\", -1 /* CACHED */)), cluster[1].representative_papers && cluster[1].representative_papers.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cluster[1].representative_papers, (rep, rIndex) => {\n            return _openBlock(), _createElementBlock(\"div\", {\n              key: rIndex,\n              class: \"rep-paper\"\n            }, [_createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, _toDisplayString(rep.title || '无标题'), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_11, _toDisplayString(rep.abstract || '无摘要'), 1 /* TEXT */)]);\n          }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createBlock(_component_el_empty, {\n            key: 5,\n            description: \"暂无代表性论文\",\n            \"image-size\": 60\n          }))])]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"name\"]);\n      }), 128 /* KEYED_FRAGMENT */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_12, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.downloadVisualization\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_PictureIcon)]),\n        _: 1 /* STABLE */\n      }), _cache[19] || (_cache[19] = _createTextVNode(\" 下载高清可视化图 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n      onClick: $setup.downloadReport\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Document)]),\n        _: 1 /* STABLE */\n      }), _cache[20] || (_cache[20] = _createTextVNode(\" 下载聚类报告 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 聚类可视化对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.showVisualization,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.showVisualization = $event),\n    title: \"聚类可视化\",\n    width: \"90%\",\n    fullscreen: true\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[4] || (_cache[4] = $event => $setup.showVisualization = false)\n    }, {\n      default: _withCtx(() => [...(_cache[21] || (_cache[21] = [_createTextVNode(\"关闭\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.downloadHighResVisualization\n    }, {\n      default: _withCtx(() => [...(_cache[22] || (_cache[22] = [_createTextVNode(\"下载高清图\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]),\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"canvas\", _hoisted_14, null, 512 /* NEED_PATCH */)])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","ref","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_el_card","_hoisted_2","_component_el_button","onClick","$setup","refreshFiles","size","_component_el_icon","_component_Refresh","_createBlock","_component_el_table","data","files","style","onSelectionChange","handleSelectionChange","_component_el_table_column","type","width","prop","label","default","_withCtx","scope","row","title","year","loading","_component_el_form","model","options","_component_el_form_item","_component_el_input_number","nClusters","$event","min","max","_component_el_select","method","_component_el_option","value","language","startCluster","disabled","selectedFiles","length","clustering","_component_DataAnalysis","_createCommentVNode","clusterHistory","_hoisted_3","clearHistory","plain","_cache","formatDate","createdAt","loadHistoryResult","deleteHistoryResult","$index","result","_hoisted_4","_hoisted_5","_component_el_tag","effect","clusterCount","currentResultId","saveCurrentResult","_component_Star","_component_el_collapse","activeClusters","_Fragment","_renderList","Object","entries","clusterAnalysis","cluster","index","_component_el_collapse_item","key","name","_hoisted_6","_hoisted_7","_toDisplayString","parseInt","paper_count","top_keywords","slice","join","_hoisted_8","_component_el_space","wrap","keyword","kIndex","_component_el_empty","description","papers","_hoisted_9","paper","pIndex","representative_papers","_hoisted_10","rep","rIndex","_hoisted_11","abstract","_hoisted_12","downloadVisualization","_component_PictureIcon","downloadReport","_component_Document","_component_el_dialog","showVisualization","fullscreen","footer","downloadHighResVisualization","_hoisted_13","_hoisted_14"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/Cluster.vue"],"sourcesContent":["<template>\n  <div class=\"cluster\">\n    <h2>多篇论文主题聚类分析</h2>\n\n    <el-card class=\"select-card\">\n      <div class=\"select-header\">\n        <h3>选择要分析的论文（至少2篇）</h3>\n        <el-button @click=\"refreshFiles\" size=\"small\">\n          <el-icon><Refresh /></el-icon>\n          刷新列表\n        </el-button>\n      </div>\n      <el-table\n        :data=\"files\"\n        style=\"width: 100%; margin-top: 20px\"\n        @selection-change=\"handleSelectionChange\"\n        v-loading=\"loading\"\n      >\n        <el-table-column type=\"selection\" width=\"55\" />\n        <el-table-column prop=\"title\" label=\"论文标题\" min-width=\"250\">\n          <template #default=\"scope\">\n            {{ scope.row.title || '未命名论文' }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"year\" label=\"年份\" width=\"80\">\n          <template #default=\"scope\">\n            {{ scope.row.year || '未知' }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"venue\" label=\"期刊/会议\" min-width=\"150\" />\n      </el-table>\n    </el-card>\n\n    <el-card class=\"options-card\">\n      <h3>聚类选项</h3>\n      <el-form :model=\"options\" label-width=\"120px\">\n        <el-form-item label=\"聚类数量\">\n          <el-input-number v-model=\"options.nClusters\" :min=\"2\" :max=\"10\" />\n        </el-form-item>\n        <el-form-item label=\"聚类方法\">\n          <el-select v-model=\"options.method\">\n            <el-option label=\"K-Means\" value=\"kmeans\" />\n            <el-option label=\"DBSCAN\" value=\"dbscan\" />\n            <el-option label=\"层次聚类\" value=\"hierarchical\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"论文语言\">\n          <el-select v-model=\"options.language\">\n            <el-option label=\"中文\" value=\"chinese\" />\n            <el-option label=\"英文\" value=\"english\" />\n          </el-select>\n        </el-form-item>\n      </el-form>\n\n      <el-button\n        type=\"primary\"\n        size=\"large\"\n        @click=\"startCluster\"\n        :disabled=\"selectedFiles.length < 2\"\n        :loading=\"clustering\"\n      >\n        <el-icon><DataAnalysis /></el-icon> 开始聚类分析\n      </el-button>\n    </el-card>\n\n    <!-- 历史聚类结果 -->\n    <el-card class=\"history-card\" v-if=\"clusterHistory.length > 0\">\n      <div class=\"history-header\">\n        <h3>历史聚类结果</h3>\n        <el-button @click=\"clearHistory\" type=\"danger\" size=\"small\" plain>清空历史</el-button>\n      </div>\n      <el-table :data=\"clusterHistory\" style=\"width: 100%; margin-top: 10px\">\n        <el-table-column prop=\"createdAt\" label=\"时间\" width=\"180\">\n          <template #default=\"scope\">\n            {{ formatDate(scope.row.createdAt) }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"clusterCount\" label=\"聚类数\" width=\"80\" />\n        <el-table-column prop=\"method\" label=\"方法\" width=\"120\" />\n        <el-table-column prop=\"paperCount\" label=\"论文数\" width=\"80\" />\n        <el-table-column label=\"操作\" width=\"200\">\n          <template #default=\"scope\">\n            <el-button type=\"primary\" size=\"small\" @click=\"loadHistoryResult(scope.row)\">查看</el-button>\n            <el-button type=\"danger\" size=\"small\" @click=\"deleteHistoryResult(scope.$index)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n    <el-card class=\"result-card\" v-if=\"result\">\n      <div class=\"result-header\">\n        <h3>聚类结果</h3>\n        <div class=\"result-actions-top\">\n          <el-tag type=\"success\" size=\"large\" effect=\"dark\">\n            {{ result.clusterCount }} 个主题类别\n          </el-tag>\n          <el-button\n            v-if=\"currentResultId\"\n            type=\"warning\"\n            size=\"small\"\n            @click=\"saveCurrentResult\"\n          >\n            <el-icon><Star /></el-icon>\n            保存结果\n          </el-button>\n        </div>\n      </div>\n\n      <el-collapse v-model=\"activeClusters\">\n        <el-collapse-item\n          v-for=\"(cluster, index) in Object.entries(result.clusterAnalysis)\"\n          :key=\"cluster[0]\"\n          :name=\"cluster[0]\"\n        >\n          <template #title>\n            <div class=\"cluster-title\">\n              <span class=\"cluster-name\">聚类 {{ parseInt(cluster[0]) + 1 }}</span>\n              <el-tag type=\"success\" size=\"small\">\n                {{ cluster[1]?.paper_count || 0 }} 篇论文\n              </el-tag>\n              <el-tag\n                v-if=\"cluster[1]?.top_keywords?.length > 0\"\n                type=\"info\"\n                size=\"small\"\n                style=\"margin-left: 8px;\"\n              >\n                {{ cluster[1].top_keywords.slice(0, 3).join(', ') }}\n              </el-tag>\n            </div>\n          </template>\n\n          <div class=\"cluster-content\">\n            <h4>核心关键词</h4>\n            <el-space wrap v-if=\"cluster[1].top_keywords && cluster[1].top_keywords.length > 0\">\n              <el-tag\n                v-for=\"(keyword, kIndex) in cluster[1].top_keywords.slice(0, 10)\"\n                :key=\"kIndex\"\n                type=\"success\"\n                effect=\"dark\"\n              >\n                {{ keyword }}\n              </el-tag>\n            </el-space>\n            <el-empty v-else description=\"暂无关键词\" :image-size=\"60\" />\n\n            <h4 style=\"margin-top: 20px\">包含论文</h4>\n            <ul v-if=\"cluster[1].papers && cluster[1].papers.length > 0\" class=\"paper-list\">\n              <li v-for=\"(paper, pIndex) in cluster[1].papers\" :key=\"pIndex\">\n                {{ paper }}\n              </li>\n            </ul>\n            <el-empty v-else description=\"暂无论文\" :image-size=\"60\" />\n\n            <h4 style=\"margin-top: 20px\">代表性论文</h4>\n            <div\n              v-if=\"cluster[1].representative_papers && cluster[1].representative_papers.length > 0\"\n            >\n              <div\n                v-for=\"(rep, rIndex) in cluster[1].representative_papers\"\n                :key=\"rIndex\"\n                class=\"rep-paper\"\n              >\n                <p><strong>{{ rep.title || '无标题' }}</strong></p>\n                <p class=\"rep-abstract\">{{ rep.abstract || '无摘要' }}</p>\n              </div>\n            </div>\n            <el-empty v-else description=\"暂无代表性论文\" :image-size=\"60\" />\n          </div>\n        </el-collapse-item>\n      </el-collapse>\n\n      <div class=\"result-actions\">\n        <el-button type=\"primary\" @click=\"downloadVisualization\">\n          <el-icon><PictureIcon /></el-icon>\n          下载高清可视化图\n        </el-button>\n        <el-button @click=\"downloadReport\">\n          <el-icon><Document /></el-icon>\n          下载聚类报告\n        </el-button>\n      </div>\n    </el-card>\n\n    <!-- 聚类可视化对话框 -->\n    <el-dialog\n      v-model=\"showVisualization\"\n      title=\"聚类可视化\"\n      width=\"90%\"\n      :fullscreen=\"true\"\n    >\n      <div class=\"visualization-container\">\n        <canvas ref=\"vizCanvas\" class=\"viz-canvas\"></canvas>\n      </div>\n      <template #footer>\n        <el-button @click=\"showVisualization = false\">关闭</el-button>\n        <el-button type=\"primary\" @click=\"downloadHighResVisualization\">下载高清图</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport api, { connectSocket } from '@/api'\nimport { ElMessage } from 'element-plus'\nimport { DataAnalysis, Refresh, Star, Picture as PictureIcon, Document } from '@element-plus/icons-vue'\n\nexport default {\n  name: 'Cluster',\n  components: {\n    DataAnalysis,\n    Refresh,\n    Star,\n    PictureIcon,\n    Document\n  },\n  setup() {\n    const store = useStore()\n\n    const files = computed(() => store.state.files)\n    const selectedFiles = ref([])\n    const loading = ref(false)\n    const options = ref({\n      nClusters: 5,\n      method: 'kmeans',\n      language: 'chinese'\n    })\n    const clustering = ref(false)\n    const result = ref(null)\n    const activeClusters = ref(['0', '1', '2'])\n    const showVisualization = ref(false)\n    const vizCanvas = ref(null)\n\n    // 当前聚类结果ID\n    const currentResultId = ref(null)\n\n    // 聚类历史记录\n    const clusterHistory = ref([])\n\n    // 从localStorage加载历史记录\n    const loadHistory = () => {\n      try {\n        const saved = localStorage.getItem('cluster_history')\n        if (saved) {\n          clusterHistory.value = JSON.parse(saved)\n        }\n      } catch (e) {\n        console.error('加载历史记录失败:', e)\n      }\n    }\n\n    // 保存历史记录到localStorage\n    const saveHistory = () => {\n      try {\n        localStorage.setItem('cluster_history', JSON.stringify(clusterHistory.value))\n      } catch (e) {\n        console.error('保存历史记录失败:', e)\n      }\n    }\n\n    // 格式化日期\n    const formatDate = (dateStr) => {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      return date.toLocaleString('zh-CN')\n    }\n\n    // 加载历史结果\n    const loadHistoryResult = (historyItem) => {\n      result.value = historyItem.data\n      currentResultId.value = null // 历史结果不需要再保存\n      activeClusters.value = Object.keys(historyItem.data.clusterAnalysis).slice(0, 3)\n      ElMessage.success('已加载历史聚类结果')\n    }\n\n    // 删除历史结果\n    const deleteHistoryResult = (index) => {\n      clusterHistory.value.splice(index, 1)\n      saveHistory()\n      ElMessage.success('已删除')\n    }\n\n    // 清空历史\n    const clearHistory = () => {\n      clusterHistory.value = []\n      saveHistory()\n      ElMessage.success('历史记录已清空')\n    }\n\n    // 保存当前结果\n    const saveCurrentResult = () => {\n      if (!result.value) return\n\n      const historyItem = {\n        id: Date.now().toString(),\n        createdAt: new Date().toISOString(),\n        clusterCount: result.value.clusterCount,\n        method: result.value.method,\n        paperCount: result.value.papers?.length || 0,\n        data: result.value\n      }\n\n      clusterHistory.value.unshift(historyItem)\n      saveHistory()\n      currentResultId.value = null // 已保存，不需要再显示保存按钮\n      ElMessage.success('聚类结果已保存到历史记录')\n    }\n\n    const handleSelectionChange = (selection) => {\n      selectedFiles.value = selection\n    }\n\n    const refreshFiles = async () => {\n      loading.value = true\n      try {\n        await store.dispatch('fetchFiles')\n        ElMessage.success('论文列表已刷新')\n      } catch (error) {\n        console.error('刷新失败:', error)\n        ElMessage.error('刷新失败')\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const startCluster = async () => {\n      if (selectedFiles.value.length < 2) {\n        ElMessage.warning('请至少选择2篇论文')\n        return\n      }\n\n      // 验证聚类数量\n      const maxClusters = Math.min(20, selectedFiles.value.length)\n      if (options.value.method !== 'dbscan' && (options.value.nClusters < 2 || options.value.nClusters > maxClusters)) {\n        ElMessage.warning(`聚类数量必须在 2 到 ${maxClusters} 之间`)\n        return\n      }\n\n      // 连接WebSocket\n      connectSocket()\n      store.commit('SHOW_PROGRESS_DIALOG', true)\n      store.commit('SET_PROGRESS', { progress: 0, message: '开始聚类分析...', step: '' })\n\n      clustering.value = true\n\n      try {\n        // 使用论文ID而不是文件路径\n        const paperIds = selectedFiles.value.map(f => f.id)\n\n        console.log('[DEBUG] 开始聚类, paper_ids:', paperIds)\n        console.log('[DEBUG] 聚类选项:', options.value)\n\n        const response = await api.clusterPapers(\n          paperIds,\n          options.value.nClusters,\n          options.value.method,\n          options.value.language\n        )\n\n        console.log('[DEBUG] 聚类响应:', response)\n\n        if (response.success) {\n          // 格式化结果\n          result.value = {\n            clusterCount: response.data.n_clusters,\n            clusterAnalysis: response.data.cluster_analysis,\n            papers: response.data.papers || [],\n            method: options.value.method,\n            createdAt: new Date().toISOString()\n          }\n\n          // 生成新的结果ID\n          currentResultId.value = Date.now().toString()\n\n          store.commit('SET_PROGRESS', { progress: 100, message: '聚类完成!' })\n          ElMessage.success(`聚类分析完成! 共发现 ${response.data.n_clusters} 个主题类别`)\n\n          // 自动展开前3个聚类\n          const clusterIds = Object.keys(response.data.cluster_analysis)\n          activeClusters.value = clusterIds.slice(0, 3)\n\n          // 自动保存到历史记录\n          saveCurrentResult()\n        } else {\n          ElMessage.error({\n            message: response.error || '聚类失败',\n            duration: 5000,\n            showClose: true\n          })\n        }\n      } catch (error) {\n        console.error('[ERROR] 聚类错误:', error)\n\n        // 提供更详细的错误提示\n        let errorMsg = '聚类失败'\n        const errorDetail = error.response?.data?.error || error.message\n\n        if (errorDetail) {\n          if (errorDetail.includes('论文') || errorDetail.includes('PDF')) {\n            errorMsg = '论文加载或解析失败，请检查文件是否完整'\n          } else if (errorDetail.includes('聚类') || errorDetail.includes('算法')) {\n            errorMsg = '聚类算法执行失败，请尝试调整参数'\n          } else if (errorDetail.includes('数量') || errorDetail.includes('不足')) {\n            errorMsg = '可用论文数量不足，无法进行聚类'\n          } else if (errorDetail.includes('timeout') || errorDetail.includes('超时')) {\n            errorMsg = '聚类超时，请减少论文数量或降低聚类数量'\n          } else {\n            errorMsg = `聚类失败: ${errorDetail}`\n          }\n        } else if (error.message) {\n          errorMsg = `聚类失败: ${error.message}`\n        }\n\n        ElMessage.error({\n          message: errorMsg,\n          duration: 5000,\n          showClose: true\n        })\n      } finally {\n        clustering.value = false\n        store.commit('SHOW_PROGRESS_DIALOG', false)\n      }\n    }\n\n    const downloadVisualization = () => {\n      showVisualization.value = true\n      // 在对话框打开后绘制可视化\n      setTimeout(() => {\n        drawVisualization()\n      }, 100)\n    }\n\n    const drawVisualization = () => {\n      const canvas = vizCanvas.value\n      if (!canvas) return\n\n      // 设置高分辨率画布\n      const dpr = window.devicePixelRatio || 1\n      const width = window.innerWidth * 0.85\n      const height = window.innerHeight * 0.75\n\n      canvas.width = width * dpr\n      canvas.height = height * dpr\n      canvas.style.width = width + 'px'\n      canvas.style.height = height + 'px'\n\n      const ctx = canvas.getContext('2d')\n      ctx.scale(dpr, dpr)\n\n      // 背景\n      ctx.fillStyle = '#f8f9fa'\n      ctx.fillRect(0, 0, width, height)\n\n      // 标题\n      ctx.fillStyle = '#333'\n      ctx.font = 'bold 28px Arial'\n      ctx.textAlign = 'center'\n      ctx.fillText('论文主题聚类可视化', width / 2, 50)\n\n      if (!result.value || !result.value.clusterAnalysis) {\n        return\n      }\n\n      // 绘制聚类圆形图\n      const clusters = Object.entries(result.value.clusterAnalysis)\n      const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E2', '#F8B500', '#6C5CE7']\n\n      const centerX = width / 2\n      const centerY = height / 2 + 30\n      const maxRadius = Math.min(width, height) * 0.35\n\n      // 计算总论文数\n      const totalPapers = clusters.reduce((sum, [, info]) => sum + (info.paper_count || 0), 0)\n\n      // 绘制聚类圆圈\n      let currentAngle = 0\n      clusters.forEach(([clusterId, info], index) => {\n        const color = colors[index % colors.length]\n        const ratio = (info.paper_count || 0) / Math.max(totalPapers, 1)\n        const angle = ratio * Math.PI * 2\n\n        // 绘制扇形\n        ctx.beginPath()\n        ctx.moveTo(centerX, centerY)\n        ctx.arc(centerX, centerY, maxRadius, currentAngle, currentAngle + angle)\n        ctx.closePath()\n        ctx.fillStyle = color + '40' // 添加透明度\n        ctx.fill()\n        ctx.strokeStyle = color\n        ctx.lineWidth = 3\n        ctx.stroke()\n\n        // 绘制标签\n        const labelAngle = currentAngle + angle / 2\n        const labelRadius = maxRadius + 40\n        const labelX = centerX + Math.cos(labelAngle) * labelRadius\n        const labelY = centerY + Math.sin(labelAngle) * labelRadius\n\n        ctx.fillStyle = color\n        ctx.font = 'bold 16px Arial'\n        ctx.textAlign = 'center'\n        ctx.fillText(`聚类 ${parseInt(clusterId) + 1}`, labelX, labelY - 10)\n        ctx.font = '14px Arial'\n        ctx.fillStyle = '#666'\n        ctx.fillText(`${info.paper_count || 0}篇`, labelX, labelY + 10)\n\n        currentAngle += angle\n      })\n\n      // 中心圆\n      ctx.beginPath()\n      ctx.arc(centerX, centerY, maxRadius * 0.3, 0, Math.PI * 2)\n      ctx.fillStyle = 'white'\n      ctx.fill()\n      ctx.strokeStyle = '#ddd'\n      ctx.lineWidth = 2\n      ctx.stroke()\n\n      // 中心文字\n      ctx.fillStyle = '#333'\n      ctx.font = 'bold 20px Arial'\n      ctx.textAlign = 'center'\n      ctx.fillText(`${clusters.length}`, centerX, centerY - 5)\n      ctx.font = '14px Arial'\n      ctx.fillStyle = '#666'\n      ctx.fillText('个聚类', centerX, centerY + 15)\n\n      // 绘制图例\n      let legendY = height - 100\n      const legendX = width / 2 - (clusters.length * 150) / 2\n\n      clusters.forEach(([clusterId, info], index) => {\n        const color = colors[index % colors.length]\n        const x = legendX + (index % 5) * 150\n        const y = legendY + Math.floor(index / 5) * 40\n\n        ctx.fillStyle = color\n        ctx.fillRect(x, y, 20, 20)\n        ctx.fillStyle = '#333'\n        ctx.font = '12px Arial'\n        ctx.textAlign = 'left'\n        const keywords = info.top_keywords?.slice(0, 2).join(', ') || '无关键词'\n        ctx.fillText(`聚类${parseInt(clusterId) + 1}: ${keywords}`, x + 30, y + 15)\n      })\n    }\n\n    const downloadHighResVisualization = () => {\n      const canvas = vizCanvas.value\n      if (!canvas) return\n\n      // 创建高分辨率下载\n      const link = document.createElement('a')\n      link.download = `cluster_visualization_${Date.now()}_highres.png`\n      link.href = canvas.toDataURL('image/png', 1.0)\n      link.click()\n      ElMessage.success('高清可视化图下载成功')\n    }\n\n    const downloadReport = async () => {\n      if (!result.value) {\n        ElMessage.warning('没有可导出的聚类结果')\n        return\n      }\n\n      try {\n        // 生成报告内容\n        let content = '论文主题聚类分析报告\\n'\n        content += '=' .repeat(80) + '\\n\\n'\n        content += `生成时间: ${formatDate(result.value.createdAt)}\\n`\n        content += `聚类方法: ${result.value.method || 'K-Means'}\\n`\n        content += `聚类数量: ${result.value.clusterCount}\\n`\n        content += `论文总数: ${result.value.papers?.length || 0}\\n\\n`\n\n        // 每个聚类的详细信息\n        Object.entries(result.value.clusterAnalysis).forEach(([clusterId, info], index) => {\n          content += `\\n${'=' .repeat(80)}\\n`\n          content += `聚类 ${parseInt(clusterId) + 1}\\n`\n          content += `${'-' .repeat(40)}\\n`\n          content += `论文数: ${info.paper_count || 0}\\n`\n          content += `关键词: ${info.top_keywords?.join(', ') || '无'}\\n\\n`\n\n          if (info.papers && info.papers.length > 0) {\n            content += '包含论文:\\n'\n            info.papers.forEach((paper, i) => {\n              content += `  ${i + 1}. ${paper}\\n`\n            })\n          }\n\n          if (info.representative_papers && info.representative_papers.length > 0) {\n            content += '\\n代表性论文:\\n'\n            info.representative_papers.forEach((paper, i) => {\n              content += `  ${i + 1}. ${paper.title || '无标题'}\\n`\n              if (paper.abstract) {\n                content += `     摘要: ${paper.abstract}\\n`\n              }\n            })\n          }\n        })\n\n        content += `\\n${'=' .repeat(80)}\\n`\n        content += '报告结束\\n'\n\n        // 下载文件\n        const blob = new Blob([content], { type: 'text/markdown;charset=utf-8' })\n        const url = URL.createObjectURL(blob)\n        const a = document.createElement('a')\n        a.href = url\n        a.download = `cluster_report_${Date.now()}.md`\n        a.click()\n        URL.revokeObjectURL(url)\n\n        ElMessage.success('聚类报告下载成功')\n      } catch (error) {\n        console.error('[ERROR] 导出报告失败:', error)\n        ElMessage.error('导出报告失败')\n      }\n    }\n\n    onMounted(() => {\n      store.dispatch('fetchFiles')\n      loadHistory()\n    })\n\n    return {\n      files,\n      selectedFiles,\n      loading,\n      options,\n      clustering,\n      result,\n      activeClusters,\n      currentResultId,\n      clusterHistory,\n      showVisualization,\n      vizCanvas,\n      handleSelectionChange,\n      refreshFiles,\n      formatDate,\n      startCluster,\n      downloadVisualization,\n      drawVisualization,\n      downloadHighResVisualization,\n      downloadReport,\n      saveCurrentResult,\n      loadHistoryResult,\n      deleteHistoryResult,\n      clearHistory\n    }\n  }\n}\n</script>\n\n<style scoped>\n.cluster {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\nh2 {\n  margin-bottom: 20px;\n  color: #303133;\n}\n\n.select-card,\n.options-card,\n.result-card,\n.history-card {\n  margin-bottom: 20px;\n}\n\n.select-header,\n.history-header,\n.result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.select-header h3,\n.history-header h3,\n.result-header h3 {\n  margin: 0;\n}\n\n.result-actions-top {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.cluster-title {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.cluster-name {\n  font-weight: 600;\n}\n\n.cluster-content h4 {\n  color: #409eff;\n  margin: 20px 0 10px 0;\n}\n\n.paper-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.paper-list li {\n  padding: 8px 0;\n  padding-left: 20px;\n  position: relative;\n  border-bottom: 1px solid #eee;\n}\n\n.paper-list li:before {\n  content: '•';\n  position: absolute;\n  left: 0;\n  color: #409eff;\n  font-weight: bold;\n}\n\n.rep-paper {\n  padding: 15px;\n  background: #f5f7fa;\n  border-radius: 4px;\n  margin-bottom: 10px;\n}\n\n.rep-paper p {\n  margin: 5px 0;\n}\n\n.rep-abstract {\n  color: #606266;\n  font-size: 14px;\n  line-height: 1.6;\n}\n\n.result-actions {\n  margin-top: 20px;\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n}\n\n.visualization-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 500px;\n  background: #f8f9fa;\n  border-radius: 8px;\n}\n\n.viz-canvas {\n  max-width: 100%;\n  max-height: 80vh;\n}\n\n/* 表格样式优化 */\n:deep(.el-table) {\n  font-size: 14px;\n}\n\n:deep(.el-tag) {\n  font-size: 12px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}