{"ast":null,"code":"import { isNumber } from '../../../utils/types.mjs';\nconst timeUnits = [[\"Y\", 1e3 * 60 * 60 * 24 * 365], [\"M\", 1e3 * 60 * 60 * 24 * 30], [\"D\", 1e3 * 60 * 60 * 24], [\"H\", 1e3 * 60 * 60], [\"m\", 1e3 * 60], [\"s\", 1e3], [\"S\", 1]];\nconst getTime = value => {\n  return isNumber(value) ? new Date(value).getTime() : value.valueOf();\n};\nconst formatTime = (timestamp, format) => {\n  let timeLeft = timestamp;\n  const escapeRegex = /\\[([^\\]]*)]/g;\n  const replacedText = timeUnits.reduce((current, [name, unit]) => {\n    const replaceRegex = new RegExp(`${name}+(?![^\\\\[\\\\]]*\\\\])`, \"g\");\n    if (replaceRegex.test(current)) {\n      const value = Math.floor(timeLeft / unit);\n      timeLeft -= value * unit;\n      return current.replace(replaceRegex, match => String(value).padStart(match.length, \"0\"));\n    }\n    return current;\n  }, format);\n  return replacedText.replace(escapeRegex, \"$1\");\n};\nexport { formatTime, getTime };","map":{"version":3,"names":["timeUnits","getTime","value","isNumber","Date","valueOf","formatTime","timestamp","format","timeLeft","escapeRegex","replacedText","reduce","current","name","unit","replaceRegex","RegExp","test","Math","floor","replace","match","String","padStart","length"],"sources":["../../../../../../packages/components/countdown/src/utils.ts"],"sourcesContent":["import { isNumber } from '@element-plus/utils'\n\nimport type { Dayjs } from 'dayjs'\n\nconst timeUnits = [\n  ['Y', 1000 * 60 * 60 * 24 * 365], // years\n  ['M', 1000 * 60 * 60 * 24 * 30], // months\n  ['D', 1000 * 60 * 60 * 24], // days\n  ['H', 1000 * 60 * 60], // hours\n  ['m', 1000 * 60], // minutes\n  ['s', 1000], // seconds\n  ['S', 1], // million seconds\n] as const\n\nexport const getTime = (value: number | Dayjs) => {\n  return isNumber(value) ? new Date(value).getTime() : value.valueOf()\n}\n\nexport const formatTime = (timestamp: number, format: string) => {\n  let timeLeft = timestamp\n  const escapeRegex = /\\[([^\\]]*)]/g\n\n  const replacedText = timeUnits.reduce((current, [name, unit]) => {\n    const replaceRegex = new RegExp(`${name}+(?![^\\\\[\\\\]]*\\\\])`, 'g')\n    if (replaceRegex.test(current)) {\n      const value = Math.floor(timeLeft / unit)\n      timeLeft -= value * unit\n      return current.replace(replaceRegex, (match) =>\n        String(value).padStart(match.length, '0')\n      )\n    }\n    return current\n  }, format)\n\n  return replacedText.replace(escapeRegex, '$1')\n}\n"],"mappings":";AAIA,MAAMA,SAAY,IAChB,CAAC,GAAK,QAAO,EAAK,QAAK,KAAK,GAAG,GAC/B,CAAC,GAAK,QAAO,EAAK,QAAK,KAAK,EAAE,GAC9B,CAAC,KAAK,GAAO,QAAK,KAAK,EAAE,GACzB,CAAC,KAAK,GAAO,QAAK,EAAE,GACpB,CAAC,GAAK,QAAO,EAAE,GACf,CAAC,KAAK,GAAI,GACV,CAAC,KAAK,CAAC,EACT;AAEa,MAAAC,OAAA,GAAWC,KAA0B;EACzC,OAAAC,QAAA,CAASD,KAAK,IAAI,IAAIE,IAAA,CAAKF,KAAK,CAAE,CAAAD,OAAA,EAAY,GAAAC,KAAA,CAAMG,OAAQ;AACrE;AAEa,MAAAC,UAAA,GAAaA,CAACC,SAAA,EAAmBC,MAAmB;EAC/D,IAAIC,QAAW,GAAAF,SAAA;EACf,MAAMG,WAAc;EAEd,MAAAC,YAAA,GAAeX,SAAA,CAAUY,MAAO,EAACC,OAAA,EAAS,CAACC,IAAA,EAAMC,IAAI,CAAM;IAC/D,MAAMC,YAAe,OAAIC,MAAO,IAAGH,IAAA,sBAA0B,GAAG;IAC5D,IAAAE,YAAA,CAAaE,IAAK,CAAAL,OAAO,CAAG;MAC9B,MAAMX,KAAQ,GAAAiB,IAAA,CAAKC,KAAM,CAAAX,QAAA,GAAWM,IAAI;MACxCN,QAAA,IAAYP,KAAQ,GAAAa,IAAA;MACpB,OAAOF,OAAQ,CAAAQ,OAAA,CAAQL,YAAA,EAAeM,KAAA,IACpCC,MAAO,CAAArB,KAAK,EAAEsB,QAAS,CAAAF,KAAA,CAAMG,MAAA,EAAQ,GAAG,EAC1C;IAAA;IAEK,OAAAZ,OAAA;EAAA,GACNL,MAAM;EAEF,OAAAG,YAAA,CAAaU,OAAQ,CAAAX,WAAA,EAAa,IAAI;AAC/C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}