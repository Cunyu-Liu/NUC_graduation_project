{"ast":null,"code":"import { defineComponent, inject, ref, toRef, openBlock, createBlock, unref, normalizeClass, withCtx, renderSlot, nextTick } from 'vue';\nimport '../../popper/index.mjs';\nimport { TOOLTIP_INJECTION_KEY } from './constants.mjs';\nimport { useTooltipTriggerProps } from './trigger.mjs';\nimport { whenTrigger } from './utils.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport ElPopperTrigger from '../../popper/src/trigger2.mjs';\nimport { composeEventHandlers, getEventCode } from '../../../utils/dom/event.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { focusElement } from '../../../utils/dom/aria.mjs';\nconst _sfc_main = defineComponent({\n  ...{\n    name: \"ElTooltipTrigger\"\n  },\n  __name: \"trigger\",\n  props: useTooltipTriggerProps,\n  setup(__props, {\n    expose: __expose\n  }) {\n    const props = __props;\n    const ns = useNamespace(\"tooltip\");\n    const {\n      controlled,\n      id,\n      open,\n      onOpen,\n      onClose,\n      onToggle\n    } = inject(TOOLTIP_INJECTION_KEY, void 0);\n    const triggerRef = ref(null);\n    const stopWhenControlledOrDisabled = () => {\n      if (unref(controlled) || props.disabled) {\n        return true;\n      }\n    };\n    const trigger = toRef(props, \"trigger\");\n    const onMouseenter = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, \"hover\", e => {\n      onOpen(e);\n      if (props.focusOnTarget && e.target) {\n        nextTick(() => {\n          focusElement(e.target, {\n            preventScroll: true\n          });\n        });\n      }\n    }));\n    const onMouseleave = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, \"hover\", onClose));\n    const onClick = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, \"click\", e => {\n      if (e.button === 0) {\n        onToggle(e);\n      }\n    }));\n    const onFocus = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, \"focus\", onOpen));\n    const onBlur = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, \"focus\", onClose));\n    const onContextMenu = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, \"contextmenu\", e => {\n      e.preventDefault();\n      onToggle(e);\n    }));\n    const onKeydown = composeEventHandlers(stopWhenControlledOrDisabled, e => {\n      const code = getEventCode(e);\n      if (props.triggerKeys.includes(code)) {\n        e.preventDefault();\n        onToggle(e);\n      }\n    });\n    __expose({\n      triggerRef\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(ElPopperTrigger), {\n        id: unref(id),\n        \"virtual-ref\": _ctx.virtualRef,\n        open: unref(open),\n        \"virtual-triggering\": _ctx.virtualTriggering,\n        class: normalizeClass(unref(ns).e(\"trigger\")),\n        onBlur: unref(onBlur),\n        onClick: unref(onClick),\n        onContextmenu: unref(onContextMenu),\n        onFocus: unref(onFocus),\n        onMouseenter: unref(onMouseenter),\n        onMouseleave: unref(onMouseleave),\n        onKeydown: unref(onKeydown)\n      }, {\n        default: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n        _: 3\n      }, 8, [\"id\", \"virtual-ref\", \"open\", \"virtual-triggering\", \"class\", \"onBlur\", \"onClick\", \"onContextmenu\", \"onFocus\", \"onMouseenter\", \"onMouseleave\", \"onKeydown\"]);\n    };\n  }\n});\nvar ElTooltipTrigger = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue\"]]);\nexport { ElTooltipTrigger as default };","map":{"version":3,"names":["props","__props","ns","useNamespace","controlled","id","open","onOpen","onClose","onToggle","inject","TOOLTIP_INJECTION_KEY","triggerRef","ref","stopWhenControlledOrDisabled","unref","disabled","trigger","toRef","onMouseenter","composeEventHandlers","whenTrigger","e","focusOnTarget","target","nextTick","focusElement","preventScroll","onMouseleave","onClick","button","onFocus","onBlur","onContextMenu","preventDefault","onKeydown","code","getEventCode","triggerKeys","includes","__expose","createBlock","ElPopperTrigger","_ctx","virtualRef","virtualTriggering","class","normalizeClass","onContextmenu","default","withCtx","renderSlot","$slots","_"],"sources":["../../../../../../packages/components/tooltip/src/trigger.vue"],"sourcesContent":["<template>\n  <el-popper-trigger\n    :id=\"id\"\n    :virtual-ref=\"virtualRef\"\n    :open=\"open\"\n    :virtual-triggering=\"virtualTriggering\"\n    :class=\"ns.e('trigger')\"\n    @blur=\"onBlur\"\n    @click=\"onClick\"\n    @contextmenu=\"onContextMenu\"\n    @focus=\"onFocus\"\n    @mouseenter=\"onMouseenter\"\n    @mouseleave=\"onMouseleave\"\n    @keydown=\"onKeydown\"\n  >\n    <slot />\n  </el-popper-trigger>\n</template>\n\n<script lang=\"ts\" setup>\nimport { inject, nextTick, ref, toRef, unref } from 'vue'\nimport { ElPopperTrigger } from '@element-plus/components/popper'\nimport {\n  composeEventHandlers,\n  focusElement,\n  getEventCode,\n} from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { TOOLTIP_INJECTION_KEY } from './constants'\nimport { useTooltipTriggerProps } from './trigger'\nimport { whenTrigger } from './utils'\n\nimport type { OnlyChildExpose } from '@element-plus/components/slot'\n\ndefineOptions({\n  name: 'ElTooltipTrigger',\n})\n\nconst props = defineProps(useTooltipTriggerProps)\n\nconst ns = useNamespace('tooltip')\nconst { controlled, id, open, onOpen, onClose, onToggle } = inject(\n  TOOLTIP_INJECTION_KEY,\n  undefined\n)!\n\nconst triggerRef = ref<OnlyChildExpose | null>(null)\n\nconst stopWhenControlledOrDisabled = () => {\n  if (unref(controlled) || props.disabled) {\n    return true\n  }\n}\nconst trigger = toRef(props, 'trigger')\nconst onMouseenter = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'hover', (e) => {\n    onOpen(e)\n\n    if (props.focusOnTarget && e.target) {\n      nextTick(() => {\n        focusElement(e.target as HTMLElement, { preventScroll: true })\n      })\n    }\n  })\n)\nconst onMouseleave = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'hover', onClose)\n)\nconst onClick = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'click', (e) => {\n    // distinguish left click\n    if ((e as MouseEvent).button === 0) {\n      onToggle(e)\n    }\n  })\n)\n\nconst onFocus = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'focus', onOpen)\n)\n\nconst onBlur = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'focus', onClose)\n)\n\nconst onContextMenu = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'contextmenu', (e: Event) => {\n    e.preventDefault()\n    onToggle(e)\n  })\n)\n\nconst onKeydown = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  (e: Event) => {\n    const code = getEventCode(e as KeyboardEvent)\n    if (props.triggerKeys.includes(code)) {\n      e.preventDefault()\n      onToggle(e)\n    }\n  }\n)\n\ndefineExpose({\n  /**\n   * @description trigger element\n   */\n  triggerRef,\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}