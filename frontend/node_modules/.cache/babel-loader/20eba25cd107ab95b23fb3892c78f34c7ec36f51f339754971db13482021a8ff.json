{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { createStore } from 'vuex';\nimport api from '@/api';\nexport default createStore({\n  state: {\n    files: [],\n    currentFile: null,\n    showUploadDialog: false,\n    showProgressDialog: false,\n    progress: 0,\n    progressMessage: '',\n    progressStep: ''\n  },\n  mutations: {\n    SET_FILES(state, files) {\n      state.files = files;\n    },\n    ADD_FILE(state, file) {\n      state.files.unshift(file);\n    },\n    REMOVE_FILE(state, filename) {\n      state.files = state.files.filter(f => f.filename !== filename);\n    },\n    SET_CURRENT_FILE(state, file) {\n      state.currentFile = file;\n    },\n    SHOW_UPLOAD_DIALOG(state, show) {\n      state.showUploadDialog = show;\n    },\n    SHOW_PROGRESS_DIALOG(state, show) {\n      state.showProgressDialog = show;\n    },\n    SET_PROGRESS(state, {\n      progress,\n      message,\n      step\n    }) {\n      if (progress !== undefined) state.progress = progress;\n      if (message !== undefined) state.progressMessage = message;\n      if (step !== undefined) state.progressStep = step;\n    }\n  },\n  actions: {\n    async fetchFiles({\n      commit\n    }) {\n      try {\n        const response = await api.getFiles();\n        if (response.success) {\n          commit('SET_FILES', response.data.files);\n        }\n      } catch (error) {\n        console.error('获取文件列表失败:', error);\n      }\n    },\n    async deleteFile({\n      commit,\n      dispatch\n    }, filename) {\n      try {\n        const response = await api.deleteFile(filename);\n        if (response.success) {\n          commit('REMOVE_FILE', filename);\n          return true;\n        }\n      } catch (error) {\n        console.error('删除文件失败:', error);\n        return false;\n      }\n    }\n  },\n  getters: {\n    uploadedCount: state => state.files.length\n  }\n});","map":{"version":3,"names":["createStore","api","state","files","currentFile","showUploadDialog","showProgressDialog","progress","progressMessage","progressStep","mutations","SET_FILES","ADD_FILE","file","unshift","REMOVE_FILE","filename","filter","f","SET_CURRENT_FILE","SHOW_UPLOAD_DIALOG","show","SHOW_PROGRESS_DIALOG","SET_PROGRESS","message","step","undefined","actions","fetchFiles","commit","response","getFiles","success","data","error","console","deleteFile","dispatch","getters","uploadedCount","length"],"sources":["/Users/liucunyu/Documents/all_code/nuc_Graduation_project/frontend/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\nimport api from '@/api'\n\nexport default createStore({\n  state: {\n    files: [],\n    currentFile: null,\n    showUploadDialog: false,\n    showProgressDialog: false,\n    progress: 0,\n    progressMessage: '',\n    progressStep: ''\n  },\n\n  mutations: {\n    SET_FILES(state, files) {\n      state.files = files\n    },\n\n    ADD_FILE(state, file) {\n      state.files.unshift(file)\n    },\n\n    REMOVE_FILE(state, filename) {\n      state.files = state.files.filter(f => f.filename !== filename)\n    },\n\n    SET_CURRENT_FILE(state, file) {\n      state.currentFile = file\n    },\n\n    SHOW_UPLOAD_DIALOG(state, show) {\n      state.showUploadDialog = show\n    },\n\n    SHOW_PROGRESS_DIALOG(state, show) {\n      state.showProgressDialog = show\n    },\n\n    SET_PROGRESS(state, { progress, message, step }) {\n      if (progress !== undefined) state.progress = progress\n      if (message !== undefined) state.progressMessage = message\n      if (step !== undefined) state.progressStep = step\n    }\n  },\n\n  actions: {\n    async fetchFiles({ commit }) {\n      try {\n        const response = await api.getFiles()\n        if (response.success) {\n          commit('SET_FILES', response.data.files)\n        }\n      } catch (error) {\n        console.error('获取文件列表失败:', error)\n      }\n    },\n\n    async deleteFile({ commit, dispatch }, filename) {\n      try {\n        const response = await api.deleteFile(filename)\n        if (response.success) {\n          commit('REMOVE_FILE', filename)\n          return true\n        }\n      } catch (error) {\n        console.error('删除文件失败:', error)\n        return false\n      }\n    }\n  },\n\n  getters: {\n    uploadedCount: state => state.files.length\n  }\n})\n"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,GAAG,MAAM,OAAO;AAEvB,eAAeD,WAAW,CAAC;EACzBE,KAAK,EAAE;IACLC,KAAK,EAAE,EAAE;IACTC,WAAW,EAAE,IAAI;IACjBC,gBAAgB,EAAE,KAAK;IACvBC,kBAAkB,EAAE,KAAK;IACzBC,QAAQ,EAAE,CAAC;IACXC,eAAe,EAAE,EAAE;IACnBC,YAAY,EAAE;EAChB,CAAC;EAEDC,SAAS,EAAE;IACTC,SAASA,CAACT,KAAK,EAAEC,KAAK,EAAE;MACtBD,KAAK,CAACC,KAAK,GAAGA,KAAK;IACrB,CAAC;IAEDS,QAAQA,CAACV,KAAK,EAAEW,IAAI,EAAE;MACpBX,KAAK,CAACC,KAAK,CAACW,OAAO,CAACD,IAAI,CAAC;IAC3B,CAAC;IAEDE,WAAWA,CAACb,KAAK,EAAEc,QAAQ,EAAE;MAC3Bd,KAAK,CAACC,KAAK,GAAGD,KAAK,CAACC,KAAK,CAACc,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACF,QAAQ,KAAKA,QAAQ,CAAC;IAChE,CAAC;IAEDG,gBAAgBA,CAACjB,KAAK,EAAEW,IAAI,EAAE;MAC5BX,KAAK,CAACE,WAAW,GAAGS,IAAI;IAC1B,CAAC;IAEDO,kBAAkBA,CAAClB,KAAK,EAAEmB,IAAI,EAAE;MAC9BnB,KAAK,CAACG,gBAAgB,GAAGgB,IAAI;IAC/B,CAAC;IAEDC,oBAAoBA,CAACpB,KAAK,EAAEmB,IAAI,EAAE;MAChCnB,KAAK,CAACI,kBAAkB,GAAGe,IAAI;IACjC,CAAC;IAEDE,YAAYA,CAACrB,KAAK,EAAE;MAAEK,QAAQ;MAAEiB,OAAO;MAAEC;IAAK,CAAC,EAAE;MAC/C,IAAIlB,QAAQ,KAAKmB,SAAS,EAAExB,KAAK,CAACK,QAAQ,GAAGA,QAAQ;MACrD,IAAIiB,OAAO,KAAKE,SAAS,EAAExB,KAAK,CAACM,eAAe,GAAGgB,OAAO;MAC1D,IAAIC,IAAI,KAAKC,SAAS,EAAExB,KAAK,CAACO,YAAY,GAAGgB,IAAI;IACnD;EACF,CAAC;EAEDE,OAAO,EAAE;IACP,MAAMC,UAAUA,CAAC;MAAEC;IAAO,CAAC,EAAE;MAC3B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAM7B,GAAG,CAAC8B,QAAQ,CAAC,CAAC;QACrC,IAAID,QAAQ,CAACE,OAAO,EAAE;UACpBH,MAAM,CAAC,WAAW,EAAEC,QAAQ,CAACG,IAAI,CAAC9B,KAAK,CAAC;QAC1C;MACF,CAAC,CAAC,OAAO+B,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACnC;IACF,CAAC;IAED,MAAME,UAAUA,CAAC;MAAEP,MAAM;MAAEQ;IAAS,CAAC,EAAErB,QAAQ,EAAE;MAC/C,IAAI;QACF,MAAMc,QAAQ,GAAG,MAAM7B,GAAG,CAACmC,UAAU,CAACpB,QAAQ,CAAC;QAC/C,IAAIc,QAAQ,CAACE,OAAO,EAAE;UACpBH,MAAM,CAAC,aAAa,EAAEb,QAAQ,CAAC;UAC/B,OAAO,IAAI;QACb;MACF,CAAC,CAAC,OAAOkB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;QAC/B,OAAO,KAAK;MACd;IACF;EACF,CAAC;EAEDI,OAAO,EAAE;IACPC,aAAa,EAAErC,KAAK,IAAIA,KAAK,CAACC,KAAK,CAACqC;EACtC;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}