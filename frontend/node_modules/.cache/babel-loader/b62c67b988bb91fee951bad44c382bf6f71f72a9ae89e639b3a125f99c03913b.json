{"ast":null,"code":"import { defineComponent, onBeforeUnmount, openBlock, createElementBlock, unref, normalizeClass, createElementVNode, createCommentVNode, Fragment, renderList, toDisplayString, createVNode } from 'vue';\nimport { basicDateTableProps, basicDateTableEmits } from '../props/basic-date-table.mjs';\nimport { useBasicDateTable, useBasicDateTableDOM } from '../composables/use-basic-date-table.mjs';\nimport ElDatePickerCell from './basic-cell-render.mjs';\nimport _export_sfc from '../../../../_virtual/plugin-vue_export-helper.mjs';\nconst _hoisted_1 = [\"aria-label\"];\nconst _hoisted_2 = [\"aria-label\"];\nconst _hoisted_3 = [\"aria-current\", \"aria-selected\", \"tabindex\", \"aria-disabled\"];\nconst _sfc_main = defineComponent({\n  __name: \"basic-date-table\",\n  props: basicDateTableProps,\n  emits: basicDateTableEmits,\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    const props = __props;\n    const emit = __emit;\n    const {\n      WEEKS,\n      rows,\n      tbodyRef,\n      currentCellRef,\n      focus,\n      isCurrent,\n      isWeekActive,\n      isSelectedCell,\n      handlePickDate,\n      handleMouseUp,\n      handleMouseDown,\n      handleMouseMove,\n      handleFocus\n    } = useBasicDateTable(props, emit);\n    const {\n      tableLabel,\n      tableKls,\n      getCellClasses,\n      getRowKls,\n      weekHeaderClass,\n      t\n    } = useBasicDateTableDOM(props, {\n      isCurrent,\n      isWeekActive\n    });\n    let isUnmounting = false;\n    onBeforeUnmount(() => {\n      isUnmounting = true;\n    });\n    __expose({\n      focus\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"table\", {\n        \"aria-label\": unref(tableLabel),\n        class: normalizeClass(unref(tableKls)),\n        cellspacing: \"0\",\n        cellpadding: \"0\",\n        role: \"grid\",\n        onClick: _cache[1] || (_cache[1] = (...args) => unref(handlePickDate) && unref(handlePickDate)(...args)),\n        onMousemove: _cache[2] || (_cache[2] = (...args) => unref(handleMouseMove) && unref(handleMouseMove)(...args)),\n        onMousedown: _cache[3] || (_cache[3] = (...args) => unref(handleMouseDown) && unref(handleMouseDown)(...args)),\n        onMouseup: _cache[4] || (_cache[4] = (...args) => unref(handleMouseUp) && unref(handleMouseUp)(...args))\n      }, [createElementVNode(\"tbody\", {\n        ref_key: \"tbodyRef\",\n        ref: tbodyRef\n      }, [createElementVNode(\"tr\", null, [_ctx.showWeekNumber ? (openBlock(), createElementBlock(\"th\", {\n        key: 0,\n        scope: \"col\",\n        class: normalizeClass(unref(weekHeaderClass))\n      }, null, 2)) : createCommentVNode(\"v-if\", true), (openBlock(true), createElementBlock(Fragment, null, renderList(unref(WEEKS), (week, key) => {\n        return openBlock(), createElementBlock(\"th\", {\n          key,\n          \"aria-label\": unref(t)(\"el.datepicker.weeksFull.\" + week),\n          scope: \"col\"\n        }, toDisplayString(unref(t)(\"el.datepicker.weeks.\" + week)), 9, _hoisted_2);\n      }), 128))]), (openBlock(true), createElementBlock(Fragment, null, renderList(unref(rows), (row, rowKey) => {\n        return openBlock(), createElementBlock(\"tr\", {\n          key: rowKey,\n          class: normalizeClass(unref(getRowKls)(_ctx.showWeekNumber ? row[2] : row[1]))\n        }, [(openBlock(true), createElementBlock(Fragment, null, renderList(row, (cell, columnKey) => {\n          return openBlock(), createElementBlock(\"td\", {\n            key: `${rowKey}.${columnKey}`,\n            ref_for: true,\n            ref: el => !unref(isUnmounting) && unref(isSelectedCell)(cell) && (currentCellRef.value = el),\n            class: normalizeClass(unref(getCellClasses)(cell)),\n            \"aria-current\": cell.isCurrent ? \"date\" : void 0,\n            \"aria-selected\": cell.isCurrent,\n            tabindex: _ctx.disabled ? void 0 : unref(isSelectedCell)(cell) ? 0 : -1,\n            \"aria-disabled\": _ctx.disabled,\n            onFocus: _cache[0] || (_cache[0] = (...args) => unref(handleFocus) && unref(handleFocus)(...args))\n          }, [createVNode(unref(ElDatePickerCell), {\n            cell\n          }, null, 8, [\"cell\"])], 42, _hoisted_3);\n        }), 128))], 2);\n      }), 128))], 512)], 42, _hoisted_1);\n    };\n  }\n});\nvar DateTable = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/date-picker-panel/src/date-picker-com/basic-date-table.vue\"]]);\nexport { DateTable as default };","map":{"version":3,"names":["props","__props","emit","__emit","WEEKS","rows","tbodyRef","currentCellRef","focus","isCurrent","isWeekActive","isSelectedCell","handlePickDate","handleMouseUp","handleMouseDown","handleMouseMove","handleFocus","useBasicDateTable","tableLabel","tableKls","getCellClasses","getRowKls","weekHeaderClass","t","useBasicDateTableDOM","isUnmounting","onBeforeUnmount","__expose","createElementBlock","unref","class","normalizeClass","cellspacing","cellpadding","role","onClick","_cache","args","onMousemove","onMousedown","onMouseup","createElementVNode","ref_key","ref","_ctx","showWeekNumber","openBlock","key","scope","Fragment","renderList","week","toDisplayString","_hoisted_2","row","rowKey","cell","columnKey","ref_for","el","value","tabindex","disabled","onFocus","createVNode","ElDatePickerCell","_hoisted_3"],"sources":["../../../../../../../packages/components/date-picker-panel/src/date-picker-com/basic-date-table.vue"],"sourcesContent":["<template>\n  <table\n    :aria-label=\"tableLabel\"\n    :class=\"tableKls\"\n    cellspacing=\"0\"\n    cellpadding=\"0\"\n    role=\"grid\"\n    @click=\"handlePickDate\"\n    @mousemove=\"handleMouseMove\"\n    @mousedown=\"handleMouseDown\"\n    @mouseup=\"handleMouseUp\"\n  >\n    <tbody ref=\"tbodyRef\">\n      <tr>\n        <th v-if=\"showWeekNumber\" scope=\"col\" :class=\"weekHeaderClass\" />\n        <th\n          v-for=\"(week, key) in WEEKS\"\n          :key=\"key\"\n          :aria-label=\"t('el.datepicker.weeksFull.' + week)\"\n          scope=\"col\"\n        >\n          {{ t('el.datepicker.weeks.' + week) }}\n        </th>\n      </tr>\n      <tr\n        v-for=\"(row, rowKey) in rows\"\n        :key=\"rowKey\"\n        :class=\"getRowKls(showWeekNumber ? row[2] : row[1])\"\n      >\n        <td\n          v-for=\"(cell, columnKey) in row\"\n          :key=\"`${rowKey}.${columnKey}`\"\n          :ref=\"\n            (el) =>\n              !isUnmounting &&\n              isSelectedCell(cell) &&\n              (currentCellRef = el as HTMLElement)\n          \"\n          :class=\"getCellClasses(cell)\"\n          :aria-current=\"cell.isCurrent ? 'date' : undefined\"\n          :aria-selected=\"cell.isCurrent\"\n          :tabindex=\"disabled ? undefined : isSelectedCell(cell) ? 0 : -1\"\n          :aria-disabled=\"disabled\"\n          @focus=\"handleFocus\"\n        >\n          <el-date-picker-cell :cell=\"cell\" />\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script lang=\"ts\" setup>\nimport { onBeforeUnmount } from 'vue'\nimport {\n  basicDateTableEmits,\n  basicDateTableProps,\n} from '../props/basic-date-table'\nimport {\n  useBasicDateTable,\n  useBasicDateTableDOM,\n} from '../composables/use-basic-date-table'\nimport ElDatePickerCell from './basic-cell-render'\n\nconst props = defineProps(basicDateTableProps)\nconst emit = defineEmits(basicDateTableEmits)\n\nconst {\n  WEEKS,\n  rows,\n  tbodyRef,\n  currentCellRef,\n\n  focus,\n  isCurrent,\n  isWeekActive,\n  isSelectedCell,\n\n  handlePickDate,\n  handleMouseUp,\n  handleMouseDown,\n  handleMouseMove,\n  handleFocus,\n} = useBasicDateTable(props, emit)\nconst { tableLabel, tableKls, getCellClasses, getRowKls, weekHeaderClass, t } =\n  useBasicDateTableDOM(props, {\n    isCurrent,\n    isWeekActive,\n  })\nlet isUnmounting = false\n\nonBeforeUnmount(() => {\n  isUnmounting = true\n})\n\ndefineExpose({\n  /**\n   * @description focus on current cell\n   */\n  focus,\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}