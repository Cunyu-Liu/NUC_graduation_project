{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"analyze\"\n};\nconst _hoisted_2 = {\n  class: \"select-header\"\n};\nconst _hoisted_3 = {\n  class: \"paper-title-cell\"\n};\nconst _hoisted_4 = {\n  class: \"paper-title-text\"\n};\nconst _hoisted_5 = {\n  key: 1\n};\nconst _hoisted_6 = {\n  class: \"paper-info\"\n};\nconst _hoisted_7 = {\n  class: \"paper-details\"\n};\nconst _hoisted_8 = {\n  style: {\n    \"margin-top\": \"20px\",\n    \"display\": \"flex\",\n    \"gap\": \"10px\"\n  }\n};\nconst _hoisted_9 = {\n  class: \"result-header\"\n};\nconst _hoisted_10 = {\n  class: \"result-meta\"\n};\nconst _hoisted_11 = [\"innerHTML\"];\nconst _hoisted_12 = {\n  class: \"keypoints-content\"\n};\nconst _hoisted_13 = {\n  class: \"gaps-content\"\n};\nconst _hoisted_14 = {\n  class: \"gap-header\"\n};\nconst _hoisted_15 = {\n  class: \"gap-detail-text\"\n};\nconst _hoisted_16 = {\n  class: \"gap-detail-text\"\n};\nconst _hoisted_17 = {\n  class: \"result-actions\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\");\n  const _component_el_checkbox_group = _resolveComponent(\"el-checkbox-group\");\n  const _component_el_tab_pane = _resolveComponent(\"el-tab-pane\");\n  const _component_el_descriptions_item = _resolveComponent(\"el-descriptions-item\");\n  const _component_el_descriptions = _resolveComponent(\"el-descriptions\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_rate = _resolveComponent(\"el-rate\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_tabs = _resolveComponent(\"el-tabs\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[24] || (_cache[24] = _createElementVNode(\"h2\", null, \"单篇论文分析\", -1 /* CACHED */)), !$setup.currentPaper ? (_openBlock(), _createBlock(_component_el_card, {\n    key: 0,\n    class: \"select-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"h3\", null, \"选择要分析的论文\", -1 /* CACHED */)), _createVNode(_component_el_button, {\n      onClick: $setup.refreshFiles,\n      icon: \"Refresh\",\n      size: \"small\"\n    }, {\n      default: _withCtx(() => [...(_cache[3] || (_cache[3] = [_createTextVNode(\"刷新列表\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]), _withDirectives((_openBlock(), _createBlock(_component_el_table, {\n      data: $setup.files,\n      style: {\n        \"width\": \"100%\",\n        \"margin-top\": \"20px\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        label: \"论文标题\",\n        \"min-width\": \"300\"\n      }, {\n        default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"span\", _hoisted_4, _toDisplayString(scope.row.title || '未命名论文'), 1 /* TEXT */), scope.row.analyzed ? (_openBlock(), _createBlock(_component_el_tag, {\n          key: 0,\n          size: \"small\",\n          type: \"success\"\n        }, {\n          default: _withCtx(() => [...(_cache[5] || (_cache[5] = [_createTextVNode(\"已分析\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        })) : _createCommentVNode(\"v-if\", true)])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        label: \"年份\",\n        width: \"100\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString($setup.formatYear(scope.row.year)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"venue\",\n        label: \"期刊/会议\",\n        width: \"200\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.venue || '未知'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\",\n        width: \"150\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"small\",\n          onClick: $event => $setup.selectPaper(scope.row)\n        }, {\n          default: _withCtx(() => [...(_cache[6] || (_cache[6] = [_createTextVNode(\" 分析此论文 \", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"])), [[_directive_loading, $setup.loading]]), $setup.files.length === 0 && !$setup.loading ? (_openBlock(), _createBlock(_component_el_empty, {\n      key: 0,\n      description: \"暂无论文，请先上传\"\n    })) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  })) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_el_card, {\n    class: \"paper-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_button, {\n      onClick: _cache[0] || (_cache[0] = $event => $setup.currentPaper = null),\n      icon: \"ArrowLeft\",\n      circle: \"\",\n      size: \"large\",\n      class: \"back-button\"\n    }), _cache[7] || (_cache[7] = _createElementVNode(\"i\", {\n      class: \"el-icon-document paper-icon\"\n    }, null, -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"h3\", null, _toDisplayString($setup.currentPaper.title || '未命名论文'), 1 /* TEXT */), _createElementVNode(\"p\", null, \"年份: \" + _toDisplayString($setup.formatYear($setup.currentPaper.year)) + \" | 发表于: \" + _toDisplayString($setup.currentPaper.venue || '未知'), 1 /* TEXT */)])])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_card, {\n    class: \"options-card\"\n  }, {\n    default: _withCtx(() => [_cache[13] || (_cache[13] = _createElementVNode(\"h3\", null, \"分析选项\", -1 /* CACHED */)), _createVNode(_component_el_checkbox_group, {\n      modelValue: $setup.selectedTasks,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.selectedTasks = $event)\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_checkbox, {\n        label: \"summary\"\n      }, {\n        default: _withCtx(() => [...(_cache[8] || (_cache[8] = [_createTextVNode(\"生成摘要\", -1 /* CACHED */)]))]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_checkbox, {\n        label: \"keypoints\"\n      }, {\n        default: _withCtx(() => [...(_cache[9] || (_cache[9] = [_createTextVNode(\"提取要点\", -1 /* CACHED */)]))]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_checkbox, {\n        label: \"gaps\"\n      }, {\n        default: _withCtx(() => [...(_cache[10] || (_cache[10] = [_createTextVNode(\"研究空白挖掘\", -1 /* CACHED */)]))]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      size: \"large\",\n      onClick: $setup.startAnalysis,\n      loading: $setup.analyzing\n    }, {\n      default: _withCtx(() => [...(_cache[11] || (_cache[11] = [_createElementVNode(\"i\", {\n        class: \"el-icon-video-play\"\n      }, null, -1 /* CACHED */), _createTextVNode(\" 开始分析 \", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\", \"loading\"]), $setup.result ? (_openBlock(), _createBlock(_component_el_button, {\n      key: 0,\n      type: \"warning\",\n      size: \"large\",\n      onClick: $setup.reanalyze,\n      loading: $setup.analyzing\n    }, {\n      default: _withCtx(() => [...(_cache[12] || (_cache[12] = [_createElementVNode(\"i\", {\n        class: \"el-icon-refresh\"\n      }, null, -1 /* CACHED */), _createTextVNode(\" 重新分析 \", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\", \"loading\"])) : _createCommentVNode(\"v-if\", true)])]),\n    _: 1 /* STABLE */\n  }), $setup.result ? (_openBlock(), _createBlock(_component_el_card, {\n    key: 0,\n    class: \"result-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_9, [_cache[15] || (_cache[15] = _createElementVNode(\"h3\", null, \"分析结果\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_10, [$setup.isHistoricalData ? (_openBlock(), _createBlock(_component_el_tag, {\n      key: 0,\n      type: \"info\",\n      size: \"small\"\n    }, {\n      default: _withCtx(() => [...(_cache[14] || (_cache[14] = [_createElementVNode(\"i\", {\n        class: \"el-icon-time\"\n      }, null, -1 /* CACHED */), _createTextVNode(\" 历史数据 \", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true), $setup.analysisTime ? (_openBlock(), _createBlock(_component_el_tag, {\n      key: 1,\n      type: \"success\",\n      size: \"small\",\n      style: {\n        \"margin-left\": \"8px\"\n      }\n    }, {\n      default: _withCtx(() => [_createTextVNode(\" 分析时间: \" + _toDisplayString($setup.analysisTime), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true)])]), _createVNode(_component_el_tabs, {\n      modelValue: $setup.activeTab,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.activeTab = $event)\n    }, {\n      default: _withCtx(() => [$setup.result.summary ? (_openBlock(), _createBlock(_component_el_tab_pane, {\n        key: 0,\n        label: \"摘要\",\n        name: \"summary\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", {\n          class: \"markdown-content summary-content\",\n          innerHTML: $setup.renderedSummary\n        }, null, 8 /* PROPS */, _hoisted_11)]),\n        _: 1 /* STABLE */\n      })) : _createCommentVNode(\"v-if\", true), $setup.result.keypoints ? (_openBlock(), _createBlock(_component_el_tab_pane, {\n        key: 1,\n        label: \"要点\",\n        name: \"keypoints\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.keypointsDisplay, (items, category) => {\n          return _openBlock(), _createElementBlock(\"div\", {\n            key: category,\n            class: \"keypoint-category\"\n          }, [_createElementVNode(\"h4\", null, _toDisplayString($setup.categoryNames[category] || category), 1 /* TEXT */), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(items, (item, index) => {\n            return _openBlock(), _createElementBlock(\"li\", {\n              key: index\n            }, _toDisplayString(item), 1 /* TEXT */);\n          }), 128 /* KEYED_FRAGMENT */))])]);\n        }), 128 /* KEYED_FRAGMENT */))])]),\n        _: 1 /* STABLE */\n      })) : _createCommentVNode(\"v-if\", true), $setup.result.gaps && $setup.result.gaps.length > 0 ? (_openBlock(), _createBlock(_component_el_tab_pane, {\n        key: 2,\n        label: \"研究空白\",\n        name: \"gaps\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.result.gaps, (gap, index) => {\n          return _openBlock(), _createElementBlock(\"div\", {\n            key: index,\n            class: \"gap-item\"\n          }, [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"h4\", null, \"研究空白 #\" + _toDisplayString(index + 1), 1 /* TEXT */), !gap.editing ? (_openBlock(), _createBlock(_component_el_button, {\n            key: 0,\n            type: \"primary\",\n            size: \"small\",\n            onClick: $event => $setup.startEditGap(gap, index),\n            icon: \"Edit\"\n          }, {\n            default: _withCtx(() => [...(_cache[16] || (_cache[16] = [_createTextVNode(\" 编辑 \", -1 /* CACHED */)]))]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"onClick\"])) : (_openBlock(), _createElementBlock(_Fragment, {\n            key: 1\n          }, [_createVNode(_component_el_button, {\n            type: \"success\",\n            size: \"small\",\n            onClick: $event => $setup.saveGap(gap, index),\n            icon: \"Check\"\n          }, {\n            default: _withCtx(() => [...(_cache[17] || (_cache[17] = [_createTextVNode(\" 保存 \", -1 /* CACHED */)]))]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n            size: \"small\",\n            onClick: $event => $setup.cancelEditGap(gap, index),\n            icon: \"Close\"\n          }, {\n            default: _withCtx(() => [...(_cache[18] || (_cache[18] = [_createTextVNode(\" 取消 \", -1 /* CACHED */)]))]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"onClick\"])], 64 /* STABLE_FRAGMENT */))]), !gap.editing ? (_openBlock(), _createBlock(_component_el_descriptions, {\n            key: 0,\n            column: 1,\n            border: \"\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_descriptions_item, {\n              label: \"类型\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_tag, {\n                type: $setup.getGapTypeColor(gap.gap_type)\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.getGapTypeLabel(gap.gap_type)), 1 /* TEXT */)]),\n                _: 2 /* DYNAMIC */\n              }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_descriptions_item, {\n              label: \"描述\"\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString(gap.description), 1 /* TEXT */)]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_descriptions_item, {\n              label: \"重要性\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_tag, {\n                type: gap.importance === 'high' ? 'danger' : gap.importance === 'medium' ? 'warning' : 'info'\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString(gap.importance === 'high' ? '高' : gap.importance === 'medium' ? '中' : '低'), 1 /* TEXT */)]),\n                _: 2 /* DYNAMIC */\n              }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_descriptions_item, {\n              label: \"难度\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_tag, {\n                type: gap.difficulty === 'high' ? 'danger' : gap.difficulty === 'medium' ? 'warning' : 'info'\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString(gap.difficulty === 'high' ? '高' : gap.difficulty === 'medium' ? '中' : '低'), 1 /* TEXT */)]),\n                _: 2 /* DYNAMIC */\n              }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */), gap.potential_approach ? (_openBlock(), _createBlock(_component_el_descriptions_item, {\n              key: 0,\n              label: \"潜在解决方法\"\n            }, {\n              default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_15, _toDisplayString(gap.potential_approach), 1 /* TEXT */)]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */)) : _createCommentVNode(\"v-if\", true), gap.expected_impact ? (_openBlock(), _createBlock(_component_el_descriptions_item, {\n              key: 1,\n              label: \"预期影响\"\n            }, {\n              default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_16, _toDisplayString(gap.expected_impact), 1 /* TEXT */)]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */)) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_descriptions_item, {\n              label: \"代码状态\"\n            }, {\n              default: _withCtx(() => [gap.generated_code_id ? (_openBlock(), _createBlock(_component_el_tag, {\n                key: 0,\n                type: \"success\"\n              }, {\n                default: _withCtx(() => [...(_cache[19] || (_cache[19] = [_createTextVNode(\"已生成\", -1 /* CACHED */)]))]),\n                _: 1 /* STABLE */\n              })) : (_openBlock(), _createBlock(_component_el_tag, {\n                key: 1,\n                type: \"info\"\n              }, {\n                default: _withCtx(() => [...(_cache[20] || (_cache[20] = [_createTextVNode(\"未生成\", -1 /* CACHED */)]))]),\n                _: 1 /* STABLE */\n              })), !gap.generated_code_id ? (_openBlock(), _createBlock(_component_el_button, {\n                key: 2,\n                type: \"primary\",\n                size: \"small\",\n                style: {\n                  \"margin-left\": \"10px\"\n                },\n                onClick: $event => $setup.generateCode(gap, index),\n                loading: gap.generating\n              }, {\n                default: _withCtx(() => [...(_cache[21] || (_cache[21] = [_createTextVNode(\" 生成代码 \", -1 /* CACHED */)]))]),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"onClick\", \"loading\"])) : (_openBlock(), _createBlock(_component_el_button, {\n                key: 3,\n                type: \"success\",\n                size: \"small\",\n                style: {\n                  \"margin-left\": \"10px\"\n                },\n                onClick: $event => $setup.viewCode(gap)\n              }, {\n                default: _withCtx(() => [...(_cache[22] || (_cache[22] = [_createTextVNode(\" 查看代码 \", -1 /* CACHED */)]))]),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"onClick\"]))]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)) : (_openBlock(), _createBlock(_component_el_form, {\n            key: 1,\n            \"label-width\": \"120px\",\n            class: \"gap-edit-form\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_form_item, {\n              label: \"类型\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_select, {\n                modelValue: gap.editData.gap_type,\n                \"onUpdate:modelValue\": $event => gap.editData.gap_type = $event,\n                style: {\n                  \"width\": \"100%\"\n                }\n              }, {\n                default: _withCtx(() => [_createVNode(_component_el_option, {\n                  label: \"方法论\",\n                  value: \"methodological\"\n                }), _createVNode(_component_el_option, {\n                  label: \"理论\",\n                  value: \"theoretical\"\n                }), _createVNode(_component_el_option, {\n                  label: \"数据\",\n                  value: \"data\"\n                }), _createVNode(_component_el_option, {\n                  label: \"应用\",\n                  value: \"application\"\n                }), _createVNode(_component_el_option, {\n                  label: \"评估\",\n                  value: \"evaluation\"\n                })]),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\"])]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_form_item, {\n              label: \"描述\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_input, {\n                type: \"textarea\",\n                rows: 3,\n                modelValue: gap.editData.description,\n                \"onUpdate:modelValue\": $event => gap.editData.description = $event\n              }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\"])]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_form_item, {\n              label: \"重要性\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_rate, {\n                modelValue: gap.editData.importance,\n                \"onUpdate:modelValue\": $event => gap.editData.importance = $event,\n                max: 3,\n                colors: ['#99A9BF', '#F7BA2A', '#FF9900'],\n                \"show-score\": \"\",\n                \"score-template\": {\n                  1: '低',\n                  2: '中',\n                  3: '高'\n                }[gap.editData.importance]\n              }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"score-template\"])]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_form_item, {\n              label: \"难度\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_rate, {\n                modelValue: gap.editData.difficulty,\n                \"onUpdate:modelValue\": $event => gap.editData.difficulty = $event,\n                max: 3,\n                colors: ['#67C23A', '#E6A23C', '#F56C6C'],\n                \"show-score\": \"\",\n                \"score-template\": {\n                  1: '低',\n                  2: '中',\n                  3: '高'\n                }[gap.editData.difficulty]\n              }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"score-template\"])]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_form_item, {\n              label: \"潜在解决方法\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_input, {\n                type: \"textarea\",\n                rows: 3,\n                modelValue: gap.editData.potential_approach,\n                \"onUpdate:modelValue\": $event => gap.editData.potential_approach = $event,\n                placeholder: \"请详细描述可能的解决方案...\"\n              }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\"])]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_form_item, {\n              label: \"预期影响\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_input, {\n                type: \"textarea\",\n                rows: 3,\n                modelValue: gap.editData.expected_impact,\n                \"onUpdate:modelValue\": $event => gap.editData.expected_impact = $event,\n                placeholder: \"请描述实施该方案的预期学术和实际影响...\"\n              }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\"])]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */))]);\n        }), 128 /* KEYED_FRAGMENT */))])]),\n        _: 1 /* STABLE */\n      })) : _createCommentVNode(\"v-if\", true)]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_17, [_createVNode(_component_el_button, {\n      onClick: $setup.downloadResult\n    }, {\n      default: _withCtx(() => [...(_cache[23] || (_cache[23] = [_createElementVNode(\"i\", {\n        class: \"el-icon-download\"\n      }, null, -1 /* CACHED */), _createTextVNode(\" 下载结果 \", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true)]))]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","$setup","currentPaper","_createBlock","_component_el_card","_hoisted_2","_createVNode","_component_el_button","onClick","refreshFiles","icon","size","_cache","_component_el_table","data","files","_component_el_table_column","label","default","_withCtx","scope","_hoisted_3","_hoisted_4","_toDisplayString","row","title","analyzed","_component_el_tag","type","width","formatYear","year","prop","venue","$event","selectPaper","loading","length","_component_el_empty","description","_hoisted_5","_hoisted_6","circle","_hoisted_7","_component_el_checkbox_group","selectedTasks","_component_el_checkbox","_hoisted_8","startAnalysis","analyzing","result","reanalyze","_hoisted_9","_hoisted_10","isHistoricalData","analysisTime","_component_el_tabs","activeTab","summary","_component_el_tab_pane","name","innerHTML","renderedSummary","keypoints","_hoisted_12","_Fragment","_renderList","keypointsDisplay","items","category","key","categoryNames","item","index","gaps","_hoisted_13","gap","_hoisted_14","editing","startEditGap","saveGap","cancelEditGap","_component_el_descriptions","column","border","_component_el_descriptions_item","getGapTypeColor","gap_type","getGapTypeLabel","importance","difficulty","potential_approach","_hoisted_15","expected_impact","_hoisted_16","generated_code_id","generateCode","generating","viewCode","_component_el_form","_component_el_form_item","_component_el_select","editData","_component_el_option","value","_component_el_input","rows","_component_el_rate","max","colors","placeholder","_hoisted_17","downloadResult"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/Analyze.vue"],"sourcesContent":["<template>\n  <div class=\"analyze\">\n    <h2>单篇论文分析</h2>\n\n    <el-card class=\"select-card\" v-if=\"!currentPaper\">\n      <div class=\"select-header\">\n        <h3>选择要分析的论文</h3>\n        <el-button @click=\"refreshFiles\" icon=\"Refresh\" size=\"small\">刷新列表</el-button>\n      </div>\n      <el-table :data=\"files\" style=\"width: 100%; margin-top: 20px\" v-loading=\"loading\">\n        <el-table-column label=\"论文标题\" min-width=\"300\">\n          <template #default=\"scope\">\n            <div class=\"paper-title-cell\">\n              <span class=\"paper-title-text\">{{ scope.row.title || '未命名论文' }}</span>\n              <el-tag v-if=\"scope.row.analyzed\" size=\"small\" type=\"success\">已分析</el-tag>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"年份\" width=\"100\">\n          <template #default=\"scope\">\n            {{ formatYear(scope.row.year) }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"venue\" label=\"期刊/会议\" width=\"200\">\n          <template #default=\"scope\">\n            {{ scope.row.venue || '未知' }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"150\">\n          <template #default=\"scope\">\n            <el-button type=\"primary\" size=\"small\" @click=\"selectPaper(scope.row)\">\n              分析此论文\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-empty v-if=\"files.length === 0 && !loading\" description=\"暂无论文，请先上传\" />\n    </el-card>\n\n    <div v-else>\n      <el-card class=\"paper-card\">\n        <div class=\"paper-info\">\n          <el-button @click=\"currentPaper = null\" icon=\"ArrowLeft\" circle size=\"large\" class=\"back-button\" />\n          <i class=\"el-icon-document paper-icon\"></i>\n          <div class=\"paper-details\">\n            <h3>{{ currentPaper.title || '未命名论文' }}</h3>\n            <p>年份: {{ formatYear(currentPaper.year) }} | 发表于: {{ currentPaper.venue || '未知' }}</p>\n          </div>\n        </div>\n      </el-card>\n\n      <el-card class=\"options-card\">\n        <h3>分析选项</h3>\n        <el-checkbox-group v-model=\"selectedTasks\">\n          <el-checkbox label=\"summary\">生成摘要</el-checkbox>\n          <el-checkbox label=\"keypoints\">提取要点</el-checkbox>\n          <el-checkbox label=\"gaps\">研究空白挖掘</el-checkbox>\n        </el-checkbox-group>\n\n        <div style=\"margin-top: 20px; display: flex; gap: 10px;\">\n          <el-button type=\"primary\" size=\"large\" @click=\"startAnalysis\" :loading=\"analyzing\">\n            <i class=\"el-icon-video-play\"></i> 开始分析\n          </el-button>\n          <el-button\n            v-if=\"result\"\n            type=\"warning\"\n            size=\"large\"\n            @click=\"reanalyze\"\n            :loading=\"analyzing\"\n          >\n            <i class=\"el-icon-refresh\"></i> 重新分析\n          </el-button>\n        </div>\n      </el-card>\n\n      <el-card class=\"result-card\" v-if=\"result\">\n        <div class=\"result-header\">\n          <h3>分析结果</h3>\n          <div class=\"result-meta\">\n            <el-tag v-if=\"isHistoricalData\" type=\"info\" size=\"small\">\n              <i class=\"el-icon-time\"></i> 历史数据\n            </el-tag>\n            <el-tag v-if=\"analysisTime\" type=\"success\" size=\"small\" style=\"margin-left: 8px\">\n              分析时间: {{ analysisTime }}\n            </el-tag>\n          </div>\n        </div>\n\n        <el-tabs v-model=\"activeTab\">\n          <el-tab-pane label=\"摘要\" name=\"summary\" v-if=\"result.summary\">\n            <div class=\"markdown-content summary-content\" v-html=\"renderedSummary\"></div>\n          </el-tab-pane>\n\n          <el-tab-pane label=\"要点\" name=\"keypoints\" v-if=\"result.keypoints\">\n            <div class=\"keypoints-content\">\n              <div v-for=\"(items, category) in keypointsDisplay\" :key=\"category\" class=\"keypoint-category\">\n                <h4>{{ categoryNames[category] || category }}</h4>\n                <ul>\n                  <li v-for=\"(item, index) in items\" :key=\"index\">{{ item }}</li>\n                </ul>\n              </div>\n            </div>\n          </el-tab-pane>\n\n          <el-tab-pane label=\"研究空白\" name=\"gaps\" v-if=\"result.gaps && result.gaps.length > 0\">\n            <div class=\"gaps-content\">\n              <div v-for=\"(gap, index) in result.gaps\" :key=\"index\" class=\"gap-item\">\n                <div class=\"gap-header\">\n                  <h4>研究空白 #{{ index + 1 }}</h4>\n                  <el-button\n                    v-if=\"!gap.editing\"\n                    type=\"primary\"\n                    size=\"small\"\n                    @click=\"startEditGap(gap, index)\"\n                    icon=\"Edit\"\n                  >\n                    编辑\n                  </el-button>\n                  <template v-else>\n                    <el-button type=\"success\" size=\"small\" @click=\"saveGap(gap, index)\" icon=\"Check\">\n                      保存\n                    </el-button>\n                    <el-button size=\"small\" @click=\"cancelEditGap(gap, index)\" icon=\"Close\">\n                      取消\n                    </el-button>\n                  </template>\n                </div>\n\n                <el-descriptions :column=\"1\" border v-if=\"!gap.editing\">\n                  <el-descriptions-item label=\"类型\">\n                    <el-tag :type=\"getGapTypeColor(gap.gap_type)\">{{ getGapTypeLabel(gap.gap_type) }}</el-tag>\n                  </el-descriptions-item>\n                  <el-descriptions-item label=\"描述\">{{ gap.description }}</el-descriptions-item>\n                  <el-descriptions-item label=\"重要性\">\n                    <el-tag :type=\"gap.importance === 'high' ? 'danger' : gap.importance === 'medium' ? 'warning' : 'info'\">\n                      {{ gap.importance === 'high' ? '高' : gap.importance === 'medium' ? '中' : '低' }}\n                    </el-tag>\n                  </el-descriptions-item>\n                  <el-descriptions-item label=\"难度\">\n                    <el-tag :type=\"gap.difficulty === 'high' ? 'danger' : gap.difficulty === 'medium' ? 'warning' : 'info'\">\n                      {{ gap.difficulty === 'high' ? '高' : gap.difficulty === 'medium' ? '中' : '低' }}\n                    </el-tag>\n                  </el-descriptions-item>\n                  <el-descriptions-item label=\"潜在解决方法\" v-if=\"gap.potential_approach\">\n                    <div class=\"gap-detail-text\">{{ gap.potential_approach }}</div>\n                  </el-descriptions-item>\n                  <el-descriptions-item label=\"预期影响\" v-if=\"gap.expected_impact\">\n                    <div class=\"gap-detail-text\">{{ gap.expected_impact }}</div>\n                  </el-descriptions-item>\n                  <el-descriptions-item label=\"代码状态\">\n                    <el-tag v-if=\"gap.generated_code_id\" type=\"success\">已生成</el-tag>\n                    <el-tag v-else type=\"info\">未生成</el-tag>\n                    <el-button\n                      v-if=\"!gap.generated_code_id\"\n                      type=\"primary\"\n                      size=\"small\"\n                      style=\"margin-left: 10px;\"\n                      @click=\"generateCode(gap, index)\"\n                      :loading=\"gap.generating\"\n                    >\n                      生成代码\n                    </el-button>\n                    <el-button\n                      v-else\n                      type=\"success\"\n                      size=\"small\"\n                      style=\"margin-left: 10px;\"\n                      @click=\"viewCode(gap)\"\n                    >\n                      查看代码\n                    </el-button>\n                  </el-descriptions-item>\n                </el-descriptions>\n\n                <el-form v-else label-width=\"120px\" class=\"gap-edit-form\">\n                  <el-form-item label=\"类型\">\n                    <el-select v-model=\"gap.editData.gap_type\" style=\"width: 100%;\">\n                      <el-option label=\"方法论\" value=\"methodological\" />\n                      <el-option label=\"理论\" value=\"theoretical\" />\n                      <el-option label=\"数据\" value=\"data\" />\n                      <el-option label=\"应用\" value=\"application\" />\n                      <el-option label=\"评估\" value=\"evaluation\" />\n                    </el-select>\n                  </el-form-item>\n                  <el-form-item label=\"描述\">\n                    <el-input type=\"textarea\" :rows=\"3\" v-model=\"gap.editData.description\" />\n                  </el-form-item>\n                  <el-form-item label=\"重要性\">\n                    <el-rate\n                      v-model=\"gap.editData.importance\"\n                      :max=\"3\"\n                      :colors=\"['#99A9BF', '#F7BA2A', '#FF9900']\"\n                      show-score\n                      :score-template=\"{1: '低', 2: '中', 3: '高'}[gap.editData.importance]\"\n                    />\n                  </el-form-item>\n                  <el-form-item label=\"难度\">\n                    <el-rate\n                      v-model=\"gap.editData.difficulty\"\n                      :max=\"3\"\n                      :colors=\"['#67C23A', '#E6A23C', '#F56C6C']\"\n                      show-score\n                      :score-template=\"{1: '低', 2: '中', 3: '高'}[gap.editData.difficulty]\"\n                    />\n                  </el-form-item>\n                  <el-form-item label=\"潜在解决方法\">\n                    <el-input type=\"textarea\" :rows=\"3\" v-model=\"gap.editData.potential_approach\" placeholder=\"请详细描述可能的解决方案...\" />\n                  </el-form-item>\n                  <el-form-item label=\"预期影响\">\n                    <el-input type=\"textarea\" :rows=\"3\" v-model=\"gap.editData.expected_impact\" placeholder=\"请描述实施该方案的预期学术和实际影响...\" />\n                  </el-form-item>\n                </el-form>\n              </div>\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n\n        <div class=\"result-actions\">\n          <el-button @click=\"downloadResult\">\n            <i class=\"el-icon-download\"></i> 下载结果\n          </el-button>\n        </div>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRoute } from 'vue-router'\nimport api, { connectSocket } from '@/api'\nimport { ElMessage, ElMessageBox } from 'element-plus'\n\n// 改进的Markdown渲染器 - 更好的格式支持\nconst renderMarkdown = (text) => {\n  if (!text) return ''\n\n  // HTML转义，防止XSS\n  const escapeHtml = (unsafe) => {\n    return unsafe\n      .replace(/&/g, \"&amp;\")\n      .replace(/</g, \"&lt;\")\n      .replace(/>/g, \"&gt;\")\n      .replace(/\"/g, \"&quot;\")\n      .replace(/'/g, \"&#039;\")\n  }\n\n  let html = escapeHtml(text)\n\n  // 代码块 (```language\\ncode\\n```)\n  html = html.replace(/```(\\w+)?\\n([\\s\\S]*?)```/g, (match, lang, code) => {\n    return `<div class=\"code-block\"><pre class=\"language-${lang || 'text'}\"><code>${code.trim()}</code></pre></div>`\n  })\n\n  // 行内代码 (`code`)\n  html = html.replace(/`([^`]+)`/g, '<code class=\"inline-code\">$1</code>')\n\n  // 标题 (# ## ### #### ##### ######)\n  html = html.replace(/^######\\s+(.+)$/gm, '<h6 class=\"md-h6\">$1</h6>')\n  html = html.replace(/^#####\\s+(.+)$/gm, '<h5 class=\"md-h5\">$1</h5>')\n  html = html.replace(/^####\\s+(.+)$/gm, '<h4 class=\"md-h4\">$1</h4>')\n  html = html.replace(/^###\\s+(.+)$/gm, '<h3 class=\"md-h3\">$1</h3>')\n  html = html.replace(/^##\\s+(.+)$/gm, '<h2 class=\"md-h2\">$1</h2>')\n  html = html.replace(/^#\\s+(.+)$/gm, '<h1 class=\"md-h1\">$1</h1>')\n\n  // 粗体和斜体\n  html = html.replace(/\\*\\*\\*(.+?)\\*\\*\\*/g, '<strong><em>$1</em></strong>')\n  html = html.replace(/\\*\\*(.+?)\\*\\*/g, '<strong class=\"md-bold\">$1</strong>')\n  html = html.replace(/\\*(.+?)\\*/g, '<em class=\"md-italic\">$1</em>')\n\n  // 删除线\n  html = html.replace(/~~(.+?)~~/g, '<del>$1</del>')\n\n  // 引用块\n  html = html.replace(/^&gt;\\s+(.+)$/gm, '<blockquote class=\"md-quote\">$1</blockquote>')\n  html = html.replace(/(<blockquote[^>]*>[\\s\\S]*?<\\/blockquote>)/g, '<div class=\"md-blockquote\">$1</div>')\n\n  // 分隔线\n  html = html.replace(/^---+$/gm, '<hr class=\"md-hr\" />')\n\n  // 无序列表 - 先处理列表项\n  html = html.replace(/^([*-])\\s+(.+)$/gm, '<li class=\"md-li\">$2</li>')\n  // 然后将连续的li包装成ul\n  html = html.replace(/(<li[^>]*>[\\s\\S]*?<\\/li>)(\\s*<li[^>]*>[\\s\\S]*?<\\/li>)*/g, (match) => {\n    return `<ul class=\"md-ul\">${match}</ul>`\n  })\n\n  // 有序列表\n  html = html.replace(/^\\d+\\.\\s+(.+)$/gm, '<li class=\"md-ol-li\">$1</li>')\n  html = html.replace(/(<li class=\"md-ol-li\">[\\s\\S]*?<\\/li>)(\\s*<li class=\"md-ol-li\">[\\s\\S]*?<\\/li>)*/g, (match) => {\n    return `<ol class=\"md-ol\">${match.replace(/md-ol-li/g, 'md-li')}</ol>`\n  })\n\n  // 链接 [text](url)\n  html = html.replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" target=\"_blank\" class=\"md-link\">$1</a>')\n\n  // 图片 ![alt](url)\n  html = html.replace(/!\\[([^\\]]*)\\]\\(([^)]+)\\)/g, '<img src=\"$2\" alt=\"$1\" class=\"md-img\" />')\n\n  // 将文本段落包装\n  const paragraphs = html.split(/\\n\\n+/)\n  html = paragraphs.map(p => {\n    p = p.trim()\n    if (!p) return ''\n    // 如果已经是以标签开头，不再包装\n    if (p.startsWith('<') && !p.startsWith('<br')) {\n      return p\n    }\n    return `<p class=\"md-paragraph\">${p}</p>`\n  }).join('\\n')\n\n  // 单换行转为br（在段落内部）\n  html = html.replace(/([^>])\\n/g, '$1<br>')\n\n  return html\n}\n\nexport default {\n  name: 'Analyze',\n  setup() {\n    const store = useStore()\n    const route = useRoute()\n\n    const files = computed(() => store.state.files)\n    const currentPaper = ref(null)\n    const selectedTasks = ref(['summary', 'keypoints', 'gaps'])\n    const analyzing = ref(false)\n    const result = ref(null)\n    const activeTab = ref('summary')\n    const isHistoricalData = ref(false)\n    const analysisTime = ref('')\n    const loading = ref(false)\n\n    // Markdown渲染计算属性\n    const renderedSummary = computed(() => {\n      if (!result.value?.summary) return ''\n      return renderMarkdown(result.value.summary)\n    })\n\n    const categoryNames = {\n      innovations: '核心创新点',\n      methods: '主要方法',\n      experiments: '实验设计',\n      conclusions: '主要结论',\n      contributions: '学术贡献',\n      limitations: '局限性',\n      background: '研究背景',\n      assumptions: '关键假设',\n      implications: '应用与影响',\n      future_work: '未来工作'\n    }\n\n    const getGapTypeLabel = (type) => {\n      const labels = {\n        'methodological': '方法论',\n        'theoretical': '理论',\n        'data': '数据',\n        'application': '应用',\n        'evaluation': '评估'\n      }\n      return labels[type] || type\n    }\n\n    const getGapTypeColor = (type) => {\n      const colors = {\n        'methodological': 'primary',\n        'theoretical': 'success',\n        'data': 'warning',\n        'application': 'info',\n        'evaluation': 'danger'\n      }\n      return colors[type] || ''\n    }\n\n    const keypointsDisplay = computed(() => {\n      if (!result.value?.keypoints) return {}\n      const filtered = {}\n      for (const [key, value] of Object.entries(result.value.keypoints)) {\n        if (value && value.length > 0) {\n          filtered[key] = value\n        }\n      }\n      return filtered\n    })\n\n    // 格式化年份显示\n    const formatYear = (year) => {\n      if (!year || year === 'unknown' || year === 0) return '未知'\n      // 确保年份是数字\n      const yearNum = parseInt(year)\n      if (isNaN(yearNum)) return '未知'\n      return yearNum\n    }\n\n    // 刷新文件列表\n    const refreshFiles = async () => {\n      loading.value = true\n      try {\n        await store.dispatch('fetchFiles')\n        ElMessage.success('论文列表已刷新')\n      } catch (error) {\n        console.error('刷新失败:', error)\n        ElMessage.error('刷新失败')\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const selectPaper = async (paper) => {\n      console.log('[DEBUG] selectPaper 被调用:', paper)\n\n      // 确保paper对象有id字段\n      if (!paper || !paper.id) {\n        ElMessage.error('论文数据无效')\n        return\n      }\n\n      // 创建深拷贝避免引用问题\n      currentPaper.value = { ...paper }\n      result.value = null\n      isHistoricalData.value = false\n      analysisTime.value = ''\n\n      console.log('[DEBUG] currentPaper.value 已设置:', currentPaper.value)\n\n      // 确保数据完整性，如果缺少关键信息则从API重新获取\n      if (!paper.year || !paper.venue || !paper.authors) {\n        try {\n          const response = await api.getPaper(paper.id)\n          if (response.success && response.data) {\n            // 合并API返回的数据\n            currentPaper.value = { ...currentPaper.value, ...response.data }\n            console.log('[DEBUG] 从API更新了论文信息:', currentPaper.value)\n          }\n        } catch (error) {\n          console.error('[ERROR] 获取论文详情失败:', error)\n        }\n      }\n\n      // 自动加载历史分析结果\n      try {\n        console.log('[DEBUG] 加载历史分析结果, paper_id:', paper.id)\n        const response = await api.getPaperAnalysis(paper.id)\n\n        console.log('[DEBUG] 历史分析响应:', response)\n\n        if (response.success && response.data) {\n          const analysisData = response.data\n\n          // 格式化结果以便显示\n          result.value = {\n            summary: analysisData.summary_text,\n            keypoints: analysisData.keypoints || {},\n            gaps: analysisData.gaps || []\n          }\n\n          // 标记为历史数据\n          isHistoricalData.value = true\n\n          // 显示分析时间\n          if (analysisData.created_at) {\n            const createdDate = new Date(analysisData.created_at)\n            analysisTime.value = createdDate.toLocaleString('zh-CN', {\n              year: 'numeric',\n              month: '2-digit',\n              day: '2-digit',\n              hour: '2-digit',\n              minute: '2-digit'\n            })\n          }\n\n          ElMessage.info('已加载历史分析结果')\n        }\n      } catch (error) {\n        console.error('[ERROR] 加载历史分析失败:', error)\n        // 不显示错误提示，因为可能只是没有历史记录\n      }\n\n      console.log('[DEBUG] selectPaper 完成, currentPaper.value.id =', currentPaper.value?.id)\n    }\n\n    const startAnalysis = async () => {\n      // 验证已选择论文 - 使用更健壮的方式获取论文ID\n      console.log('[DEBUG] startAnalysis 被调用')\n      console.log('[DEBUG] currentPaper.value:', currentPaper.value)\n\n      // 尝试从currentPaper获取ID（支持多种格式）\n      let paperId = null\n      if (currentPaper.value) {\n        paperId = currentPaper.value.id || currentPaper.value.paper_id\n      }\n\n      console.log('[DEBUG] 提取的paperId:', paperId)\n\n      if (!paperId) {\n        console.error('[ERROR] 没有选择论文或论文ID为空')\n        ElMessage.error('请先选择要分析的论文')\n        return\n      }\n\n      // 确保currentPaper有正确的id字段\n      if (!currentPaper.value.id && paperId) {\n        currentPaper.value.id = paperId\n      }\n\n      if (selectedTasks.value.length === 0) {\n        ElMessage.warning('请至少选择一项分析任务')\n        return\n      }\n\n      // 开始新分析时，清除历史数据标志\n      isHistoricalData.value = false\n      analysisTime.value = ''\n\n      // 连接WebSocket\n      connectSocket()\n      store.commit('SHOW_PROGRESS_DIALOG', true)\n      store.commit('SET_PROGRESS', { progress: 0, message: '开始分析...', step: '' })\n\n      analyzing.value = true\n\n      try {\n        console.log('[DEBUG] 开始分析, paper_id:', currentPaper.value.id)\n        console.log('[DEBUG] 分析任务:', selectedTasks.value)\n\n        const response = await api.analyzePaperV4(\n          paperId,\n          selectedTasks.value,\n          true  // auto_generate_code\n        )\n\n        console.log('[DEBUG] 分析响应:', response)\n\n        if (response.success) {\n          // 提取分析结果\n          const analysisData = response.data\n\n          // 格式化结果以便显示\n          result.value = {\n            summary: analysisData.summary_text,\n            keypoints: analysisData.keypoints || {},\n            gaps: analysisData.gaps || []\n          }\n\n          // 更新论文状态为已分析\n          store.commit('UPDATE_FILE_STATUS', {\n            paperId: paperId,\n            analyzed: true,\n            analysisData: {\n              summary: result.value.summary,\n              keypoints: result.value.keypoints\n            }\n          })\n\n          store.commit('SET_PROGRESS', { progress: 100, message: '分析完成!' })\n          ElMessage.success('分析完成!')\n        } else {\n          ElMessage.error(response.error || '分析失败')\n        }\n      } catch (error) {\n        console.error('[ERROR] 分析失败:', error)\n\n        // 提供更友好的错误提示\n        let errorMsg = '分析失败'\n        const errorDetail = error.response?.data?.error || error.message\n\n        if (errorDetail) {\n          if (errorDetail.includes('PDF') || errorDetail.includes('文件')) {\n            errorMsg = 'PDF文件读取失败，请检查文件是否存在'\n          } else if (errorDetail.includes('LLM') || errorDetail.includes('AI')) {\n            errorMsg = 'AI分析服务异常，请稍后重试'\n          } else if (errorDetail.includes('timeout') || errorDetail.includes('超时')) {\n            errorMsg = '分析超时，请稍后重试或减少分析任务'\n          } else if (errorDetail.includes('网络') || errorDetail.includes('network')) {\n            errorMsg = '网络连接异常，请检查网络连接'\n          } else {\n            errorMsg = `分析失败: ${errorDetail}`\n          }\n        }\n\n        ElMessage.error({\n          message: errorMsg,\n          duration: 5000,\n          showClose: true\n        })\n      } finally {\n        analyzing.value = false\n        store.commit('SHOW_PROGRESS_DIALOG', false)\n      }\n    }\n\n    const reanalyze = async () => {\n      // 确认是否要重新分析\n      try {\n        await ElMessageBox.confirm(\n          '重新分析将覆盖当前的分析结果，是否继续？',\n          '确认操作',\n          {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }\n        )\n\n        // 清除历史数据标志\n        isHistoricalData.value = false\n        analysisTime.value = ''\n\n        // 清空当前结果\n        result.value = null\n\n        // 开始新的分析\n        await startAnalysis()\n      } catch {\n        // 用户取消操作\n        ElMessage.info('已取消重新分析')\n      }\n    }\n\n    const downloadResult = () => {\n      const filename = (currentPaper.value.title || 'paper').replace(/[^a-zA-Z0-9\\u4e00-\\u9fa5]/g, '_')\n      if (activeTab.value === 'summary' && result.value?.summary) {\n        const blob = new Blob([result.value.summary], { type: 'text/plain;charset=utf-8' })\n        const url = URL.createObjectURL(blob)\n        const a = document.createElement('a')\n        a.href = url\n        a.download = `${filename}_summary.txt`\n        a.click()\n        URL.revokeObjectURL(url)\n      } else if (activeTab.value === 'keypoints' && result.value?.keypoints) {\n        const content = Object.entries(result.value.keypoints)\n          .map(([key, items]) => `${categoryNames[key] || key}:\\n${items.map(i => `  - ${i}`).join('\\n')}`)\n          .join('\\n\\n')\n        const blob = new Blob([content], { type: 'text/plain;charset=utf-8' })\n        const url = URL.createObjectURL(blob)\n        const a = document.createElement('a')\n        a.href = url\n        a.download = `${filename}_keypoints.txt`\n        a.click()\n        URL.revokeObjectURL(url)\n      }\n    }\n\n    // 研究空白编辑功能\n    const startEditGap = (gap, index) => {\n      // 保存原始数据\n      gap.originalData = { ...gap }\n      // 将字符串importance转换为数值用于el-rate\n      const importanceValue = gap.importance === 'high' ? 3 : gap.importance === 'medium' ? 2 : 1\n      const difficultyValue = gap.difficulty === 'high' ? 3 : gap.difficulty === 'medium' ? 2 : 1\n      // 创建编辑副本\n      gap.editData = {\n        gap_type: gap.gap_type || '',\n        description: gap.description || '',\n        importance: importanceValue,\n        difficulty: difficultyValue,\n        potential_approach: gap.potential_approach || '',\n        expected_impact: gap.expected_impact || ''\n      }\n      gap.editing = true\n    }\n\n    const saveGap = async (gap, index) => {\n      try {\n        // 转换数值为字符串\n        const importanceStr = gap.editData.importance >= 3 ? 'high' : gap.editData.importance >= 2 ? 'medium' : 'low'\n        const difficultyStr = gap.editData.difficulty >= 3 ? 'high' : gap.editData.difficulty >= 2 ? 'medium' : 'low'\n\n        // 调用API保存到数据库\n        const response = await api.updateGap(gap.id, {\n          gap_type: gap.editData.gap_type,\n          description: gap.editData.description,\n          importance: importanceStr,\n          difficulty: difficultyStr,\n          potential_approach: gap.editData.potential_approach,\n          expected_impact: gap.editData.expected_impact\n        })\n\n        if (response.success) {\n          // 更新本地数据\n          Object.assign(gap, gap.editData)\n          gap.editing = false\n          ElMessage.success('保存成功')\n        } else {\n          ElMessage.error(response.error || '保存失败')\n        }\n      } catch (error) {\n        console.error('保存失败:', error)\n        ElMessage.error('保存失败: ' + (error.message || '未知错误'))\n      }\n    }\n\n    const cancelEditGap = (gap, index) => {\n      // 恢复原始数据\n      Object.assign(gap, gap.originalData)\n      gap.editing = false\n      delete gap.originalData\n      delete gap.editData\n    }\n\n    const generateCode = async (gap, index) => {\n      try {\n        gap.generating = true\n        ElMessage.info('正在生成代码，请稍候...')\n\n        // 调用代码生成API\n        const response = await api.generateCode(gap.id, 'method_improvement')\n\n        if (response.success) {\n          gap.generated_code_id = response.data.id\n          ElMessage.success('代码生成成功！')\n        } else {\n          ElMessage.error(response.error || '代码生成失败')\n        }\n      } catch (error) {\n        console.error('代码生成失败:', error)\n        ElMessage.error('代码生成失败: ' + (error.message || '未知错误'))\n      } finally {\n        gap.generating = false\n      }\n    }\n\n    const viewCode = async (gap) => {\n      try {\n        if (!gap.generated_code_id) {\n          ElMessage.warning('暂无生成的代码')\n          return\n        }\n\n        // 获取代码详情\n        const response = await api.getCode(gap.generated_code_id)\n        if (response.success && response.data) {\n          const code = response.data.code || '// 暂无代码内容'\n          const language = response.data.language || 'python'\n\n          // 打开代码查看对话框\n          ElMessageBox.alert(\n            `<div style=\"max-height: 500px; overflow: auto;\">\n              <pre style=\"background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 8px; font-size: 13px; line-height: 1.6; margin: 0;\"><code>${code.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</code></pre>\n            </div>`,\n            `查看代码 (${language})`,\n            {\n              confirmButtonText: '关闭',\n              dangerouslyUseHTMLString: true,\n              customClass: 'code-view-dialog'\n            }\n          )\n        } else {\n          ElMessage.error('获取代码失败')\n        }\n      } catch (error) {\n        console.error('获取代码失败:', error)\n        ElMessage.error('获取代码失败: ' + (error.message || '未知错误'))\n      }\n    }\n\n    onMounted(async () => {\n      // 先等待文件列表加载完成\n      await store.dispatch('fetchFiles')\n\n      // 等待一下确保store已更新\n      await new Promise(resolve => setTimeout(resolve, 100))\n\n      // 检查URL参数中的paperId\n      const paperIdFromQuery = route.query.paperId\n      if (paperIdFromQuery) {\n        console.log('[DEBUG] 从URL获取paperId:', paperIdFromQuery)\n        console.log('[DEBUG] 当前文件列表:', store.state.files.length)\n\n        // 从store中查找对应的论文\n        const paper = store.state.files.find(f => f.id === parseInt(paperIdFromQuery))\n        if (paper) {\n          console.log('[DEBUG] 找到论文，自动选中:', paper.title)\n          await selectPaper(paper)\n        } else {\n          console.error('[ERROR] 未找到论文ID:', paperIdFromQuery)\n          ElMessage.error(`未找到ID为 ${paperIdFromQuery} 的论文`)\n        }\n      }\n    })\n\n    return {\n      files,\n      currentPaper,\n      selectedTasks,\n      analyzing,\n      result,\n      activeTab,\n      isHistoricalData,\n      analysisTime,\n      categoryNames,\n      keypointsDisplay,\n      renderedSummary,\n      loading,\n      formatYear,\n      refreshFiles,\n      getGapTypeLabel,\n      getGapTypeColor,\n      selectPaper,\n      startAnalysis,\n      reanalyze,\n      downloadResult,\n      startEditGap,\n      saveGap,\n      cancelEditGap,\n      generateCode,\n      viewCode\n    }\n  }\n}\n</script>\n\n<style scoped>\n.analyze {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\nh2 {\n  margin-bottom: 20px;\n  color: #303133;\n}\n\n.select-card,\n.paper-card,\n.options-card,\n.result-card {\n  margin-bottom: 20px;\n}\n\n.paper-info {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.back-button {\n  flex-shrink: 0;\n}\n\n.paper-icon {\n  font-size: 48px;\n  color: #409eff;\n}\n\n.paper-details {\n  flex: 1;\n}\n\n.paper-details h3 {\n  margin: 0 0 8px 0;\n  color: #303133;\n}\n\n.paper-details p {\n  margin: 0;\n  color: #606266;\n  font-size: 14px;\n}\n\n.markdown-content {\n  line-height: 1.8;\n  color: #303133;\n  padding: 15px;\n  background: #f5f7fa;\n  border-radius: 4px;\n}\n\n.markdown-content h1,\n.markdown-content h2,\n.markdown-content h3 {\n  margin-top: 20px;\n  margin-bottom: 10px;\n  color: #2c3e50;\n}\n\n.markdown-content h1:first-child {\n  margin-top: 0;\n}\n\n.markdown-content p {\n  margin-bottom: 15px;\n}\n\n.markdown-content ul,\n.markdown-content ol {\n  margin-bottom: 15px;\n  padding-left: 30px;\n}\n\n.markdown-content li {\n  margin-bottom: 5px;\n}\n\n.markdown-content code {\n  background: #e8e8e8;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-family: 'Courier New', monospace;\n}\n\n.markdown-content pre {\n  background: #2d2d2d;\n  color: #ccc;\n  padding: 15px;\n  border-radius: 5px;\n  overflow-x: auto;\n  margin-bottom: 15px;\n}\n\n.markdown-content pre code {\n  background: transparent;\n  padding: 0;\n  color: #ccc;\n}\n\n.summary-content {\n  white-space: pre-wrap;\n  line-height: 1.9;\n  font-size: 15px;\n}\n\n.summary-content h1,\n.summary-content h2,\n.summary-content h3,\n.summary-content h4,\n.summary-content h5,\n.summary-content h6 {\n  margin-top: 24px;\n  margin-bottom: 16px;\n  font-weight: 600;\n  line-height: 1.4;\n  color: #2c3e50;\n}\n\n.summary-content h1 { font-size: 28px; border-bottom: 2px solid #e0e0e0; padding-bottom: 10px; }\n.summary-content h2 { font-size: 24px; border-bottom: 1px solid #e0e0e0; padding-bottom: 8px; }\n.summary-content h3 { font-size: 20px; }\n.summary-content h4 { font-size: 18px; }\n.summary-content h5 { font-size: 16px; }\n.summary-content h6 { font-size: 14px; }\n\n.summary-content p {\n  margin-bottom: 16px;\n  text-align: justify;\n  text-indent: 2em;\n}\n\n.summary-content ul,\n.summary-content ol {\n  margin-bottom: 20px;\n  padding-left: 30px;\n}\n\n.summary-content li {\n  margin-bottom: 10px;\n  line-height: 1.8;\n}\n\n.summary-content ul li {\n  list-style-type: disc;\n}\n\n.summary-content ol li {\n  list-style-type: decimal;\n}\n\n.summary-content code {\n  background: #f5f5f5;\n  border: 1px solid #e0e0e0;\n  padding: 3px 8px;\n  border-radius: 4px;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 14px;\n  color: #e74c3c;\n}\n\n.summary-content pre {\n  background: #2d2d2d;\n  color: #f8f8f2;\n  padding: 20px;\n  border-radius: 8px;\n  overflow-x: auto;\n  margin-bottom: 20px;\n  border: 1px solid #404040;\n}\n\n.summary-content pre code {\n  background: transparent;\n  border: none;\n  padding: 0;\n  color: #f8f8f2;\n  font-size: 13px;\n  line-height: 1.6;\n}\n\n.summary-content blockquote {\n  margin: 20px 0;\n  padding: 12px 20px;\n  border-left: 4px solid #409eff;\n  background: #ecf5ff;\n  color: #606266;\n  font-style: italic;\n}\n\n.summary-content table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-bottom: 20px;\n}\n\n.summary-content table th,\n.summary-content table td {\n  border: 1px solid #d0d7de;\n  padding: 10px 12px;\n  text-align: left;\n}\n\n.summary-content table th {\n  background: #f6f8fa;\n  font-weight: 600;\n}\n\n.summary-content strong {\n  font-weight: 600;\n  color: #2c3e50;\n}\n\n.summary-content em {\n  font-style: italic;\n  color: #555;\n}\n\n.summary-content a {\n  color: #409eff;\n  text-decoration: none;\n  border-bottom: 1px solid #409eff;\n}\n\n.summary-content a:hover {\n  color: #66b1ff;\n  border-bottom-color: #66b1ff;\n}\n\n.keypoints-content {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 20px;\n}\n\n.keypoint-category {\n  padding: 15px;\n  background: #f5f7fa;\n  border-radius: 4px;\n}\n\n.keypoint-category h4 {\n  color: #409eff;\n  margin-bottom: 10px;\n}\n\n.keypoint-category ul {\n  list-style: none;\n  padding: 0;\n}\n\n.keypoint-category li {\n  padding: 8px 0;\n  padding-left: 20px;\n  position: relative;\n}\n\n.keypoint-category li:before {\n  content: '•';\n  position: absolute;\n  left: 0;\n  color: #409eff;\n  font-weight: bold;\n}\n\n.gaps-content {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.gap-item {\n  padding: 20px;\n  background: #f5f7fa;\n  border-radius: 4px;\n  border-left: 4px solid #409eff;\n}\n\n.gap-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.gap-header h4 {\n  color: #409eff;\n  margin: 0;\n}\n\n.gap-item p {\n  margin: 8px 0;\n  line-height: 1.6;\n}\n\n.gap-edit-form {\n  background: white;\n  padding: 20px;\n  border-radius: 4px;\n  margin-top: 15px;\n}\n\n.gap-detail-text {\n  white-space: pre-wrap;\n  line-height: 1.8;\n  color: #606266;\n  background: #f5f7fa;\n  padding: 12px;\n  border-radius: 4px;\n}\n\n.code-view-dialog {\n  max-width: 800px;\n}\n\n.result-actions {\n  margin-top: 20px;\n  text-align: right;\n}\n\n.result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.result-header h3 {\n  margin: 0;\n  color: #303133;\n}\n\n.result-meta {\n  display: flex;\n  align-items: center;\n}\n\n/* 选择论文表格样式 */\n.select-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.select-header h3 {\n  margin: 0;\n}\n\n.paper-title-cell {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.paper-title-text {\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* 返回按钮样式增强 */\n.back-button {\n  margin-right: 10px;\n  transition: all 0.3s;\n}\n\n.back-button:hover {\n  transform: scale(1.1);\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}