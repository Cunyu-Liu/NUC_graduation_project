{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"files\"\n};\nconst _hoisted_2 = {\n  class: \"table-cell-text\"\n};\nconst _hoisted_3 = {\n  class: \"table-cell-text\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", null, \"论文管理\", -1 /* CACHED */)), _createVNode(_component_el_card, null, {\n    default: _withCtx(() => [_createVNode(_component_el_table, {\n      data: $setup.files,\n      style: {\n        \"width\": \"100%\"\n      },\n      \"row-style\": {\n        height: '60px'\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"title\",\n        label: \"论文标题\",\n        \"min-width\": \"300\",\n        \"show-overflow-tooltip\": \"\"\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createVNode(_component_el_tooltip, {\n          content: row.title || '无标题',\n          placement: \"top\",\n          effect: \"dark\"\n        }, {\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, _toDisplayString(row.title || '无标题'), 1 /* TEXT */)]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"content\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"year\",\n        label: \"年份\",\n        width: \"100\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"venue\",\n        label: \"发表期刊/会议\",\n        \"min-width\": \"250\",\n        \"show-overflow-tooltip\": \"\"\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createVNode(_component_el_tooltip, {\n          content: row.venue || '未知',\n          placement: \"top\",\n          effect: \"dark\"\n        }, {\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, _toDisplayString(row.venue || '未知'), 1 /* TEXT */)]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"content\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"created_at\",\n        label: \"上传时间\",\n        formatter: $setup.formatTime,\n        width: \"180\"\n      }, null, 8 /* PROPS */, [\"formatter\"]), _createVNode(_component_el_table_column, {\n        label: \"操作\",\n        width: \"200\",\n        fixed: \"right\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_button, {\n          size: \"small\",\n          onClick: $event => $setup.analyzeFile(scope.row)\n        }, {\n          default: _withCtx(() => [...(_cache[0] || (_cache[0] = [_createElementVNode(\"i\", {\n            class: \"el-icon-video-play\"\n          }, null, -1 /* CACHED */), _createTextVNode(\" 分析 \", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          size: \"small\",\n          type: \"danger\",\n          onClick: $event => $setup.deleteFile(scope.row)\n        }, {\n          default: _withCtx(() => [...(_cache[1] || (_cache[1] = [_createElementVNode(\"i\", {\n            class: \"el-icon-delete\"\n          }, null, -1 /* CACHED */), _createTextVNode(\" 删除 \", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"]), $setup.files.length === 0 ? (_openBlock(), _createBlock(_component_el_empty, {\n      key: 0,\n      description: \"暂无论文，请先上传PDF文件\"\n    })) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_el_card","_component_el_table","data","$setup","files","style","height","_component_el_table_column","prop","label","default","_withCtx","row","_component_el_tooltip","content","title","placement","effect","_hoisted_2","_toDisplayString","width","venue","_hoisted_3","formatter","formatTime","fixed","scope","_component_el_button","size","onClick","$event","analyzeFile","_cache","type","deleteFile","length","_createBlock","_component_el_empty","description"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/Files.vue"],"sourcesContent":["<template>\n  <div class=\"files\">\n    <h2>论文管理</h2>\n\n    <el-card>\n      <el-table :data=\"files\" style=\"width: 100%\" :row-style=\"{ height: '60px' }\">\n        <el-table-column prop=\"title\" label=\"论文标题\" min-width=\"300\" show-overflow-tooltip>\n          <template #default=\"{ row }\">\n            <el-tooltip :content=\"row.title || '无标题'\" placement=\"top\" effect=\"dark\">\n              <div class=\"table-cell-text\">{{ row.title || '无标题' }}</div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"year\" label=\"年份\" width=\"100\" />\n        <el-table-column prop=\"venue\" label=\"发表期刊/会议\" min-width=\"250\" show-overflow-tooltip>\n          <template #default=\"{ row }\">\n            <el-tooltip :content=\"row.venue || '未知'\" placement=\"top\" effect=\"dark\">\n              <div class=\"table-cell-text\">{{ row.venue || '未知' }}</div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"created_at\" label=\"上传时间\" :formatter=\"formatTime\" width=\"180\" />\n        <el-table-column label=\"操作\" width=\"200\" fixed=\"right\">\n          <template #default=\"scope\">\n            <el-button size=\"small\" @click=\"analyzeFile(scope.row)\">\n              <i class=\"el-icon-video-play\"></i> 分析\n            </el-button>\n            <el-button size=\"small\" type=\"danger\" @click=\"deleteFile(scope.row)\">\n              <i class=\"el-icon-delete\"></i> 删除\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-empty v-if=\"files.length === 0\" description=\"暂无论文，请先上传PDF文件\" />\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\n\nexport default {\n  name: 'Files',\n  setup() {\n    const store = useStore()\n    const router = useRouter()\n\n    const files = computed(() => store.state.files)\n\n    const formatTime = (row, column, time) => {\n      if (!time) return '-'\n      return new Date(time).toLocaleString('zh-CN')\n    }\n\n    const analyzeFile = (paper) => {\n      router.push({ path: '/analyze', query: { paperId: paper.id } })\n    }\n\n    const deleteFile = async (paper) => {\n      try {\n        await ElMessageBox.confirm(\n          `确定要删除论文 \"${paper.title || '未命名'}\" 吗？`,\n          '确认删除',\n          {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }\n        )\n\n        const success = await store.dispatch('deleteFile', paper.id)\n        if (success) {\n          ElMessage.success('删除成功')\n        } else {\n          ElMessage.error('删除失败')\n        }\n      } catch {\n        // 用户取消\n      }\n    }\n\n    onMounted(() => {\n      store.dispatch('fetchFiles')\n    })\n\n    return {\n      files,\n      formatTime,\n      analyzeFile,\n      deleteFile\n    }\n  }\n}\n</script>\n\n<style scoped>\n.files {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\nh2 {\n  margin-bottom: 20px;\n  color: #303133;\n}\n\n.table-cell-text {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  cursor: pointer;\n}\n\n.table-cell-text:hover {\n  color: #409EFF;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAO;;EAQDA,KAAK,EAAC;AAAiB;;EAQvBA,KAAK,EAAC;AAAiB;;;;;;;;uBAhBxCC,mBAAA,CAmCM,OAnCNC,UAmCM,G,0BAlCJC,mBAAA,CAAa,YAAT,MAAI,qBAERC,YAAA,CA+BUC,kBAAA;sBA9BR,MA2BW,CA3BXD,YAAA,CA2BWE,mBAAA;MA3BAC,IAAI,EAAEC,MAAA,CAAAC,KAAK;MAAEC,KAAmB,EAAnB;QAAA;MAAA,CAAmB;MAAE,WAAS,EAAE;QAAAC,MAAA;MAAA;;wBACtD,MAMkB,CANlBP,YAAA,CAMkBQ,0BAAA;QANDC,IAAI,EAAC,OAAO;QAACC,KAAK,EAAC,MAAM;QAAC,WAAS,EAAC,KAAK;QAAC,uBAAqB,EAArB;;QAC9CC,OAAO,EAAAC,QAAA,CAChB,CAEa;UAHOC;QAAG,OACvBb,YAAA,CAEac,qBAAA;UAFAC,OAAO,EAAEF,GAAG,CAACG,KAAK;UAAWC,SAAS,EAAC,KAAK;UAACC,MAAM,EAAC;;4BAC/D,MAA2D,CAA3DnB,mBAAA,CAA2D,OAA3DoB,UAA2D,EAAAC,gBAAA,CAA3BP,GAAG,CAACG,KAAK,0B;;;;UAI/ChB,YAAA,CAAsDQ,0BAAA;QAArCC,IAAI,EAAC,MAAM;QAACC,KAAK,EAAC,IAAI;QAACW,KAAK,EAAC;UAC9CrB,YAAA,CAMkBQ,0BAAA;QANDC,IAAI,EAAC,OAAO;QAACC,KAAK,EAAC,SAAS;QAAC,WAAS,EAAC,KAAK;QAAC,uBAAqB,EAArB;;QACjDC,OAAO,EAAAC,QAAA,CAChB,CAEa;UAHOC;QAAG,OACvBb,YAAA,CAEac,qBAAA;UAFAC,OAAO,EAAEF,GAAG,CAACS,KAAK;UAAUL,SAAS,EAAC,KAAK;UAACC,MAAM,EAAC;;4BAC9D,MAA0D,CAA1DnB,mBAAA,CAA0D,OAA1DwB,UAA0D,EAAAH,gBAAA,CAA1BP,GAAG,CAACS,KAAK,yB;;;;UAI/CtB,YAAA,CAAsFQ,0BAAA;QAArEC,IAAI,EAAC,YAAY;QAACC,KAAK,EAAC,MAAM;QAAEc,SAAS,EAAEpB,MAAA,CAAAqB,UAAU;QAAEJ,KAAK,EAAC;8CAC9ErB,YAAA,CASkBQ,0BAAA;QATDE,KAAK,EAAC,IAAI;QAACW,KAAK,EAAC,KAAK;QAACK,KAAK,EAAC;;QACjCf,OAAO,EAAAC,QAAA,CAGJe,KAHW,KACvB3B,YAAA,CAEY4B,oBAAA;UAFDC,IAAI,EAAC,OAAO;UAAEC,OAAK,EAAAC,MAAA,IAAE3B,MAAA,CAAA4B,WAAW,CAACL,KAAK,CAACd,GAAG;;4BACnD,MAAkC,KAAAoB,MAAA,QAAAA,MAAA,OAAlClC,mBAAA,CAAkC;YAA/BH,KAAK,EAAC;UAAoB,2B,iBAAK,MACpC,mB;;wCACAI,YAAA,CAEY4B,oBAAA;UAFDC,IAAI,EAAC,OAAO;UAACK,IAAI,EAAC,QAAQ;UAAEJ,OAAK,EAAAC,MAAA,IAAE3B,MAAA,CAAA+B,UAAU,CAACR,KAAK,CAACd,GAAG;;4BAChE,MAA8B,KAAAoB,MAAA,QAAAA,MAAA,OAA9BlC,mBAAA,CAA8B;YAA3BH,KAAK,EAAC;UAAgB,2B,iBAAK,MAChC,mB;;;;;;iCAKUQ,MAAA,CAAAC,KAAK,CAAC+B,MAAM,U,cAA5BC,YAAA,CAAmEC,mBAAA;;MAA/BC,WAAW,EAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}