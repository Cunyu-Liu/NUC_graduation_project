{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { usePropsAlias } from './use-props-alias.mjs';\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT } from '../../../../constants/event.mjs';\nconst useMove = (props, checkedState, emit) => {\n  const propsAlias = usePropsAlias(props);\n  const _emit = (value, direction, movedKeys) => {\n    emit(UPDATE_MODEL_EVENT, value);\n    emit(CHANGE_EVENT, value, direction, movedKeys);\n  };\n  const addToLeft = () => {\n    const currentValue = props.modelValue.slice();\n    checkedState.rightChecked.forEach(item => {\n      const index = currentValue.indexOf(item);\n      if (index > -1) {\n        currentValue.splice(index, 1);\n      }\n    });\n    _emit(currentValue, \"left\", checkedState.rightChecked);\n  };\n  const addToRight = () => {\n    let currentValue = props.modelValue.slice();\n    const itemsToBeMoved = props.data.filter(item => {\n      const itemKey = item[propsAlias.value.key];\n      return checkedState.leftChecked.includes(itemKey) && !props.modelValue.includes(itemKey);\n    }).map(item => item[propsAlias.value.key]);\n    currentValue = props.targetOrder === \"unshift\" ? itemsToBeMoved.concat(currentValue) : currentValue.concat(itemsToBeMoved);\n    if (props.targetOrder === \"original\") {\n      currentValue = props.data.filter(item => currentValue.includes(item[propsAlias.value.key])).map(item => item[propsAlias.value.key]);\n    }\n    _emit(currentValue, \"right\", checkedState.leftChecked);\n  };\n  return {\n    addToLeft,\n    addToRight\n  };\n};\nexport { useMove };","map":{"version":3,"names":["useMove","props","checkedState","emit","propsAlias","usePropsAlias","_emit","value","direction","movedKeys","UPDATE_MODEL_EVENT","CHANGE_EVENT","addToLeft","currentValue","modelValue","slice","rightChecked","forEach","item","index","indexOf","splice","addToRight","itemsToBeMoved","data","filter","itemKey","key","leftChecked","includes","map","targetOrder","concat"],"sources":["../../../../../../../packages/components/transfer/src/composables/use-move.ts"],"sourcesContent":["import { CHANGE_EVENT, UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport { usePropsAlias } from './use-props-alias'\n\nimport type { SetupContext } from 'vue'\nimport type {\n  TransferCheckedState,\n  TransferDataItem,\n  TransferDirection,\n  TransferEmits,\n  TransferKey,\n  TransferProps,\n} from '../transfer'\n\nexport const useMove = (\n  props: TransferProps,\n  checkedState: TransferCheckedState,\n  emit: SetupContext<TransferEmits>['emit']\n) => {\n  const propsAlias = usePropsAlias(props)\n\n  const _emit = (\n    value: TransferKey[],\n    direction: TransferDirection,\n    movedKeys: TransferKey[]\n  ) => {\n    emit(UPDATE_MODEL_EVENT, value)\n    emit(CHANGE_EVENT, value, direction, movedKeys)\n  }\n\n  const addToLeft = () => {\n    const currentValue = props.modelValue.slice()\n\n    checkedState.rightChecked.forEach((item) => {\n      const index = currentValue.indexOf(item)\n      if (index > -1) {\n        currentValue.splice(index, 1)\n      }\n    })\n    _emit(currentValue, 'left', checkedState.rightChecked)\n  }\n\n  const addToRight = () => {\n    let currentValue = props.modelValue.slice()\n\n    const itemsToBeMoved = props.data\n      .filter((item: TransferDataItem) => {\n        const itemKey = item[propsAlias.value.key]\n        return (\n          checkedState.leftChecked.includes(itemKey) &&\n          !props.modelValue.includes(itemKey)\n        )\n      })\n      .map((item) => item[propsAlias.value.key])\n\n    currentValue =\n      props.targetOrder === 'unshift'\n        ? itemsToBeMoved.concat(currentValue)\n        : currentValue.concat(itemsToBeMoved)\n\n    if (props.targetOrder === 'original') {\n      currentValue = props.data\n        .filter((item) => currentValue.includes(item[propsAlias.value.key]))\n        .map((item) => item[propsAlias.value.key])\n    }\n\n    _emit(currentValue, 'right', checkedState.leftChecked)\n  }\n\n  return {\n    addToLeft,\n    addToRight,\n  }\n}\n"],"mappings":";;;;;;AAaO,MAAMA,OAAU,GAAAA,CACrBC,KACA,EAAAC,YAAA,EACAC,IACG;EACG,MAAAC,UAAA,GAAaC,aAAA,CAAcJ,KAAK;EAEtC,MAAMK,KAAQ,GAAAA,CACZC,KACA,EAAAC,SAAA,EACAC,SACG;IACHN,IAAA,CAAKO,kBAAA,EAAoBH,KAAK;IACzBJ,IAAA,CAAAQ,YAAA,EAAcJ,KAAO,EAAAC,SAAA,EAAWC,SAAS;EAAA,CAChD;EAEA,MAAMG,SAAA,GAAYA,CAAA,KAAM;IAChB,MAAAC,YAAA,GAAeZ,KAAM,CAAAa,UAAA,CAAWC,KAAM;IAE/Bb,YAAA,CAAAc,YAAA,CAAaC,OAAQ,CAACC,IAAS;MACpC,MAAAC,KAAA,GAAQN,YAAa,CAAAO,OAAA,CAAQF,IAAI;MACvC,IAAIC,KAAA,GAAQ,CAAI;QACDN,YAAA,CAAAQ,MAAA,CAAOF,KAAA,EAAO,CAAC;MAAA;IAC9B,CACD;IACKb,KAAA,CAAAO,YAAA,EAAc,MAAQ,EAAAX,YAAA,CAAac,YAAY;EAAA,CACvD;EAEA,MAAMM,UAAA,GAAaA,CAAA,KAAM;IACnB,IAAAT,YAAA,GAAeZ,KAAM,CAAAa,UAAA,CAAWC,KAAM;IAE1C,MAAMQ,cAAiB,GAAAtB,KAAA,CAAMuB,IAC1B,CAAAC,MAAA,CAAQP,IAA2B;MAC5B,MAAAQ,OAAA,GAAUR,IAAK,CAAAd,UAAA,CAAWG,KAAM,CAAAoB,GAAA;MAEpC,OAAAzB,YAAA,CAAa0B,WAAA,CAAYC,QAAS,CAAAH,OAAO,KACzC,CAACzB,KAAA,CAAMa,UAAW,CAAAe,QAAA,CAASH,OAAO;IAAA,CAErC,EACAI,GAAI,CAACZ,IAAA,IAASA,IAAK,CAAAd,UAAA,CAAWG,KAAA,CAAMoB,GAAI;IAGzCd,YAAA,GAAAZ,KAAA,CAAM8B,WAAA,KAAgB,SAClB,GAAAR,cAAA,CAAeS,MAAA,CAAOnB,YAAY,IAClCA,YAAa,CAAAmB,MAAA,CAAOT,cAAc;IAEpC,IAAAtB,KAAA,CAAM8B,WAAA,KAAgB,UAAY;MACpClB,YAAA,GAAeZ,KAAA,CAAMuB,IAClB,CAAAC,MAAA,CAAQP,IAAS,IAAAL,YAAA,CAAagB,QAAA,CAASX,IAAK,CAAAd,UAAA,CAAWG,KAAA,CAAMoB,GAAI,EAAC,EAClEG,GAAI,CAACZ,IAAA,IAASA,IAAK,CAAAd,UAAA,CAAWG,KAAA,CAAMoB,GAAI;IAAA;IAGvCrB,KAAA,CAAAO,YAAA,EAAc,OAAS,EAAAX,YAAA,CAAa0B,WAAW;EAAA,CACvD;EAEO;IACLhB,SAAA;IACAU;EAAA,CACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}