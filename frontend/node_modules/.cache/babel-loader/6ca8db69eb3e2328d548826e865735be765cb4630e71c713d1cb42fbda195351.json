{"ast":null,"code":"import { defineComponent, ref, computed, reactive, onMounted, h } from 'vue';\nimport { pick } from 'lodash-unified';\nimport { ElSelect } from '../../select/index.mjs';\nimport { ElTree } from '../../tree/index.mjs';\nimport { useSelect } from './select.mjs';\nimport { useTree } from './tree.mjs';\nimport CacheOptions from './cache-options.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { selectProps } from '../../select/src/select.mjs';\nimport { treeProps } from '../../tree/src/tree.mjs';\nconst _sfc_main = defineComponent({\n  name: \"ElTreeSelect\",\n  inheritAttrs: false,\n  props: {\n    ...selectProps,\n    ...treeProps,\n    cacheData: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup(props, context) {\n    const {\n      slots,\n      expose\n    } = context;\n    const select = ref();\n    const tree = ref();\n    const key = computed(() => props.nodeKey || props.valueKey || \"value\");\n    const selectProps2 = useSelect(props, context, {\n      select,\n      tree,\n      key\n    });\n    const {\n      cacheOptions,\n      ...treeProps2\n    } = useTree(props, context, {\n      select,\n      tree,\n      key\n    });\n    const methods = reactive({});\n    expose(methods);\n    onMounted(() => {\n      Object.assign(methods, {\n        ...pick(tree.value, [\"filter\", \"updateKeyChildren\", \"getCheckedNodes\", \"setCheckedNodes\", \"getCheckedKeys\", \"setCheckedKeys\", \"setChecked\", \"getHalfCheckedNodes\", \"getHalfCheckedKeys\", \"getCurrentKey\", \"getCurrentNode\", \"setCurrentKey\", \"setCurrentNode\", \"getNode\", \"remove\", \"append\", \"insertBefore\", \"insertAfter\"]),\n        ...pick(select.value, [\"focus\", \"blur\", \"selectedLabel\"]),\n        treeRef: tree.value,\n        selectRef: select.value\n      });\n    });\n    return () => h(ElSelect, reactive({\n      ...selectProps2,\n      ref: ref2 => select.value = ref2\n    }), {\n      ...slots,\n      default: () => [h(CacheOptions, {\n        data: cacheOptions.value\n      }), h(ElTree, reactive({\n        ...treeProps2,\n        ref: ref2 => tree.value = ref2\n      }))]\n    });\n  }\n});\nvar TreeSelect = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue\"]]);\nexport { TreeSelect as default };","map":{"version":3,"names":["_sfc_main","defineComponent","name","inheritAttrs","props","selectProps","treeProps","cacheData","type","Array","default","setup","context","slots","expose","select","ref","tree","key","computed","nodeKey","valueKey","selectProps2","useSelect","cacheOptions","treeProps2","useTree","methods","reactive","onMounted","Object","assign","pick","value","treeRef","selectRef","h","ElSelect","ref2","CacheOptions","data","ElTree"],"sources":["../../../../../../packages/components/tree-select/src/tree-select.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { computed, defineComponent, h, onMounted, reactive, ref } from 'vue'\nimport { pick } from 'lodash-unified'\nimport { ElSelect, selectProps } from '@element-plus/components/select'\nimport { ElTree, treeProps } from '@element-plus/components/tree'\nimport { useSelect } from './select'\nimport { useTree } from './tree'\nimport CacheOptions from './cache-options'\n\nimport type { TreeInstance } from '@element-plus/components/tree'\nimport type { SelectInstance } from '@element-plus/components/select'\n\nexport default defineComponent({\n  name: 'ElTreeSelect',\n  // disable `ElSelect` inherit current attrs\n  inheritAttrs: false,\n  props: {\n    ...selectProps,\n    ...treeProps,\n    /**\n     * @description The cached data of the lazy node, the structure is the same as the data, used to get the label of the unloaded data\n     */\n    cacheData: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  setup(props, context) {\n    const { slots, expose } = context\n\n    const select = ref<SelectInstance>()\n    const tree = ref<TreeInstance>()\n\n    const key = computed(() => props.nodeKey || props.valueKey || 'value')\n\n    const selectProps = useSelect(props, context, { select, tree, key })\n    const { cacheOptions, ...treeProps } = useTree(props, context, {\n      select,\n      tree,\n      key,\n    })\n\n    // expose ElTree/ElSelect methods\n    const methods = reactive({})\n    expose(methods)\n    onMounted(() => {\n      Object.assign(methods, {\n        //TODO: let only tree and select in 3.0\n        ...pick(tree.value, [\n          'filter',\n          'updateKeyChildren',\n          'getCheckedNodes',\n          'setCheckedNodes',\n          'getCheckedKeys',\n          'setCheckedKeys',\n          'setChecked',\n          'getHalfCheckedNodes',\n          'getHalfCheckedKeys',\n          'getCurrentKey',\n          'getCurrentNode',\n          'setCurrentKey',\n          'setCurrentNode',\n          'getNode',\n          'remove',\n          'append',\n          'insertBefore',\n          'insertAfter',\n        ]),\n        ...pick(select.value, ['focus', 'blur', 'selectedLabel']),\n        treeRef: tree.value,\n        selectRef: select.value,\n      })\n    })\n\n    return () =>\n      h(\n        ElSelect,\n        /**\n         * 1. The `props` is processed into `Refs`, but `v-bind` and\n         * render function props cannot read `Refs`, so use `reactive`\n         * unwrap the `Refs` and keep reactive.\n         * 2. The keyword `ref` requires `Ref`, but `reactive` broke it,\n         * so use function.\n         */\n        reactive({\n          ...selectProps,\n          ref: (ref: SelectInstance) => (select.value = ref),\n        }),\n        {\n          ...slots,\n          default: () => [\n            h(CacheOptions, { data: cacheOptions.value }),\n            h(\n              ElTree,\n              reactive({\n                ...treeProps,\n                ref: (ref: TreeInstance) => (tree.value = ref),\n              })\n            ),\n          ],\n        }\n      )\n  },\n})\n</script>\n"],"mappings":";;;;;;;;;;AAYA,MAAKA,SAAA,GAAaC,eAAa;EAC7BC,IAAM;EAENC,YAAc;EACdC,KAAO;IACL,GAAGC,WAAA;IACH,GAAGC,SAAA;IAIHC,SAAW;MACTC,IAAM,EAAAC,KAAA;MACNC,OAAA,EAASA,CAAA,KAAM;IAAC;EAClB,CACF;EACAC,MAAMP,KAAA,EAAOQ,OAAS;IACd;MAAEC,KAAO;MAAAC;IAAA,CAAW,GAAAF,OAAA;IAE1B,MAAMG,MAAA,GAASC,GAAoB;IACnC,MAAMC,IAAA,GAAOD,GAAkB;IAE/B,MAAME,GAAA,GAAMC,QAAS,OAAMf,KAAA,CAAMgB,OAAW,IAAAhB,KAAA,CAAMiB,QAAA,IAAY,OAAO;IAE/D,MAAAC,YAAA,GAAcC,SAAA,CAAUnB,KAAO,EAAAQ,OAAA,EAAS;MAAEG,MAAQ;MAAAE,IAAA;MAAMC;IAAA,CAAK;IACnE,MAAM;MAAEM,YAAiB;MAAA,GAAAC;IAAA,CAAc,GAAAC,OAAA,CAAQtB,KAAA,EAAOQ,OAAS;MAC7DG,MAAA;MACAE,IAAA;MACAC;IAAA,CACD;IAGK,MAAAS,OAAA,GAAUC,QAAS,GAAE;IAC3Bd,MAAA,CAAOa,OAAO;IACdE,SAAA,CAAU,MAAM;MACdC,MAAA,CAAOC,MAAA,CAAOJ,OAAS;QAErB,GAAGK,IAAK,CAAAf,IAAA,CAAKgB,KAAO,GAClB,UACA,qBACA,mBACA,mBACA,kBACA,kBACA,cACA,uBACA,sBACA,iBACA,kBACA,iBACA,kBACA,WACA,UACA,UACA,gBACA,cACD;QACD,GAAGD,IAAA,CAAKjB,MAAO,CAAAkB,KAAA,EAAO,CAAC,OAAS,UAAQ,eAAe,CAAC;QACxDC,OAAA,EAASjB,IAAK,CAAAgB,KAAA;QACdE,SAAA,EAAWpB,MAAO,CAAAkB;MAAA,CACnB;IAAA,CACF;IAED,OAAO,MACLG,CAAA,CACEC,QAAA,EAQAT,QAAS;MACP,GAAGN,YAAA;MACHN,GAAK,EAACsB,IAAyB,IAAAvB,MAAA,CAAOkB,KAAQ,GAAAK;IAAA,CAC/C,GACD;MACE,GAAGzB,KAAA;MACHH,OAAA,EAASA,CAAA,KAAM,CACb0B,CAAA,CAAEG,YAAc;QAAEC,IAAM,EAAAhB,YAAA,CAAaS;MAAA,CAAO,GAC5CG,CAAA,CACEK,MAAA,EACAb,QAAS;QACP,GAAGH,UAAA;QACHT,GAAK,EAACsB,IAAuB,IAAArB,IAAA,CAAKgB,KAAQ,GAAAK;MAAA,CAC3C,EACH;IACF,CACF,CACF;EAAA;AAEN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}