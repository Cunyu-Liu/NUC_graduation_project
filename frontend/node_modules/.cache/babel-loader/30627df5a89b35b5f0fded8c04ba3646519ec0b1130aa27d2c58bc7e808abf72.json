{"ast":null,"code":"import { createVNode, renderSlot, mergeProps } from 'vue';\nimport { get } from 'lodash-unified';\nimport { Alignment } from '../constants.mjs';\nimport { placeholderSign } from '../private.mjs';\nimport { enforceUnit, tryCall, componentToSlot } from '../utils.mjs';\nimport TableCell from '../components/cell.mjs';\nimport ExpandIcon from '../components/expand-icon.mjs';\nimport { isFunction, isObject } from '@vue/shared';\nconst CellRenderer = ({\n  columns,\n  column,\n  columnIndex,\n  depth,\n  expandIconProps,\n  isScrolling,\n  rowData,\n  rowIndex,\n  style,\n  expandedRowKeys,\n  ns,\n  t,\n  cellProps: _cellProps,\n  expandColumnKey,\n  indentSize,\n  iconSize,\n  rowKey\n}, {\n  slots\n}) => {\n  const cellStyle = enforceUnit(style);\n  if (column.placeholderSign === placeholderSign) {\n    return createVNode(\"div\", {\n      \"class\": ns.em(\"row-cell\", \"placeholder\"),\n      \"style\": cellStyle\n    }, null);\n  }\n  const {\n    cellRenderer,\n    dataKey,\n    dataGetter\n  } = column;\n  const cellData = isFunction(dataGetter) ? dataGetter({\n    columns,\n    column,\n    columnIndex,\n    rowData,\n    rowIndex\n  }) : get(rowData, dataKey != null ? dataKey : \"\");\n  const extraCellProps = tryCall(_cellProps, {\n    cellData,\n    columns,\n    column,\n    columnIndex,\n    rowIndex,\n    rowData\n  });\n  const cellProps = {\n    class: ns.e(\"cell-text\"),\n    columns,\n    column,\n    columnIndex,\n    cellData,\n    isScrolling,\n    rowData,\n    rowIndex\n  };\n  const columnCellRenderer = componentToSlot(cellRenderer);\n  const Cell = columnCellRenderer ? columnCellRenderer(cellProps) : renderSlot(slots, \"default\", cellProps, () => [createVNode(TableCell, cellProps, null)]);\n  const kls = [ns.e(\"row-cell\"), column.class, column.align === Alignment.CENTER && ns.is(\"align-center\"), column.align === Alignment.RIGHT && ns.is(\"align-right\")];\n  const expandable = rowIndex >= 0 && expandColumnKey && column.key === expandColumnKey;\n  const expanded = rowIndex >= 0 && expandedRowKeys.includes(rowData[rowKey]);\n  let IconOrPlaceholder;\n  const iconStyle = `margin-inline-start: ${depth * indentSize}px;`;\n  if (expandable) {\n    if (isObject(expandIconProps)) {\n      IconOrPlaceholder = createVNode(ExpandIcon, mergeProps(expandIconProps, {\n        \"class\": [ns.e(\"expand-icon\"), ns.is(\"expanded\", expanded)],\n        \"size\": iconSize,\n        \"expanded\": expanded,\n        \"ariaLabel\": t(expanded ? \"el.table.collapseRowLabel\" : \"el.table.expandRowLabel\"),\n        \"style\": iconStyle,\n        \"expandable\": true\n      }), null);\n    } else {\n      IconOrPlaceholder = createVNode(\"div\", {\n        \"style\": [iconStyle, `width: ${iconSize}px; height: ${iconSize}px;`].join(\" \")\n      }, null);\n    }\n  }\n  return createVNode(\"div\", mergeProps({\n    \"class\": kls,\n    \"style\": cellStyle\n  }, extraCellProps, {\n    \"role\": \"cell\"\n  }), [IconOrPlaceholder, Cell]);\n};\nCellRenderer.inheritAttrs = false;\nvar Cell = CellRenderer;\nexport { Cell as default };","map":{"version":3,"names":["CellRenderer","columns","column","columnIndex","depth","expandIconProps","isScrolling","rowData","rowIndex","style","expandedRowKeys","ns","t","cellProps","_cellProps","expandColumnKey","indentSize","iconSize","rowKey","slots","cellStyle","enforceUnit","placeholderSign","createVNode","em","cellRenderer","dataKey","dataGetter","cellData","isFunction","get","extraCellProps","tryCall","class","e","columnCellRenderer","componentToSlot","Cell","renderSlot","TableCell","kls","align","Alignment","CENTER","is","RIGHT","expandable","key","expanded","includes","IconOrPlaceholder","iconStyle","isObject","ExpandIcon","mergeProps","join","inheritAttrs"],"sources":["../../../../../../../packages/components/table-v2/src/renderers/cell.tsx"],"sourcesContent":["import { renderSlot } from 'vue'\nimport { get } from 'lodash-unified'\nimport { isFunction, isObject } from '@element-plus/utils'\nimport { ExpandIcon, TableCell } from '../components'\nimport { Alignment } from '../constants'\nimport { placeholderSign } from '../private'\nimport { componentToSlot, enforceUnit, tryCall } from '../utils'\n\nimport type { FunctionalComponent, UnwrapNestedRefs, VNode } from 'vue'\nimport type { TableV2RowCellRenderParam } from '../components'\nimport type { Translator, UseNamespaceReturn } from '@element-plus/hooks'\nimport type { UseTableReturn } from '../use-table'\nimport type { TableV2Props } from '../table'\n\ntype CellRendererProps = TableV2RowCellRenderParam &\n  Pick<\n    TableV2Props,\n    'cellProps' | 'expandColumnKey' | 'indentSize' | 'iconSize' | 'rowKey'\n  > &\n  UnwrapNestedRefs<Pick<UseTableReturn, 'expandedRowKeys'>> & {\n    ns: UseNamespaceReturn\n    t: Translator\n  }\n\nconst CellRenderer: FunctionalComponent<CellRendererProps> = (\n  {\n    // renderer props\n    columns,\n    column,\n    columnIndex,\n    depth,\n    expandIconProps,\n    isScrolling,\n    rowData,\n    rowIndex,\n    // from use-table\n    style,\n    expandedRowKeys,\n    ns,\n    t,\n    // derived props\n    cellProps: _cellProps,\n    expandColumnKey,\n    indentSize,\n    iconSize,\n    rowKey,\n  },\n  { slots }\n) => {\n  const cellStyle = enforceUnit(style)\n\n  if (column.placeholderSign === placeholderSign) {\n    return <div class={ns.em('row-cell', 'placeholder')} style={cellStyle} />\n  }\n  const { cellRenderer, dataKey, dataGetter } = column\n\n  const cellData = isFunction(dataGetter)\n    ? dataGetter({ columns, column, columnIndex, rowData, rowIndex })\n    : get(rowData, dataKey ?? '')\n\n  const extraCellProps = tryCall(_cellProps, {\n    cellData,\n    columns,\n    column,\n    columnIndex,\n    rowIndex,\n    rowData,\n  })\n\n  const cellProps = {\n    class: ns.e('cell-text'),\n    columns,\n    column,\n    columnIndex,\n    cellData,\n    isScrolling,\n    rowData,\n    rowIndex,\n  }\n  const columnCellRenderer = componentToSlot<typeof cellProps>(cellRenderer)\n  const Cell = columnCellRenderer\n    ? columnCellRenderer(cellProps)\n    : renderSlot(slots, 'default', cellProps, () => [\n        <TableCell {...cellProps}></TableCell>,\n      ])\n\n  const kls = [\n    ns.e('row-cell'),\n    column.class,\n    column.align === Alignment.CENTER && ns.is('align-center'),\n    column.align === Alignment.RIGHT && ns.is('align-right'),\n  ]\n\n  const expandable =\n    rowIndex >= 0 && expandColumnKey && column.key === expandColumnKey\n  const expanded = rowIndex >= 0 && expandedRowKeys.includes(rowData[rowKey])\n\n  let IconOrPlaceholder: VNode | undefined\n  const iconStyle = `margin-inline-start: ${depth * indentSize}px;`\n  if (expandable) {\n    if (isObject(expandIconProps)) {\n      IconOrPlaceholder = (\n        <ExpandIcon\n          {...expandIconProps}\n          class={[ns.e('expand-icon'), ns.is('expanded', expanded)]}\n          size={iconSize}\n          expanded={expanded}\n          ariaLabel={t(\n            expanded ? 'el.table.collapseRowLabel' : 'el.table.expandRowLabel'\n          )}\n          style={iconStyle}\n          expandable\n        />\n      )\n    } else {\n      IconOrPlaceholder = (\n        <div\n          style={[\n            iconStyle,\n            `width: ${iconSize}px; height: ${iconSize}px;`,\n          ].join(' ')}\n        />\n      )\n    }\n  }\n\n  return (\n    <div class={kls} style={cellStyle} {...extraCellProps} role=\"cell\">\n      {IconOrPlaceholder}\n      {Cell}\n    </div>\n  )\n}\n\nCellRenderer.inheritAttrs = false\n\nexport default CellRenderer\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}