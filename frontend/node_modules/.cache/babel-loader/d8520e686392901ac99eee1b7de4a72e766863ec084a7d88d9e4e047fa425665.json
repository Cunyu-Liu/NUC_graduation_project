{"ast":null,"code":"import axios from 'axios';\nimport { io } from 'socket.io-client';\n\n// 创建axios实例\nconst api = axios.create({\n  baseURL: '/api',\n  timeout: 300000 // 5分钟超时\n});\n\n// 请求拦截器\napi.interceptors.request.use(config => {\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 响应拦截器\napi.interceptors.response.use(response => {\n  return response.data;\n}, error => {\n  console.error('API错误:', error);\n  return Promise.reject(error);\n});\n\n// WebSocket连接\nlet socket = null;\nexport const connectSocket = () => {\n  if (!socket) {\n    // 使用环境变量或当前域名\n    const wsUrl = import.meta.env.VITE_WS_URL || `${window.location.protocol}//${window.location.hostname}:${window.location.port || '5000'}`;\n    socket = io(wsUrl, {\n      transports: ['websocket', 'polling']\n    });\n    socket.on('connect', () => {\n      console.log('WebSocket已连接');\n    });\n    socket.on('disconnect', () => {\n      console.log('WebSocket已断开');\n    });\n    socket.on('progress', data => {\n      console.log('进度更新:', data);\n    });\n  }\n  return socket;\n};\nexport const disconnectSocket = () => {\n  if (socket) {\n    socket.disconnect();\n    socket = null;\n  }\n};\nexport const getSocket = () => {\n  if (!socket) {\n    return connectSocket();\n  }\n  return socket;\n};\n\n// API接口\nexport default {\n  // 健康检查\n  healthCheck: () => api.get('/health'),\n  // 获取配置\n  getConfig: () => api.get('/config'),\n  // 文件上传\n  uploadFile: file => {\n    const formData = new FormData();\n    formData.append('file', file);\n    return api.post('/upload', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  },\n  // 获取文件列表\n  getFiles: () => api.get('/files'),\n  // 删除文件\n  deleteFile: filename => api.delete(`/files/${filename}`),\n  // 解析PDF\n  parsePDF: filepath => api.post('/parse', {\n    filepath\n  }),\n  // 生成摘要\n  generateSummary: (filepath, model, temperature) => api.post('/summarize', {\n    filepath,\n    model,\n    temperature\n  }),\n  // 提取要点\n  extractKeypoints: (filepath, model) => api.post('/extract', {\n    filepath,\n    model\n  }),\n  // 完整分析\n  analyzePaper: (filepath, tasks) => api.post('/analyze', {\n    filepath,\n    tasks\n  }),\n  // 主题聚类\n  clusterPapers: (filepaths, nClusters, method, language) => api.post('/cluster', {\n    filepaths,\n    nClusters,\n    method,\n    language\n  }),\n  // 下载结果\n  downloadResult: (type, filename) => {\n    const url = `/api/download/${type}/${filename}`;\n    window.open(url, '_blank');\n  },\n  // ============================================================================\n  // v4.0 新增API - 论文管理\n  // ============================================================================\n\n  // 获取论文列表（新版本）\n  getPapersList: (params = {}) => api.get('/papers', {\n    params\n  }),\n  // 获取论文详情\n  getPaper: id => api.get(`/papers/${id}`),\n  // 更新论文\n  updatePaper: (id, data) => api.put(`/papers/${id}`, data),\n  // 删除论文\n  deletePaper: id => api.delete(`/papers/${id}`),\n  // 批量删除论文\n  batchDeletePapers: paperIds => api.post('/papers/batch-delete', {\n    paper_ids: paperIds\n  }),\n  // ============================================================================\n  // v4.0 新增API - 分析和代码生成\n  // ============================================================================\n\n  // 分析论文\n  analyzePaperV4: paperId => api.post(`/analyze/${paperId}`),\n  // 获取研究空白列表\n  getPriorityGaps: (limit = 50) => api.get('/gaps/priority', {\n    params: {\n      limit\n    }\n  }),\n  // 获取研究空白详情\n  getGapDetail: gapId => api.get(`/gaps/${gapId}`),\n  // 生成代码\n  generateCode: (gapId, strategy = 'method_improvement') => api.post(`/gaps/${gapId}/generate-code`, {\n    strategy\n  }),\n  // 获取生成的代码\n  getCode: codeId => api.get(`/code/${codeId}`),\n  // 修改代码\n  modifyCode: (codeId, userPrompt) => api.post(`/code/${codeId}/modify`, {\n    user_prompt: userPrompt\n  }),\n  // 获取代码版本历史\n  getCodeVersions: codeId => api.get(`/code/${codeId}/versions`),\n  // ============================================================================\n  // v4.0 新增API - 知识图谱\n  // ============================================================================\n\n  // 获取知识图谱数据\n  getKnowledgeGraph: (paperIds = []) => {\n    if (paperIds.length > 0) {\n      return api.get('/knowledge-graph', {\n        params: {\n          paper_ids: paperIds.join(',')\n        }\n      });\n    }\n    return api.get('/knowledge-graph');\n  },\n  // 构建知识图谱\n  buildKnowledgeGraph: paperIds => api.post('/knowledge-graph/build', {\n    paper_ids: paperIds\n  }),\n  // 手动添加关系\n  addRelation: (sourceId, targetId, relationType, strength = 0.5, evidence = '') => api.post('/relations', {\n    source_id: sourceId,\n    target_id: targetId,\n    relation_type: relationType,\n    strength,\n    evidence\n  }),\n  // ============================================================================\n  // v4.0 新增API - 统计信息\n  // ============================================================================\n\n  // 获取统计信息\n  getStatistics: () => api.get('/statistics')\n};","map":{"version":3,"names":["axios","io","api","create","baseURL","timeout","interceptors","request","use","config","error","Promise","reject","response","data","console","socket","connectSocket","wsUrl","import","meta","env","VITE_WS_URL","window","location","protocol","hostname","port","transports","on","log","disconnectSocket","disconnect","getSocket","healthCheck","get","getConfig","uploadFile","file","formData","FormData","append","post","headers","getFiles","deleteFile","filename","delete","parsePDF","filepath","generateSummary","model","temperature","extractKeypoints","analyzePaper","tasks","clusterPapers","filepaths","nClusters","method","language","downloadResult","type","url","open","getPapersList","params","getPaper","id","updatePaper","put","deletePaper","batchDeletePapers","paperIds","paper_ids","analyzePaperV4","paperId","getPriorityGaps","limit","getGapDetail","gapId","generateCode","strategy","getCode","codeId","modifyCode","userPrompt","user_prompt","getCodeVersions","getKnowledgeGraph","length","join","buildKnowledgeGraph","addRelation","sourceId","targetId","relationType","strength","evidence","source_id","target_id","relation_type","getStatistics"],"sources":["/Users/liucunyu/Documents/all_code/nuc_Graduation_project/frontend/src/api/index.js"],"sourcesContent":["import axios from 'axios'\nimport { io } from 'socket.io-client'\n\n// 创建axios实例\nconst api = axios.create({\n  baseURL: '/api',\n  timeout: 300000 // 5分钟超时\n})\n\n// 请求拦截器\napi.interceptors.request.use(\n  config => {\n    return config\n  },\n  error => {\n    return Promise.reject(error)\n  }\n)\n\n// 响应拦截器\napi.interceptors.response.use(\n  response => {\n    return response.data\n  },\n  error => {\n    console.error('API错误:', error)\n    return Promise.reject(error)\n  }\n)\n\n// WebSocket连接\nlet socket = null\n\nexport const connectSocket = () => {\n  if (!socket) {\n    // 使用环境变量或当前域名\n    const wsUrl = import.meta.env.VITE_WS_URL || `${window.location.protocol}//${window.location.hostname}:${window.location.port || '5000'}`\n    socket = io(wsUrl, {\n      transports: ['websocket', 'polling']\n    })\n\n    socket.on('connect', () => {\n      console.log('WebSocket已连接')\n    })\n\n    socket.on('disconnect', () => {\n      console.log('WebSocket已断开')\n    })\n\n    socket.on('progress', (data) => {\n      console.log('进度更新:', data)\n    })\n  }\n  return socket\n}\n\nexport const disconnectSocket = () => {\n  if (socket) {\n    socket.disconnect()\n    socket = null\n  }\n}\n\nexport const getSocket = () => {\n  if (!socket) {\n    return connectSocket()\n  }\n  return socket\n}\n\n// API接口\nexport default {\n  // 健康检查\n  healthCheck: () => api.get('/health'),\n\n  // 获取配置\n  getConfig: () => api.get('/config'),\n\n  // 文件上传\n  uploadFile: (file) => {\n    const formData = new FormData()\n    formData.append('file', file)\n    return api.post('/upload', formData, {\n      headers: { 'Content-Type': 'multipart/form-data' }\n    })\n  },\n\n  // 获取文件列表\n  getFiles: () => api.get('/files'),\n\n  // 删除文件\n  deleteFile: (filename) => api.delete(`/files/${filename}`),\n\n  // 解析PDF\n  parsePDF: (filepath) => api.post('/parse', { filepath }),\n\n  // 生成摘要\n  generateSummary: (filepath, model, temperature) =>\n    api.post('/summarize', { filepath, model, temperature }),\n\n  // 提取要点\n  extractKeypoints: (filepath, model) =>\n    api.post('/extract', { filepath, model }),\n\n  // 完整分析\n  analyzePaper: (filepath, tasks) =>\n    api.post('/analyze', { filepath, tasks }),\n\n  // 主题聚类\n  clusterPapers: (filepaths, nClusters, method, language) =>\n    api.post('/cluster', { filepaths, nClusters, method, language }),\n\n  // 下载结果\n  downloadResult: (type, filename) => {\n    const url = `/api/download/${type}/${filename}`\n    window.open(url, '_blank')\n  },\n\n  // ============================================================================\n  // v4.0 新增API - 论文管理\n  // ============================================================================\n\n  // 获取论文列表（新版本）\n  getPapersList: (params = {}) => api.get('/papers', { params }),\n\n  // 获取论文详情\n  getPaper: (id) => api.get(`/papers/${id}`),\n\n  // 更新论文\n  updatePaper: (id, data) => api.put(`/papers/${id}`, data),\n\n  // 删除论文\n  deletePaper: (id) => api.delete(`/papers/${id}`),\n\n  // 批量删除论文\n  batchDeletePapers: (paperIds) => api.post('/papers/batch-delete', { paper_ids: paperIds }),\n\n  // ============================================================================\n  // v4.0 新增API - 分析和代码生成\n  // ============================================================================\n\n  // 分析论文\n  analyzePaperV4: (paperId) => api.post(`/analyze/${paperId}`),\n\n  // 获取研究空白列表\n  getPriorityGaps: (limit = 50) => api.get('/gaps/priority', { params: { limit } }),\n\n  // 获取研究空白详情\n  getGapDetail: (gapId) => api.get(`/gaps/${gapId}`),\n\n  // 生成代码\n  generateCode: (gapId, strategy = 'method_improvement') =>\n    api.post(`/gaps/${gapId}/generate-code`, { strategy }),\n\n  // 获取生成的代码\n  getCode: (codeId) => api.get(`/code/${codeId}`),\n\n  // 修改代码\n  modifyCode: (codeId, userPrompt) =>\n    api.post(`/code/${codeId}/modify`, { user_prompt: userPrompt }),\n\n  // 获取代码版本历史\n  getCodeVersions: (codeId) => api.get(`/code/${codeId}/versions`),\n\n  // ============================================================================\n  // v4.0 新增API - 知识图谱\n  // ============================================================================\n\n  // 获取知识图谱数据\n  getKnowledgeGraph: (paperIds = []) => {\n    if (paperIds.length > 0) {\n      return api.get('/knowledge-graph', { params: { paper_ids: paperIds.join(',') } })\n    }\n    return api.get('/knowledge-graph')\n  },\n\n  // 构建知识图谱\n  buildKnowledgeGraph: (paperIds) => api.post('/knowledge-graph/build', { paper_ids: paperIds }),\n\n  // 手动添加关系\n  addRelation: (sourceId, targetId, relationType, strength = 0.5, evidence = '') =>\n    api.post('/relations', {\n      source_id: sourceId,\n      target_id: targetId,\n      relation_type: relationType,\n      strength,\n      evidence\n    }),\n\n  // ============================================================================\n  // v4.0 新增API - 统计信息\n  // ============================================================================\n\n  // 获取统计信息\n  getStatistics: () => api.get('/statistics')\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}