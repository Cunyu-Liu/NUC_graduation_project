{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { defineComponent } from 'vue';\nimport { flattedChildren } from '../../../utils/vue/vnode.mjs';\nimport { isArray } from '@vue/shared';\nvar ElTourSteps = defineComponent({\n  name: \"ElTourSteps\",\n  props: {\n    current: {\n      type: Number,\n      default: 0\n    }\n  },\n  emits: [\"update-total\"],\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let cacheTotal = 0;\n    return () => {\n      var _a, _b;\n      const children = (_a = slots.default) == null ? void 0 : _a.call(slots);\n      const result = [];\n      let total = 0;\n      function filterSteps(children2) {\n        if (!isArray(children2)) return;\n        children2.forEach(item => {\n          var _a2;\n          const name = (_a2 = (item == null ? void 0 : item.type) || {}) == null ? void 0 : _a2.name;\n          if (name === \"ElTourStep\") {\n            result.push(item);\n            total += 1;\n          }\n        });\n      }\n      if (children.length) {\n        filterSteps(flattedChildren((_b = children[0]) == null ? void 0 : _b.children));\n      }\n      if (cacheTotal !== total) {\n        cacheTotal = total;\n        emit(\"update-total\", total);\n      }\n      if (result.length) {\n        return result[props.current];\n      }\n      return null;\n    };\n  }\n});\nexport { ElTourSteps as default };","map":{"version":3,"names":["ElTourSteps","defineComponent","name","props","current","type","Number","default","emits","setup","slots","emit","cacheTotal","_a","_b","children","call","result","total","filterSteps","children2","isArray","forEach","item","_a2","push","length","flattedChildren"],"sources":["../../../../../../packages/components/tour/src/steps.ts"],"sourcesContent":["import { defineComponent } from 'vue'\nimport { flattedChildren, isArray } from '@element-plus/utils'\n\nimport type { FlattenVNodes } from '@element-plus/utils'\nimport type { Component, VNode } from 'vue'\n\nexport default defineComponent({\n  name: 'ElTourSteps',\n  props: {\n    current: {\n      type: Number,\n      default: 0,\n    },\n  },\n  emits: ['update-total'],\n  setup(props, { slots, emit }) {\n    let cacheTotal = 0\n\n    return () => {\n      const children = slots.default?.()!\n      const result: VNode[] = []\n      let total = 0\n\n      function filterSteps(children?: FlattenVNodes) {\n        if (!isArray(children)) return\n        ;(children as VNode[]).forEach((item) => {\n          const name = ((item?.type || {}) as Component)?.name\n\n          if (name === 'ElTourStep') {\n            result.push(item)\n            total += 1\n          }\n        })\n      }\n\n      if (children.length) {\n        filterSteps(flattedChildren(children![0]?.children))\n      }\n\n      if (cacheTotal !== total) {\n        cacheTotal = total\n        emit('update-total', total)\n      }\n\n      if (result.length) {\n        return result[props.current]\n      }\n      return null\n    }\n  },\n})\n"],"mappings":";;;;;;AAMA,IAAAA,WAAA,GAAeC,eAAgB;EAC7BC,IAAM;EACNC,KAAO;IACLC,OAAS;MACPC,IAAM,EAAAC,MAAA;MACNC,OAAS;IAAA;EACX,CACF;EACAC,KAAA,EAAO,CAAC,cAAc;EACtBC,KAAMA,CAAAN,KAAA,EAAO;IAAEO,KAAA;IAAOC;EAAA,CAAQ;IAC5B,IAAIC,UAAa;IAEjB,OAAO,MAAM;MAlBjB,IAAAC,EAAA,EAAAC,EAAA;MAmBY,MAAAC,QAAA,IAAWF,EAAA,GAAAH,KAAA,CAAMH,OAAN,qBAAAM,EAAA,CAAAG,IAAA,CAAAN,KAAA;MACjB,MAAMO,MAAA,GAAkB,EAAC;MACzB,IAAIC,KAAQ;MAEZ,SAASC,YAAYC,SAA0B;QACzC,KAACC,OAAA,CAAQD,SAAQ,GAAG;QACtBA,SAAA,CAAqBE,OAAQ,CAACC,IAAS;UAzBjD,IAAAC,GAAA;UA0BU,MAAMtB,IAAA,IAASsB,GAAA,IAAAD,IAAA,oBAAAA,IAAA,CAAMlB,IAAA,KAAQ,EAAC,KAAf,gBAAAmB,GAAiC,CAAAtB,IAAA;UAEhD,IAAIA,IAAA,KAAS,YAAc;YACzBe,MAAA,CAAOQ,IAAA,CAAKF,IAAI;YACPL,KAAA;UAAA;QACX,CACD;MAAA;MAGH,IAAIH,QAAA,CAASW,MAAQ;QACnBP,WAAA,CAAYQ,eAAgB,EAAAb,EAAA,GAAAC,QAAA,CAAU,CAAV,sBAAAD,EAAA,CAAcC,QAAQ,CAAC;MAAA;MAGrD,IAAIH,UAAA,KAAeM,KAAO;QACXN,UAAA,GAAAM,KAAA;QACbP,IAAA,CAAK,gBAAgBO,KAAK;MAAA;MAG5B,IAAID,MAAA,CAAOS,MAAQ;QACjB,OAAOT,MAAA,CAAOd,KAAM,CAAAC,OAAA;MAAA;MAEf;IAAA,CACT;EAAA;AAEJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}