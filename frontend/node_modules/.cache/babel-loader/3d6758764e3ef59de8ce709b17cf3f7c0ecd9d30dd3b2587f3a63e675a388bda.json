{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport { inject } from 'vue';\nimport { getFixedColumnOffset, ensurePosition, getFixedColumnsClass } from '../util.mjs';\nimport { TABLE_INJECTION_KEY } from '../tokens.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nimport { isFunction, isString, isArray, isObject } from '@vue/shared';\nfunction useStyles(props) {\n  const parent = inject(TABLE_INJECTION_KEY);\n  const ns = useNamespace(\"table\");\n  const getRowStyle = (row, rowIndex) => {\n    const rowStyle = parent == null ? void 0 : parent.props.rowStyle;\n    if (isFunction(rowStyle)) {\n      return rowStyle.call(null, {\n        row,\n        rowIndex\n      });\n    }\n    return rowStyle || null;\n  };\n  const getRowClass = (row, rowIndex, displayIndex) => {\n    var _a;\n    const classes = [ns.e(\"row\")];\n    if ((parent == null ? void 0 : parent.props.highlightCurrentRow) && row === ((_a = props.store) == null ? void 0 : _a.states.currentRow.value)) {\n      classes.push(\"current-row\");\n    }\n    if (props.stripe && displayIndex % 2 === 1) {\n      classes.push(ns.em(\"row\", \"striped\"));\n    }\n    const rowClassName = parent == null ? void 0 : parent.props.rowClassName;\n    if (isString(rowClassName)) {\n      classes.push(rowClassName);\n    } else if (isFunction(rowClassName)) {\n      classes.push(rowClassName.call(null, {\n        row,\n        rowIndex\n      }));\n    }\n    return classes;\n  };\n  const getCellStyle = (rowIndex, columnIndex, row, column) => {\n    const cellStyle = parent == null ? void 0 : parent.props.cellStyle;\n    let cellStyles = cellStyle != null ? cellStyle : {};\n    if (isFunction(cellStyle)) {\n      cellStyles = cellStyle.call(null, {\n        rowIndex,\n        columnIndex,\n        row,\n        column\n      });\n    }\n    const fixedStyle = getFixedColumnOffset(columnIndex, props == null ? void 0 : props.fixed, props.store);\n    ensurePosition(fixedStyle, \"left\");\n    ensurePosition(fixedStyle, \"right\");\n    return Object.assign({}, cellStyles, fixedStyle);\n  };\n  const getCellClass = (rowIndex, columnIndex, row, column, offset) => {\n    const fixedClasses = getFixedColumnsClass(ns.b(), columnIndex, props == null ? void 0 : props.fixed, props.store, void 0, offset);\n    const classes = [column.id, column.align, column.className, ...fixedClasses];\n    const cellClassName = parent == null ? void 0 : parent.props.cellClassName;\n    if (isString(cellClassName)) {\n      classes.push(cellClassName);\n    } else if (isFunction(cellClassName)) {\n      classes.push(cellClassName.call(null, {\n        rowIndex,\n        columnIndex,\n        row,\n        column\n      }));\n    }\n    classes.push(ns.e(\"cell\"));\n    return classes.filter(className => Boolean(className)).join(\" \");\n  };\n  const getSpan = (row, column, rowIndex, columnIndex) => {\n    let rowspan = 1;\n    let colspan = 1;\n    const fn = parent == null ? void 0 : parent.props.spanMethod;\n    if (isFunction(fn)) {\n      const result = fn({\n        row,\n        column,\n        rowIndex,\n        columnIndex\n      });\n      if (isArray(result)) {\n        rowspan = result[0];\n        colspan = result[1];\n      } else if (isObject(result)) {\n        rowspan = result.rowspan;\n        colspan = result.colspan;\n      }\n    }\n    return {\n      rowspan,\n      colspan\n    };\n  };\n  const getColspanRealWidth = (columns, colspan, index) => {\n    if (colspan < 1) {\n      return columns[index].realWidth;\n    }\n    const widthArr = columns.map(({\n      realWidth,\n      width\n    }) => realWidth || width).slice(index, index + colspan);\n    return Number(widthArr.reduce((acc, width) => Number(acc) + Number(width), -1));\n  };\n  return {\n    getRowStyle,\n    getRowClass,\n    getCellStyle,\n    getCellClass,\n    getSpan,\n    getColspanRealWidth\n  };\n}\nexport { useStyles as default };","map":{"version":3,"names":["useStyles","props","parent","inject","TABLE_INJECTION_KEY","ns","useNamespace","getRowStyle","row","rowIndex","rowStyle","isFunction","call","getRowClass","displayIndex","_a","classes","e","highlightCurrentRow","store","states","currentRow","value","push","stripe","em","rowClassName","isString","getCellStyle","columnIndex","column","cellStyle","cellStyles","fixedStyle","getFixedColumnOffset","fixed","ensurePosition","Object","assign","getCellClass","offset","fixedClasses","getFixedColumnsClass","b","id","align","className","cellClassName","filter","Boolean","join","getSpan","rowspan","colspan","fn","spanMethod","result","isArray","isObject","getColspanRealWidth","columns","index","realWidth","widthArr","map","width","slice","Number","reduce","acc"],"sources":["../../../../../../../packages/components/table/src/table-body/styles-helper.ts"],"sourcesContent":["import { inject } from 'vue'\nimport { useNamespace } from '@element-plus/hooks'\nimport { isArray, isFunction, isObject, isString } from '@element-plus/utils'\nimport {\n  ensurePosition,\n  getFixedColumnOffset,\n  getFixedColumnsClass,\n} from '../util'\nimport { TABLE_INJECTION_KEY } from '../tokens'\n\nimport type { TableColumnCtx } from '../table-column/defaults'\nimport type { TableBodyProps } from './defaults'\nimport type { DefaultRow, Table } from '../table/defaults'\n\nfunction useStyles<T extends DefaultRow>(props: Partial<TableBodyProps<T>>) {\n  const parent = inject(TABLE_INJECTION_KEY) as Table<T>\n  const ns = useNamespace('table')\n\n  const getRowStyle = (row: T, rowIndex: number) => {\n    const rowStyle = parent?.props.rowStyle\n    if (isFunction(rowStyle)) {\n      return rowStyle.call(null, {\n        row,\n        rowIndex,\n      })\n    }\n    return rowStyle || null\n  }\n\n  const getRowClass = (row: T, rowIndex: number, displayIndex: number) => {\n    const classes = [ns.e('row')]\n    if (\n      parent?.props.highlightCurrentRow &&\n      row === props.store?.states.currentRow.value\n    ) {\n      classes.push('current-row')\n    }\n    if (props.stripe && displayIndex % 2 === 1) {\n      classes.push(ns.em('row', 'striped'))\n    }\n    const rowClassName = parent?.props.rowClassName\n    if (isString(rowClassName)) {\n      classes.push(rowClassName)\n    } else if (isFunction(rowClassName)) {\n      classes.push(\n        rowClassName.call(null, {\n          row,\n          rowIndex,\n        })\n      )\n    }\n    return classes\n  }\n\n  const getCellStyle = (\n    rowIndex: number,\n    columnIndex: number,\n    row: T,\n    column: TableColumnCtx<T>\n  ) => {\n    const cellStyle = parent?.props.cellStyle\n    let cellStyles = cellStyle ?? {}\n    if (isFunction(cellStyle)) {\n      cellStyles = cellStyle.call(null, {\n        rowIndex,\n        columnIndex,\n        row,\n        column,\n      })\n    }\n    const fixedStyle = getFixedColumnOffset(\n      columnIndex,\n      props?.fixed,\n      props.store\n    )\n    ensurePosition(fixedStyle, 'left')\n    ensurePosition(fixedStyle, 'right')\n    return Object.assign({}, cellStyles, fixedStyle)\n  }\n\n  const getCellClass = (\n    rowIndex: number,\n    columnIndex: number,\n    row: T,\n    column: TableColumnCtx<T>,\n    offset: number\n  ) => {\n    const fixedClasses = getFixedColumnsClass(\n      ns.b(),\n      columnIndex,\n      props?.fixed,\n      props.store,\n      undefined,\n      offset\n    )\n    const classes = [column.id, column.align, column.className, ...fixedClasses]\n    const cellClassName = parent?.props.cellClassName\n    if (isString(cellClassName)) {\n      classes.push(cellClassName)\n    } else if (isFunction(cellClassName)) {\n      classes.push(\n        cellClassName.call(null, {\n          rowIndex,\n          columnIndex,\n          row,\n          column,\n        })\n      )\n    }\n    classes.push(ns.e('cell'))\n    return classes.filter((className) => Boolean(className)).join(' ')\n  }\n  const getSpan = (\n    row: T,\n    column: TableColumnCtx<T>,\n    rowIndex: number,\n    columnIndex: number\n  ) => {\n    let rowspan = 1\n    let colspan = 1\n    const fn = parent?.props.spanMethod\n    if (isFunction(fn)) {\n      const result = fn({\n        row,\n        column,\n        rowIndex,\n        columnIndex,\n      })\n      if (isArray(result)) {\n        rowspan = result[0]\n        colspan = result[1]\n      } else if (isObject(result)) {\n        rowspan = result.rowspan\n        colspan = result.colspan\n      }\n    }\n    return { rowspan, colspan }\n  }\n  const getColspanRealWidth = (\n    columns: TableColumnCtx<T>[],\n    colspan: number,\n    index: number\n  ): number => {\n    if (colspan < 1) {\n      return columns[index].realWidth!\n    }\n    const widthArr = columns\n      .map(({ realWidth, width }) => realWidth || width)\n      .slice(index, index + colspan)\n    return Number(\n      widthArr.reduce((acc, width) => Number(acc) + Number(width), -1)\n    )\n  }\n\n  return {\n    getRowStyle,\n    getRowClass,\n    getCellStyle,\n    getCellClass,\n    getSpan,\n    getColspanRealWidth,\n  }\n}\n\nexport default useStyles\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}