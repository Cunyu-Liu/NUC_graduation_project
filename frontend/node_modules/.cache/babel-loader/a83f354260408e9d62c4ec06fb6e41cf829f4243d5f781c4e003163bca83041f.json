{"ast":null,"code":"const useTimePanel = ({\n  getAvailableHours,\n  getAvailableMinutes,\n  getAvailableSeconds\n}) => {\n  const getAvailableTime = (date, role, first, compareDate) => {\n    const availableTimeGetters = {\n      hour: getAvailableHours,\n      minute: getAvailableMinutes,\n      second: getAvailableSeconds\n    };\n    let result = date;\n    [\"hour\", \"minute\", \"second\"].forEach(type => {\n      if (availableTimeGetters[type]) {\n        let availableTimeSlots;\n        const method = availableTimeGetters[type];\n        switch (type) {\n          case \"minute\":\n            {\n              availableTimeSlots = method(result.hour(), role, compareDate);\n              break;\n            }\n          case \"second\":\n            {\n              availableTimeSlots = method(result.hour(), result.minute(), role, compareDate);\n              break;\n            }\n          default:\n            {\n              availableTimeSlots = method(role, compareDate);\n              break;\n            }\n        }\n        if ((availableTimeSlots == null ? void 0 : availableTimeSlots.length) && !availableTimeSlots.includes(result[type]())) {\n          const pos = first ? 0 : availableTimeSlots.length - 1;\n          result = result[type](availableTimeSlots[pos]);\n        }\n      }\n    });\n    return result;\n  };\n  const timePickerOptions = {};\n  const onSetOption = ([key, val]) => {\n    timePickerOptions[key] = val;\n  };\n  return {\n    timePickerOptions,\n    getAvailableTime,\n    onSetOption\n  };\n};\nexport { useTimePanel };","map":{"version":3,"names":["useTimePanel","getAvailableHours","getAvailableMinutes","getAvailableSeconds","getAvailableTime","date","role","first","compareDate","availableTimeGetters","hour","minute","second","result","forEach","type","availableTimeSlots","method","length","includes","pos","timePickerOptions","onSetOption","key","val"],"sources":["../../../../../../../packages/components/time-picker/src/composables/use-time-panel.ts"],"sourcesContent":["import type { Dayjs } from 'dayjs'\nimport type {\n  GetDisabledHours,\n  GetDisabledMinutes,\n  GetDisabledSeconds,\n} from '../common/props'\n\ntype UseTimePanelProps = {\n  getAvailableHours: GetDisabledHours\n  getAvailableMinutes: GetDisabledMinutes\n  getAvailableSeconds: GetDisabledSeconds\n}\n\nexport const useTimePanel = ({\n  getAvailableHours,\n  getAvailableMinutes,\n  getAvailableSeconds,\n}: UseTimePanelProps) => {\n  const getAvailableTime = (\n    date: Dayjs,\n    role: string,\n    first: boolean,\n    compareDate?: Dayjs\n  ) => {\n    const availableTimeGetters = {\n      hour: getAvailableHours,\n      minute: getAvailableMinutes,\n      second: getAvailableSeconds,\n    } as const\n    let result = date\n    ;(['hour', 'minute', 'second'] as const).forEach((type) => {\n      if (availableTimeGetters[type]) {\n        let availableTimeSlots: number[]\n        const method = availableTimeGetters[type]\n        switch (type) {\n          case 'minute': {\n            availableTimeSlots = (method as typeof getAvailableMinutes)(\n              result.hour(),\n              role,\n              compareDate\n            )\n            break\n          }\n          case 'second': {\n            availableTimeSlots = (method as typeof getAvailableSeconds)(\n              result.hour(),\n              result.minute(),\n              role,\n              compareDate\n            )\n            break\n          }\n          default: {\n            availableTimeSlots = (method as typeof getAvailableHours)(\n              role,\n              compareDate\n            )\n            break\n          }\n        }\n\n        if (\n          availableTimeSlots?.length &&\n          !availableTimeSlots.includes(result[type]())\n        ) {\n          const pos = first ? 0 : availableTimeSlots.length - 1\n          result = result[type](availableTimeSlots[pos]) as unknown as Dayjs\n        }\n      }\n    })\n    return result\n  }\n\n  const timePickerOptions: Record<string, (...args: any[]) => void> = {}\n\n  const onSetOption = ([key, val]: [string, (...args: any[]) => void]) => {\n    timePickerOptions[key] = val\n  }\n\n  return {\n    timePickerOptions,\n\n    getAvailableTime,\n    onSetOption,\n  }\n}\n"],"mappings":"AAaO,MAAMA,YAAA,GAAeA,CAAC;EAC3BC,iBAAA;EACAC,mBAAA;EACAC;AACF,CAAyB;EACvB,MAAMC,gBAAmB,GAAAA,CACvBC,IACA,EAAAC,IAAA,EACAC,KAAA,EACAC,WACG;IACH,MAAMC,oBAAuB;MAC3BC,IAAM,EAAAT,iBAAA;MACNU,MAAQ,EAAAT,mBAAA;MACRU,MAAQ,EAAAT;IAAA,CACV;IACA,IAAIU,MAAS,GAAAR,IAAA;IACX,CAAC,MAAQ,YAAU,QAAQ,CAAY,CAAAS,OAAA,CAASC,IAAS;MACzD,IAAIN,oBAAA,CAAqBM,IAAO;QAC1B,IAAAC,kBAAA;QACJ,MAAMC,MAAA,GAASR,oBAAqB,CAAAM,IAAA;QAC5B,QAAAA,IAAA;UAAA,KACD,QAAU;YAAA;cACSC,kBAAA,GAAAC,MAAA,CACpBJ,MAAA,CAAOH,IAAK,IACZJ,IAAA,EACAE,WAAA,CACF;cACA;YAAA;UACF,KACK,QAAU;YAAA;cACSQ,kBAAA,GAAAC,MAAA,CACpBJ,MAAA,CAAOH,IAAK,IACZG,MAAA,CAAOF,MAAO,IACdL,IAAA,EACAE,WAAA,CACF;cACA;YAAA;UAEO;YAAA;cACeQ,kBAAA,GAAAC,MAAA,CACpBX,IAAA,EACAE,WAAA,CACF;cACA;YAAA;QACF;QAIA,KAAAQ,kBAAA,oBAAAA,kBAAA,CAAoBE,MAAA,KACpB,CAACF,kBAAA,CAAmBG,QAAA,CAASN,MAAO,CAAAE,IAAA,GAAO,CAC3C;UACA,MAAMK,GAAM,GAAAb,KAAA,GAAQ,CAAI,GAAAS,kBAAA,CAAmBE,MAAS;UAC3CL,MAAA,GAAAA,MAAA,CAAOE,IAAM,EAAAC,kBAAA,CAAmBI,GAAI;QAAA;MAC/C;IACF,CACD;IACM,OAAAP,MAAA;EAAA,CACT;EAEA,MAAMQ,iBAAA,GAA8D,EAAC;EAErE,MAAMC,WAAc,GAAAA,CAAC,CAACC,GAAA,EAAKC,GAAG,CAA0C;IACtEH,iBAAA,CAAkBE,GAAO,IAAAC,GAAA;EAAA,CAC3B;EAEO;IACLH,iBAAA;IAEAjB,gBAAA;IACAkB;EAAA,CACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}