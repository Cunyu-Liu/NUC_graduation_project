{"ast":null,"code":"import { computed } from 'vue';\nimport { TinyColor } from '@ctrl/tinycolor';\nimport { useFormDisabled } from '../../form/src/hooks/use-form-common-props.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nfunction darken(color, amount = 20) {\n  return color.mix(\"#141414\", amount).toString();\n}\nfunction useButtonCustomStyle(props) {\n  const _disabled = useFormDisabled();\n  const ns = useNamespace(\"button\");\n  return computed(() => {\n    let styles = {};\n    let buttonColor = props.color;\n    if (buttonColor) {\n      const match = buttonColor.match(/var\\((.*?)\\)/);\n      if (match) {\n        buttonColor = window.getComputedStyle(window.document.documentElement).getPropertyValue(match[1]);\n      }\n      const color = new TinyColor(buttonColor);\n      const activeBgColor = props.dark ? color.tint(20).toString() : darken(color, 20);\n      if (props.plain) {\n        styles = ns.cssVarBlock({\n          \"bg-color\": props.dark ? darken(color, 90) : color.tint(90).toString(),\n          \"text-color\": buttonColor,\n          \"border-color\": props.dark ? darken(color, 50) : color.tint(50).toString(),\n          \"hover-text-color\": `var(${ns.cssVarName(\"color-white\")})`,\n          \"hover-bg-color\": buttonColor,\n          \"hover-border-color\": buttonColor,\n          \"active-bg-color\": activeBgColor,\n          \"active-text-color\": `var(${ns.cssVarName(\"color-white\")})`,\n          \"active-border-color\": activeBgColor\n        });\n        if (_disabled.value) {\n          styles[ns.cssVarBlockName(\"disabled-bg-color\")] = props.dark ? darken(color, 90) : color.tint(90).toString();\n          styles[ns.cssVarBlockName(\"disabled-text-color\")] = props.dark ? darken(color, 50) : color.tint(50).toString();\n          styles[ns.cssVarBlockName(\"disabled-border-color\")] = props.dark ? darken(color, 80) : color.tint(80).toString();\n        }\n      } else {\n        const hoverBgColor = props.dark ? darken(color, 30) : color.tint(30).toString();\n        const textColor = color.isDark() ? `var(${ns.cssVarName(\"color-white\")})` : `var(${ns.cssVarName(\"color-black\")})`;\n        styles = ns.cssVarBlock({\n          \"bg-color\": buttonColor,\n          \"text-color\": textColor,\n          \"border-color\": buttonColor,\n          \"hover-bg-color\": hoverBgColor,\n          \"hover-text-color\": textColor,\n          \"hover-border-color\": hoverBgColor,\n          \"active-bg-color\": activeBgColor,\n          \"active-border-color\": activeBgColor\n        });\n        if (_disabled.value) {\n          const disabledButtonColor = props.dark ? darken(color, 50) : color.tint(50).toString();\n          styles[ns.cssVarBlockName(\"disabled-bg-color\")] = disabledButtonColor;\n          styles[ns.cssVarBlockName(\"disabled-text-color\")] = props.dark ? \"rgba(255, 255, 255, 0.5)\" : `var(${ns.cssVarName(\"color-white\")})`;\n          styles[ns.cssVarBlockName(\"disabled-border-color\")] = disabledButtonColor;\n        }\n      }\n    }\n    return styles;\n  });\n}\nexport { darken, useButtonCustomStyle };","map":{"version":3,"names":["darken","color","amount","mix","toString","useButtonCustomStyle","props","_disabled","useFormDisabled","ns","useNamespace","computed","styles","buttonColor","match","window","getComputedStyle","document","documentElement","getPropertyValue","TinyColor","activeBgColor","dark","tint","plain","cssVarBlock","cssVarName","value","cssVarBlockName","hoverBgColor","textColor","isDark","disabledButtonColor"],"sources":["../../../../../../packages/components/button/src/button-custom.ts"],"sourcesContent":["import { computed } from 'vue'\nimport { TinyColor } from '@ctrl/tinycolor'\nimport { useNamespace } from '@element-plus/hooks'\nimport { useFormDisabled } from '@element-plus/components/form'\n\nimport type { ButtonProps } from './button'\n\nexport function darken(color: TinyColor, amount = 20) {\n  return color.mix('#141414', amount).toString()\n}\n\nexport function useButtonCustomStyle(props: ButtonProps) {\n  const _disabled = useFormDisabled()\n  const ns = useNamespace('button')\n\n  // calculate hover & active color by custom color\n  // only work when custom color\n  return computed(() => {\n    let styles: Record<string, string> = {}\n\n    let buttonColor = props.color\n\n    if (buttonColor) {\n      const match = (buttonColor as string).match(/var\\((.*?)\\)/)\n      if (match) {\n        buttonColor = window\n          .getComputedStyle(window.document.documentElement)\n          .getPropertyValue(match[1])\n      }\n      const color = new TinyColor(buttonColor)\n      const activeBgColor = props.dark\n        ? color.tint(20).toString()\n        : darken(color, 20)\n\n      if (props.plain) {\n        styles = ns.cssVarBlock({\n          'bg-color': props.dark\n            ? darken(color, 90)\n            : color.tint(90).toString(),\n          'text-color': buttonColor,\n          'border-color': props.dark\n            ? darken(color, 50)\n            : color.tint(50).toString(),\n          'hover-text-color': `var(${ns.cssVarName('color-white')})`,\n          'hover-bg-color': buttonColor,\n          'hover-border-color': buttonColor,\n          'active-bg-color': activeBgColor,\n          'active-text-color': `var(${ns.cssVarName('color-white')})`,\n          'active-border-color': activeBgColor,\n        })\n\n        if (_disabled.value) {\n          styles[ns.cssVarBlockName('disabled-bg-color')] = props.dark\n            ? darken(color, 90)\n            : color.tint(90).toString()\n          styles[ns.cssVarBlockName('disabled-text-color')] = props.dark\n            ? darken(color, 50)\n            : color.tint(50).toString()\n          styles[ns.cssVarBlockName('disabled-border-color')] = props.dark\n            ? darken(color, 80)\n            : color.tint(80).toString()\n        }\n      } else {\n        const hoverBgColor = props.dark\n          ? darken(color, 30)\n          : color.tint(30).toString()\n        const textColor = color.isDark()\n          ? `var(${ns.cssVarName('color-white')})`\n          : `var(${ns.cssVarName('color-black')})`\n        styles = ns.cssVarBlock({\n          'bg-color': buttonColor,\n          'text-color': textColor,\n          'border-color': buttonColor,\n          'hover-bg-color': hoverBgColor,\n          'hover-text-color': textColor,\n          'hover-border-color': hoverBgColor,\n          'active-bg-color': activeBgColor,\n          'active-border-color': activeBgColor,\n        })\n\n        if (_disabled.value) {\n          const disabledButtonColor = props.dark\n            ? darken(color, 50)\n            : color.tint(50).toString()\n          styles[ns.cssVarBlockName('disabled-bg-color')] = disabledButtonColor\n          styles[ns.cssVarBlockName('disabled-text-color')] = props.dark\n            ? 'rgba(255, 255, 255, 0.5)'\n            : `var(${ns.cssVarName('color-white')})`\n          styles[ns.cssVarBlockName('disabled-border-color')] =\n            disabledButtonColor\n        }\n      }\n    }\n\n    return styles\n  })\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}