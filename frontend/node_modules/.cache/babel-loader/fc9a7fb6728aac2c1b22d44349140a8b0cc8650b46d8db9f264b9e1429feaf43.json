{"ast":null,"code":"import { defineComponent, getCurrentInstance, inject, computed, resolveComponent, openBlock, createBlock, withCtx, createVNode, mergeProps, createSlots, renderSlot } from 'vue';\nimport ElRovingFocusItem from '../../roving-focus-group/src/roving-focus-item.mjs';\nimport ElDropdownItemImpl from './dropdown-item-impl.mjs';\nimport { useDropdown } from './useDropdown.mjs';\nimport { dropdownItemProps } from './dropdown.mjs';\nimport { DROPDOWN_INJECTION_KEY } from './tokens.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { composeEventHandlers, whenMouse } from '../../../utils/dom/event.mjs';\nconst _sfc_main = defineComponent({\n  name: \"ElDropdownItem\",\n  components: {\n    ElRovingFocusItem,\n    ElDropdownItemImpl\n  },\n  inheritAttrs: false,\n  props: dropdownItemProps,\n  emits: [\"pointermove\", \"pointerleave\", \"click\"],\n  setup(props, {\n    emit,\n    attrs\n  }) {\n    const {\n      elDropdown\n    } = useDropdown();\n    const _instance = getCurrentInstance();\n    const {\n      onItemEnter,\n      onItemLeave\n    } = inject(DROPDOWN_INJECTION_KEY, void 0);\n    const handlePointerMove = composeEventHandlers(e => {\n      emit(\"pointermove\", e);\n      return e.defaultPrevented;\n    }, whenMouse(e => {\n      if (props.disabled) {\n        onItemLeave(e);\n        return;\n      }\n      const target = e.currentTarget;\n      if (target === document.activeElement || target.contains(document.activeElement)) {\n        return;\n      }\n      onItemEnter(e);\n      if (!e.defaultPrevented) {\n        target == null ? void 0 : target.focus({\n          preventScroll: true\n        });\n      }\n    }));\n    const handlePointerLeave = composeEventHandlers(e => {\n      emit(\"pointerleave\", e);\n      return e.defaultPrevented;\n    }, whenMouse(onItemLeave));\n    const handleClick = composeEventHandlers(e => {\n      if (props.disabled) {\n        return;\n      }\n      emit(\"click\", e);\n      return e.type !== \"keydown\" && e.defaultPrevented;\n    }, e => {\n      var _a, _b, _c;\n      if (props.disabled) {\n        e.stopImmediatePropagation();\n        return;\n      }\n      if ((_a = elDropdown == null ? void 0 : elDropdown.hideOnClick) == null ? void 0 : _a.value) {\n        (_b = elDropdown.handleClick) == null ? void 0 : _b.call(elDropdown);\n      }\n      (_c = elDropdown.commandHandler) == null ? void 0 : _c.call(elDropdown, props.command, _instance, e);\n    });\n    const propsAndAttrs = computed(() => ({\n      ...props,\n      ...attrs\n    }));\n    return {\n      handleClick,\n      handlePointerMove,\n      handlePointerLeave,\n      propsAndAttrs\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_dropdown_item_impl = resolveComponent(\"el-dropdown-item-impl\");\n  const _component_el_roving_focus_item = resolveComponent(\"el-roving-focus-item\");\n  return openBlock(), createBlock(_component_el_roving_focus_item, {\n    focusable: !_ctx.disabled\n  }, {\n    default: withCtx(() => [createVNode(_component_el_dropdown_item_impl, mergeProps(_ctx.propsAndAttrs, {\n      onPointerleave: _ctx.handlePointerLeave,\n      onPointermove: _ctx.handlePointerMove,\n      onClickimpl: _ctx.handleClick\n    }), createSlots({\n      default: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n      _: 2\n    }, [_ctx.$slots.icon ? {\n      name: \"icon\",\n      fn: withCtx(() => [renderSlot(_ctx.$slots, \"icon\")]),\n      key: \"0\"\n    } : void 0]), 1040, [\"onPointerleave\", \"onPointermove\", \"onClickimpl\"])]),\n    _: 3\n  }, 8, [\"focusable\"]);\n}\nvar DropdownItem = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue\"]]);\nexport { DropdownItem as default };","map":{"version":3,"names":["_sfc_main","defineComponent","name","components","ElRovingFocusItem","ElDropdownItemImpl","inheritAttrs","props","dropdownItemProps","emits","setup","emit","attrs","elDropdown","useDropdown","_instance","getCurrentInstance","onItemEnter","onItemLeave","inject","DROPDOWN_INJECTION_KEY","handlePointerMove","composeEventHandlers","e","defaultPrevented","whenMouse","disabled","target","currentTarget","document","activeElement","contains","focus","preventScroll","handlePointerLeave","handleClick","type","_a","_b","_c","stopImmediatePropagation","hideOnClick","value","call","commandHandler","command","propsAndAttrs","computed","createBlock","_component_el_roving_focus_item","focusable","_ctx","default","withCtx","createVNode","_component_el_dropdown_item_impl","mergeProps","onPointerleave","onPointermove","onClickimpl","createSlots","renderSlot","$slots","_","icon","fn","key"],"sources":["../../../../../../packages/components/dropdown/src/dropdown-item.vue"],"sourcesContent":["<template>\n  <el-roving-focus-item :focusable=\"!disabled\">\n    <el-dropdown-item-impl\n      v-bind=\"propsAndAttrs\"\n      @pointerleave=\"handlePointerLeave\"\n      @pointermove=\"handlePointerMove\"\n      @clickimpl=\"handleClick\"\n    >\n      <template v-if=\"$slots.icon\" #icon>\n        <slot name=\"icon\" />\n      </template>\n\n      <slot />\n    </el-dropdown-item-impl>\n  </el-roving-focus-item>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, getCurrentInstance, inject } from 'vue'\nimport { ElRovingFocusItem } from '@element-plus/components/roving-focus-group'\nimport { composeEventHandlers, whenMouse } from '@element-plus/utils'\nimport ElDropdownItemImpl from './dropdown-item-impl.vue'\nimport { useDropdown } from './useDropdown'\nimport { dropdownItemProps } from './dropdown'\nimport { DROPDOWN_INJECTION_KEY } from './tokens'\n\nexport default defineComponent({\n  name: 'ElDropdownItem',\n  components: {\n    ElRovingFocusItem,\n    ElDropdownItemImpl,\n  },\n  inheritAttrs: false,\n  props: dropdownItemProps,\n  emits: ['pointermove', 'pointerleave', 'click'],\n  setup(props, { emit, attrs }) {\n    const { elDropdown } = useDropdown()\n    const _instance = getCurrentInstance()\n    const { onItemEnter, onItemLeave } = inject(\n      DROPDOWN_INJECTION_KEY,\n      undefined\n    )!\n\n    const handlePointerMove = composeEventHandlers(\n      (e: PointerEvent) => {\n        emit('pointermove', e)\n        return e.defaultPrevented\n      },\n      whenMouse((e) => {\n        if (props.disabled) {\n          onItemLeave(e)\n          return\n        }\n\n        const target = e.currentTarget as HTMLElement\n        /**\n         * This handles the following scenario:\n         *   when the item contains a form element such as input element\n         *   when the mouse is moving over the element itself which is contained by\n         *   the item, the default focusing logic should be prevented so that\n         *   it won't cause weird action.\n         */\n        if (\n          target === document.activeElement ||\n          target.contains(document.activeElement)\n        ) {\n          return\n        }\n\n        onItemEnter(e)\n        if (!e.defaultPrevented) {\n          target?.focus({\n            preventScroll: true,\n          })\n        }\n      })\n    )\n\n    const handlePointerLeave = composeEventHandlers((e: PointerEvent) => {\n      emit('pointerleave', e)\n      return e.defaultPrevented\n    }, whenMouse(onItemLeave))\n\n    const handleClick = composeEventHandlers(\n      (e: PointerEvent) => {\n        if (props.disabled) {\n          return\n        }\n        emit('click', e)\n        return e.type !== 'keydown' && e.defaultPrevented\n      },\n      (e) => {\n        if (props.disabled) {\n          e.stopImmediatePropagation()\n          return\n        }\n        if (elDropdown?.hideOnClick?.value) {\n          elDropdown.handleClick?.()\n        }\n        elDropdown.commandHandler?.(props.command, _instance, e)\n      }\n    )\n\n    // direct usage of v-bind={ ...$props, ...$attrs } causes type errors\n    const propsAndAttrs = computed(() => ({ ...props, ...attrs }))\n\n    return {\n      handleClick,\n      handlePointerMove,\n      handlePointerLeave,\n      propsAndAttrs,\n    }\n  },\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}