{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { computed, unref } from 'vue';\nimport { sum, enforceUnit } from '../utils.mjs';\nimport { isNumber } from '../../../../utils/types.mjs';\nimport { addUnit } from '../../../../utils/dom/style.mjs';\nconst useStyles = (props, {\n  columnsTotalWidth,\n  rowsHeight,\n  fixedColumnsOnLeft,\n  fixedColumnsOnRight\n}) => {\n  const bodyWidth = computed(() => {\n    const {\n      fixed,\n      width,\n      vScrollbarSize\n    } = props;\n    const ret = width - vScrollbarSize;\n    return fixed ? Math.max(Math.round(unref(columnsTotalWidth)), ret) : ret;\n  });\n  const mainTableHeight = computed(() => {\n    const {\n      height = 0,\n      maxHeight = 0,\n      footerHeight: footerHeight2,\n      hScrollbarSize\n    } = props;\n    if (maxHeight > 0) {\n      const _fixedRowsHeight = unref(fixedRowsHeight);\n      const _rowsHeight = unref(rowsHeight);\n      const _headerHeight = unref(headerHeight);\n      const total = _headerHeight + _fixedRowsHeight + _rowsHeight + hScrollbarSize;\n      return Math.min(total, maxHeight - footerHeight2);\n    }\n    return height - footerHeight2;\n  });\n  const fixedTableHeight = computed(() => {\n    const {\n      maxHeight\n    } = props;\n    const tableHeight = unref(mainTableHeight);\n    if (isNumber(maxHeight) && maxHeight > 0) return tableHeight;\n    const totalHeight = unref(rowsHeight) + unref(headerHeight) + unref(fixedRowsHeight);\n    return Math.min(tableHeight, totalHeight);\n  });\n  const mapColumn = column => column.width;\n  const leftTableWidth = computed(() => sum(unref(fixedColumnsOnLeft).map(mapColumn)));\n  const rightTableWidth = computed(() => sum(unref(fixedColumnsOnRight).map(mapColumn)));\n  const headerHeight = computed(() => sum(props.headerHeight));\n  const fixedRowsHeight = computed(() => {\n    var _a;\n    return (((_a = props.fixedData) == null ? void 0 : _a.length) || 0) * props.rowHeight;\n  });\n  const windowHeight = computed(() => {\n    return unref(mainTableHeight) - unref(headerHeight) - unref(fixedRowsHeight);\n  });\n  const rootStyle = computed(() => {\n    const {\n      style = {},\n      height,\n      width\n    } = props;\n    return enforceUnit({\n      ...style,\n      height,\n      width\n    });\n  });\n  const footerHeight = computed(() => enforceUnit({\n    height: props.footerHeight\n  }));\n  const emptyStyle = computed(() => ({\n    top: addUnit(unref(headerHeight)),\n    bottom: addUnit(props.footerHeight),\n    width: addUnit(props.width)\n  }));\n  return {\n    bodyWidth,\n    fixedTableHeight,\n    mainTableHeight,\n    leftTableWidth,\n    rightTableWidth,\n    windowHeight,\n    footerHeight,\n    emptyStyle,\n    rootStyle,\n    headerHeight\n  };\n};\nexport { useStyles };","map":{"version":3,"names":["useStyles","props","columnsTotalWidth","rowsHeight","fixedColumnsOnLeft","fixedColumnsOnRight","bodyWidth","computed","fixed","width","vScrollbarSize","ret","Math","max","round","unref","mainTableHeight","height","maxHeight","footerHeight","footerHeight2","hScrollbarSize","_fixedRowsHeight","fixedRowsHeight","_rowsHeight","_headerHeight","headerHeight","total","min","fixedTableHeight","tableHeight","isNumber","totalHeight","mapColumn","column","leftTableWidth","sum","map","rightTableWidth","_a","fixedData","length","rowHeight","windowHeight","rootStyle","style","enforceUnit","emptyStyle","top","addUnit","bottom"],"sources":["../../../../../../../packages/components/table-v2/src/composables/use-styles.ts"],"sourcesContent":["import { computed, unref } from 'vue'\nimport { addUnit, isNumber } from '@element-plus/utils'\nimport { enforceUnit, sum } from '../utils'\n\nimport type { CSSProperties, ComputedRef } from 'vue'\nimport type { TableV2Props } from '../table'\nimport type { UseColumnsReturn } from './use-columns'\n\ntype UseStyleProps = {\n  columnsTotalWidth: UseColumnsReturn['columnsTotalWidth']\n  fixedColumnsOnLeft: UseColumnsReturn['fixedColumnsOnLeft']\n  fixedColumnsOnRight: UseColumnsReturn['fixedColumnsOnRight']\n  rowsHeight: ComputedRef<number>\n}\n\nexport const useStyles = (\n  props: TableV2Props,\n  {\n    columnsTotalWidth,\n    rowsHeight,\n    fixedColumnsOnLeft,\n    fixedColumnsOnRight,\n  }: UseStyleProps\n) => {\n  const bodyWidth = computed(() => {\n    const { fixed, width, vScrollbarSize } = props\n    const ret = width - vScrollbarSize\n    return fixed ? Math.max(Math.round(unref(columnsTotalWidth)), ret) : ret\n  })\n\n  const mainTableHeight = computed(() => {\n    const { height = 0, maxHeight = 0, footerHeight, hScrollbarSize } = props\n\n    if (maxHeight > 0) {\n      const _fixedRowsHeight = unref(fixedRowsHeight)\n      const _rowsHeight = unref(rowsHeight)\n      const _headerHeight = unref(headerHeight)\n      const total =\n        _headerHeight + _fixedRowsHeight + _rowsHeight + hScrollbarSize\n\n      return Math.min(total, maxHeight - footerHeight)\n    }\n\n    return height - footerHeight\n  })\n\n  const fixedTableHeight = computed(() => {\n    const { maxHeight } = props\n    const tableHeight = unref(mainTableHeight)\n    if (isNumber(maxHeight) && maxHeight > 0) return tableHeight\n\n    const totalHeight =\n      unref(rowsHeight) + unref(headerHeight) + unref(fixedRowsHeight)\n\n    return Math.min(tableHeight, totalHeight)\n  })\n\n  const mapColumn = (column: TableV2Props['columns'][number]) => column.width\n\n  const leftTableWidth = computed(() =>\n    sum(unref(fixedColumnsOnLeft).map(mapColumn))\n  )\n\n  const rightTableWidth = computed(() =>\n    sum(unref(fixedColumnsOnRight).map(mapColumn))\n  )\n\n  const headerHeight = computed(() => sum(props.headerHeight))\n\n  const fixedRowsHeight = computed(() => {\n    return (props.fixedData?.length || 0) * props.rowHeight\n  })\n\n  const windowHeight = computed(() => {\n    return unref(mainTableHeight) - unref(headerHeight) - unref(fixedRowsHeight)\n  })\n\n  const rootStyle = computed<CSSProperties>(() => {\n    const { style = {}, height, width } = props\n    return enforceUnit({\n      ...style,\n      height,\n      width,\n    })\n  })\n\n  const footerHeight = computed(() =>\n    enforceUnit({ height: props.footerHeight })\n  )\n\n  const emptyStyle = computed<CSSProperties>(() => ({\n    top: addUnit(unref(headerHeight)),\n    bottom: addUnit(props.footerHeight),\n    width: addUnit(props.width),\n  }))\n\n  return {\n    bodyWidth,\n    fixedTableHeight,\n    mainTableHeight,\n    leftTableWidth,\n    rightTableWidth,\n    windowHeight,\n    footerHeight,\n    emptyStyle,\n    rootStyle,\n    headerHeight,\n  }\n}\n\nexport type UseStyleReturn = ReturnType<typeof useStyles>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}