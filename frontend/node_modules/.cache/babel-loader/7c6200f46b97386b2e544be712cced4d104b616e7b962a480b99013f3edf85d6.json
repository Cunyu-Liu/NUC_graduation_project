{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"cluster\"\n};\nconst _hoisted_2 = {\n  class: \"select-header\"\n};\nconst _hoisted_3 = {\n  class: \"vector-cluster-info\"\n};\nconst _hoisted_4 = {\n  class: \"vector-actions\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"vector-stats\",\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_6 = {\n  class: \"history-header\"\n};\nconst _hoisted_7 = {\n  class: \"result-header\"\n};\nconst _hoisted_8 = {\n  class: \"result-actions-top\"\n};\nconst _hoisted_9 = {\n  class: \"cluster-title\"\n};\nconst _hoisted_10 = {\n  class: \"cluster-name\"\n};\nconst _hoisted_11 = {\n  class: \"cluster-content\"\n};\nconst _hoisted_12 = {\n  key: 2,\n  class: \"paper-list\"\n};\nconst _hoisted_13 = {\n  key: 4\n};\nconst _hoisted_14 = {\n  class: \"rep-abstract\"\n};\nconst _hoisted_15 = {\n  class: \"result-actions\"\n};\nconst _hoisted_16 = {\n  class: \"visualization-container\"\n};\nconst _hoisted_17 = {\n  ref: \"vizCanvas\",\n  class: \"viz-canvas\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Refresh = _resolveComponent(\"Refresh\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_input_number = _resolveComponent(\"el-input-number\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_DataAnalysis = _resolveComponent(\"DataAnalysis\");\n  const _component_el_tab_pane = _resolveComponent(\"el-tab-pane\");\n  const _component_el_alert = _resolveComponent(\"el-alert\");\n  const _component_Upload = _resolveComponent(\"Upload\");\n  const _component_el_descriptions_item = _resolveComponent(\"el-descriptions-item\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_descriptions = _resolveComponent(\"el-descriptions\");\n  const _component_el_tabs = _resolveComponent(\"el-tabs\");\n  const _component_Star = _resolveComponent(\"Star\");\n  const _component_el_space = _resolveComponent(\"el-space\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_el_collapse_item = _resolveComponent(\"el-collapse-item\");\n  const _component_el_collapse = _resolveComponent(\"el-collapse\");\n  const _component_PictureIcon = _resolveComponent(\"PictureIcon\");\n  const _component_Document = _resolveComponent(\"Document\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[27] || (_cache[27] = _createElementVNode(\"h2\", null, \"多篇论文主题聚类分析\", -1 /* CACHED */)), _createVNode(_component_el_card, {\n    class: \"select-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[9] || (_cache[9] = _createElementVNode(\"h3\", null, \"选择要分析的论文（至少2篇）\", -1 /* CACHED */)), _createVNode(_component_el_button, {\n      onClick: $setup.refreshFiles,\n      size: \"small\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Refresh)]),\n        _: 1 /* STABLE */\n      }), _cache[8] || (_cache[8] = _createTextVNode(\" 刷新列表 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]), _withDirectives((_openBlock(), _createBlock(_component_el_table, {\n      data: $setup.files,\n      style: {\n        \"width\": \"100%\",\n        \"margin-top\": \"20px\"\n      },\n      onSelectionChange: $setup.handleSelectionChange\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        type: \"selection\",\n        width: \"55\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"title\",\n        label: \"论文标题\",\n        \"min-width\": \"250\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.title || '未命名论文'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"year\",\n        label: \"年份\",\n        width: \"80\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.year || '未知'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"venue\",\n        label: \"期刊/会议\",\n        \"min-width\": \"150\"\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\", \"onSelectionChange\"])), [[_directive_loading, $setup.loading]])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_card, {\n    class: \"options-card\"\n  }, {\n    default: _withCtx(() => [_cache[13] || (_cache[13] = _createElementVNode(\"h3\", null, \"聚类选项\", -1 /* CACHED */)), _createVNode(_component_el_tabs, {\n      modelValue: $setup.clusterMode,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.clusterMode = $event)\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_tab_pane, {\n        label: \"传统聚类\",\n        name: \"traditional\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_form, {\n          model: $setup.options,\n          \"label-width\": \"120px\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, {\n            label: \"聚类数量\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input_number, {\n              modelValue: $setup.options.nClusters,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.options.nClusters = $event),\n              min: 2,\n              max: 10\n            }, null, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"聚类方法\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_select, {\n              modelValue: $setup.options.method,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.options.method = $event)\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_option, {\n                label: \"K-Means\",\n                value: \"kmeans\"\n              }), _createVNode(_component_el_option, {\n                label: \"DBSCAN\",\n                value: \"dbscan\"\n              }), _createVNode(_component_el_option, {\n                label: \"层次聚类\",\n                value: \"hierarchical\"\n              })]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"论文语言\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_select, {\n              modelValue: $setup.options.language,\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.options.language = $event)\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_option, {\n                label: \"中文\",\n                value: \"chinese\"\n              }), _createVNode(_component_el_option, {\n                label: \"英文\",\n                value: \"english\"\n              })]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"model\"]), _createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"large\",\n          onClick: $setup.startCluster,\n          disabled: $setup.selectedFiles.length < 2,\n          loading: $setup.clustering\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_DataAnalysis)]),\n            _: 1 /* STABLE */\n          }), _cache[10] || (_cache[10] = _createTextVNode(\" 开始传统聚类分析 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\", \"disabled\", \"loading\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_tab_pane, {\n        label: \"向量聚类 (Milvus)\",\n        name: \"vector\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_alert, {\n          title: \"基于向量嵌入的语义聚类\",\n          description: \"使用 Milvus 向量数据库和深度学习模型进行语义层面的论文聚类，能够捕捉论文间的深层语义关联。\",\n          type: \"info\",\n          closable: false,\n          \"show-icon\": \"\"\n        })]), _createVNode(_component_el_form, {\n          model: $setup.vectorOptions,\n          \"label-width\": \"120px\",\n          style: {\n            \"margin-top\": \"16px\"\n          }\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, {\n            label: \"聚类数量\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input_number, {\n              modelValue: $setup.vectorOptions.nClusters,\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.vectorOptions.nClusters = $event),\n              min: 2,\n              max: 20\n            }, null, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"model\"]), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"large\",\n          onClick: $setup.startVectorCluster,\n          disabled: $setup.selectedFiles.length < 2,\n          loading: $setup.vectorClustering\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_DataAnalysis)]),\n            _: 1 /* STABLE */\n          }), _cache[11] || (_cache[11] = _createTextVNode(\" 开始向量聚类分析 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\", \"disabled\", \"loading\"]), _createVNode(_component_el_button, {\n          size: \"large\",\n          onClick: $setup.syncToVectorStore,\n          loading: $setup.syncing\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_Upload)]),\n            _: 1 /* STABLE */\n          }), _cache[12] || (_cache[12] = _createTextVNode(\" 同步论文到向量库 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\", \"loading\"])]), $setup.vectorStats.total_papers > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_el_descriptions, {\n          column: 2,\n          border: \"\",\n          size: \"small\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_descriptions_item, {\n            label: \"向量库论文数\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.vectorStats.total_papers), 1 /* TEXT */)]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"向量维度\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.vectorStats.dimension), 1 /* TEXT */)]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"集合名称\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.vectorStats.collection_name), 1 /* TEXT */)]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"连接状态\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_tag, {\n              type: $setup.vectorStats.connected ? 'success' : 'danger'\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.vectorStats.connected ? '已连接' : '未连接'), 1 /* TEXT */)]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"type\"])]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        })])) : _createCommentVNode(\"v-if\", true)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 历史聚类结果 \"), $setup.clusterHistory.length > 0 ? (_openBlock(), _createBlock(_component_el_card, {\n    key: 0,\n    class: \"history-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_6, [_cache[15] || (_cache[15] = _createElementVNode(\"h3\", null, \"历史聚类结果\", -1 /* CACHED */)), _createVNode(_component_el_button, {\n      onClick: $setup.clearHistory,\n      type: \"danger\",\n      size: \"small\",\n      plain: \"\"\n    }, {\n      default: _withCtx(() => [...(_cache[14] || (_cache[14] = [_createTextVNode(\"清空历史\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]), _createVNode(_component_el_table, {\n      data: $setup.clusterHistory,\n      style: {\n        \"width\": \"100%\",\n        \"margin-top\": \"10px\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"createdAt\",\n        label: \"时间\",\n        width: \"180\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString($setup.formatDate(scope.row.createdAt)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"clusterCount\",\n        label: \"聚类数\",\n        width: \"80\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"method\",\n        label: \"方法\",\n        width: \"120\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"paperCount\",\n        label: \"论文数\",\n        width: \"80\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\",\n        width: \"200\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"small\",\n          onClick: $event => $setup.loadHistoryResult(scope.row)\n        }, {\n          default: _withCtx(() => [...(_cache[16] || (_cache[16] = [_createTextVNode(\"查看\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          type: \"danger\",\n          size: \"small\",\n          onClick: $event => $setup.deleteHistoryResult(scope.$index)\n        }, {\n          default: _withCtx(() => [...(_cache[17] || (_cache[17] = [_createTextVNode(\"删除\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"])]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), $setup.result ? (_openBlock(), _createBlock(_component_el_card, {\n    key: 1,\n    class: \"result-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_7, [_cache[19] || (_cache[19] = _createElementVNode(\"h3\", null, \"聚类结果\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_tag, {\n      type: \"success\",\n      size: \"large\",\n      effect: \"dark\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.result.clusterCount) + \" 个主题类别 \", 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), $setup.currentResultId ? (_openBlock(), _createBlock(_component_el_button, {\n      key: 0,\n      type: \"warning\",\n      size: \"small\",\n      onClick: $setup.saveCurrentResult\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Star)]),\n        _: 1 /* STABLE */\n      }), _cache[18] || (_cache[18] = _createTextVNode(\" 保存结果 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true)])]), _createVNode(_component_el_collapse, {\n      modelValue: $setup.activeClusters,\n      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.activeClusters = $event)\n    }, {\n      default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Object.entries($setup.result.clusterAnalysis), (cluster, index) => {\n        return _openBlock(), _createBlock(_component_el_collapse_item, {\n          key: cluster[0],\n          name: cluster[0]\n        }, {\n          title: _withCtx(() => [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", _hoisted_10, \"聚类 \" + _toDisplayString(parseInt(cluster[0]) + 1), 1 /* TEXT */), _createVNode(_component_el_tag, {\n            type: \"success\",\n            size: \"small\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(cluster[1]?.paper_count || 0) + \" 篇论文 \", 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */), cluster[1]?.top_keywords?.length > 0 ? (_openBlock(), _createBlock(_component_el_tag, {\n            key: 0,\n            type: \"info\",\n            size: \"small\",\n            style: {\n              \"margin-left\": \"8px\"\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(cluster[1].top_keywords.slice(0, 3).join(', ')), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)) : _createCommentVNode(\"v-if\", true)])]),\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_11, [_cache[20] || (_cache[20] = _createElementVNode(\"h4\", null, \"核心关键词\", -1 /* CACHED */)), cluster[1].top_keywords && cluster[1].top_keywords.length > 0 ? (_openBlock(), _createBlock(_component_el_space, {\n            key: 0,\n            wrap: \"\"\n          }, {\n            default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cluster[1].top_keywords.slice(0, 10), (keyword, kIndex) => {\n              return _openBlock(), _createBlock(_component_el_tag, {\n                key: kIndex,\n                type: \"success\",\n                effect: \"dark\"\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString(keyword), 1 /* TEXT */)]),\n                _: 2 /* DYNAMIC */\n              }, 1024 /* DYNAMIC_SLOTS */);\n            }), 128 /* KEYED_FRAGMENT */))]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)) : (_openBlock(), _createBlock(_component_el_empty, {\n            key: 1,\n            description: \"暂无关键词\",\n            \"image-size\": 60\n          })), _cache[21] || (_cache[21] = _createElementVNode(\"h4\", {\n            style: {\n              \"margin-top\": \"20px\"\n            }\n          }, \"包含论文\", -1 /* CACHED */)), cluster[1].papers && cluster[1].papers.length > 0 ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cluster[1].papers, (paper, pIndex) => {\n            return _openBlock(), _createElementBlock(\"li\", {\n              key: pIndex\n            }, _toDisplayString(paper), 1 /* TEXT */);\n          }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createBlock(_component_el_empty, {\n            key: 3,\n            description: \"暂无论文\",\n            \"image-size\": 60\n          })), _cache[22] || (_cache[22] = _createElementVNode(\"h4\", {\n            style: {\n              \"margin-top\": \"20px\"\n            }\n          }, \"代表性论文\", -1 /* CACHED */)), cluster[1].representative_papers && cluster[1].representative_papers.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cluster[1].representative_papers, (rep, rIndex) => {\n            return _openBlock(), _createElementBlock(\"div\", {\n              key: rIndex,\n              class: \"rep-paper\"\n            }, [_createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, _toDisplayString(rep.title || '无标题'), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_14, _toDisplayString(rep.abstract || '无摘要'), 1 /* TEXT */)]);\n          }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createBlock(_component_el_empty, {\n            key: 5,\n            description: \"暂无代表性论文\",\n            \"image-size\": 60\n          }))])]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"name\"]);\n      }), 128 /* KEYED_FRAGMENT */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_15, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.downloadVisualization\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_PictureIcon)]),\n        _: 1 /* STABLE */\n      }), _cache[23] || (_cache[23] = _createTextVNode(\" 下载高清可视化图 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n      onClick: $setup.downloadReport\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Document)]),\n        _: 1 /* STABLE */\n      }), _cache[24] || (_cache[24] = _createTextVNode(\" 下载聚类报告 \", -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 聚类可视化对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.showVisualization,\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.showVisualization = $event),\n    title: \"聚类可视化\",\n    width: \"90%\",\n    fullscreen: true\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[6] || (_cache[6] = $event => $setup.showVisualization = false)\n    }, {\n      default: _withCtx(() => [...(_cache[25] || (_cache[25] = [_createTextVNode(\"关闭\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.downloadHighResVisualization\n    }, {\n      default: _withCtx(() => [...(_cache[26] || (_cache[26] = [_createTextVNode(\"下载高清图\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]),\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"canvas\", _hoisted_17, null, 512 /* NEED_PATCH */)])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","style","ref","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_el_card","_hoisted_2","_component_el_button","onClick","$setup","refreshFiles","size","_component_el_icon","_component_Refresh","_createBlock","_component_el_table","data","files","onSelectionChange","handleSelectionChange","_component_el_table_column","type","width","prop","label","default","_withCtx","scope","row","title","year","loading","_component_el_tabs","clusterMode","$event","_component_el_tab_pane","name","_component_el_form","model","options","_component_el_form_item","_component_el_input_number","nClusters","min","max","_component_el_select","method","_component_el_option","value","language","startCluster","disabled","selectedFiles","length","clustering","_component_DataAnalysis","_hoisted_3","_component_el_alert","description","closable","vectorOptions","_hoisted_4","startVectorCluster","vectorClustering","syncToVectorStore","syncing","_component_Upload","vectorStats","total_papers","_hoisted_5","_component_el_descriptions","column","border","_component_el_descriptions_item","dimension","collection_name","_component_el_tag","connected","_createCommentVNode","clusterHistory","_hoisted_6","clearHistory","plain","_cache","formatDate","createdAt","loadHistoryResult","deleteHistoryResult","$index","result","_hoisted_7","_hoisted_8","effect","clusterCount","currentResultId","saveCurrentResult","_component_Star","_component_el_collapse","activeClusters","_Fragment","_renderList","Object","entries","clusterAnalysis","cluster","index","_component_el_collapse_item","key","_hoisted_9","_hoisted_10","_toDisplayString","parseInt","paper_count","top_keywords","slice","join","_hoisted_11","_component_el_space","wrap","keyword","kIndex","_component_el_empty","papers","_hoisted_12","paper","pIndex","representative_papers","_hoisted_13","rep","rIndex","_hoisted_14","abstract","_hoisted_15","downloadVisualization","_component_PictureIcon","downloadReport","_component_Document","_component_el_dialog","showVisualization","fullscreen","footer","downloadHighResVisualization","_hoisted_16","_hoisted_17"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/Cluster.vue"],"sourcesContent":["<template>\n  <div class=\"cluster\">\n    <h2>多篇论文主题聚类分析</h2>\n\n    <el-card class=\"select-card\">\n      <div class=\"select-header\">\n        <h3>选择要分析的论文（至少2篇）</h3>\n        <el-button @click=\"refreshFiles\" size=\"small\">\n          <el-icon><Refresh /></el-icon>\n          刷新列表\n        </el-button>\n      </div>\n      <el-table\n        :data=\"files\"\n        style=\"width: 100%; margin-top: 20px\"\n        @selection-change=\"handleSelectionChange\"\n        v-loading=\"loading\"\n      >\n        <el-table-column type=\"selection\" width=\"55\" />\n        <el-table-column prop=\"title\" label=\"论文标题\" min-width=\"250\">\n          <template #default=\"scope\">\n            {{ scope.row.title || '未命名论文' }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"year\" label=\"年份\" width=\"80\">\n          <template #default=\"scope\">\n            {{ scope.row.year || '未知' }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"venue\" label=\"期刊/会议\" min-width=\"150\" />\n      </el-table>\n    </el-card>\n\n    <el-card class=\"options-card\">\n      <h3>聚类选项</h3>\n      \n      <el-tabs v-model=\"clusterMode\">\n        <el-tab-pane label=\"传统聚类\" name=\"traditional\">\n          <el-form :model=\"options\" label-width=\"120px\">\n            <el-form-item label=\"聚类数量\">\n              <el-input-number v-model=\"options.nClusters\" :min=\"2\" :max=\"10\" />\n            </el-form-item>\n            <el-form-item label=\"聚类方法\">\n              <el-select v-model=\"options.method\">\n                <el-option label=\"K-Means\" value=\"kmeans\" />\n                <el-option label=\"DBSCAN\" value=\"dbscan\" />\n                <el-option label=\"层次聚类\" value=\"hierarchical\" />\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"论文语言\">\n              <el-select v-model=\"options.language\">\n                <el-option label=\"中文\" value=\"chinese\" />\n                <el-option label=\"英文\" value=\"english\" />\n              </el-select>\n            </el-form-item>\n          </el-form>\n\n          <el-button\n            type=\"primary\"\n            size=\"large\"\n            @click=\"startCluster\"\n            :disabled=\"selectedFiles.length < 2\"\n            :loading=\"clustering\"\n          >\n            <el-icon><DataAnalysis /></el-icon> 开始传统聚类分析\n          </el-button>\n        </el-tab-pane>\n        \n        <el-tab-pane label=\"向量聚类 (Milvus)\" name=\"vector\">\n          <div class=\"vector-cluster-info\">\n            <el-alert\n              title=\"基于向量嵌入的语义聚类\"\n              description=\"使用 Milvus 向量数据库和深度学习模型进行语义层面的论文聚类，能够捕捉论文间的深层语义关联。\"\n              type=\"info\"\n              :closable=\"false\"\n              show-icon\n            />\n          </div>\n          \n          <el-form :model=\"vectorOptions\" label-width=\"120px\" style=\"margin-top: 16px;\">\n            <el-form-item label=\"聚类数量\">\n              <el-input-number v-model=\"vectorOptions.nClusters\" :min=\"2\" :max=\"20\" />\n            </el-form-item>\n          </el-form>\n\n          <div class=\"vector-actions\">\n            <el-button\n              type=\"primary\"\n              size=\"large\"\n              @click=\"startVectorCluster\"\n              :disabled=\"selectedFiles.length < 2\"\n              :loading=\"vectorClustering\"\n            >\n              <el-icon><DataAnalysis /></el-icon> 开始向量聚类分析\n            </el-button>\n            \n            <el-button\n              size=\"large\"\n              @click=\"syncToVectorStore\"\n              :loading=\"syncing\"\n            >\n              <el-icon><Upload /></el-icon> 同步论文到向量库\n            </el-button>\n          </div>\n          \n          <div v-if=\"vectorStats.total_papers > 0\" class=\"vector-stats\" style=\"margin-top: 16px;\">\n            <el-descriptions :column=\"2\" border size=\"small\">\n              <el-descriptions-item label=\"向量库论文数\">{{ vectorStats.total_papers }}</el-descriptions-item>\n              <el-descriptions-item label=\"向量维度\">{{ vectorStats.dimension }}</el-descriptions-item>\n              <el-descriptions-item label=\"集合名称\">{{ vectorStats.collection_name }}</el-descriptions-item>\n              <el-descriptions-item label=\"连接状态\">\n                <el-tag :type=\"vectorStats.connected ? 'success' : 'danger'\">\n                  {{ vectorStats.connected ? '已连接' : '未连接' }}\n                </el-tag>\n              </el-descriptions-item>\n            </el-descriptions>\n          </div>\n        </el-tab-pane>\n      </el-tabs>\n    </el-card>\n\n    <!-- 历史聚类结果 -->\n    <el-card class=\"history-card\" v-if=\"clusterHistory.length > 0\">\n      <div class=\"history-header\">\n        <h3>历史聚类结果</h3>\n        <el-button @click=\"clearHistory\" type=\"danger\" size=\"small\" plain>清空历史</el-button>\n      </div>\n      <el-table :data=\"clusterHistory\" style=\"width: 100%; margin-top: 10px\">\n        <el-table-column prop=\"createdAt\" label=\"时间\" width=\"180\">\n          <template #default=\"scope\">\n            {{ formatDate(scope.row.createdAt) }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"clusterCount\" label=\"聚类数\" width=\"80\" />\n        <el-table-column prop=\"method\" label=\"方法\" width=\"120\" />\n        <el-table-column prop=\"paperCount\" label=\"论文数\" width=\"80\" />\n        <el-table-column label=\"操作\" width=\"200\">\n          <template #default=\"scope\">\n            <el-button type=\"primary\" size=\"small\" @click=\"loadHistoryResult(scope.row)\">查看</el-button>\n            <el-button type=\"danger\" size=\"small\" @click=\"deleteHistoryResult(scope.$index)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n    <el-card class=\"result-card\" v-if=\"result\">\n      <div class=\"result-header\">\n        <h3>聚类结果</h3>\n        <div class=\"result-actions-top\">\n          <el-tag type=\"success\" size=\"large\" effect=\"dark\">\n            {{ result.clusterCount }} 个主题类别\n          </el-tag>\n          <el-button\n            v-if=\"currentResultId\"\n            type=\"warning\"\n            size=\"small\"\n            @click=\"saveCurrentResult\"\n          >\n            <el-icon><Star /></el-icon>\n            保存结果\n          </el-button>\n        </div>\n      </div>\n\n      <el-collapse v-model=\"activeClusters\">\n        <el-collapse-item\n          v-for=\"(cluster, index) in Object.entries(result.clusterAnalysis)\"\n          :key=\"cluster[0]\"\n          :name=\"cluster[0]\"\n        >\n          <template #title>\n            <div class=\"cluster-title\">\n              <span class=\"cluster-name\">聚类 {{ parseInt(cluster[0]) + 1 }}</span>\n              <el-tag type=\"success\" size=\"small\">\n                {{ cluster[1]?.paper_count || 0 }} 篇论文\n              </el-tag>\n              <el-tag\n                v-if=\"cluster[1]?.top_keywords?.length > 0\"\n                type=\"info\"\n                size=\"small\"\n                style=\"margin-left: 8px;\"\n              >\n                {{ cluster[1].top_keywords.slice(0, 3).join(', ') }}\n              </el-tag>\n            </div>\n          </template>\n\n          <div class=\"cluster-content\">\n            <h4>核心关键词</h4>\n            <el-space wrap v-if=\"cluster[1].top_keywords && cluster[1].top_keywords.length > 0\">\n              <el-tag\n                v-for=\"(keyword, kIndex) in cluster[1].top_keywords.slice(0, 10)\"\n                :key=\"kIndex\"\n                type=\"success\"\n                effect=\"dark\"\n              >\n                {{ keyword }}\n              </el-tag>\n            </el-space>\n            <el-empty v-else description=\"暂无关键词\" :image-size=\"60\" />\n\n            <h4 style=\"margin-top: 20px\">包含论文</h4>\n            <ul v-if=\"cluster[1].papers && cluster[1].papers.length > 0\" class=\"paper-list\">\n              <li v-for=\"(paper, pIndex) in cluster[1].papers\" :key=\"pIndex\">\n                {{ paper }}\n              </li>\n            </ul>\n            <el-empty v-else description=\"暂无论文\" :image-size=\"60\" />\n\n            <h4 style=\"margin-top: 20px\">代表性论文</h4>\n            <div\n              v-if=\"cluster[1].representative_papers && cluster[1].representative_papers.length > 0\"\n            >\n              <div\n                v-for=\"(rep, rIndex) in cluster[1].representative_papers\"\n                :key=\"rIndex\"\n                class=\"rep-paper\"\n              >\n                <p><strong>{{ rep.title || '无标题' }}</strong></p>\n                <p class=\"rep-abstract\">{{ rep.abstract || '无摘要' }}</p>\n              </div>\n            </div>\n            <el-empty v-else description=\"暂无代表性论文\" :image-size=\"60\" />\n          </div>\n        </el-collapse-item>\n      </el-collapse>\n\n      <div class=\"result-actions\">\n        <el-button type=\"primary\" @click=\"downloadVisualization\">\n          <el-icon><PictureIcon /></el-icon>\n          下载高清可视化图\n        </el-button>\n        <el-button @click=\"downloadReport\">\n          <el-icon><Document /></el-icon>\n          下载聚类报告\n        </el-button>\n      </div>\n    </el-card>\n\n    <!-- 聚类可视化对话框 -->\n    <el-dialog\n      v-model=\"showVisualization\"\n      title=\"聚类可视化\"\n      width=\"90%\"\n      :fullscreen=\"true\"\n    >\n      <div class=\"visualization-container\">\n        <canvas ref=\"vizCanvas\" class=\"viz-canvas\"></canvas>\n      </div>\n      <template #footer>\n        <el-button @click=\"showVisualization = false\">关闭</el-button>\n        <el-button type=\"primary\" @click=\"downloadHighResVisualization\">下载高清图</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport api, { connectSocket } from '@/api'\nimport { ElMessage } from 'element-plus'\nimport { DataAnalysis, Refresh, Star, Picture as PictureIcon, Document, Upload } from '@element-plus/icons-vue'\n\nexport default {\n  name: 'Cluster',\n  components: {\n    DataAnalysis,\n    Refresh,\n    Star,\n    PictureIcon,\n    Document,\n    Upload\n  },\n  setup() {\n    const store = useStore()\n\n    const files = computed(() => store.state.files)\n    const selectedFiles = ref([])\n    const loading = ref(false)\n    const options = ref({\n      nClusters: 5,\n      method: 'kmeans',\n      language: 'chinese'\n    })\n    const clustering = ref(false)\n    const result = ref(null)\n    const activeClusters = ref(['0', '1', '2'])\n    const showVisualization = ref(false)\n    const vizCanvas = ref(null)\n\n    // 向量聚相关\n    const clusterMode = ref('traditional')\n    const vectorOptions = ref({\n      nClusters: 5\n    })\n    const vectorClustering = ref(false)\n    const syncing = ref(false)\n    const vectorStats = ref({\n      total_papers: 0,\n      dimension: 0,\n      connected: false,\n      collection_name: ''\n    })\n\n    // 当前聚类结果ID\n    const currentResultId = ref(null)\n\n    // 聚类历史记录\n    const clusterHistory = ref([])\n\n    // 从localStorage加载历史记录\n    const loadHistory = () => {\n      try {\n        const saved = localStorage.getItem('cluster_history')\n        if (saved) {\n          clusterHistory.value = JSON.parse(saved)\n        }\n      } catch (e) {\n        console.error('加载历史记录失败:', e)\n      }\n    }\n\n    // 保存历史记录到localStorage\n    const saveHistory = () => {\n      try {\n        localStorage.setItem('cluster_history', JSON.stringify(clusterHistory.value))\n      } catch (e) {\n        console.error('保存历史记录失败:', e)\n      }\n    }\n\n    // 格式化日期\n    const formatDate = (dateStr) => {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      return date.toLocaleString('zh-CN')\n    }\n\n    // 加载历史结果\n    const loadHistoryResult = (historyItem) => {\n      result.value = historyItem.data\n      currentResultId.value = null // 历史结果不需要再保存\n      activeClusters.value = Object.keys(historyItem.data.clusterAnalysis).slice(0, 3)\n      ElMessage.success('已加载历史聚类结果')\n    }\n\n    // 删除历史结果\n    const deleteHistoryResult = (index) => {\n      clusterHistory.value.splice(index, 1)\n      saveHistory()\n      ElMessage.success('已删除')\n    }\n\n    // 清空历史\n    const clearHistory = () => {\n      clusterHistory.value = []\n      saveHistory()\n      ElMessage.success('历史记录已清空')\n    }\n\n    // 保存当前结果\n    const saveCurrentResult = () => {\n      if (!result.value) return\n\n      const historyItem = {\n        id: Date.now().toString(),\n        createdAt: new Date().toISOString(),\n        clusterCount: result.value.clusterCount,\n        method: result.value.method,\n        paperCount: result.value.papers?.length || 0,\n        data: result.value\n      }\n\n      clusterHistory.value.unshift(historyItem)\n      saveHistory()\n      currentResultId.value = null // 已保存，不需要再显示保存按钮\n      ElMessage.success('聚类结果已保存到历史记录')\n    }\n\n    // 向量聚类方法\n    const loadVectorStats = async () => {\n      try {\n        const response = await api.getVectorStoreStats()\n        if (response.success) {\n          vectorStats.value = response.data\n        }\n      } catch (error) {\n        console.error('加载向量统计失败:', error)\n      }\n    }\n\n    const syncToVectorStore = async () => {\n      if (selectedFiles.value.length === 0) {\n        ElMessage.warning('请先选择要同步的论文')\n        return\n      }\n\n      syncing.value = true\n      try {\n        const paperIds = selectedFiles.value.map(f => f.id)\n        const response = await api.syncPapersToVectorStore(paperIds)\n        \n        if (response.success) {\n          ElMessage.success(`同步完成: ${response.data.synced} 成功, ${response.data.failed} 失败`)\n          await loadVectorStats()\n        } else {\n          ElMessage.error(response.error || '同步失败')\n        }\n      } catch (error) {\n        console.error('同步失败:', error)\n        ElMessage.error('同步到向量库失败')\n      } finally {\n        syncing.value = false\n      }\n    }\n\n    const startVectorCluster = async () => {\n      if (selectedFiles.value.length < 2) {\n        ElMessage.warning('请至少选择2篇论文')\n        return\n      }\n\n      vectorClustering.value = true\n      \n      try {\n        const paperIds = selectedFiles.value.map(f => f.id)\n        \n        const response = await api.clusterPapersVector(\n          vectorOptions.value.nClusters,\n          paperIds\n        )\n        \n        if (response.success) {\n          result.value = {\n            clusterCount: response.data.n_clusters,\n            clusterAnalysis: response.data.cluster_analysis,\n            papers: [],\n            method: 'kmeans_vector',\n            createdAt: new Date().toISOString(),\n            inertia: response.data.inertia\n          }\n\n          currentResultId.value = Date.now().toString()\n          \n          ElMessage.success(`向量聚类完成! 共发现 ${response.data.n_clusters} 个主题类别`)\n          \n          const clusterIds = Object.keys(response.data.cluster_analysis)\n          activeClusters.value = clusterIds.slice(0, 3)\n          \n          saveCurrentResult()\n        } else {\n          ElMessage.error(response.error || '向量聚类失败')\n        }\n      } catch (error) {\n        console.error('[ERROR] 向量聚类错误:', error)\n        ElMessage.error('向量聚类失败: ' + (error.response?.data?.error || error.message))\n      } finally {\n        vectorClustering.value = false\n      }\n    }\n\n    const handleSelectionChange = (selection) => {\n      selectedFiles.value = selection\n    }\n\n    const refreshFiles = async () => {\n      loading.value = true\n      try {\n        await store.dispatch('fetchFiles')\n        ElMessage.success('论文列表已刷新')\n      } catch (error) {\n        console.error('刷新失败:', error)\n        ElMessage.error('刷新失败')\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const startCluster = async () => {\n      if (selectedFiles.value.length < 2) {\n        ElMessage.warning('请至少选择2篇论文')\n        return\n      }\n\n      // 验证聚类数量\n      const maxClusters = Math.min(20, selectedFiles.value.length)\n      if (options.value.method !== 'dbscan' && (options.value.nClusters < 2 || options.value.nClusters > maxClusters)) {\n        ElMessage.warning(`聚类数量必须在 2 到 ${maxClusters} 之间`)\n        return\n      }\n\n      // 连接WebSocket\n      connectSocket()\n      store.commit('SHOW_PROGRESS_DIALOG', true)\n      store.commit('SET_PROGRESS', { progress: 0, message: '开始聚类分析...', step: '' })\n\n      clustering.value = true\n\n      try {\n        // 使用论文ID而不是文件路径\n        const paperIds = selectedFiles.value.map(f => f.id)\n\n        console.log('[DEBUG] 开始聚类, paper_ids:', paperIds)\n        console.log('[DEBUG] 聚类选项:', options.value)\n\n        const response = await api.clusterPapers(\n          paperIds,\n          options.value.nClusters,\n          options.value.method,\n          options.value.language\n        )\n\n        console.log('[DEBUG] 聚类响应:', response)\n\n        if (response.success) {\n          // 格式化结果\n          result.value = {\n            clusterCount: response.data.n_clusters,\n            clusterAnalysis: response.data.cluster_analysis,\n            papers: response.data.papers || [],\n            method: options.value.method,\n            createdAt: new Date().toISOString()\n          }\n\n          // 生成新的结果ID\n          currentResultId.value = Date.now().toString()\n\n          store.commit('SET_PROGRESS', { progress: 100, message: '聚类完成!' })\n          ElMessage.success(`聚类分析完成! 共发现 ${response.data.n_clusters} 个主题类别`)\n\n          // 自动展开前3个聚类\n          const clusterIds = Object.keys(response.data.cluster_analysis)\n          activeClusters.value = clusterIds.slice(0, 3)\n\n          // 自动保存到历史记录\n          saveCurrentResult()\n        } else {\n          ElMessage.error({\n            message: response.error || '聚类失败',\n            duration: 5000,\n            showClose: true\n          })\n        }\n      } catch (error) {\n        console.error('[ERROR] 聚类错误:', error)\n\n        // 提供更详细的错误提示\n        let errorMsg = '聚类失败'\n        const errorDetail = error.response?.data?.error || error.message\n\n        if (errorDetail) {\n          if (errorDetail.includes('论文') || errorDetail.includes('PDF')) {\n            errorMsg = '论文加载或解析失败，请检查文件是否完整'\n          } else if (errorDetail.includes('聚类') || errorDetail.includes('算法')) {\n            errorMsg = '聚类算法执行失败，请尝试调整参数'\n          } else if (errorDetail.includes('数量') || errorDetail.includes('不足')) {\n            errorMsg = '可用论文数量不足，无法进行聚类'\n          } else if (errorDetail.includes('timeout') || errorDetail.includes('超时')) {\n            errorMsg = '聚类超时，请减少论文数量或降低聚类数量'\n          } else {\n            errorMsg = `聚类失败: ${errorDetail}`\n          }\n        } else if (error.message) {\n          errorMsg = `聚类失败: ${error.message}`\n        }\n\n        ElMessage.error({\n          message: errorMsg,\n          duration: 5000,\n          showClose: true\n        })\n      } finally {\n        clustering.value = false\n        store.commit('SHOW_PROGRESS_DIALOG', false)\n      }\n    }\n\n    const downloadVisualization = () => {\n      showVisualization.value = true\n      // 在对话框打开后绘制可视化\n      setTimeout(() => {\n        drawVisualization()\n      }, 100)\n    }\n\n    const drawVisualization = () => {\n      const canvas = vizCanvas.value\n      if (!canvas) return\n\n      // 设置高分辨率画布\n      const dpr = window.devicePixelRatio || 1\n      const width = window.innerWidth * 0.85\n      const height = window.innerHeight * 0.75\n\n      canvas.width = width * dpr\n      canvas.height = height * dpr\n      canvas.style.width = width + 'px'\n      canvas.style.height = height + 'px'\n\n      const ctx = canvas.getContext('2d')\n      ctx.scale(dpr, dpr)\n\n      // 背景\n      ctx.fillStyle = '#f8f9fa'\n      ctx.fillRect(0, 0, width, height)\n\n      // 标题\n      ctx.fillStyle = '#333'\n      ctx.font = 'bold 28px Arial'\n      ctx.textAlign = 'center'\n      ctx.fillText('论文主题聚类可视化', width / 2, 50)\n\n      if (!result.value || !result.value.clusterAnalysis) {\n        return\n      }\n\n      // 绘制聚类圆形图\n      const clusters = Object.entries(result.value.clusterAnalysis)\n      const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E2', '#F8B500', '#6C5CE7']\n\n      const centerX = width / 2\n      const centerY = height / 2 + 30\n      const maxRadius = Math.min(width, height) * 0.35\n\n      // 计算总论文数\n      const totalPapers = clusters.reduce((sum, [, info]) => sum + (info.paper_count || 0), 0)\n\n      // 绘制聚类圆圈\n      let currentAngle = 0\n      clusters.forEach(([clusterId, info], index) => {\n        const color = colors[index % colors.length]\n        const ratio = (info.paper_count || 0) / Math.max(totalPapers, 1)\n        const angle = ratio * Math.PI * 2\n\n        // 绘制扇形\n        ctx.beginPath()\n        ctx.moveTo(centerX, centerY)\n        ctx.arc(centerX, centerY, maxRadius, currentAngle, currentAngle + angle)\n        ctx.closePath()\n        ctx.fillStyle = color + '40' // 添加透明度\n        ctx.fill()\n        ctx.strokeStyle = color\n        ctx.lineWidth = 3\n        ctx.stroke()\n\n        // 绘制标签\n        const labelAngle = currentAngle + angle / 2\n        const labelRadius = maxRadius + 40\n        const labelX = centerX + Math.cos(labelAngle) * labelRadius\n        const labelY = centerY + Math.sin(labelAngle) * labelRadius\n\n        ctx.fillStyle = color\n        ctx.font = 'bold 16px Arial'\n        ctx.textAlign = 'center'\n        ctx.fillText(`聚类 ${parseInt(clusterId) + 1}`, labelX, labelY - 10)\n        ctx.font = '14px Arial'\n        ctx.fillStyle = '#666'\n        ctx.fillText(`${info.paper_count || 0}篇`, labelX, labelY + 10)\n\n        currentAngle += angle\n      })\n\n      // 中心圆\n      ctx.beginPath()\n      ctx.arc(centerX, centerY, maxRadius * 0.3, 0, Math.PI * 2)\n      ctx.fillStyle = 'white'\n      ctx.fill()\n      ctx.strokeStyle = '#ddd'\n      ctx.lineWidth = 2\n      ctx.stroke()\n\n      // 中心文字\n      ctx.fillStyle = '#333'\n      ctx.font = 'bold 20px Arial'\n      ctx.textAlign = 'center'\n      ctx.fillText(`${clusters.length}`, centerX, centerY - 5)\n      ctx.font = '14px Arial'\n      ctx.fillStyle = '#666'\n      ctx.fillText('个聚类', centerX, centerY + 15)\n\n      // 绘制图例\n      let legendY = height - 100\n      const legendX = width / 2 - (clusters.length * 150) / 2\n\n      clusters.forEach(([clusterId, info], index) => {\n        const color = colors[index % colors.length]\n        const x = legendX + (index % 5) * 150\n        const y = legendY + Math.floor(index / 5) * 40\n\n        ctx.fillStyle = color\n        ctx.fillRect(x, y, 20, 20)\n        ctx.fillStyle = '#333'\n        ctx.font = '12px Arial'\n        ctx.textAlign = 'left'\n        const keywords = info.top_keywords?.slice(0, 2).join(', ') || '无关键词'\n        ctx.fillText(`聚类${parseInt(clusterId) + 1}: ${keywords}`, x + 30, y + 15)\n      })\n    }\n\n    const downloadHighResVisualization = () => {\n      const canvas = vizCanvas.value\n      if (!canvas) return\n\n      // 创建高分辨率下载\n      const link = document.createElement('a')\n      link.download = `cluster_visualization_${Date.now()}_highres.png`\n      link.href = canvas.toDataURL('image/png', 1.0)\n      link.click()\n      ElMessage.success('高清可视化图下载成功')\n    }\n\n    const downloadReport = async () => {\n      if (!result.value) {\n        ElMessage.warning('没有可导出的聚类结果')\n        return\n      }\n\n      try {\n        // 生成报告内容\n        let content = '论文主题聚类分析报告\\n'\n        content += '=' .repeat(80) + '\\n\\n'\n        content += `生成时间: ${formatDate(result.value.createdAt)}\\n`\n        content += `聚类方法: ${result.value.method || 'K-Means'}\\n`\n        content += `聚类数量: ${result.value.clusterCount}\\n`\n        content += `论文总数: ${result.value.papers?.length || 0}\\n\\n`\n\n        // 每个聚类的详细信息\n        Object.entries(result.value.clusterAnalysis).forEach(([clusterId, info], index) => {\n          content += `\\n${'=' .repeat(80)}\\n`\n          content += `聚类 ${parseInt(clusterId) + 1}\\n`\n          content += `${'-' .repeat(40)}\\n`\n          content += `论文数: ${info.paper_count || 0}\\n`\n          content += `关键词: ${info.top_keywords?.join(', ') || '无'}\\n\\n`\n\n          if (info.papers && info.papers.length > 0) {\n            content += '包含论文:\\n'\n            info.papers.forEach((paper, i) => {\n              content += `  ${i + 1}. ${paper}\\n`\n            })\n          }\n\n          if (info.representative_papers && info.representative_papers.length > 0) {\n            content += '\\n代表性论文:\\n'\n            info.representative_papers.forEach((paper, i) => {\n              content += `  ${i + 1}. ${paper.title || '无标题'}\\n`\n              if (paper.abstract) {\n                content += `     摘要: ${paper.abstract}\\n`\n              }\n            })\n          }\n        })\n\n        content += `\\n${'=' .repeat(80)}\\n`\n        content += '报告结束\\n'\n\n        // 下载文件\n        const blob = new Blob([content], { type: 'text/markdown;charset=utf-8' })\n        const url = URL.createObjectURL(blob)\n        const a = document.createElement('a')\n        a.href = url\n        a.download = `cluster_report_${Date.now()}.md`\n        a.click()\n        URL.revokeObjectURL(url)\n\n        ElMessage.success('聚类报告下载成功')\n      } catch (error) {\n        console.error('[ERROR] 导出报告失败:', error)\n        ElMessage.error('导出报告失败')\n      }\n    }\n\n    onMounted(() => {\n      store.dispatch('fetchFiles')\n      loadHistory()\n      loadVectorStats()\n    })\n\n    return {\n      files,\n      selectedFiles,\n      loading,\n      options,\n      clustering,\n      result,\n      activeClusters,\n      currentResultId,\n      clusterHistory,\n      showVisualization,\n      vizCanvas,\n      clusterMode,\n      vectorOptions,\n      vectorClustering,\n      syncing,\n      vectorStats,\n      handleSelectionChange,\n      refreshFiles,\n      formatDate,\n      startCluster,\n      downloadVisualization,\n      drawVisualization,\n      downloadHighResVisualization,\n      downloadReport,\n      saveCurrentResult,\n      loadHistoryResult,\n      deleteHistoryResult,\n      clearHistory,\n      syncToVectorStore,\n      startVectorCluster\n    }\n  }\n}\n</script>\n\n<style scoped>\n.cluster {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\nh2 {\n  margin-bottom: 20px;\n  color: #303133;\n}\n\n.select-card,\n.options-card,\n.result-card,\n.history-card {\n  margin-bottom: 20px;\n}\n\n.select-header,\n.history-header,\n.result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.select-header h3,\n.history-header h3,\n.result-header h3 {\n  margin: 0;\n}\n\n.result-actions-top {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.cluster-title {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.cluster-name {\n  font-weight: 600;\n}\n\n.cluster-content h4 {\n  color: #409eff;\n  margin: 20px 0 10px 0;\n}\n\n.paper-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.paper-list li {\n  padding: 8px 0;\n  padding-left: 20px;\n  position: relative;\n  border-bottom: 1px solid #eee;\n}\n\n.paper-list li:before {\n  content: '•';\n  position: absolute;\n  left: 0;\n  color: #409eff;\n  font-weight: bold;\n}\n\n.rep-paper {\n  padding: 15px;\n  background: #f5f7fa;\n  border-radius: 4px;\n  margin-bottom: 10px;\n}\n\n.rep-paper p {\n  margin: 5px 0;\n}\n\n.rep-abstract {\n  color: #606266;\n  font-size: 14px;\n  line-height: 1.6;\n}\n\n.result-actions {\n  margin-top: 20px;\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n}\n\n.visualization-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 500px;\n  background: #f8f9fa;\n  border-radius: 8px;\n}\n\n.viz-canvas {\n  max-width: 100%;\n  max-height: 80vh;\n}\n\n/* 向量聚类样式 */\n.vector-cluster-info {\n  margin-bottom: 16px;\n}\n\n.vector-actions {\n  display: flex;\n  gap: 12px;\n  margin-top: 16px;\n}\n\n.vector-stats {\n  margin-top: 16px;\n}\n\n/* 表格样式优化 */\n:deep(.el-table) {\n  font-size: 14px;\n}\n\n:deep(.el-tag) {\n  font-size: 12px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}