{"ast":null,"code":"import { ref, getCurrentInstance, inject, computed, unref } from 'vue';\nimport { isNumber } from '../../utils/types.mjs';\nimport { isClient } from '@vueuse/core';\nimport { debugWarn } from '../../utils/error.mjs';\nconst initial = {\n  current: 0\n};\nconst zIndex = ref(0);\nconst defaultInitialZIndex = 2e3;\nconst ZINDEX_INJECTION_KEY = Symbol(\"elZIndexContextKey\");\nconst zIndexContextKey = Symbol(\"zIndexContextKey\");\nconst useZIndex = zIndexOverrides => {\n  const increasingInjection = getCurrentInstance() ? inject(ZINDEX_INJECTION_KEY, initial) : initial;\n  const zIndexInjection = zIndexOverrides || (getCurrentInstance() ? inject(zIndexContextKey, void 0) : void 0);\n  const initialZIndex = computed(() => {\n    const zIndexFromInjection = unref(zIndexInjection);\n    return isNumber(zIndexFromInjection) ? zIndexFromInjection : defaultInitialZIndex;\n  });\n  const currentZIndex = computed(() => initialZIndex.value + zIndex.value);\n  const nextZIndex = () => {\n    increasingInjection.current++;\n    zIndex.value = increasingInjection.current;\n    return currentZIndex.value;\n  };\n  if (!isClient && !inject(ZINDEX_INJECTION_KEY)) {\n    debugWarn(\"ZIndexInjection\", `Looks like you are using server rendering, you must provide a z-index provider to ensure the hydration process to be succeed\nusage: app.provide(ZINDEX_INJECTION_KEY, { current: 0 })`);\n  }\n  return {\n    initialZIndex,\n    currentZIndex,\n    nextZIndex\n  };\n};\nexport { ZINDEX_INJECTION_KEY, defaultInitialZIndex, useZIndex, zIndexContextKey };","map":{"version":3,"names":["initial","current","zIndex","ref","defaultInitialZIndex","ZINDEX_INJECTION_KEY","Symbol","zIndexContextKey","useZIndex","zIndexOverrides","increasingInjection","getCurrentInstance","inject","zIndexInjection","initialZIndex","computed","zIndexFromInjection","unref","isNumber","currentZIndex","value","nextZIndex","isClient","debugWarn"],"sources":["../../../../../packages/hooks/use-z-index/index.ts"],"sourcesContent":["import { computed, getCurrentInstance, inject, ref, unref } from 'vue'\nimport { debugWarn, isClient, isNumber } from '@element-plus/utils'\n\nimport type { InjectionKey, Ref } from 'vue'\n\nexport interface ElZIndexInjectionContext {\n  current: number\n}\n\nconst initial: ElZIndexInjectionContext = {\n  current: 0,\n}\n\nconst zIndex = ref(0)\n\nexport const defaultInitialZIndex = 2000\n\n// For SSR\nexport const ZINDEX_INJECTION_KEY: InjectionKey<ElZIndexInjectionContext> =\n  Symbol('elZIndexContextKey')\n\nexport const zIndexContextKey: InjectionKey<Ref<number | undefined>> =\n  Symbol('zIndexContextKey')\n\nexport const useZIndex = (zIndexOverrides?: Ref<number>) => {\n  const increasingInjection = getCurrentInstance()\n    ? inject(ZINDEX_INJECTION_KEY, initial)\n    : initial\n\n  const zIndexInjection =\n    zIndexOverrides ||\n    (getCurrentInstance() ? inject(zIndexContextKey, undefined) : undefined)\n\n  const initialZIndex = computed(() => {\n    const zIndexFromInjection = unref(zIndexInjection)\n    return isNumber(zIndexFromInjection)\n      ? zIndexFromInjection\n      : defaultInitialZIndex\n  })\n\n  const currentZIndex = computed(() => initialZIndex.value + zIndex.value)\n\n  const nextZIndex = () => {\n    increasingInjection.current++\n    zIndex.value = increasingInjection.current\n    return currentZIndex.value\n  }\n\n  if (!isClient && !inject(ZINDEX_INJECTION_KEY)) {\n    debugWarn(\n      'ZIndexInjection',\n      `Looks like you are using server rendering, you must provide a z-index provider to ensure the hydration process to be succeed\nusage: app.provide(ZINDEX_INJECTION_KEY, { current: 0 })`\n    )\n  }\n\n  return {\n    initialZIndex,\n    currentZIndex,\n    nextZIndex,\n  }\n}\n\nexport type UseZIndexReturn = ReturnType<typeof useZIndex>\n"],"mappings":";;;;AASA,MAAMA,OAAoC;EACxCC,OAAS;AACX;AAEA,MAAMC,MAAA,GAASC,GAAA,CAAI,CAAC;AAEb,MAAMC,oBAAuB;AAGvB,MAAAC,oBAAA,GACXC,MAAA,CAAO,oBAAoB;AAEhB,MAAAC,gBAAA,GACXD,MAAA,CAAO,kBAAkB;AAEd,MAAAE,SAAA,GAAaC,eAAkC;EAC1D,MAAMC,mBAAA,GAAsBC,kBAAmB,KAC3CC,MAAO,CAAAP,oBAAA,EAAsBL,OAAO,CACpC,GAAAA,OAAA;EAEJ,MAAMa,eAAA,GACJJ,eACC,KAAAE,kBAAA,KAAuBC,MAAO,CAAAL,gBAAA,EAAkB,MAAS,CAAI;EAE1D,MAAAO,aAAA,GAAgBC,QAAA,CAAS,MAAM;IAC7B,MAAAC,mBAAA,GAAsBC,KAAA,CAAMJ,eAAe;IAC1C,OAAAK,QAAA,CAASF,mBAAmB,IAC/BA,mBACA,GAAAZ,oBAAA;EAAA,CACL;EAED,MAAMe,aAAA,GAAgBJ,QAAS,OAAMD,aAAc,CAAAM,KAAA,GAAQlB,MAAA,CAAOkB,KAAK;EAEvE,MAAMC,UAAA,GAAaA,CAAA,KAAM;IACHX,mBAAA,CAAAT,OAAA;IACpBC,MAAA,CAAOkB,KAAA,GAAQV,mBAAoB,CAAAT,OAAA;IACnC,OAAOkB,aAAc,CAAAC,KAAA;EAAA,CACvB;EAEA,IAAI,CAACE,QAAA,IAAY,CAACV,MAAA,CAAOP,oBAAoB,CAAG;IAC9CkB,SAAA,CACE,mBACA;AAAA,0DAEF;EAAA;EAGK;IACLT,aAAA;IACAK,aAAA;IACAE;EAAA,CACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}