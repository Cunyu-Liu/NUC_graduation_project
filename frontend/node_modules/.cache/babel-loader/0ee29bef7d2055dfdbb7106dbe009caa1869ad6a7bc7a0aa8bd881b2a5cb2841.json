{"ast":null,"code":"import { defineComponent, inject, computed, openBlock, createElementBlock, normalizeClass, unref, withModifiers, createElementVNode, normalizeStyle, createBlock, withCtx, resolveDynamicComponent, createCommentVNode, createVNode } from 'vue';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { CaretRight } from '@element-plus/icons-vue';\nimport { ElCheckbox } from '../../checkbox/index.mjs';\nimport ElNodeContent from './tree-node-content.mjs';\nimport { treeNodeProps, treeNodeEmits, ROOT_TREE_INJECTION_KEY, NODE_CONTEXTMENU } from './virtual-tree.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { isFunction, isString } from '@vue/shared';\nconst _hoisted_1 = [\"aria-expanded\", \"aria-disabled\", \"aria-checked\", \"data-key\"];\nconst _sfc_main = defineComponent({\n  ...{\n    name: \"ElTreeNode\"\n  },\n  __name: \"tree-node\",\n  props: treeNodeProps,\n  emits: treeNodeEmits,\n  setup(__props, {\n    emit: __emit\n  }) {\n    const props = __props;\n    const emit = __emit;\n    const tree = inject(ROOT_TREE_INJECTION_KEY);\n    const ns = useNamespace(\"tree\");\n    const indent = computed(() => {\n      var _a;\n      return (_a = tree == null ? void 0 : tree.props.indent) != null ? _a : 16;\n    });\n    const icon = computed(() => {\n      var _a;\n      return (_a = tree == null ? void 0 : tree.props.icon) != null ? _a : CaretRight;\n    });\n    const getNodeClass = node => {\n      const nodeClassFunc = tree == null ? void 0 : tree.props.props.class;\n      if (!nodeClassFunc) return {};\n      let className;\n      if (isFunction(nodeClassFunc)) {\n        const {\n          data\n        } = node;\n        className = nodeClassFunc(data, node);\n      } else {\n        className = nodeClassFunc;\n      }\n      return isString(className) ? {\n        [className]: true\n      } : className;\n    };\n    const handleClick = e => {\n      emit(\"click\", props.node, e);\n    };\n    const handleDrop = e => {\n      emit(\"drop\", props.node, e);\n    };\n    const handleExpandIconClick = () => {\n      emit(\"toggle\", props.node);\n    };\n    const handleCheckChange = value => {\n      emit(\"check\", props.node, value);\n    };\n    const handleContextMenu = event => {\n      var _a, _b, _c, _d;\n      if ((_c = (_b = (_a = tree == null ? void 0 : tree.instance) == null ? void 0 : _a.vnode) == null ? void 0 : _b.props) == null ? void 0 : _c[\"onNodeContextmenu\"]) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n      tree == null ? void 0 : tree.ctx.emit(NODE_CONTEXTMENU, event, (_d = props.node) == null ? void 0 : _d.data, props.node);\n    };\n    return (_ctx, _cache) => {\n      var _a, _b, _c;\n      return openBlock(), createElementBlock(\"div\", {\n        ref: \"node$\",\n        class: normalizeClass([unref(ns).b(\"node\"), unref(ns).is(\"expanded\", _ctx.expanded), unref(ns).is(\"current\", _ctx.current), unref(ns).is(\"focusable\", !_ctx.disabled), unref(ns).is(\"checked\", !_ctx.disabled && _ctx.checked), getNodeClass(_ctx.node)]),\n        role: \"treeitem\",\n        tabindex: \"-1\",\n        \"aria-expanded\": _ctx.expanded,\n        \"aria-disabled\": _ctx.disabled,\n        \"aria-checked\": _ctx.checked,\n        \"data-key\": (_a = _ctx.node) == null ? void 0 : _a.key,\n        onClick: withModifiers(handleClick, [\"stop\"]),\n        onContextmenu: handleContextMenu,\n        onDragover: _cache[1] || (_cache[1] = withModifiers(() => {}, [\"prevent\"])),\n        onDragenter: _cache[2] || (_cache[2] = withModifiers(() => {}, [\"prevent\"])),\n        onDrop: withModifiers(handleDrop, [\"stop\"])\n      }, [createElementVNode(\"div\", {\n        class: normalizeClass(unref(ns).be(\"node\", \"content\")),\n        style: normalizeStyle({\n          paddingLeft: `${(_ctx.node.level - 1) * indent.value}px`,\n          height: _ctx.itemSize + \"px\"\n        })\n      }, [icon.value ? (openBlock(), createBlock(unref(ElIcon), {\n        key: 0,\n        class: normalizeClass([unref(ns).is(\"leaf\", !!((_b = _ctx.node) == null ? void 0 : _b.isLeaf)), unref(ns).is(\"hidden\", _ctx.hiddenExpandIcon), {\n          expanded: !((_c = _ctx.node) == null ? void 0 : _c.isLeaf) && _ctx.expanded\n        }, unref(ns).be(\"node\", \"expand-icon\")]),\n        onClick: withModifiers(handleExpandIconClick, [\"stop\"])\n      }, {\n        default: withCtx(() => [(openBlock(), createBlock(resolveDynamicComponent(icon.value)))]),\n        _: 1\n      }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true), _ctx.showCheckbox ? (openBlock(), createBlock(unref(ElCheckbox), {\n        key: 1,\n        \"model-value\": _ctx.checked,\n        indeterminate: _ctx.indeterminate,\n        disabled: _ctx.disabled,\n        onChange: handleCheckChange,\n        onClick: _cache[0] || (_cache[0] = withModifiers(() => {}, [\"stop\"]))\n      }, null, 8, [\"model-value\", \"indeterminate\", \"disabled\"])) : createCommentVNode(\"v-if\", true), createVNode(unref(ElNodeContent), {\n        node: {\n          ..._ctx.node,\n          expanded: _ctx.expanded\n        }\n      }, null, 8, [\"node\"])], 6)], 42, _hoisted_1);\n    };\n  }\n});\nvar ElTreeNode = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree-node.vue\"]]);\nexport { ElTreeNode as default };","map":{"version":3,"names":["props","__props","emit","__emit","tree","inject","ROOT_TREE_INJECTION_KEY","ns","useNamespace","indent","computed","_a","icon","CaretRight","getNodeClass","node","nodeClassFunc","class","className","isFunction","data","isString","handleClick","e","handleDrop","handleExpandIconClick","handleCheckChange","value","handleContextMenu","event","_c","_b","instance","vnode","stopPropagation","preventDefault","ctx","NODE_CONTEXTMENU","_d","createElementBlock","ref","normalizeClass","unref","b","is","_ctx","expanded","current","disabled","checked","role","tabindex","key","onClick","withModifiers","onContextmenu","onDragover","_cache","onDragenter","onDrop","createElementVNode","be","style","normalizeStyle","paddingLeft","level","height","itemSize","openBlock","createBlock","ElIcon","isLeaf","hiddenExpandIcon","default","withCtx","resolveDynamicComponent","_","showCheckbox","ElCheckbox","indeterminate","onChange","createCommentVNode","createVNode","ElNodeContent"],"sources":["../../../../../../packages/components/tree-v2/src/tree-node.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"node$\"\n    :class=\"[\n      ns.b('node'),\n      ns.is('expanded', expanded),\n      ns.is('current', current),\n      ns.is('focusable', !disabled),\n      ns.is('checked', !disabled && checked),\n      getNodeClass(node),\n    ]\"\n    role=\"treeitem\"\n    tabindex=\"-1\"\n    :aria-expanded=\"expanded\"\n    :aria-disabled=\"disabled\"\n    :aria-checked=\"checked\"\n    :data-key=\"node?.key\"\n    @click.stop=\"handleClick\"\n    @contextmenu=\"handleContextMenu\"\n    @dragover.prevent\n    @dragenter.prevent\n    @drop.stop=\"handleDrop\"\n  >\n    <div\n      :class=\"ns.be('node', 'content')\"\n      :style=\"{\n        paddingLeft: `${(node.level - 1) * indent}px`,\n        height: itemSize + 'px',\n      }\"\n    >\n      <el-icon\n        v-if=\"icon\"\n        :class=\"[\n          ns.is('leaf', !!node?.isLeaf),\n          ns.is('hidden', hiddenExpandIcon),\n          {\n            expanded: !node?.isLeaf && expanded,\n          },\n          ns.be('node', 'expand-icon'),\n        ]\"\n        @click.stop=\"handleExpandIconClick\"\n      >\n        <component :is=\"icon\" />\n      </el-icon>\n      <el-checkbox\n        v-if=\"showCheckbox\"\n        :model-value=\"checked\"\n        :indeterminate=\"indeterminate\"\n        :disabled=\"disabled\"\n        @change=\"handleCheckChange\"\n        @click.stop\n      />\n      <el-node-content :node=\"{ ...node, expanded }\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, inject } from 'vue'\nimport ElIcon from '@element-plus/components/icon'\nimport { CaretRight } from '@element-plus/icons-vue'\nimport ElCheckbox from '@element-plus/components/checkbox'\nimport { useNamespace } from '@element-plus/hooks'\nimport { isFunction, isString } from '@element-plus/utils'\nimport ElNodeContent from './tree-node-content'\nimport {\n  NODE_CONTEXTMENU,\n  ROOT_TREE_INJECTION_KEY,\n  treeNodeEmits,\n  treeNodeProps,\n} from './virtual-tree'\n\nimport type { CheckboxValueType } from '@element-plus/components/checkbox'\nimport type { TreeNode } from './types'\n\ndefineOptions({\n  name: 'ElTreeNode',\n})\n\nconst props = defineProps(treeNodeProps)\nconst emit = defineEmits(treeNodeEmits)\n\nconst tree = inject(ROOT_TREE_INJECTION_KEY)\nconst ns = useNamespace('tree')\n\nconst indent = computed(() => tree?.props.indent ?? 16)\nconst icon = computed(() => tree?.props.icon ?? CaretRight)\n\nconst getNodeClass = (node: TreeNode) => {\n  const nodeClassFunc = tree?.props.props.class\n  if (!nodeClassFunc) return {}\n\n  let className\n  if (isFunction(nodeClassFunc)) {\n    const { data } = node\n    className = nodeClassFunc(data, node)\n  } else {\n    className = nodeClassFunc\n  }\n\n  return isString(className) ? { [className]: true } : className\n}\n\nconst handleClick = (e: MouseEvent) => {\n  emit('click', props.node, e)\n}\nconst handleDrop = (e: DragEvent) => {\n  emit('drop', props.node, e)\n}\nconst handleExpandIconClick = () => {\n  emit('toggle', props.node)\n}\nconst handleCheckChange = (value: CheckboxValueType) => {\n  emit('check', props.node, value)\n}\n\nconst handleContextMenu = (event: Event) => {\n  if (tree?.instance?.vnode?.props?.['onNodeContextmenu']) {\n    event.stopPropagation()\n    event.preventDefault()\n  }\n  tree?.ctx.emit(NODE_CONTEXTMENU, event, props.node?.data, props.node)\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}