{"ast":null,"code":"import { ref, reactive, computed, onMounted, watch } from 'vue';\nimport { useStore } from 'vuex';\nimport api from '@/api';\nimport { ElMessage } from 'element-plus';\nimport { Document, DataAnalysis, Star, Refresh } from '@element-plus/icons-vue';\nexport default {\n  __name: 'Profile',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const activeTab = ref('basic');\n    const editMode = ref(false);\n    const saving = ref(false);\n    const changingPassword = ref(false);\n\n    // 用户信息\n    const userInfo = computed(() => store.state.user || {});\n\n    // 编辑表单\n    const editFormRef = ref(null);\n    const editForm = reactive({\n      username: '',\n      full_name: '',\n      email: '',\n      organization: '',\n      research_interests: '',\n      bio: ''\n    });\n    const rules = {\n      full_name: [{\n        required: true,\n        message: '请输入姓名',\n        trigger: 'blur'\n      }],\n      email: [{\n        required: true,\n        message: '请输入邮箱',\n        trigger: 'blur'\n      }, {\n        type: 'email',\n        message: '请输入正确的邮箱格式',\n        trigger: 'blur'\n      }]\n    };\n\n    // 密码表单\n    const passwordFormRef = ref(null);\n    const passwordForm = reactive({\n      old_password: '',\n      new_password: '',\n      confirm_password: ''\n    });\n    const validateConfirmPassword = (rule, value, callback) => {\n      if (value !== passwordForm.new_password) {\n        callback(new Error('两次输入的密码不一致'));\n      } else {\n        callback();\n      }\n    };\n    const passwordRules = {\n      old_password: [{\n        required: true,\n        message: '请输入当前密码',\n        trigger: 'blur'\n      }],\n      new_password: [{\n        required: true,\n        message: '请输入新密码',\n        trigger: 'blur'\n      }, {\n        min: 6,\n        message: '密码长度至少为6位',\n        trigger: 'blur'\n      }],\n      confirm_password: [{\n        required: true,\n        message: '请再次输入新密码',\n        trigger: 'blur'\n      }, {\n        validator: validateConfirmPassword,\n        trigger: 'blur'\n      }]\n    };\n\n    // 统计信息\n    const stats = ref({\n      total_papers: 0,\n      total_analyses: 0,\n      total_gaps: 0\n    });\n    const recentActivities = ref([]);\n\n    // 方法\n    const formatDate = dateString => {\n      if (!dateString) return '未知';\n      const date = new Date(dateString);\n      return date.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    };\n    const loadUserProfile = async () => {\n      try {\n        const response = await api.getCurrentUser();\n        if (response.success) {\n          Object.assign(editForm, response.data);\n          store.commit('SET_USER', response.data);\n        }\n      } catch (error) {\n        console.error('加载用户信息失败:', error);\n        ElMessage.error('加载用户信息失败');\n      }\n    };\n    const saveProfile = async () => {\n      try {\n        await editFormRef.value.validate();\n        saving.value = true;\n        const response = await api.updateUser(editForm);\n        if (response.success) {\n          ElMessage.success('个人信息更新成功');\n          editMode.value = false;\n          store.commit('SET_USER', response.data);\n        } else {\n          ElMessage.error(response.error || '更新失败');\n        }\n      } catch (error) {\n        if (error !== false) {\n          // 表单验证错误时会返回false\n          console.error('保存失败:', error);\n          ElMessage.error('保存失败: ' + (error.message || '未知错误'));\n        }\n      } finally {\n        saving.value = false;\n      }\n    };\n    const cancelEdit = () => {\n      editMode.value = false;\n      // 重置表单为当前用户信息\n      Object.assign(editForm, userInfo.value);\n    };\n    const changePassword = async () => {\n      try {\n        await passwordFormRef.value.validate();\n        changingPassword.value = true;\n        const response = await api.changePassword({\n          old_password: passwordForm.old_password,\n          new_password: passwordForm.new_password\n        });\n        if (response.success) {\n          ElMessage.success('密码修改成功，请重新登录');\n          resetPasswordForm();\n          // 延迟退出登录，让用户看到成功提示\n          setTimeout(() => {\n            store.dispatch('logout');\n          }, 1500);\n        } else {\n          ElMessage.error(response.error || '密码修改失败');\n        }\n      } catch (error) {\n        if (error !== false) {\n          console.error('修改密码失败:', error);\n          ElMessage.error('修改密码失败: ' + (error.message || '未知错误'));\n        }\n      } finally {\n        changingPassword.value = false;\n      }\n    };\n    const resetPasswordForm = () => {\n      passwordFormRef.value?.resetFields();\n    };\n    const loadStatistics = async () => {\n      try {\n        const response = await api.getStatistics();\n        if (response.success) {\n          // 优先使用用户统计，如果没有则计算总数\n          const userStats = response.data.user_stats;\n          const overview = response.data.overview;\n          stats.value = {\n            total_papers: userStats?.total_papers ?? overview?.total_papers ?? 0,\n            total_analyses: userStats?.total_analyses ?? overview?.total_analyses ?? 0,\n            total_gaps: userStats?.total_gaps ?? overview?.total_gaps ?? 0\n          };\n          console.log('[DEBUG] 统计信息已更新:', stats.value);\n        } else {\n          // 如果API返回不成功，尝试从store获取\n          const storeStats = store.state.statistics;\n          if (storeStats) {\n            stats.value = {\n              total_papers: storeStats.total_papers || 0,\n              total_analyses: storeStats.total_analyses || 0,\n              total_gaps: storeStats.total_gaps || 0\n            };\n          }\n        }\n      } catch (error) {\n        console.error('加载统计信息失败:', error);\n        // 尝试从store获取\n        const storeStats = store.state.statistics;\n        if (storeStats) {\n          stats.value = {\n            total_papers: storeStats.total_papers || 0,\n            total_analyses: storeStats.total_analyses || 0,\n            total_gaps: storeStats.total_gaps || 0\n          };\n        }\n      }\n    };\n\n    // 刷新统计数据\n    const refreshStatistics = async () => {\n      await loadStatistics();\n      ElMessage.success('统计信息已刷新');\n    };\n\n    // 监听标签页切换，切换到统计标签时刷新数据\n    watch(activeTab, newVal => {\n      if (newVal === 'stats') {\n        loadStatistics();\n      }\n    });\n\n    // 生命周期\n    onMounted(() => {\n      // 初始化编辑表单\n      Object.assign(editForm, userInfo.value);\n      loadUserProfile();\n      loadStatistics();\n\n      // 定时刷新统计信息（每30秒）\n      setInterval(() => {\n        if (activeTab.value === 'stats') {\n          loadStatistics();\n        }\n      }, 30000);\n    });\n    const __returned__ = {\n      store,\n      activeTab,\n      editMode,\n      saving,\n      changingPassword,\n      userInfo,\n      editFormRef,\n      editForm,\n      rules,\n      passwordFormRef,\n      passwordForm,\n      validateConfirmPassword,\n      passwordRules,\n      stats,\n      recentActivities,\n      formatDate,\n      loadUserProfile,\n      saveProfile,\n      cancelEdit,\n      changePassword,\n      resetPasswordForm,\n      loadStatistics,\n      refreshStatistics,\n      ref,\n      reactive,\n      computed,\n      onMounted,\n      watch,\n      get useStore() {\n        return useStore;\n      },\n      get api() {\n        return api;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get Document() {\n        return Document;\n      },\n      get DataAnalysis() {\n        return DataAnalysis;\n      },\n      get Star() {\n        return Star;\n      },\n      get Refresh() {\n        return Refresh;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","computed","onMounted","watch","useStore","api","ElMessage","Document","DataAnalysis","Star","Refresh","store","activeTab","editMode","saving","changingPassword","userInfo","state","user","editFormRef","editForm","username","full_name","email","organization","research_interests","bio","rules","required","message","trigger","type","passwordFormRef","passwordForm","old_password","new_password","confirm_password","validateConfirmPassword","rule","value","callback","Error","passwordRules","min","validator","stats","total_papers","total_analyses","total_gaps","recentActivities","formatDate","dateString","date","Date","toLocaleString","year","month","day","hour","minute","loadUserProfile","response","getCurrentUser","success","Object","assign","data","commit","error","console","saveProfile","validate","updateUser","cancelEdit","changePassword","resetPasswordForm","setTimeout","dispatch","resetFields","loadStatistics","getStatistics","userStats","user_stats","overview","log","storeStats","statistics","refreshStatistics","newVal","setInterval"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/Profile.vue"],"sourcesContent":["<template>\n  <div class=\"profile\">\n    <el-card class=\"profile-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <h2>个人信息</h2>\n          <el-button type=\"primary\" @click=\"editMode = !editMode\">\n            {{ editMode ? '取消编辑' : '编辑资料' }}\n          </el-button>\n        </div>\n      </template>\n\n      <el-tabs v-model=\"activeTab\">\n        <!-- 基本信息 -->\n        <el-tab-pane label=\"基本信息\" name=\"basic\">\n          <el-form\n            v-if=\"editMode\"\n            :model=\"editForm\"\n            :rules=\"rules\"\n            ref=\"editFormRef\"\n            label-width=\"120px\"\n            class=\"profile-form\"\n          >\n            <el-form-item label=\"用户名\" prop=\"username\">\n              <el-input v-model=\"editForm.username\" disabled />\n            </el-form-item>\n\n            <el-form-item label=\"姓名\" prop=\"full_name\">\n              <el-input v-model=\"editForm.full_name\" placeholder=\"请输入真实姓名\" />\n            </el-form-item>\n\n            <el-form-item label=\"邮箱\" prop=\"email\">\n              <el-input v-model=\"editForm.email\" type=\"email\" placeholder=\"请输入邮箱地址\" />\n            </el-form-item>\n\n            <el-form-item label=\"单位\" prop=\"organization\">\n              <el-input v-model=\"editForm.organization\" placeholder=\"请输入所在单位\" />\n            </el-form-item>\n\n            <el-form-item label=\"研究方向\" prop=\"research_interests\">\n              <el-input\n                v-model=\"editForm.research_interests\"\n                type=\"textarea\"\n                :rows=\"3\"\n                placeholder=\"请输入您的研究方向和兴趣\"\n              />\n            </el-form-item>\n\n            <el-form-item label=\"个人简介\" prop=\"bio\">\n              <el-input\n                v-model=\"editForm.bio\"\n                type=\"textarea\"\n                :rows=\"4\"\n                placeholder=\"请输入个人简介\"\n              />\n            </el-form-item>\n\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"saveProfile\" :loading=\"saving\">\n                保存\n              </el-button>\n              <el-button @click=\"cancelEdit\">取消</el-button>\n            </el-form-item>\n          </el-form>\n\n          <el-descriptions v-else :column=\"2\" border class=\"profile-info\">\n            <el-descriptions-item label=\"用户名\">\n              {{ userInfo.username }}\n            </el-descriptions-item>\n            <el-descriptions-item label=\"姓名\">\n              {{ userInfo.full_name || '未填写' }}\n            </el-descriptions-item>\n            <el-descriptions-item label=\"邮箱\">\n              {{ userInfo.email || '未填写' }}\n            </el-descriptions-item>\n            <el-descriptions-item label=\"单位\">\n              {{ userInfo.organization || '未填写' }}\n            </el-descriptions-item>\n            <el-descriptions-item label=\"研究方向\" :span=\"2\">\n              {{ userInfo.research_interests || '未填写' }}\n            </el-descriptions-item>\n            <el-descriptions-item label=\"个人简介\" :span=\"2\">\n              {{ userInfo.bio || '未填写' }}\n            </el-descriptions-item>\n            <el-descriptions-item label=\"注册时间\">\n              {{ formatDate(userInfo.created_at) }}\n            </el-descriptions-item>\n            <el-descriptions-item label=\"最后登录\">\n              {{ formatDate(userInfo.last_login) }}\n            </el-descriptions-item>\n          </el-descriptions>\n        </el-tab-pane>\n\n        <!-- 修改密码 -->\n        <el-tab-pane label=\"修改密码\" name=\"password\">\n          <el-form\n            :model=\"passwordForm\"\n            :rules=\"passwordRules\"\n            ref=\"passwordFormRef\"\n            label-width=\"120px\"\n            class=\"password-form\"\n            style=\"max-width: 600px\"\n          >\n            <el-form-item label=\"当前密码\" prop=\"old_password\">\n              <el-input\n                v-model=\"passwordForm.old_password\"\n                type=\"password\"\n                placeholder=\"请输入当前密码\"\n                show-password\n              />\n            </el-form-item>\n\n            <el-form-item label=\"新密码\" prop=\"new_password\">\n              <el-input\n                v-model=\"passwordForm.new_password\"\n                type=\"password\"\n                placeholder=\"请输入新密码（至少6位）\"\n                show-password\n              />\n            </el-form-item>\n\n            <el-form-item label=\"确认密码\" prop=\"confirm_password\">\n              <el-input\n                v-model=\"passwordForm.confirm_password\"\n                type=\"password\"\n                placeholder=\"请再次输入新密码\"\n                show-password\n              />\n            </el-form-item>\n\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"changePassword\" :loading=\"changingPassword\">\n                修改密码\n              </el-button>\n              <el-button @click=\"resetPasswordForm\">重置</el-button>\n            </el-form-item>\n          </el-form>\n        </el-tab-pane>\n\n        <!-- 统计信息 -->\n        <el-tab-pane label=\"统计信息\" name=\"stats\">\n          <div class=\"stats-header\">\n            <h3>数据统计</h3>\n            <el-button size=\"small\" @click=\"refreshStatistics\" :icon=\"Refresh\">\n              刷新\n            </el-button>\n          </div>\n          <el-row :gutter=\"20\" class=\"stats-row\">\n            <el-col :span=\"8\">\n              <el-card class=\"stat-card\">\n                <div class=\"stat-content\">\n                  <el-icon class=\"stat-icon\" color=\"#409eff\" :size=\"40\"><Document /></el-icon>\n                  <div class=\"stat-details\">\n                    <div class=\"stat-number\">{{ stats.total_papers }}</div>\n                    <div class=\"stat-label\">上传论文</div>\n                  </div>\n                </div>\n              </el-card>\n            </el-col>\n\n            <el-col :span=\"8\">\n              <el-card class=\"stat-card\">\n                <div class=\"stat-content\">\n                  <el-icon class=\"stat-icon\" color=\"#67c23a\" :size=\"40\"><DataAnalysis /></el-icon>\n                  <div class=\"stat-details\">\n                    <div class=\"stat-number\">{{ stats.total_analyses }}</div>\n                    <div class=\"stat-label\">分析次数</div>\n                  </div>\n                </div>\n              </el-card>\n            </el-col>\n\n            <el-col :span=\"8\">\n              <el-card class=\"stat-card\">\n                <div class=\"stat-content\">\n                  <el-icon class=\"stat-icon\" color=\"#e6a23c\" :size=\"40\"><Star /></el-icon>\n                  <div class=\"stat-details\">\n                    <div class=\"stat-number\">{{ stats.total_gaps }}</div>\n                    <div class=\"stat-label\">发现空白</div>\n                  </div>\n                </div>\n              </el-card>\n            </el-col>\n          </el-row>\n\n          <el-card class=\"recent-activity\" style=\"margin-top: 20px\">\n            <template #header>\n              <h3>最近活动</h3>\n            </template>\n            <el-timeline>\n              <el-timeline-item\n                v-for=\"(activity, index) in recentActivities\"\n                :key=\"index\"\n                :timestamp=\"activity.timestamp\"\n                :color=\"activity.color\"\n              >\n                {{ activity.description }}\n              </el-timeline-item>\n              <el-timeline-item v-if=\"recentActivities.length === 0\" timestamp=\"暂无数据\">\n                暂无活动记录\n              </el-timeline-item>\n            </el-timeline>\n          </el-card>\n        </el-tab-pane>\n      </el-tabs>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { useStore } from 'vuex'\nimport api from '@/api'\nimport { ElMessage } from 'element-plus'\nimport { Document, DataAnalysis, Star, Refresh } from '@element-plus/icons-vue'\n\nconst store = useStore()\nconst activeTab = ref('basic')\nconst editMode = ref(false)\nconst saving = ref(false)\nconst changingPassword = ref(false)\n\n// 用户信息\nconst userInfo = computed(() => store.state.user || {})\n\n// 编辑表单\nconst editFormRef = ref(null)\nconst editForm = reactive({\n  username: '',\n  full_name: '',\n  email: '',\n  organization: '',\n  research_interests: '',\n  bio: ''\n})\n\nconst rules = {\n  full_name: [\n    { required: true, message: '请输入姓名', trigger: 'blur' }\n  ],\n  email: [\n    { required: true, message: '请输入邮箱', trigger: 'blur' },\n    { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\n  ]\n}\n\n// 密码表单\nconst passwordFormRef = ref(null)\nconst passwordForm = reactive({\n  old_password: '',\n  new_password: '',\n  confirm_password: ''\n})\n\nconst validateConfirmPassword = (rule, value, callback) => {\n  if (value !== passwordForm.new_password) {\n    callback(new Error('两次输入的密码不一致'))\n  } else {\n    callback()\n  }\n}\n\nconst passwordRules = {\n  old_password: [\n    { required: true, message: '请输入当前密码', trigger: 'blur' }\n  ],\n  new_password: [\n    { required: true, message: '请输入新密码', trigger: 'blur' },\n    { min: 6, message: '密码长度至少为6位', trigger: 'blur' }\n  ],\n  confirm_password: [\n    { required: true, message: '请再次输入新密码', trigger: 'blur' },\n    { validator: validateConfirmPassword, trigger: 'blur' }\n  ]\n}\n\n// 统计信息\nconst stats = ref({\n  total_papers: 0,\n  total_analyses: 0,\n  total_gaps: 0\n})\n\nconst recentActivities = ref([])\n\n// 方法\nconst formatDate = (dateString) => {\n  if (!dateString) return '未知'\n  const date = new Date(dateString)\n  return date.toLocaleString('zh-CN', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit'\n  })\n}\n\nconst loadUserProfile = async () => {\n  try {\n    const response = await api.getCurrentUser()\n    if (response.success) {\n      Object.assign(editForm, response.data)\n      store.commit('SET_USER', response.data)\n    }\n  } catch (error) {\n    console.error('加载用户信息失败:', error)\n    ElMessage.error('加载用户信息失败')\n  }\n}\n\nconst saveProfile = async () => {\n  try {\n    await editFormRef.value.validate()\n    saving.value = true\n\n    const response = await api.updateUser(editForm)\n\n    if (response.success) {\n      ElMessage.success('个人信息更新成功')\n      editMode.value = false\n      store.commit('SET_USER', response.data)\n    } else {\n      ElMessage.error(response.error || '更新失败')\n    }\n  } catch (error) {\n    if (error !== false) { // 表单验证错误时会返回false\n      console.error('保存失败:', error)\n      ElMessage.error('保存失败: ' + (error.message || '未知错误'))\n    }\n  } finally {\n    saving.value = false\n  }\n}\n\nconst cancelEdit = () => {\n  editMode.value = false\n  // 重置表单为当前用户信息\n  Object.assign(editForm, userInfo.value)\n}\n\nconst changePassword = async () => {\n  try {\n    await passwordFormRef.value.validate()\n    changingPassword.value = true\n\n    const response = await api.changePassword({\n      old_password: passwordForm.old_password,\n      new_password: passwordForm.new_password\n    })\n\n    if (response.success) {\n      ElMessage.success('密码修改成功，请重新登录')\n      resetPasswordForm()\n      // 延迟退出登录，让用户看到成功提示\n      setTimeout(() => {\n        store.dispatch('logout')\n      }, 1500)\n    } else {\n      ElMessage.error(response.error || '密码修改失败')\n    }\n  } catch (error) {\n    if (error !== false) {\n      console.error('修改密码失败:', error)\n      ElMessage.error('修改密码失败: ' + (error.message || '未知错误'))\n    }\n  } finally {\n    changingPassword.value = false\n  }\n}\n\nconst resetPasswordForm = () => {\n  passwordFormRef.value?.resetFields()\n}\n\nconst loadStatistics = async () => {\n  try {\n    const response = await api.getStatistics()\n    if (response.success) {\n      // 优先使用用户统计，如果没有则计算总数\n      const userStats = response.data.user_stats\n      const overview = response.data.overview\n      \n      stats.value = {\n        total_papers: userStats?.total_papers ?? overview?.total_papers ?? 0,\n        total_analyses: userStats?.total_analyses ?? overview?.total_analyses ?? 0,\n        total_gaps: userStats?.total_gaps ?? overview?.total_gaps ?? 0\n      }\n      \n      console.log('[DEBUG] 统计信息已更新:', stats.value)\n    } else {\n      // 如果API返回不成功，尝试从store获取\n      const storeStats = store.state.statistics\n      if (storeStats) {\n        stats.value = {\n          total_papers: storeStats.total_papers || 0,\n          total_analyses: storeStats.total_analyses || 0,\n          total_gaps: storeStats.total_gaps || 0\n        }\n      }\n    }\n  } catch (error) {\n    console.error('加载统计信息失败:', error)\n    // 尝试从store获取\n    const storeStats = store.state.statistics\n    if (storeStats) {\n      stats.value = {\n        total_papers: storeStats.total_papers || 0,\n        total_analyses: storeStats.total_analyses || 0,\n        total_gaps: storeStats.total_gaps || 0\n      }\n    }\n  }\n}\n\n// 刷新统计数据\nconst refreshStatistics = async () => {\n  await loadStatistics()\n  ElMessage.success('统计信息已刷新')\n}\n\n// 监听标签页切换，切换到统计标签时刷新数据\nwatch(activeTab, (newVal) => {\n  if (newVal === 'stats') {\n    loadStatistics()\n  }\n})\n\n// 生命周期\nonMounted(() => {\n  // 初始化编辑表单\n  Object.assign(editForm, userInfo.value)\n  loadUserProfile()\n  loadStatistics()\n  \n  // 定时刷新统计信息（每30秒）\n  setInterval(() => {\n    if (activeTab.value === 'stats') {\n      loadStatistics()\n    }\n  }, 30000)\n})\n</script>\n\n<style scoped>\n.profile {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.profile-card {\n  min-height: 600px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.card-header h2 {\n  margin: 0;\n  color: #303133;\n}\n\n.profile-form,\n.password-form {\n  padding: 20px;\n  max-width: 800px;\n}\n\n.profile-info {\n  padding: 20px;\n}\n\n.stats-row {\n  margin-bottom: 20px;\n}\n\n.stat-card {\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.stat-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n.stat-content {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  padding: 20px;\n}\n\n.stat-icon {\n  flex-shrink: 0;\n}\n\n.stat-details {\n  flex: 1;\n}\n\n.stat-number {\n  font-size: 32px;\n  font-weight: bold;\n  color: #303133;\n  margin-bottom: 8px;\n}\n\n.stat-label {\n  font-size: 14px;\n  color: #909399;\n}\n\n.recent-activity h3 {\n  margin: 0;\n  color: #303133;\n}\n\n.stats-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.stats-header h3 {\n  margin: 0;\n  font-size: 18px;\n  color: #303133;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}