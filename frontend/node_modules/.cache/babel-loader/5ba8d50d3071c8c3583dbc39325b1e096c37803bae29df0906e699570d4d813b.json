{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { Check, Search, VideoPlay, DataAnalysis, Download, Delete, Edit, Refresh, List, Close } from '@element-plus/icons-vue';\nimport api from '@/api';\nexport default {\n  __name: 'Files',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const router = useRouter();\n\n    // 响应式数据\n    const tableRef = ref(null);\n    const selectedFiles = ref([]);\n    const searchText = ref('');\n    const detailDialogVisible = ref(false);\n    const editDialogVisible = ref(false);\n    const currentFile = ref(null);\n    const saving = ref(false);\n    const editForm = ref({\n      id: null,\n      title: '',\n      year: null,\n      venue: '',\n      authorsStr: ''\n    });\n\n    // 计算属性\n    const files = computed(() => store.state.files || []);\n    const filteredFiles = computed(() => {\n      if (!searchText.value) return files.value;\n      const search = searchText.value.toLowerCase();\n      return files.value.filter(file => {\n        return file.title?.toLowerCase().includes(search) || file.venue?.toLowerCase().includes(search) || file.authors?.some(a => a.toLowerCase().includes(search)) || file.year?.toString().includes(search);\n      });\n    });\n    const allSelected = computed(() => {\n      return selectedFiles.value.length === filteredFiles.value.length && filteredFiles.value.length > 0;\n    });\n\n    // 方法\n    const getRowKey = row => row.id;\n    const formatTime = (row, column, time) => {\n      if (!time) return '-';\n      return new Date(time).toLocaleString('zh-CN');\n    };\n    const handleSelectionChange = selection => {\n      selectedFiles.value = selection;\n    };\n    const toggleSelectAll = () => {\n      if (allSelected.value) {\n        tableRef.value?.clearSelection();\n      } else {\n        filteredFiles.value.forEach(row => {\n          tableRef.value?.toggleRowSelection(row, true);\n        });\n      }\n    };\n    const clearSelection = () => {\n      tableRef.value?.clearSelection();\n    };\n    const handleSearch = () => {\n      // 搜索时清空选择\n      clearSelection();\n    };\n    const refreshFiles = () => {\n      store.dispatch('fetchFiles');\n      ElMessage.success('刷新成功');\n    };\n    const viewFileDetail = file => {\n      currentFile.value = file;\n      detailDialogVisible.value = true;\n    };\n    const analyzeFile = paper => {\n      if (paper) {\n        router.push({\n          path: '/analyze',\n          query: {\n            paperId: paper.id\n          }\n        });\n\n        // 添加路由守卫，从分析页面返回时刷新列表\n        const unwatch = router.afterEach((to, from) => {\n          if (from.path === '/analyze' && to.path === '/files') {\n            // 延迟刷新，确保数据库已更新\n            setTimeout(() => {\n              store.dispatch('fetchFiles');\n            }, 500);\n            unwatch();\n          }\n        });\n      }\n    };\n    const editFile = file => {\n      currentFile.value = file;\n      editForm.value = {\n        id: file.id,\n        title: file.title || '',\n        year: file.year || null,\n        venue: file.venue || '',\n        authorsStr: file.authors?.join(', ') || ''\n      };\n      editDialogVisible.value = true;\n    };\n    const saveEdit = async () => {\n      try {\n        saving.value = true;\n\n        // 构建更新数据，只包含 Paper 模型支持的字段\n        const updateData = {};\n\n        // 标题必填\n        if (editForm.value.title !== undefined) {\n          updateData.title = editForm.value.title;\n        }\n\n        // 年份可以是数字或 null\n        if (editForm.value.year !== undefined) {\n          updateData.year = editForm.value.year ? parseInt(editForm.value.year) : null;\n        }\n\n        // 期刊/会议\n        if (editForm.value.venue !== undefined) {\n          updateData.venue = editForm.value.venue;\n        }\n        const response = await api.updatePaper(editForm.value.id, updateData);\n        if (response.success) {\n          ElMessage.success('保存成功');\n          editDialogVisible.value = false;\n          await store.dispatch('fetchFiles');\n        } else {\n          ElMessage.error(response.error || '保存失败');\n        }\n      } catch (error) {\n        console.error('保存失败:', error);\n        ElMessage.error('保存失败: ' + (error.message || '未知错误'));\n      } finally {\n        saving.value = false;\n      }\n    };\n    const deleteFile = async paper => {\n      try {\n        await ElMessageBox.confirm(`确定要删除论文 \"${paper.title || '未命名'}\" 吗？此操作不可恢复！`, '确认删除', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        });\n        const success = await store.dispatch('deleteFile', paper.id);\n        if (success) {\n          ElMessage.success('删除成功');\n          // 清空选择\n          if (selectedFiles.value.find(f => f.id === paper.id)) {\n            clearSelection();\n          }\n        } else {\n          ElMessage.error('删除失败');\n        }\n      } catch {\n        // 用户取消\n      }\n    };\n\n    // 批量操作\n    const batchAnalyze = () => {\n      if (selectedFiles.value.length === 0) {\n        ElMessage.warning('请先选择要分析的论文');\n        return;\n      }\n      ElMessageBox.confirm(`将对 ${selectedFiles.value.length} 篇论文依次进行分析，是否继续？`, '批量分析确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'info'\n      }).then(() => {\n        // 跳转到分析页面，传递第一篇论文ID\n        const firstPaper = selectedFiles.value[0];\n        router.push({\n          path: '/analyze',\n          query: {\n            paperId: firstPaper.id,\n            batch: 'true',\n            count: selectedFiles.value.length\n          }\n        });\n        ElMessage.info('将从第一篇论文开始分析，完成后请继续分析其他论文');\n      }).catch(() => {\n        // 用户取消\n      });\n    };\n    const batchCluster = () => {\n      if (selectedFiles.value.length < 2) {\n        ElMessage.warning('请至少选择2篇论文进行聚类分析');\n        return;\n      }\n\n      // 跳转到聚类页面\n      router.push({\n        path: '/cluster',\n        state: {\n          selectedPapers: selectedFiles.value.map(f => f.id)\n        }\n      });\n      ElMessage.success(`已选择 ${selectedFiles.value.length} 篇论文，正在跳转到聚类页面`);\n    };\n    const batchExport = async () => {\n      if (selectedFiles.value.length === 0) {\n        ElMessage.warning('请先选择要导出的论文');\n        return;\n      }\n      try {\n        // 生成CSV格式\n        const headers = ['ID', '标题', '年份', '期刊/会议', '作者', '上传时间'];\n        const rows = selectedFiles.value.map(file => [file.id, file.title || '', file.year || '', file.venue || '', file.authors?.join('; ') || '', formatTime(null, null, file.created_at)]);\n        const csv = [headers.join(','), ...rows.map(row => row.map(cell => `\"${cell}\"`).join(','))].join('\\n');\n\n        // 下载文件\n        const blob = new Blob(['\\ufeff' + csv], {\n          type: 'text/csv;charset=utf-8'\n        });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `papers_export_${new Date().getTime()}.csv`;\n        a.click();\n        URL.revokeObjectURL(url);\n        ElMessage.success(`成功导出 ${selectedFiles.value.length} 篇论文信息`);\n      } catch (error) {\n        console.error('导出失败:', error);\n        ElMessage.error('导出失败: ' + error.message);\n      }\n    };\n    const batchDelete = async () => {\n      if (selectedFiles.value.length === 0) {\n        ElMessage.warning('请先选择要删除的论文');\n        return;\n      }\n      try {\n        await ElMessageBox.confirm(`确定要删除选中的 ${selectedFiles.value.length} 篇论文吗？此操作不可恢复！`, '批量删除确认', {\n          confirmButtonText: '确定删除',\n          cancelButtonText: '取消',\n          type: 'warning',\n          dangerouslyUseHTMLString: true\n        });\n\n        // 调用批量删除API\n        const paperIds = selectedFiles.value.map(f => f.id);\n        const response = await api.batchDeletePapers(paperIds);\n        if (response.success) {\n          ElMessage.success(`成功删除 ${response.data.deleted_count || paperIds.length} 篇论文`);\n          clearSelection();\n          await store.dispatch('fetchFiles');\n        } else {\n          ElMessage.error(response.error || '批量删除失败');\n        }\n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('批量删除失败:', error);\n          ElMessage.error('批量删除失败: ' + (error.message || '未知错误'));\n        }\n      }\n    };\n\n    // 生命周期\n    onMounted(() => {\n      store.dispatch('fetchFiles');\n    });\n    const __returned__ = {\n      store,\n      router,\n      tableRef,\n      selectedFiles,\n      searchText,\n      detailDialogVisible,\n      editDialogVisible,\n      currentFile,\n      saving,\n      editForm,\n      files,\n      filteredFiles,\n      allSelected,\n      getRowKey,\n      formatTime,\n      handleSelectionChange,\n      toggleSelectAll,\n      clearSelection,\n      handleSearch,\n      refreshFiles,\n      viewFileDetail,\n      analyzeFile,\n      editFile,\n      saveEdit,\n      deleteFile,\n      batchAnalyze,\n      batchCluster,\n      batchExport,\n      batchDelete,\n      ref,\n      computed,\n      onMounted,\n      get useStore() {\n        return useStore;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      },\n      get Check() {\n        return Check;\n      },\n      get Search() {\n        return Search;\n      },\n      get VideoPlay() {\n        return VideoPlay;\n      },\n      get DataAnalysis() {\n        return DataAnalysis;\n      },\n      get Download() {\n        return Download;\n      },\n      get Delete() {\n        return Delete;\n      },\n      get Edit() {\n        return Edit;\n      },\n      get Refresh() {\n        return Refresh;\n      },\n      get List() {\n        return List;\n      },\n      get Close() {\n        return Close;\n      },\n      get api() {\n        return api;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useStore","useRouter","ElMessage","ElMessageBox","Check","Search","VideoPlay","DataAnalysis","Download","Delete","Edit","Refresh","List","Close","api","store","router","tableRef","selectedFiles","searchText","detailDialogVisible","editDialogVisible","currentFile","saving","editForm","id","title","year","venue","authorsStr","files","state","filteredFiles","value","search","toLowerCase","filter","file","includes","authors","some","a","toString","allSelected","length","getRowKey","row","formatTime","column","time","Date","toLocaleString","handleSelectionChange","selection","toggleSelectAll","clearSelection","forEach","toggleRowSelection","handleSearch","refreshFiles","dispatch","success","viewFileDetail","analyzeFile","paper","push","path","query","paperId","unwatch","afterEach","to","from","setTimeout","editFile","join","saveEdit","updateData","undefined","parseInt","response","updatePaper","error","console","message","deleteFile","confirm","confirmButtonText","cancelButtonText","type","find","f","batchAnalyze","warning","then","firstPaper","batch","count","info","catch","batchCluster","selectedPapers","map","batchExport","headers","rows","created_at","csv","cell","blob","Blob","url","URL","createObjectURL","document","createElement","href","download","getTime","click","revokeObjectURL","batchDelete","dangerouslyUseHTMLString","paperIds","batchDeletePapers","data","deleted_count"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/Files.vue"],"sourcesContent":["<template>\n  <div class=\"files\">\n    <div class=\"page-header\">\n      <h2>论文管理</h2>\n      <div class=\"header-stats\">\n        <el-tag>总计: {{ files.length }} 篇</el-tag>\n        <el-tag type=\"success\" v-if=\"selectedFiles.length > 0\">\n          已选: {{ selectedFiles.length }} 篇\n        </el-tag>\n      </div>\n    </div>\n\n    <!-- 批量操作栏 -->\n    <el-card class=\"batch-actions-card\" v-if=\"selectedFiles.length > 0\">\n      <div class=\"batch-actions\">\n        <div class=\"batch-info\">\n          <el-icon class=\"batch-icon\"><Check /></el-icon>\n          <span>已选择 <strong>{{ selectedFiles.length }}</strong> 篇论文</span>\n        </div>\n\n        <el-divider direction=\"vertical\" />\n\n        <div class=\"batch-buttons\">\n          <el-button\n            type=\"primary\"\n            @click=\"batchAnalyze\"\n            :disabled=\"selectedFiles.length === 0\"\n            icon=\"VideoPlay\"\n          >\n            批量分析 ({{ selectedFiles.length }})\n          </el-button>\n\n          <el-button\n            type=\"success\"\n            @click=\"batchCluster\"\n            :disabled=\"selectedFiles.length < 2\"\n            icon=\"DataAnalysis\"\n          >\n            聚类分析\n          </el-button>\n\n          <el-button\n            @click=\"batchExport\"\n            :disabled=\"selectedFiles.length === 0\"\n            icon=\"Download\"\n          >\n            批量导出\n          </el-button>\n\n          <el-button\n            type=\"danger\"\n            @click=\"batchDelete\"\n            :disabled=\"selectedFiles.length === 0\"\n            icon=\"Delete\"\n          >\n            批量删除\n          </el-button>\n\n          <el-button @click=\"clearSelection\" icon=\"Close\">\n            取消选择\n          </el-button>\n        </div>\n      </div>\n    </el-card>\n\n    <!-- 论文列表 -->\n    <el-card class=\"table-card\">\n      <!-- 工具栏 -->\n      <div class=\"table-toolbar\">\n        <div class=\"toolbar-left\">\n          <el-button @click=\"toggleSelectAll\" icon=\"List\">\n            {{ allSelected ? '取消全选' : '全选' }}\n          </el-button>\n          <el-button @click=\"refreshFiles\" icon=\"Refresh\">刷新</el-button>\n        </div>\n\n        <div class=\"toolbar-right\">\n          <el-input\n            v-model=\"searchText\"\n            placeholder=\"搜索论文标题、作者、期刊...\"\n            clearable\n            style=\"width: 300px\"\n            @input=\"handleSearch\"\n          >\n            <template #prefix>\n              <el-icon><Search /></el-icon>\n            </template>\n          </el-input>\n        </div>\n      </div>\n\n      <el-table\n        ref=\"tableRef\"\n        :data=\"filteredFiles\"\n        style=\"width: 100%\"\n        :row-style=\"{ height: '60px' }\"\n        @selection-change=\"handleSelectionChange\"\n        :row-key=\"getRowKey\"\n      >\n        <el-table-column type=\"selection\" width=\"55\" :reserve-selection=\"true\" />\n\n        <el-table-column prop=\"title\" label=\"论文标题\" min-width=\"300\" show-overflow-tooltip>\n          <template #default=\"{ row }\">\n            <el-tooltip :content=\"row.title || '无标题'\" placement=\"top\" effect=\"dark\">\n              <div class=\"table-cell-text\" @click=\"viewFileDetail(row)\">\n                {{ row.title || '无标题' }}\n              </div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"year\" label=\"年份\" width=\"100\" sortable>\n          <template #default=\"{ row }\">\n            <el-tag v-if=\"row.year\" size=\"small\">{{ row.year }}</el-tag>\n            <span v-else>-</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"venue\" label=\"发表期刊/会议\" min-width=\"250\" show-overflow-tooltip>\n          <template #default=\"{ row }\">\n            <el-tooltip :content=\"row.venue || '未知'\" placement=\"top\" effect=\"dark\">\n              <div class=\"table-cell-text\">{{ row.venue || '未知' }}</div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"created_at\" label=\"上传时间\" :formatter=\"formatTime\" width=\"180\" sortable />\n\n        <el-table-column label=\"状态\" width=\"120\">\n          <template #default=\"{ row }\">\n            <el-tag v-if=\"row.analyzed\" type=\"success\" size=\"small\">已分析</el-tag>\n            <el-tag v-else type=\"info\" size=\"small\">未分析</el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"操作\" width=\"250\" fixed=\"right\">\n          <template #default=\"scope\">\n            <el-button-group>\n              <el-button size=\"small\" @click=\"analyzeFile(scope.row)\" icon=\"VideoPlay\">\n                分析\n              </el-button>\n              <el-button size=\"small\" @click=\"editFile(scope.row)\" icon=\"Edit\">\n                编辑\n              </el-button>\n              <el-button\n                size=\"small\"\n                type=\"danger\"\n                @click=\"deleteFile(scope.row)\"\n                icon=\"Delete\"\n              >\n                删除\n              </el-button>\n            </el-button-group>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-empty v-if=\"filteredFiles.length === 0\" description=\"暂无论文，请先上传PDF文件\" />\n    </el-card>\n\n    <!-- 论文详情对话框 -->\n    <el-dialog\n      v-model=\"detailDialogVisible\"\n      :title=\"currentFile?.title || '论文详情'\"\n      width=\"800px\"\n    >\n      <el-descriptions :column=\"2\" border v-if=\"currentFile\">\n        <el-descriptions-item label=\"论文ID\">{{ currentFile.id }}</el-descriptions-item>\n        <el-descriptions-item label=\"年份\">{{ currentFile.year || '-' }}</el-descriptions-item>\n        <el-descriptions-item label=\"期刊/会议\" :span=\"2\">\n          {{ currentFile.venue || '-' }}\n        </el-descriptions-item>\n        <el-descriptions-item label=\"作者\">\n          {{ currentFile.authors?.join(', ') || '-' }}\n        </el-descriptions-item>\n        <el-descriptions-item label=\"上传时间\">\n          {{ formatTime(null, null, currentFile.created_at) }}\n        </el-descriptions-item>\n        <el-descriptions-item label=\"文件路径\" :span=\"2\">\n          {{ currentFile.pdf_path || '-' }}\n        </el-descriptions-item>\n        <el-descriptions-item label=\"分析状态\" :span=\"2\">\n          <el-tag :type=\"currentFile.analyzed ? 'success' : 'info'\">\n            {{ currentFile.analyzed ? '已分析' : '未分析' }}\n          </el-tag>\n        </el-descriptions-item>\n      </el-descriptions>\n\n      <template #footer>\n        <el-button @click=\"detailDialogVisible = false\">关闭</el-button>\n        <el-button type=\"primary\" @click=\"analyzeFile(currentFile)\">分析此论文</el-button>\n      </template>\n    </el-dialog>\n\n    <!-- 编辑对话框 -->\n    <el-dialog\n      v-model=\"editDialogVisible\"\n      title=\"编辑论文信息\"\n      width=\"600px\"\n    >\n      <el-form :model=\"editForm\" label-width=\"100px\" ref=\"editFormRef\">\n        <el-form-item label=\"论文标题\">\n          <el-input v-model=\"editForm.title\" placeholder=\"请输入论文标题\" />\n        </el-form-item>\n        <el-form-item label=\"年份\">\n          <el-input-number v-model=\"editForm.year\" :min=\"1900\" :max=\"2100\" />\n        </el-form-item>\n        <el-form-item label=\"期刊/会议\">\n          <el-input v-model=\"editForm.venue\" placeholder=\"请输入期刊或会议名称\" />\n        </el-form-item>\n        <el-form-item label=\"作者\">\n          <el-input\n            v-model=\"editForm.authorsStr\"\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"多个作者用逗号分隔\"\n          />\n        </el-form-item>\n      </el-form>\n\n      <template #footer>\n        <el-button @click=\"editDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveEdit\" :loading=\"saving\">保存</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Check, Search, VideoPlay, DataAnalysis, Download, Delete, Edit, Refresh, List, Close } from '@element-plus/icons-vue'\nimport api from '@/api'\n\nconst store = useStore()\nconst router = useRouter()\n\n// 响应式数据\nconst tableRef = ref(null)\nconst selectedFiles = ref([])\nconst searchText = ref('')\nconst detailDialogVisible = ref(false)\nconst editDialogVisible = ref(false)\nconst currentFile = ref(null)\nconst saving = ref(false)\n\nconst editForm = ref({\n  id: null,\n  title: '',\n  year: null,\n  venue: '',\n  authorsStr: ''\n})\n\n// 计算属性\nconst files = computed(() => store.state.files || [])\n\nconst filteredFiles = computed(() => {\n  if (!searchText.value) return files.value\n\n  const search = searchText.value.toLowerCase()\n  return files.value.filter(file => {\n    return (\n      (file.title?.toLowerCase().includes(search)) ||\n      (file.venue?.toLowerCase().includes(search)) ||\n      (file.authors?.some(a => a.toLowerCase().includes(search))) ||\n      (file.year?.toString().includes(search))\n    )\n  })\n})\n\nconst allSelected = computed(() => {\n  return selectedFiles.value.length === filteredFiles.value.length && filteredFiles.value.length > 0\n})\n\n// 方法\nconst getRowKey = (row) => row.id\n\nconst formatTime = (row, column, time) => {\n  if (!time) return '-'\n  return new Date(time).toLocaleString('zh-CN')\n}\n\nconst handleSelectionChange = (selection) => {\n  selectedFiles.value = selection\n}\n\nconst toggleSelectAll = () => {\n  if (allSelected.value) {\n    tableRef.value?.clearSelection()\n  } else {\n    filteredFiles.value.forEach(row => {\n      tableRef.value?.toggleRowSelection(row, true)\n    })\n  }\n}\n\nconst clearSelection = () => {\n  tableRef.value?.clearSelection()\n}\n\nconst handleSearch = () => {\n  // 搜索时清空选择\n  clearSelection()\n}\n\nconst refreshFiles = () => {\n  store.dispatch('fetchFiles')\n  ElMessage.success('刷新成功')\n}\n\nconst viewFileDetail = (file) => {\n  currentFile.value = file\n  detailDialogVisible.value = true\n}\n\nconst analyzeFile = (paper) => {\n  if (paper) {\n    router.push({ path: '/analyze', query: { paperId: paper.id } })\n\n    // 添加路由守卫，从分析页面返回时刷新列表\n    const unwatch = router.afterEach((to, from) => {\n      if (from.path === '/analyze' && to.path === '/files') {\n        // 延迟刷新，确保数据库已更新\n        setTimeout(() => {\n          store.dispatch('fetchFiles')\n        }, 500)\n        unwatch()\n      }\n    })\n  }\n}\n\nconst editFile = (file) => {\n  currentFile.value = file\n  editForm.value = {\n    id: file.id,\n    title: file.title || '',\n    year: file.year || null,\n    venue: file.venue || '',\n    authorsStr: file.authors?.join(', ') || ''\n  }\n  editDialogVisible.value = true\n}\n\nconst saveEdit = async () => {\n  try {\n    saving.value = true\n\n    // 构建更新数据，只包含 Paper 模型支持的字段\n    const updateData = {}\n    \n    // 标题必填\n    if (editForm.value.title !== undefined) {\n      updateData.title = editForm.value.title\n    }\n    \n    // 年份可以是数字或 null\n    if (editForm.value.year !== undefined) {\n      updateData.year = editForm.value.year ? parseInt(editForm.value.year) : null\n    }\n    \n    // 期刊/会议\n    if (editForm.value.venue !== undefined) {\n      updateData.venue = editForm.value.venue\n    }\n\n    const response = await api.updatePaper(editForm.value.id, updateData)\n\n    if (response.success) {\n      ElMessage.success('保存成功')\n      editDialogVisible.value = false\n      await store.dispatch('fetchFiles')\n    } else {\n      ElMessage.error(response.error || '保存失败')\n    }\n  } catch (error) {\n    console.error('保存失败:', error)\n    ElMessage.error('保存失败: ' + (error.message || '未知错误'))\n  } finally {\n    saving.value = false\n  }\n}\n\nconst deleteFile = async (paper) => {\n  try {\n    await ElMessageBox.confirm(\n      `确定要删除论文 \"${paper.title || '未命名'}\" 吗？此操作不可恢复！`,\n      '确认删除',\n      {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }\n    )\n\n    const success = await store.dispatch('deleteFile', paper.id)\n    if (success) {\n      ElMessage.success('删除成功')\n      // 清空选择\n      if (selectedFiles.value.find(f => f.id === paper.id)) {\n        clearSelection()\n      }\n    } else {\n      ElMessage.error('删除失败')\n    }\n  } catch {\n    // 用户取消\n  }\n}\n\n// 批量操作\nconst batchAnalyze = () => {\n  if (selectedFiles.value.length === 0) {\n    ElMessage.warning('请先选择要分析的论文')\n    return\n  }\n\n  ElMessageBox.confirm(\n    `将对 ${selectedFiles.value.length} 篇论文依次进行分析，是否继续？`,\n    '批量分析确认',\n    {\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      type: 'info'\n    }\n  ).then(() => {\n    // 跳转到分析页面，传递第一篇论文ID\n    const firstPaper = selectedFiles.value[0]\n    router.push({\n      path: '/analyze',\n      query: {\n        paperId: firstPaper.id,\n        batch: 'true',\n        count: selectedFiles.value.length\n      }\n    })\n    ElMessage.info('将从第一篇论文开始分析，完成后请继续分析其他论文')\n  }).catch(() => {\n    // 用户取消\n  })\n}\n\nconst batchCluster = () => {\n  if (selectedFiles.value.length < 2) {\n    ElMessage.warning('请至少选择2篇论文进行聚类分析')\n    return\n  }\n\n  // 跳转到聚类页面\n  router.push({\n    path: '/cluster',\n    state: {\n      selectedPapers: selectedFiles.value.map(f => f.id)\n    }\n  })\n  ElMessage.success(`已选择 ${selectedFiles.value.length} 篇论文，正在跳转到聚类页面`)\n}\n\nconst batchExport = async () => {\n  if (selectedFiles.value.length === 0) {\n    ElMessage.warning('请先选择要导出的论文')\n    return\n  }\n\n  try {\n    // 生成CSV格式\n    const headers = ['ID', '标题', '年份', '期刊/会议', '作者', '上传时间']\n    const rows = selectedFiles.value.map(file => [\n      file.id,\n      file.title || '',\n      file.year || '',\n      file.venue || '',\n      file.authors?.join('; ') || '',\n      formatTime(null, null, file.created_at)\n    ])\n\n    const csv = [headers.join(','), ...rows.map(row => row.map(cell => `\"${cell}\"`).join(','))].join('\\n')\n\n    // 下载文件\n    const blob = new Blob(['\\ufeff' + csv], { type: 'text/csv;charset=utf-8' })\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = `papers_export_${new Date().getTime()}.csv`\n    a.click()\n    URL.revokeObjectURL(url)\n\n    ElMessage.success(`成功导出 ${selectedFiles.value.length} 篇论文信息`)\n  } catch (error) {\n    console.error('导出失败:', error)\n    ElMessage.error('导出失败: ' + error.message)\n  }\n}\n\nconst batchDelete = async () => {\n  if (selectedFiles.value.length === 0) {\n    ElMessage.warning('请先选择要删除的论文')\n    return\n  }\n\n  try {\n    await ElMessageBox.confirm(\n      `确定要删除选中的 ${selectedFiles.value.length} 篇论文吗？此操作不可恢复！`,\n      '批量删除确认',\n      {\n        confirmButtonText: '确定删除',\n        cancelButtonText: '取消',\n        type: 'warning',\n        dangerouslyUseHTMLString: true\n      }\n    )\n\n    // 调用批量删除API\n    const paperIds = selectedFiles.value.map(f => f.id)\n    const response = await api.batchDeletePapers(paperIds)\n\n    if (response.success) {\n      ElMessage.success(`成功删除 ${response.data.deleted_count || paperIds.length} 篇论文`)\n      clearSelection()\n      await store.dispatch('fetchFiles')\n    } else {\n      ElMessage.error(response.error || '批量删除失败')\n    }\n  } catch (error) {\n    if (error !== 'cancel') {\n      console.error('批量删除失败:', error)\n      ElMessage.error('批量删除失败: ' + (error.message || '未知错误'))\n    }\n  }\n}\n\n// 生命周期\nonMounted(() => {\n  store.dispatch('fetchFiles')\n})\n</script>\n\n<style scoped>\n.files {\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.page-header h2 {\n  margin: 0;\n  color: #303133;\n}\n\n.header-stats {\n  display: flex;\n  gap: 10px;\n}\n\n.batch-actions-card {\n  margin-bottom: 20px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border: none;\n}\n\n.batch-actions-card :deep(.el-card__body) {\n  padding: 15px 20px;\n}\n\n.batch-actions {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  color: white;\n}\n\n.batch-info {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 16px;\n}\n\n.batch-icon {\n  font-size: 24px;\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n\n.batch-buttons {\n  display: flex;\n  gap: 10px;\n  flex: 1;\n}\n\n.batch-buttons .el-button {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.3);\n  color: white;\n}\n\n.batch-buttons .el-button:hover {\n  background: rgba(255, 255, 255, 0.3);\n  border-color: rgba(255, 255, 255, 0.5);\n}\n\n.batch-buttons .el-button.is-disabled {\n  background: rgba(0, 0, 0, 0.2);\n  border-color: rgba(0, 0, 0, 0.2);\n  color: rgba(255, 255, 255, 0.5);\n}\n\n.table-card {\n  margin-bottom: 20px;\n}\n\n.table-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding: 15px;\n  background: #f5f7fa;\n  border-radius: 4px;\n}\n\n.toolbar-left,\n.toolbar-right {\n  display: flex;\n  gap: 10px;\n}\n\n.table-cell-text {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  cursor: pointer;\n  color: #303133;\n}\n\n.table-cell-text:hover {\n  color: #409EFF;\n}\n\n:deep(.el-button-group) {\n  display: flex;\n}\n\n:deep(.el-divider--vertical) {\n  height: 40px;\n  border-color: rgba(255, 255, 255, 0.3);\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}