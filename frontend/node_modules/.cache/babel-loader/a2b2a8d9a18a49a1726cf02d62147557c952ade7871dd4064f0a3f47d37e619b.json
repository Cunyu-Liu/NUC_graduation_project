{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, unref as _unref, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"files\"\n};\nconst _hoisted_2 = {\n  class: \"page-header\"\n};\nconst _hoisted_3 = {\n  class: \"header-stats\"\n};\nconst _hoisted_4 = {\n  class: \"batch-actions\"\n};\nconst _hoisted_5 = {\n  class: \"batch-info\"\n};\nconst _hoisted_6 = {\n  class: \"batch-buttons\"\n};\nconst _hoisted_7 = {\n  class: \"table-toolbar\"\n};\nconst _hoisted_8 = {\n  class: \"toolbar-left\"\n};\nconst _hoisted_9 = {\n  class: \"toolbar-right\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n  key: 1\n};\nconst _hoisted_12 = {\n  class: \"table-cell-text\"\n};\nimport { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { Check, Search, VideoPlay, DataAnalysis, Download, Delete, Edit, Refresh, List, Close } from '@element-plus/icons-vue';\nimport api from '@/api';\nexport default {\n  __name: 'Files',\n  setup(__props) {\n    const store = useStore();\n    const router = useRouter();\n\n    // 响应式数据\n    const tableRef = ref(null);\n    const selectedFiles = ref([]);\n    const searchText = ref('');\n    const detailDialogVisible = ref(false);\n    const editDialogVisible = ref(false);\n    const currentFile = ref(null);\n    const saving = ref(false);\n    const editForm = ref({\n      id: null,\n      title: '',\n      year: null,\n      venue: '',\n      authorsStr: ''\n    });\n\n    // 计算属性\n    const files = computed(() => store.state.files || []);\n    const filteredFiles = computed(() => {\n      if (!searchText.value) return files.value;\n      const search = searchText.value.toLowerCase();\n      return files.value.filter(file => {\n        return file.title?.toLowerCase().includes(search) || file.venue?.toLowerCase().includes(search) || file.authors?.some(a => a.toLowerCase().includes(search)) || file.year?.toString().includes(search);\n      });\n    });\n    const allSelected = computed(() => {\n      return selectedFiles.value.length === filteredFiles.value.length && filteredFiles.value.length > 0;\n    });\n\n    // 方法\n    const getRowKey = row => row.id;\n    const formatTime = (row, column, time) => {\n      if (!time) return '-';\n      return new Date(time).toLocaleString('zh-CN');\n    };\n    const handleSelectionChange = selection => {\n      selectedFiles.value = selection;\n    };\n    const toggleSelectAll = () => {\n      if (allSelected.value) {\n        tableRef.value?.clearSelection();\n      } else {\n        filteredFiles.value.forEach(row => {\n          tableRef.value?.toggleRowSelection(row, true);\n        });\n      }\n    };\n    const clearSelection = () => {\n      tableRef.value?.clearSelection();\n    };\n    const handleSearch = () => {\n      // 搜索时清空选择\n      clearSelection();\n    };\n    const refreshFiles = () => {\n      store.dispatch('fetchFiles');\n      ElMessage.success('刷新成功');\n    };\n    const viewFileDetail = file => {\n      currentFile.value = file;\n      detailDialogVisible.value = true;\n    };\n    const analyzeFile = paper => {\n      if (paper) {\n        router.push({\n          path: '/analyze',\n          query: {\n            paperId: paper.id\n          }\n        });\n\n        // 添加路由守卫，从分析页面返回时刷新列表\n        const unwatch = router.afterEach((to, from) => {\n          if (from.path === '/analyze' && to.path === '/files') {\n            // 延迟刷新，确保数据库已更新\n            setTimeout(() => {\n              store.dispatch('fetchFiles');\n            }, 500);\n            unwatch();\n          }\n        });\n      }\n    };\n    const editFile = file => {\n      currentFile.value = file;\n      // 确保年份是有效的整数，避免null或undefined导致的问题\n      const yearValue = file.year ? parseInt(file.year) : null;\n      editForm.value = {\n        id: file.id,\n        title: file.title || '',\n        year: yearValue && yearValue > 1900 ? yearValue : null,\n        venue: file.venue || '',\n        authorsStr: file.authors?.join(', ') || ''\n      };\n      editDialogVisible.value = true;\n    };\n    const saveEdit = async () => {\n      try {\n        saving.value = true;\n\n        // 构建更新数据，只包含 Paper 模型支持的字段\n        const updateData = {};\n\n        // 标题必填\n        if (editForm.value.title !== undefined) {\n          updateData.title = editForm.value.title;\n        }\n\n        // 年份处理：确保是有效的整数或null，不能是1900\n        if (editForm.value.year !== undefined && editForm.value.year !== null) {\n          const yearNum = parseInt(editForm.value.year);\n          // 只接受合理的年份范围\n          if (yearNum >= 1950 && yearNum <= 2100) {\n            updateData.year = yearNum;\n          } else {\n            updateData.year = null;\n          }\n        } else {\n          updateData.year = null;\n        }\n\n        // 期刊/会议\n        if (editForm.value.venue !== undefined) {\n          updateData.venue = editForm.value.venue;\n        }\n        const response = await api.updatePaper(editForm.value.id, updateData);\n        if (response.success) {\n          ElMessage.success('保存成功');\n          editDialogVisible.value = false;\n          await store.dispatch('fetchFiles');\n        } else {\n          ElMessage.error(response.error || '保存失败');\n        }\n      } catch (error) {\n        console.error('保存失败:', error);\n        ElMessage.error('保存失败: ' + (error.message || '未知错误'));\n      } finally {\n        saving.value = false;\n      }\n    };\n    const deleteFile = async paper => {\n      try {\n        await ElMessageBox.confirm(`确定要删除论文 \"${paper.title || '未命名'}\" 吗？此操作不可恢复！`, '确认删除', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        });\n        const success = await store.dispatch('deleteFile', paper.id);\n        if (success) {\n          ElMessage.success('删除成功');\n          // 清空选择\n          if (selectedFiles.value.find(f => f.id === paper.id)) {\n            clearSelection();\n          }\n        } else {\n          ElMessage.error('删除失败');\n        }\n      } catch {\n        // 用户取消\n      }\n    };\n\n    // 批量操作\n    const batchAnalyze = () => {\n      if (selectedFiles.value.length === 0) {\n        ElMessage.warning('请先选择要分析的论文');\n        return;\n      }\n      ElMessageBox.confirm(`将对 ${selectedFiles.value.length} 篇论文依次进行分析，是否继续？`, '批量分析确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'info'\n      }).then(() => {\n        // 跳转到分析页面，传递第一篇论文ID\n        const firstPaper = selectedFiles.value[0];\n        router.push({\n          path: '/analyze',\n          query: {\n            paperId: firstPaper.id,\n            batch: 'true',\n            count: selectedFiles.value.length\n          }\n        });\n        ElMessage.info('将从第一篇论文开始分析，完成后请继续分析其他论文');\n      }).catch(() => {\n        // 用户取消\n      });\n    };\n    const batchCluster = () => {\n      if (selectedFiles.value.length < 2) {\n        ElMessage.warning('请至少选择2篇论文进行聚类分析');\n        return;\n      }\n\n      // 跳转到聚类页面\n      router.push({\n        path: '/cluster',\n        state: {\n          selectedPapers: selectedFiles.value.map(f => f.id)\n        }\n      });\n      ElMessage.success(`已选择 ${selectedFiles.value.length} 篇论文，正在跳转到聚类页面`);\n    };\n    const batchExport = async () => {\n      if (selectedFiles.value.length === 0) {\n        ElMessage.warning('请先选择要导出的论文');\n        return;\n      }\n      try {\n        // 生成CSV格式\n        const headers = ['ID', '标题', '年份', '期刊/会议', '作者', '上传时间'];\n        const rows = selectedFiles.value.map(file => [file.id, file.title || '', file.year || '', file.venue || '', file.authors?.join('; ') || '', formatTime(null, null, file.created_at)]);\n        const csv = [headers.join(','), ...rows.map(row => row.map(cell => `\"${cell}\"`).join(','))].join('\\n');\n\n        // 下载文件\n        const blob = new Blob(['\\ufeff' + csv], {\n          type: 'text/csv;charset=utf-8'\n        });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `papers_export_${new Date().getTime()}.csv`;\n        a.click();\n        URL.revokeObjectURL(url);\n        ElMessage.success(`成功导出 ${selectedFiles.value.length} 篇论文信息`);\n      } catch (error) {\n        console.error('导出失败:', error);\n        ElMessage.error('导出失败: ' + error.message);\n      }\n    };\n    const batchDelete = async () => {\n      if (selectedFiles.value.length === 0) {\n        ElMessage.warning('请先选择要删除的论文');\n        return;\n      }\n      try {\n        await ElMessageBox.confirm(`确定要删除选中的 ${selectedFiles.value.length} 篇论文吗？此操作不可恢复！`, '批量删除确认', {\n          confirmButtonText: '确定删除',\n          cancelButtonText: '取消',\n          type: 'warning',\n          dangerouslyUseHTMLString: true\n        });\n\n        // 调用批量删除API\n        const paperIds = selectedFiles.value.map(f => f.id);\n        const response = await api.batchDeletePapers(paperIds);\n        if (response.success) {\n          ElMessage.success(`成功删除 ${response.data.deleted_count || paperIds.length} 篇论文`);\n          clearSelection();\n          await store.dispatch('fetchFiles');\n        } else {\n          ElMessage.error(response.error || '批量删除失败');\n        }\n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('批量删除失败:', error);\n          ElMessage.error('批量删除失败: ' + (error.message || '未知错误'));\n        }\n      }\n    };\n\n    // 生命周期\n    onMounted(() => {\n      store.dispatch('fetchFiles');\n    });\n    return (_ctx, _cache) => {\n      const _component_el_tag = _resolveComponent(\"el-tag\");\n      const _component_el_icon = _resolveComponent(\"el-icon\");\n      const _component_el_divider = _resolveComponent(\"el-divider\");\n      const _component_el_button = _resolveComponent(\"el-button\");\n      const _component_el_card = _resolveComponent(\"el-card\");\n      const _component_el_input = _resolveComponent(\"el-input\");\n      const _component_el_table_column = _resolveComponent(\"el-table-column\");\n      const _component_el_tooltip = _resolveComponent(\"el-tooltip\");\n      const _component_el_button_group = _resolveComponent(\"el-button-group\");\n      const _component_el_table = _resolveComponent(\"el-table\");\n      const _component_el_empty = _resolveComponent(\"el-empty\");\n      const _component_el_descriptions_item = _resolveComponent(\"el-descriptions-item\");\n      const _component_el_descriptions = _resolveComponent(\"el-descriptions\");\n      const _component_el_dialog = _resolveComponent(\"el-dialog\");\n      const _component_el_form_item = _resolveComponent(\"el-form-item\");\n      const _component_el_input_number = _resolveComponent(\"el-input-number\");\n      const _component_el_form = _resolveComponent(\"el-form\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[10] || (_cache[10] = _createElementVNode(\"h2\", null, \"论文管理\", -1)), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_tag, null, {\n        default: _withCtx(() => [_createTextVNode(\"总计: \" + _toDisplayString(files.value.length) + \" 篇\", 1)]),\n        _: 1\n      }), selectedFiles.value.length > 0 ? (_openBlock(), _createBlock(_component_el_tag, {\n        key: 0,\n        type: \"success\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" 已选: \" + _toDisplayString(selectedFiles.value.length) + \" 篇 \", 1)]),\n        _: 1\n      })) : _createCommentVNode(\"\", true)])]), selectedFiles.value.length > 0 ? (_openBlock(), _createBlock(_component_el_card, {\n        key: 0,\n        class: \"batch-actions-card\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_icon, {\n          class: \"batch-icon\"\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(Check))]),\n          _: 1\n        }), _createElementVNode(\"span\", null, [_cache[11] || (_cache[11] = _createTextVNode(\"已选择 \", -1)), _createElementVNode(\"strong\", null, _toDisplayString(selectedFiles.value.length), 1), _cache[12] || (_cache[12] = _createTextVNode(\" 篇论文\", -1))])]), _createVNode(_component_el_divider, {\n          direction: \"vertical\"\n        }), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: batchAnalyze,\n          disabled: selectedFiles.value.length === 0,\n          icon: \"VideoPlay\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\" 批量分析 (\" + _toDisplayString(selectedFiles.value.length) + \") \", 1)]),\n          _: 1\n        }, 8, [\"disabled\"]), _createVNode(_component_el_button, {\n          type: \"success\",\n          onClick: batchCluster,\n          disabled: selectedFiles.value.length < 2,\n          icon: \"DataAnalysis\"\n        }, {\n          default: _withCtx(() => [...(_cache[13] || (_cache[13] = [_createTextVNode(\" 聚类分析 \", -1)]))]),\n          _: 1\n        }, 8, [\"disabled\"]), _createVNode(_component_el_button, {\n          onClick: batchExport,\n          disabled: selectedFiles.value.length === 0,\n          icon: \"Download\"\n        }, {\n          default: _withCtx(() => [...(_cache[14] || (_cache[14] = [_createTextVNode(\" 批量导出 \", -1)]))]),\n          _: 1\n        }, 8, [\"disabled\"]), _createVNode(_component_el_button, {\n          type: \"danger\",\n          onClick: batchDelete,\n          disabled: selectedFiles.value.length === 0,\n          icon: \"Delete\"\n        }, {\n          default: _withCtx(() => [...(_cache[15] || (_cache[15] = [_createTextVNode(\" 批量删除 \", -1)]))]),\n          _: 1\n        }, 8, [\"disabled\"]), _createVNode(_component_el_button, {\n          onClick: clearSelection,\n          icon: \"Close\"\n        }, {\n          default: _withCtx(() => [...(_cache[16] || (_cache[16] = [_createTextVNode(\" 取消选择 \", -1)]))]),\n          _: 1\n        })])])]),\n        _: 1\n      })) : _createCommentVNode(\"\", true), _createVNode(_component_el_card, {\n        class: \"table-card\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_button, {\n          onClick: toggleSelectAll,\n          icon: \"List\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(allSelected.value ? '取消全选' : '全选'), 1)]),\n          _: 1\n        }), _createVNode(_component_el_button, {\n          onClick: refreshFiles,\n          icon: \"Refresh\"\n        }, {\n          default: _withCtx(() => [...(_cache[17] || (_cache[17] = [_createTextVNode(\"刷新\", -1)]))]),\n          _: 1\n        })]), _createElementVNode(\"div\", _hoisted_9, [_createVNode(_component_el_input, {\n          modelValue: searchText.value,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => searchText.value = $event),\n          placeholder: \"搜索论文标题、作者、期刊...\",\n          clearable: \"\",\n          style: {\n            \"width\": \"300px\"\n          },\n          onInput: handleSearch\n        }, {\n          prefix: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_unref(Search))]),\n            _: 1\n          })]),\n          _: 1\n        }, 8, [\"modelValue\"])])]), _createVNode(_component_el_table, {\n          ref_key: \"tableRef\",\n          ref: tableRef,\n          data: filteredFiles.value,\n          style: {\n            \"width\": \"100%\"\n          },\n          \"row-style\": {\n            height: '60px'\n          },\n          onSelectionChange: handleSelectionChange,\n          \"row-key\": getRowKey\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_table_column, {\n            type: \"selection\",\n            width: \"55\",\n            \"reserve-selection\": true\n          }), _createVNode(_component_el_table_column, {\n            prop: \"title\",\n            label: \"论文标题\",\n            \"min-width\": \"300\",\n            \"show-overflow-tooltip\": \"\"\n          }, {\n            default: _withCtx(({\n              row\n            }) => [_createVNode(_component_el_tooltip, {\n              content: row.title || '无标题',\n              placement: \"top\",\n              effect: \"dark\"\n            }, {\n              default: _withCtx(() => [_createElementVNode(\"div\", {\n                class: \"table-cell-text\",\n                onClick: $event => viewFileDetail(row)\n              }, _toDisplayString(row.title || '无标题'), 9, _hoisted_10)]),\n              _: 2\n            }, 1032, [\"content\"])]),\n            _: 1\n          }), _createVNode(_component_el_table_column, {\n            prop: \"year\",\n            label: \"年份\",\n            width: \"100\",\n            sortable: \"\"\n          }, {\n            default: _withCtx(({\n              row\n            }) => [row.year ? (_openBlock(), _createBlock(_component_el_tag, {\n              key: 0,\n              size: \"small\"\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString(row.year), 1)]),\n              _: 2\n            }, 1024)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \"-\"))]),\n            _: 1\n          }), _createVNode(_component_el_table_column, {\n            prop: \"venue\",\n            label: \"发表期刊/会议\",\n            \"min-width\": \"250\",\n            \"show-overflow-tooltip\": \"\"\n          }, {\n            default: _withCtx(({\n              row\n            }) => [_createVNode(_component_el_tooltip, {\n              content: row.venue || '未知',\n              placement: \"top\",\n              effect: \"dark\"\n            }, {\n              default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_12, _toDisplayString(row.venue || '未知'), 1)]),\n              _: 2\n            }, 1032, [\"content\"])]),\n            _: 1\n          }), _createVNode(_component_el_table_column, {\n            prop: \"created_at\",\n            label: \"上传时间\",\n            formatter: formatTime,\n            width: \"180\",\n            sortable: \"\"\n          }), _createVNode(_component_el_table_column, {\n            label: \"状态\",\n            width: \"120\"\n          }, {\n            default: _withCtx(({\n              row\n            }) => [row.analyzed ? (_openBlock(), _createBlock(_component_el_tag, {\n              key: 0,\n              type: \"success\",\n              size: \"small\"\n            }, {\n              default: _withCtx(() => [...(_cache[18] || (_cache[18] = [_createTextVNode(\"已分析\", -1)]))]),\n              _: 1\n            })) : (_openBlock(), _createBlock(_component_el_tag, {\n              key: 1,\n              type: \"info\",\n              size: \"small\"\n            }, {\n              default: _withCtx(() => [...(_cache[19] || (_cache[19] = [_createTextVNode(\"未分析\", -1)]))]),\n              _: 1\n            }))]),\n            _: 1\n          }), _createVNode(_component_el_table_column, {\n            label: \"操作\",\n            width: \"250\",\n            fixed: \"right\"\n          }, {\n            default: _withCtx(scope => [_createVNode(_component_el_button_group, null, {\n              default: _withCtx(() => [_createVNode(_component_el_button, {\n                size: \"small\",\n                onClick: $event => analyzeFile(scope.row),\n                icon: \"VideoPlay\"\n              }, {\n                default: _withCtx(() => [...(_cache[20] || (_cache[20] = [_createTextVNode(\" 分析 \", -1)]))]),\n                _: 1\n              }, 8, [\"onClick\"]), _createVNode(_component_el_button, {\n                size: \"small\",\n                onClick: $event => editFile(scope.row),\n                icon: \"Edit\"\n              }, {\n                default: _withCtx(() => [...(_cache[21] || (_cache[21] = [_createTextVNode(\" 编辑 \", -1)]))]),\n                _: 1\n              }, 8, [\"onClick\"]), _createVNode(_component_el_button, {\n                size: \"small\",\n                type: \"danger\",\n                onClick: $event => deleteFile(scope.row),\n                icon: \"Delete\"\n              }, {\n                default: _withCtx(() => [...(_cache[22] || (_cache[22] = [_createTextVNode(\" 删除 \", -1)]))]),\n                _: 1\n              }, 8, [\"onClick\"])]),\n              _: 2\n            }, 1024)]),\n            _: 1\n          })]),\n          _: 1\n        }, 8, [\"data\"]), filteredFiles.value.length === 0 ? (_openBlock(), _createBlock(_component_el_empty, {\n          key: 0,\n          description: \"暂无论文，请先上传PDF文件\"\n        })) : _createCommentVNode(\"\", true)]),\n        _: 1\n      }), _createVNode(_component_el_dialog, {\n        modelValue: detailDialogVisible.value,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => detailDialogVisible.value = $event),\n        title: currentFile.value?.title || '论文详情',\n        width: \"800px\"\n      }, {\n        footer: _withCtx(() => [_createVNode(_component_el_button, {\n          onClick: _cache[1] || (_cache[1] = $event => detailDialogVisible.value = false)\n        }, {\n          default: _withCtx(() => [...(_cache[23] || (_cache[23] = [_createTextVNode(\"关闭\", -1)]))]),\n          _: 1\n        }), _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: _cache[2] || (_cache[2] = $event => analyzeFile(currentFile.value))\n        }, {\n          default: _withCtx(() => [...(_cache[24] || (_cache[24] = [_createTextVNode(\"分析此论文\", -1)]))]),\n          _: 1\n        })]),\n        default: _withCtx(() => [currentFile.value ? (_openBlock(), _createBlock(_component_el_descriptions, {\n          key: 0,\n          column: 2,\n          border: \"\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_descriptions_item, {\n            label: \"论文ID\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(currentFile.value.id), 1)]),\n            _: 1\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"年份\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(currentFile.value.year || '-'), 1)]),\n            _: 1\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"期刊/会议\",\n            span: 2\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(currentFile.value.venue || '-'), 1)]),\n            _: 1\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"作者\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(currentFile.value.authors?.join(', ') || '-'), 1)]),\n            _: 1\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"上传时间\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(formatTime(null, null, currentFile.value.created_at)), 1)]),\n            _: 1\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"文件路径\",\n            span: 2\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(currentFile.value.pdf_path || '-'), 1)]),\n            _: 1\n          }), _createVNode(_component_el_descriptions_item, {\n            label: \"分析状态\",\n            span: 2\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_tag, {\n              type: currentFile.value.analyzed ? 'success' : 'info'\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString(currentFile.value.analyzed ? '已分析' : '未分析'), 1)]),\n              _: 1\n            }, 8, [\"type\"])]),\n            _: 1\n          })]),\n          _: 1\n        })) : _createCommentVNode(\"\", true)]),\n        _: 1\n      }, 8, [\"modelValue\", \"title\"]), _createVNode(_component_el_dialog, {\n        modelValue: editDialogVisible.value,\n        \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => editDialogVisible.value = $event),\n        title: \"编辑论文信息\",\n        width: \"600px\"\n      }, {\n        footer: _withCtx(() => [_createVNode(_component_el_button, {\n          onClick: _cache[8] || (_cache[8] = $event => editDialogVisible.value = false)\n        }, {\n          default: _withCtx(() => [...(_cache[25] || (_cache[25] = [_createTextVNode(\"取消\", -1)]))]),\n          _: 1\n        }), _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: saveEdit,\n          loading: saving.value\n        }, {\n          default: _withCtx(() => [...(_cache[26] || (_cache[26] = [_createTextVNode(\"保存\", -1)]))]),\n          _: 1\n        }, 8, [\"loading\"])]),\n        default: _withCtx(() => [_createVNode(_component_el_form, {\n          model: editForm.value,\n          \"label-width\": \"100px\",\n          ref: \"editFormRef\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, {\n            label: \"论文标题\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: editForm.value.title,\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => editForm.value.title = $event),\n              placeholder: \"请输入论文标题\"\n            }, null, 8, [\"modelValue\"])]),\n            _: 1\n          }), _createVNode(_component_el_form_item, {\n            label: \"年份\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input_number, {\n              modelValue: editForm.value.year,\n              \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => editForm.value.year = $event),\n              min: 1900,\n              max: 2100\n            }, null, 8, [\"modelValue\"])]),\n            _: 1\n          }), _createVNode(_component_el_form_item, {\n            label: \"期刊/会议\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: editForm.value.venue,\n              \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => editForm.value.venue = $event),\n              placeholder: \"请输入期刊或会议名称\"\n            }, null, 8, [\"modelValue\"])]),\n            _: 1\n          }), _createVNode(_component_el_form_item, {\n            label: \"作者\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: editForm.value.authorsStr,\n              \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => editForm.value.authorsStr = $event),\n              type: \"textarea\",\n              rows: 3,\n              placeholder: \"多个作者用逗号分隔\"\n            }, null, 8, [\"modelValue\"])]),\n            _: 1\n          })]),\n          _: 1\n        }, 8, [\"model\"])]),\n        _: 1\n      }, 8, [\"modelValue\"])]);\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useStore","useRouter","ElMessage","ElMessageBox","Check","Search","VideoPlay","DataAnalysis","Download","Delete","Edit","Refresh","List","Close","api","store","router","tableRef","selectedFiles","searchText","detailDialogVisible","editDialogVisible","currentFile","saving","editForm","id","title","year","venue","authorsStr","files","state","filteredFiles","value","search","toLowerCase","filter","file","includes","authors","some","a","toString","allSelected","length","getRowKey","row","formatTime","column","time","Date","toLocaleString","handleSelectionChange","selection","toggleSelectAll","clearSelection","forEach","toggleRowSelection","handleSearch","refreshFiles","dispatch","success","viewFileDetail","analyzeFile","paper","push","path","query","paperId","unwatch","afterEach","to","from","setTimeout","editFile","yearValue","parseInt","join","saveEdit","updateData","undefined","yearNum","response","updatePaper","error","console","message","deleteFile","confirm","confirmButtonText","cancelButtonText","type","find","f","batchAnalyze","warning","then","firstPaper","batch","count","info","catch","batchCluster","selectedPapers","map","batchExport","headers","rows","created_at","csv","cell","blob","Blob","url","URL","createObjectURL","document","createElement","href","download","getTime","click","revokeObjectURL","batchDelete","dangerouslyUseHTMLString","paperIds","batchDeletePapers","data","deleted_count","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_el_tag","_toDisplayString","_createBlock","_component_el_card","class","_hoisted_4","_hoisted_5","_component_el_icon","_unref","_component_el_divider","direction","_hoisted_6","_component_el_button","onClick","disabled","icon","_cache","_hoisted_7","_hoisted_8","_hoisted_9","_component_el_input","$event","placeholder","clearable","style","onInput","prefix","_withCtx","_component_el_table","height","onSelectionChange","_component_el_table_column","width","prop","label","default","_component_el_tooltip","content","placement","effect","_hoisted_10","sortable","size","_hoisted_11","_hoisted_12","formatter","analyzed","fixed","scope","_component_el_button_group","_component_el_empty","description","_component_el_dialog","footer","_component_el_descriptions","border","_component_el_descriptions_item","span","pdf_path","loading","_component_el_form","model","_component_el_form_item","_component_el_input_number","min","max"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/Files.vue"],"sourcesContent":["<template>\n  <div class=\"files\">\n    <div class=\"page-header\">\n      <h2>论文管理</h2>\n      <div class=\"header-stats\">\n        <el-tag>总计: {{ files.length }} 篇</el-tag>\n        <el-tag type=\"success\" v-if=\"selectedFiles.length > 0\">\n          已选: {{ selectedFiles.length }} 篇\n        </el-tag>\n      </div>\n    </div>\n\n    <!-- 批量操作栏 -->\n    <el-card class=\"batch-actions-card\" v-if=\"selectedFiles.length > 0\">\n      <div class=\"batch-actions\">\n        <div class=\"batch-info\">\n          <el-icon class=\"batch-icon\"><Check /></el-icon>\n          <span>已选择 <strong>{{ selectedFiles.length }}</strong> 篇论文</span>\n        </div>\n\n        <el-divider direction=\"vertical\" />\n\n        <div class=\"batch-buttons\">\n          <el-button\n            type=\"primary\"\n            @click=\"batchAnalyze\"\n            :disabled=\"selectedFiles.length === 0\"\n            icon=\"VideoPlay\"\n          >\n            批量分析 ({{ selectedFiles.length }})\n          </el-button>\n\n          <el-button\n            type=\"success\"\n            @click=\"batchCluster\"\n            :disabled=\"selectedFiles.length < 2\"\n            icon=\"DataAnalysis\"\n          >\n            聚类分析\n          </el-button>\n\n          <el-button\n            @click=\"batchExport\"\n            :disabled=\"selectedFiles.length === 0\"\n            icon=\"Download\"\n          >\n            批量导出\n          </el-button>\n\n          <el-button\n            type=\"danger\"\n            @click=\"batchDelete\"\n            :disabled=\"selectedFiles.length === 0\"\n            icon=\"Delete\"\n          >\n            批量删除\n          </el-button>\n\n          <el-button @click=\"clearSelection\" icon=\"Close\">\n            取消选择\n          </el-button>\n        </div>\n      </div>\n    </el-card>\n\n    <!-- 论文列表 -->\n    <el-card class=\"table-card\">\n      <!-- 工具栏 -->\n      <div class=\"table-toolbar\">\n        <div class=\"toolbar-left\">\n          <el-button @click=\"toggleSelectAll\" icon=\"List\">\n            {{ allSelected ? '取消全选' : '全选' }}\n          </el-button>\n          <el-button @click=\"refreshFiles\" icon=\"Refresh\">刷新</el-button>\n        </div>\n\n        <div class=\"toolbar-right\">\n          <el-input\n            v-model=\"searchText\"\n            placeholder=\"搜索论文标题、作者、期刊...\"\n            clearable\n            style=\"width: 300px\"\n            @input=\"handleSearch\"\n          >\n            <template #prefix>\n              <el-icon><Search /></el-icon>\n            </template>\n          </el-input>\n        </div>\n      </div>\n\n      <el-table\n        ref=\"tableRef\"\n        :data=\"filteredFiles\"\n        style=\"width: 100%\"\n        :row-style=\"{ height: '60px' }\"\n        @selection-change=\"handleSelectionChange\"\n        :row-key=\"getRowKey\"\n      >\n        <el-table-column type=\"selection\" width=\"55\" :reserve-selection=\"true\" />\n\n        <el-table-column prop=\"title\" label=\"论文标题\" min-width=\"300\" show-overflow-tooltip>\n          <template #default=\"{ row }\">\n            <el-tooltip :content=\"row.title || '无标题'\" placement=\"top\" effect=\"dark\">\n              <div class=\"table-cell-text\" @click=\"viewFileDetail(row)\">\n                {{ row.title || '无标题' }}\n              </div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"year\" label=\"年份\" width=\"100\" sortable>\n          <template #default=\"{ row }\">\n            <el-tag v-if=\"row.year\" size=\"small\">{{ row.year }}</el-tag>\n            <span v-else>-</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"venue\" label=\"发表期刊/会议\" min-width=\"250\" show-overflow-tooltip>\n          <template #default=\"{ row }\">\n            <el-tooltip :content=\"row.venue || '未知'\" placement=\"top\" effect=\"dark\">\n              <div class=\"table-cell-text\">{{ row.venue || '未知' }}</div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"created_at\" label=\"上传时间\" :formatter=\"formatTime\" width=\"180\" sortable />\n\n        <el-table-column label=\"状态\" width=\"120\">\n          <template #default=\"{ row }\">\n            <el-tag v-if=\"row.analyzed\" type=\"success\" size=\"small\">已分析</el-tag>\n            <el-tag v-else type=\"info\" size=\"small\">未分析</el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"操作\" width=\"250\" fixed=\"right\">\n          <template #default=\"scope\">\n            <el-button-group>\n              <el-button size=\"small\" @click=\"analyzeFile(scope.row)\" icon=\"VideoPlay\">\n                分析\n              </el-button>\n              <el-button size=\"small\" @click=\"editFile(scope.row)\" icon=\"Edit\">\n                编辑\n              </el-button>\n              <el-button\n                size=\"small\"\n                type=\"danger\"\n                @click=\"deleteFile(scope.row)\"\n                icon=\"Delete\"\n              >\n                删除\n              </el-button>\n            </el-button-group>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-empty v-if=\"filteredFiles.length === 0\" description=\"暂无论文，请先上传PDF文件\" />\n    </el-card>\n\n    <!-- 论文详情对话框 -->\n    <el-dialog\n      v-model=\"detailDialogVisible\"\n      :title=\"currentFile?.title || '论文详情'\"\n      width=\"800px\"\n    >\n      <el-descriptions :column=\"2\" border v-if=\"currentFile\">\n        <el-descriptions-item label=\"论文ID\">{{ currentFile.id }}</el-descriptions-item>\n        <el-descriptions-item label=\"年份\">{{ currentFile.year || '-' }}</el-descriptions-item>\n        <el-descriptions-item label=\"期刊/会议\" :span=\"2\">\n          {{ currentFile.venue || '-' }}\n        </el-descriptions-item>\n        <el-descriptions-item label=\"作者\">\n          {{ currentFile.authors?.join(', ') || '-' }}\n        </el-descriptions-item>\n        <el-descriptions-item label=\"上传时间\">\n          {{ formatTime(null, null, currentFile.created_at) }}\n        </el-descriptions-item>\n        <el-descriptions-item label=\"文件路径\" :span=\"2\">\n          {{ currentFile.pdf_path || '-' }}\n        </el-descriptions-item>\n        <el-descriptions-item label=\"分析状态\" :span=\"2\">\n          <el-tag :type=\"currentFile.analyzed ? 'success' : 'info'\">\n            {{ currentFile.analyzed ? '已分析' : '未分析' }}\n          </el-tag>\n        </el-descriptions-item>\n      </el-descriptions>\n\n      <template #footer>\n        <el-button @click=\"detailDialogVisible = false\">关闭</el-button>\n        <el-button type=\"primary\" @click=\"analyzeFile(currentFile)\">分析此论文</el-button>\n      </template>\n    </el-dialog>\n\n    <!-- 编辑对话框 -->\n    <el-dialog\n      v-model=\"editDialogVisible\"\n      title=\"编辑论文信息\"\n      width=\"600px\"\n    >\n      <el-form :model=\"editForm\" label-width=\"100px\" ref=\"editFormRef\">\n        <el-form-item label=\"论文标题\">\n          <el-input v-model=\"editForm.title\" placeholder=\"请输入论文标题\" />\n        </el-form-item>\n        <el-form-item label=\"年份\">\n          <el-input-number v-model=\"editForm.year\" :min=\"1900\" :max=\"2100\" />\n        </el-form-item>\n        <el-form-item label=\"期刊/会议\">\n          <el-input v-model=\"editForm.venue\" placeholder=\"请输入期刊或会议名称\" />\n        </el-form-item>\n        <el-form-item label=\"作者\">\n          <el-input\n            v-model=\"editForm.authorsStr\"\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"多个作者用逗号分隔\"\n          />\n        </el-form-item>\n      </el-form>\n\n      <template #footer>\n        <el-button @click=\"editDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveEdit\" :loading=\"saving\">保存</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Check, Search, VideoPlay, DataAnalysis, Download, Delete, Edit, Refresh, List, Close } from '@element-plus/icons-vue'\nimport api from '@/api'\n\nconst store = useStore()\nconst router = useRouter()\n\n// 响应式数据\nconst tableRef = ref(null)\nconst selectedFiles = ref([])\nconst searchText = ref('')\nconst detailDialogVisible = ref(false)\nconst editDialogVisible = ref(false)\nconst currentFile = ref(null)\nconst saving = ref(false)\n\nconst editForm = ref({\n  id: null,\n  title: '',\n  year: null,\n  venue: '',\n  authorsStr: ''\n})\n\n// 计算属性\nconst files = computed(() => store.state.files || [])\n\nconst filteredFiles = computed(() => {\n  if (!searchText.value) return files.value\n\n  const search = searchText.value.toLowerCase()\n  return files.value.filter(file => {\n    return (\n      (file.title?.toLowerCase().includes(search)) ||\n      (file.venue?.toLowerCase().includes(search)) ||\n      (file.authors?.some(a => a.toLowerCase().includes(search))) ||\n      (file.year?.toString().includes(search))\n    )\n  })\n})\n\nconst allSelected = computed(() => {\n  return selectedFiles.value.length === filteredFiles.value.length && filteredFiles.value.length > 0\n})\n\n// 方法\nconst getRowKey = (row) => row.id\n\nconst formatTime = (row, column, time) => {\n  if (!time) return '-'\n  return new Date(time).toLocaleString('zh-CN')\n}\n\nconst handleSelectionChange = (selection) => {\n  selectedFiles.value = selection\n}\n\nconst toggleSelectAll = () => {\n  if (allSelected.value) {\n    tableRef.value?.clearSelection()\n  } else {\n    filteredFiles.value.forEach(row => {\n      tableRef.value?.toggleRowSelection(row, true)\n    })\n  }\n}\n\nconst clearSelection = () => {\n  tableRef.value?.clearSelection()\n}\n\nconst handleSearch = () => {\n  // 搜索时清空选择\n  clearSelection()\n}\n\nconst refreshFiles = () => {\n  store.dispatch('fetchFiles')\n  ElMessage.success('刷新成功')\n}\n\nconst viewFileDetail = (file) => {\n  currentFile.value = file\n  detailDialogVisible.value = true\n}\n\nconst analyzeFile = (paper) => {\n  if (paper) {\n    router.push({ path: '/analyze', query: { paperId: paper.id } })\n\n    // 添加路由守卫，从分析页面返回时刷新列表\n    const unwatch = router.afterEach((to, from) => {\n      if (from.path === '/analyze' && to.path === '/files') {\n        // 延迟刷新，确保数据库已更新\n        setTimeout(() => {\n          store.dispatch('fetchFiles')\n        }, 500)\n        unwatch()\n      }\n    })\n  }\n}\n\nconst editFile = (file) => {\n  currentFile.value = file\n  // 确保年份是有效的整数，避免null或undefined导致的问题\n  const yearValue = file.year ? parseInt(file.year) : null\n  editForm.value = {\n    id: file.id,\n    title: file.title || '',\n    year: yearValue && yearValue > 1900 ? yearValue : null,\n    venue: file.venue || '',\n    authorsStr: file.authors?.join(', ') || ''\n  }\n  editDialogVisible.value = true\n}\n\nconst saveEdit = async () => {\n  try {\n    saving.value = true\n\n    // 构建更新数据，只包含 Paper 模型支持的字段\n    const updateData = {}\n    \n    // 标题必填\n    if (editForm.value.title !== undefined) {\n      updateData.title = editForm.value.title\n    }\n    \n    // 年份处理：确保是有效的整数或null，不能是1900\n    if (editForm.value.year !== undefined && editForm.value.year !== null) {\n      const yearNum = parseInt(editForm.value.year)\n      // 只接受合理的年份范围\n      if (yearNum >= 1950 && yearNum <= 2100) {\n        updateData.year = yearNum\n      } else {\n        updateData.year = null\n      }\n    } else {\n      updateData.year = null\n    }\n    \n    // 期刊/会议\n    if (editForm.value.venue !== undefined) {\n      updateData.venue = editForm.value.venue\n    }\n\n    const response = await api.updatePaper(editForm.value.id, updateData)\n\n    if (response.success) {\n      ElMessage.success('保存成功')\n      editDialogVisible.value = false\n      await store.dispatch('fetchFiles')\n    } else {\n      ElMessage.error(response.error || '保存失败')\n    }\n  } catch (error) {\n    console.error('保存失败:', error)\n    ElMessage.error('保存失败: ' + (error.message || '未知错误'))\n  } finally {\n    saving.value = false\n  }\n}\n\nconst deleteFile = async (paper) => {\n  try {\n    await ElMessageBox.confirm(\n      `确定要删除论文 \"${paper.title || '未命名'}\" 吗？此操作不可恢复！`,\n      '确认删除',\n      {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }\n    )\n\n    const success = await store.dispatch('deleteFile', paper.id)\n    if (success) {\n      ElMessage.success('删除成功')\n      // 清空选择\n      if (selectedFiles.value.find(f => f.id === paper.id)) {\n        clearSelection()\n      }\n    } else {\n      ElMessage.error('删除失败')\n    }\n  } catch {\n    // 用户取消\n  }\n}\n\n// 批量操作\nconst batchAnalyze = () => {\n  if (selectedFiles.value.length === 0) {\n    ElMessage.warning('请先选择要分析的论文')\n    return\n  }\n\n  ElMessageBox.confirm(\n    `将对 ${selectedFiles.value.length} 篇论文依次进行分析，是否继续？`,\n    '批量分析确认',\n    {\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      type: 'info'\n    }\n  ).then(() => {\n    // 跳转到分析页面，传递第一篇论文ID\n    const firstPaper = selectedFiles.value[0]\n    router.push({\n      path: '/analyze',\n      query: {\n        paperId: firstPaper.id,\n        batch: 'true',\n        count: selectedFiles.value.length\n      }\n    })\n    ElMessage.info('将从第一篇论文开始分析，完成后请继续分析其他论文')\n  }).catch(() => {\n    // 用户取消\n  })\n}\n\nconst batchCluster = () => {\n  if (selectedFiles.value.length < 2) {\n    ElMessage.warning('请至少选择2篇论文进行聚类分析')\n    return\n  }\n\n  // 跳转到聚类页面\n  router.push({\n    path: '/cluster',\n    state: {\n      selectedPapers: selectedFiles.value.map(f => f.id)\n    }\n  })\n  ElMessage.success(`已选择 ${selectedFiles.value.length} 篇论文，正在跳转到聚类页面`)\n}\n\nconst batchExport = async () => {\n  if (selectedFiles.value.length === 0) {\n    ElMessage.warning('请先选择要导出的论文')\n    return\n  }\n\n  try {\n    // 生成CSV格式\n    const headers = ['ID', '标题', '年份', '期刊/会议', '作者', '上传时间']\n    const rows = selectedFiles.value.map(file => [\n      file.id,\n      file.title || '',\n      file.year || '',\n      file.venue || '',\n      file.authors?.join('; ') || '',\n      formatTime(null, null, file.created_at)\n    ])\n\n    const csv = [headers.join(','), ...rows.map(row => row.map(cell => `\"${cell}\"`).join(','))].join('\\n')\n\n    // 下载文件\n    const blob = new Blob(['\\ufeff' + csv], { type: 'text/csv;charset=utf-8' })\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = `papers_export_${new Date().getTime()}.csv`\n    a.click()\n    URL.revokeObjectURL(url)\n\n    ElMessage.success(`成功导出 ${selectedFiles.value.length} 篇论文信息`)\n  } catch (error) {\n    console.error('导出失败:', error)\n    ElMessage.error('导出失败: ' + error.message)\n  }\n}\n\nconst batchDelete = async () => {\n  if (selectedFiles.value.length === 0) {\n    ElMessage.warning('请先选择要删除的论文')\n    return\n  }\n\n  try {\n    await ElMessageBox.confirm(\n      `确定要删除选中的 ${selectedFiles.value.length} 篇论文吗？此操作不可恢复！`,\n      '批量删除确认',\n      {\n        confirmButtonText: '确定删除',\n        cancelButtonText: '取消',\n        type: 'warning',\n        dangerouslyUseHTMLString: true\n      }\n    )\n\n    // 调用批量删除API\n    const paperIds = selectedFiles.value.map(f => f.id)\n    const response = await api.batchDeletePapers(paperIds)\n\n    if (response.success) {\n      ElMessage.success(`成功删除 ${response.data.deleted_count || paperIds.length} 篇论文`)\n      clearSelection()\n      await store.dispatch('fetchFiles')\n    } else {\n      ElMessage.error(response.error || '批量删除失败')\n    }\n  } catch (error) {\n    if (error !== 'cancel') {\n      console.error('批量删除失败:', error)\n      ElMessage.error('批量删除失败: ' + (error.message || '未知错误'))\n    }\n  }\n}\n\n// 生命周期\nonMounted(() => {\n  store.dispatch('fetchFiles')\n})\n</script>\n\n<style scoped>\n.files {\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.page-header h2 {\n  margin: 0;\n  color: #303133;\n}\n\n.header-stats {\n  display: flex;\n  gap: 10px;\n}\n\n.batch-actions-card {\n  margin-bottom: 20px;\n  background-color: #e6f7ff;\n  border: 1px solid #91d5ff;\n}\n\n.batch-actions-card :deep(.el-card__body) {\n  padding: 16px 20px;\n}\n\n.batch-actions {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  color: #262626;\n}\n\n.batch-info {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 14px;\n  color: #1890ff;\n  font-weight: 500;\n}\n\n.batch-icon {\n  font-size: 20px;\n  color: #1890ff;\n}\n\n.batch-buttons {\n  display: flex;\n  gap: 10px;\n  flex: 1;\n}\n\n.table-card {\n  margin-bottom: 20px;\n}\n\n.table-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding: 15px;\n  background: #f5f7fa;\n  border-radius: 4px;\n}\n\n.toolbar-left,\n.toolbar-right {\n  display: flex;\n  gap: 10px;\n}\n\n.table-cell-text {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  cursor: pointer;\n  color: #303133;\n}\n\n.table-cell-text:hover {\n  color: #409EFF;\n}\n\n:deep(.el-button-group) {\n  display: flex;\n}\n\n:deep(.el-divider--vertical) {\n  height: 40px;\n  border-color: rgba(255, 255, 255, 0.3);\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}