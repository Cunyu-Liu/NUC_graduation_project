{"ast":null,"code":"import { defineComponent, createVNode, renderSlot, h } from 'vue';\nimport { useSameTarget } from '../../../hooks/use-same-target/index.mjs';\nimport { PatchFlags } from '../../../utils/vue/vnode.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props/runtime.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nconst overlayProps = buildProps({\n  mask: {\n    type: Boolean,\n    default: true\n  },\n  customMaskEvent: Boolean,\n  overlayClass: {\n    type: definePropType([String, Array, Object])\n  },\n  zIndex: {\n    type: definePropType([String, Number])\n  }\n});\nconst overlayEmits = {\n  click: evt => evt instanceof MouseEvent\n};\nconst BLOCK = \"overlay\";\nvar Overlay = defineComponent({\n  name: \"ElOverlay\",\n  props: overlayProps,\n  emits: overlayEmits,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const ns = useNamespace(BLOCK);\n    const onMaskClick = e => {\n      emit(\"click\", e);\n    };\n    const {\n      onClick,\n      onMousedown,\n      onMouseup\n    } = useSameTarget(props.customMaskEvent ? void 0 : onMaskClick);\n    return () => {\n      return props.mask ? createVNode(\"div\", {\n        class: [ns.b(), props.overlayClass],\n        style: {\n          zIndex: props.zIndex\n        },\n        onClick,\n        onMousedown,\n        onMouseup\n      }, [renderSlot(slots, \"default\")], PatchFlags.STYLE | PatchFlags.CLASS | PatchFlags.PROPS, [\"onClick\", \"onMouseup\", \"onMousedown\"]) : h(\"div\", {\n        class: props.overlayClass,\n        style: {\n          zIndex: props.zIndex,\n          position: \"fixed\",\n          top: \"0px\",\n          right: \"0px\",\n          bottom: \"0px\",\n          left: \"0px\"\n        }\n      }, [renderSlot(slots, \"default\")]);\n    };\n  }\n});\nexport { Overlay as default, overlayEmits, overlayProps };","map":{"version":3,"names":["overlayProps","buildProps","mask","type","Boolean","default","customMaskEvent","overlayClass","definePropType","String","Array","Object","zIndex","Number","overlayEmits","click","evt","MouseEvent","BLOCK","Overlay","defineComponent","name","props","emits","setup","slots","emit","ns","useNamespace","onMaskClick","e","onClick","onMousedown","onMouseup","useSameTarget","createVNode","class","b","style","renderSlot","PatchFlags","STYLE","CLASS","PROPS","h","position","top","right","bottom","left"],"sources":["../../../../../../packages/components/overlay/src/overlay.ts"],"sourcesContent":["import { createVNode, defineComponent, h, renderSlot } from 'vue'\nimport { PatchFlags, buildProps, definePropType } from '@element-plus/utils'\nimport { useNamespace, useSameTarget } from '@element-plus/hooks'\n\nimport type {\n  CSSProperties,\n  ExtractPropTypes,\n  ExtractPublicPropTypes,\n} from 'vue'\n\nexport const overlayProps = buildProps({\n  mask: {\n    type: Boolean,\n    default: true,\n  },\n  customMaskEvent: Boolean,\n  overlayClass: {\n    type: definePropType<string | string[] | Record<string, boolean>>([\n      String,\n      Array,\n      Object,\n    ]),\n  },\n  zIndex: {\n    type: definePropType<CSSProperties['z-index']>([String, Number]),\n  },\n} as const)\nexport type OverlayProps = ExtractPropTypes<typeof overlayProps>\nexport type OverlayPropsPublic = ExtractPublicPropTypes<typeof overlayProps>\n\nexport const overlayEmits = {\n  click: (evt: MouseEvent) => evt instanceof MouseEvent,\n}\nexport type OverlayEmits = typeof overlayEmits\n\nconst BLOCK = 'overlay'\n\nexport default defineComponent({\n  name: 'ElOverlay',\n\n  props: overlayProps,\n  emits: overlayEmits,\n\n  setup(props, { slots, emit }) {\n    // No reactivity on this prop because when its rendering with a global\n    // component, this will be a constant flag.\n    const ns = useNamespace(BLOCK)\n\n    const onMaskClick = (e: MouseEvent) => {\n      emit('click', e)\n    }\n\n    const { onClick, onMousedown, onMouseup } = useSameTarget(\n      props.customMaskEvent ? undefined : onMaskClick\n    )\n\n    // init here\n    return () => {\n      // when the vnode meets the same structure but with different change trigger\n      // it will not automatically update, thus we simply use h function to manage updating\n      return props.mask\n        ? createVNode(\n            'div',\n            {\n              class: [ns.b(), props.overlayClass],\n              style: {\n                zIndex: props.zIndex,\n              },\n              onClick,\n              onMousedown,\n              onMouseup,\n            },\n            [renderSlot(slots, 'default')],\n            PatchFlags.STYLE | PatchFlags.CLASS | PatchFlags.PROPS,\n            ['onClick', 'onMouseup', 'onMousedown']\n          )\n        : h(\n            'div',\n            {\n              class: props.overlayClass,\n              style: {\n                zIndex: props.zIndex,\n                position: 'fixed',\n                top: '0px',\n                right: '0px',\n                bottom: '0px',\n                left: '0px',\n              } as CSSProperties,\n            },\n            [renderSlot(slots, 'default')]\n          )\n    }\n  },\n})\n"],"mappings":";;;;;AAUO,MAAMA,YAAA,GAAeC,UAAW;EACrCC,IAAM;IACJC,IAAM,EAAAC,OAAA;IACNC,OAAS;EAAA,CACX;EACAC,eAAiB,EAAAF,OAAA;EACjBG,YAAc;IACZJ,IAAA,EAAMK,cAA4D,EAChEC,MAAA,EACAC,KAAA,EACAC,MAAA,CACD;EAAA,CACH;EACAC,MAAQ;IACNT,IAAM,EAAAK,cAAA,CAAyC,CAACC,MAAA,EAAQI,MAAM,CAAC;EAAA;AAEnE,CAAU;AAIH,MAAMC,YAAe;EAC1BC,KAAA,EAAQC,GAAA,IAAoBA,GAAe,YAAAC;AAC7C;AAGA,MAAMC,KAAQ;AAEd,IAAAC,OAAA,GAAeC,eAAgB;EAC7BC,IAAM;EAENC,KAAO,EAAAtB,YAAA;EACPuB,KAAO,EAAAT,YAAA;EAEPU,KAAMA,CAAAF,KAAA,EAAO;IAAEG,KAAA;IAAOC;EAAA,CAAQ;IAGtB,MAAAC,EAAA,GAAKC,YAAA,CAAaV,KAAK;IAEvB,MAAAW,WAAA,GAAeC,CAAkB;MACrCJ,IAAA,CAAK,SAASI,CAAC;IAAA,CACjB;IAEA,MAAM;MAAEC,OAAA;MAASC,WAAa;MAAAC;IAAA,CAAc,GAAAC,aAAA,CAC1CZ,KAAA,CAAMhB,eAAA,GAAkB,KAAY,IAAAuB,WAAA,CACtC;IAGA,OAAO,MAAM;MAGX,OAAOP,KAAA,CAAMpB,IACT,GAAAiC,WAAA,CACE,OACA;QACEC,KAAA,EAAO,CAACT,EAAA,CAAGU,CAAE,IAAGf,KAAA,CAAMf,YAAY;QAClC+B,KAAO;UACL1B,MAAA,EAAQU,KAAM,CAAAV;QAAA,CAChB;QACAmB,OAAA;QACAC,WAAA;QACAC;MAAA,CACF,EACA,CAACM,UAAA,CAAWd,KAAO,WAAS,CAAC,GAC7Be,UAAW,CAAAC,KAAA,GAAQD,UAAW,CAAAE,KAAA,GAAQF,UAAW,CAAAG,KAAA,EACjD,CAAC,SAAW,eAAa,aAAa,EAExC,GAAAC,CAAA,CACE,OACA;QACER,KAAA,EAAOd,KAAM,CAAAf,YAAA;QACb+B,KAAO;UACL1B,MAAA,EAAQU,KAAM,CAAAV,MAAA;UACdiC,QAAU;UACVC,GAAK;UACLC,KAAO;UACPC,MAAQ;UACRC,IAAM;QAAA;MACR,CACF,EACA,CAACV,UAAA,CAAWd,KAAO,WAAS,CAAC,EAC/B;IAAA,CACN;EAAA;AAEJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}