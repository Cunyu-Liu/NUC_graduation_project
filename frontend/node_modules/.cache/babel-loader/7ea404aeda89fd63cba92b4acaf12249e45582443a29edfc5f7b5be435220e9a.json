{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { unref as _unref, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, resolveDynamicComponent as _resolveDynamicComponent, withKeys as _withKeys } from \"vue\";\nconst _hoisted_1 = {\n  class: \"ai-chat-container\"\n};\nconst _hoisted_2 = {\n  class: \"sidebar-header\"\n};\nconst _hoisted_3 = {\n  class: \"chat-history\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  class: \"chat-title\"\n};\nconst _hoisted_6 = {\n  class: \"chat-main\"\n};\nconst _hoisted_7 = {\n  class: \"chat-toolbar\"\n};\nconst _hoisted_8 = {\n  class: \"toolbar-left\"\n};\nconst _hoisted_9 = {\n  class: \"chat-title\"\n};\nconst _hoisted_10 = {\n  class: \"toolbar-right\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"welcome-screen\"\n};\nconst _hoisted_12 = {\n  class: \"welcome-icon\"\n};\nconst _hoisted_13 = {\n  class: \"quick-actions\"\n};\nconst _hoisted_14 = {\n  class: \"quick-action-buttons\"\n};\nconst _hoisted_15 = {\n  key: 0,\n  class: \"typing-indicator\"\n};\nconst _hoisted_16 = {\n  class: \"input-area\"\n};\nconst _hoisted_17 = {\n  class: \"input-toolbar\"\n};\nconst _hoisted_18 = {\n  class: \"input-box\"\n};\nconst _hoisted_19 = {\n  class: \"input-hint\"\n};\nconst _hoisted_20 = {\n  key: 0,\n  class: \"selected-papers\"\n};\nconst _hoisted_21 = {\n  class: \"paper-selector\"\n};\nimport { ref, computed, nextTick, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { Plus, Fold, Expand, ChatLineRound, MoreFilled, ChatDotRound, Setting, Paperclip, Document, Delete, Position, Search } from '@element-plus/icons-vue';\nimport ChatMessage from '@/components/ChatMessage.vue';\nimport api from '@/api';\nexport default {\n  __name: 'AIChat',\n  setup(__props) {\n    const store = useStore();\n\n    // 状态\n    const sidebarCollapsed = ref(false);\n    const currentChatId = ref(null);\n    const messages = ref([]);\n    const inputMessage = ref('');\n    const isTyping = ref(false);\n    const selectedModel = ref('glm-4-plus');\n    const messagesContainer = ref(null);\n    const showPaperSelector = ref(false);\n    const showSettings = ref(false);\n    const paperSearch = ref('');\n    const selectedPapers = ref([]);\n    const papers = ref([]);\n\n    // 设置\n    const settings = ref({\n      model: 'glm-4-plus',\n      temperature: 0.7,\n      maxTokens: 4000,\n      includeReferences: true\n    });\n\n    // 聊天历史\n    const chatHistory = ref([{\n      id: 1,\n      title: '论文综述讨论',\n      timestamp: Date.now()\n    }, {\n      id: 2,\n      title: '研究方法分析',\n      timestamp: Date.now() - 86400000\n    }]);\n\n    // 当前聊天标题\n    const currentChatTitle = computed(() => {\n      const chat = chatHistory.value.find(c => c.id === currentChatId.value);\n      return chat?.title || '新对话';\n    });\n\n    // 快捷功能\n    const quickActions = [{\n      key: 'summary',\n      label: '生成文献综述',\n      icon: 'Document',\n      prompt: '请基于我的论文库生成一份文献综述'\n    }, {\n      key: 'gaps',\n      label: '分析研究空白',\n      icon: 'Search',\n      prompt: '请分析当前研究领域的主要空白'\n    }, {\n      key: 'trends',\n      label: '研究趋势分析',\n      icon: 'TrendCharts',\n      prompt: '请分析该领域的研究趋势'\n    }, {\n      key: 'methods',\n      label: '方法论对比',\n      icon: 'DataAnalysis',\n      prompt: '请对比不同研究方法的优缺点'\n    }];\n\n    // 过滤后的论文\n    const filteredPapers = computed(() => {\n      if (!paperSearch.value) return papers.value;\n      const query = paperSearch.value.toLowerCase();\n      return papers.value.filter(p => (p.title || '').toLowerCase().includes(query) || (p.abstract || '').toLowerCase().includes(query));\n    });\n\n    // 加载论文列表\n    const loadPapers = async () => {\n      try {\n        const response = await api.getPapersList({\n          limit: 100\n        });\n        if (response.success) {\n          papers.value = response.data.items || [];\n        }\n      } catch (error) {\n        console.error('加载论文失败:', error);\n      }\n    };\n\n    // 发送消息\n    const sendMessage = async () => {\n      const message = inputMessage.value.trim();\n      if (!message || isTyping.value) return;\n\n      // 添加用户消息\n      messages.value.push({\n        content: message,\n        isUser: true,\n        timestamp: new Date()\n      });\n      inputMessage.value = '';\n      isTyping.value = true;\n      scrollToBottom();\n      try {\n        // 调用 API\n        const response = await api.chatWithAI({\n          message,\n          chatId: currentChatId.value,\n          model: selectedModel.value,\n          papers: selectedPapers.value.map(p => p.id),\n          settings: settings.value\n        });\n        if (response.success) {\n          messages.value.push({\n            content: response.data.content,\n            isUser: false,\n            timestamp: new Date(),\n            references: response.data.references || []\n          });\n        } else {\n          throw new Error(response.error || '请求失败');\n        }\n      } catch (error) {\n        ElMessage.error('AI 响应失败: ' + error.message);\n        messages.value.push({\n          content: '抱歉，我暂时无法回答您的问题。请稍后再试。',\n          isUser: false,\n          timestamp: new Date()\n        });\n      } finally {\n        isTyping.value = false;\n        scrollToBottom();\n      }\n    };\n\n    // 处理 Enter 键\n    const handleEnter = e => {\n      if (!e.shiftKey) {\n        sendMessage();\n      }\n    };\n\n    // 快捷功能\n    const sendQuickAction = prompt => {\n      inputMessage.value = prompt;\n      sendMessage();\n    };\n\n    // 滚动到底部\n    const scrollToBottom = () => {\n      nextTick(() => {\n        if (messagesContainer.value) {\n          messagesContainer.value.scrollTop = messagesContainer.value.scrollHeight;\n        }\n      });\n    };\n\n    // 新建对话\n    const createNewChat = () => {\n      const newId = Date.now();\n      chatHistory.value.unshift({\n        id: newId,\n        title: '新对话',\n        timestamp: Date.now()\n      });\n      currentChatId.value = newId;\n      messages.value = [];\n    };\n\n    // 加载对话\n    const loadChat = chatId => {\n      currentChatId.value = chatId;\n      // TODO: 从后端加载历史消息\n      messages.value = [];\n    };\n\n    // 处理对话命令\n    const handleChatCommand = async (command, chatId) => {\n      if (command === 'delete') {\n        try {\n          await ElMessageBox.confirm('确定要删除这个对话吗？', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          });\n          chatHistory.value = chatHistory.value.filter(c => c.id !== chatId);\n          if (currentChatId.value === chatId) {\n            currentChatId.value = null;\n            messages.value = [];\n          }\n        } catch {\n          // 取消\n        }\n      } else if (command === 'rename') {\n        // TODO: 重命名对话框\n      }\n    };\n\n    // 清空消息\n    const clearMessages = () => {\n      messages.value = [];\n    };\n\n    // 处理论文选择\n    const handleSelectionChange = selection => {\n      selectedPapers.value = selection;\n    };\n\n    // 确认论文选择\n    const confirmPaperSelection = () => {\n      showPaperSelector.value = false;\n      ElMessage.success(`已选择 ${selectedPapers.value.length} 篇论文`);\n    };\n\n    // 查看论文\n    const viewPaper = paper => {\n      if (paper.id) {\n        window.open(`#/papers/${paper.id}`, '_blank');\n      }\n    };\n\n    // 处理上传\n    const handleUpload = () => {\n      ElMessage.info('文件上传功能开发中');\n    };\n    onMounted(() => {\n      loadPapers();\n    });\n    return (_ctx, _cache) => {\n      const _component_el_icon = _resolveComponent(\"el-icon\");\n      const _component_el_button = _resolveComponent(\"el-button\");\n      const _component_el_dropdown_item = _resolveComponent(\"el-dropdown-item\");\n      const _component_el_dropdown_menu = _resolveComponent(\"el-dropdown-menu\");\n      const _component_el_dropdown = _resolveComponent(\"el-dropdown\");\n      const _component_el_option = _resolveComponent(\"el-option\");\n      const _component_el_select = _resolveComponent(\"el-select\");\n      const _component_el_tooltip = _resolveComponent(\"el-tooltip\");\n      const _component_el_input = _resolveComponent(\"el-input\");\n      const _component_el_table_column = _resolveComponent(\"el-table-column\");\n      const _component_el_table = _resolveComponent(\"el-table\");\n      const _component_el_dialog = _resolveComponent(\"el-dialog\");\n      const _component_el_form_item = _resolveComponent(\"el-form-item\");\n      const _component_el_slider = _resolveComponent(\"el-slider\");\n      const _component_el_input_number = _resolveComponent(\"el-input-number\");\n      const _component_el_switch = _resolveComponent(\"el-switch\");\n      const _component_el_form = _resolveComponent(\"el-form\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n        class: _normalizeClass([\"chat-sidebar\", {\n          'collapsed': sidebarCollapsed.value\n        }])\n      }, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_button, {\n        type: \"primary\",\n        class: \"new-chat-btn\",\n        onClick: createNewChat\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_unref(Plus))]),\n          _: 1\n        }), _cache[14] || (_cache[14] = _createElementVNode(\"span\", null, \"新建对话\", -1))]),\n        _: 1\n      }), _createVNode(_component_el_button, {\n        class: \"collapse-btn\",\n        onClick: _cache[0] || (_cache[0] = $event => sidebarCollapsed.value = !sidebarCollapsed.value)\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [!sidebarCollapsed.value ? (_openBlock(), _createBlock(_unref(Fold), {\n            key: 0\n          })) : (_openBlock(), _createBlock(_unref(Expand), {\n            key: 1\n          }))]),\n          _: 1\n        })]),\n        _: 1\n      })]), _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(chatHistory.value, chat => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: chat.id,\n          class: _normalizeClass([\"chat-item\", {\n            active: currentChatId.value === chat.id\n          }]),\n          onClick: $event => loadChat(chat.id)\n        }, [_createVNode(_component_el_icon, {\n          class: \"chat-icon\"\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(ChatLineRound))]),\n          _: 1\n        }), _createElementVNode(\"span\", _hoisted_5, _toDisplayString(chat.title), 1), _createVNode(_component_el_dropdown, {\n          trigger: \"click\",\n          onCommand: $event => handleChatCommand($event, chat.id)\n        }, {\n          dropdown: _withCtx(() => [_createVNode(_component_el_dropdown_menu, null, {\n            default: _withCtx(() => [_createVNode(_component_el_dropdown_item, {\n              command: \"rename\"\n            }, {\n              default: _withCtx(() => [...(_cache[15] || (_cache[15] = [_createTextVNode(\"重命名\", -1)]))]),\n              _: 1\n            }), _createVNode(_component_el_dropdown_item, {\n              command: \"delete\",\n              type: \"danger\"\n            }, {\n              default: _withCtx(() => [...(_cache[16] || (_cache[16] = [_createTextVNode(\"删除\", -1)]))]),\n              _: 1\n            })]),\n            _: 1\n          })]),\n          default: _withCtx(() => [_createVNode(_component_el_icon, {\n            class: \"chat-more\",\n            onClick: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"stop\"]))\n          }, {\n            default: _withCtx(() => [_createVNode(_unref(MoreFilled))]),\n            _: 1\n          })]),\n          _: 1\n        }, 8, [\"onCommand\"])], 10, _hoisted_4);\n      }), 128))])], 2), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h2\", _hoisted_9, _toDisplayString(currentChatTitle.value), 1)]), _createElementVNode(\"div\", _hoisted_10, [_createVNode(_component_el_select, {\n        modelValue: selectedModel.value,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => selectedModel.value = $event),\n        size: \"small\",\n        class: \"model-select\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_option, {\n          label: \"GLM-4-Plus\",\n          value: \"glm-4-plus\"\n        }), _createVNode(_component_el_option, {\n          label: \"GLM-4-Flash\",\n          value: \"glm-4-flash\"\n        })]),\n        _: 1\n      }, 8, [\"modelValue\"]), _createVNode(_component_el_button, {\n        size: \"small\",\n        onClick: _cache[3] || (_cache[3] = $event => showSettings.value = true)\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_unref(Setting))]),\n          _: 1\n        })]),\n        _: 1\n      })])]), _createElementVNode(\"div\", {\n        ref_key: \"messagesContainer\",\n        ref: messagesContainer,\n        class: \"messages-container\"\n      }, [messages.value.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createVNode(_component_el_icon, {\n        size: 64,\n        color: \"#10b981\"\n      }, {\n        default: _withCtx(() => [_createVNode(_unref(ChatDotRound))]),\n        _: 1\n      })]), _cache[18] || (_cache[18] = _createElementVNode(\"h1\", {\n        class: \"welcome-title\"\n      }, \"AI 科研助手\", -1)), _cache[19] || (_cache[19] = _createElementVNode(\"p\", {\n        class: \"welcome-desc\"\n      }, \"基于您的论文库，为您提供智能问答、文献综述、研究建议等服务\", -1)), _createElementVNode(\"div\", _hoisted_13, [_cache[17] || (_cache[17] = _createElementVNode(\"div\", {\n        class: \"quick-action-title\"\n      }, \"快捷功能：\", -1)), _createElementVNode(\"div\", _hoisted_14, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(quickActions, action => {\n        return _createVNode(_component_el_button, {\n          key: action.key,\n          type: \"default\",\n          class: \"quick-action-btn\",\n          onClick: $event => sendQuickAction(action.prompt)\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [(_openBlock(), _createBlock(_resolveDynamicComponent(action.icon)))]),\n            _: 2\n          }, 1024), _createTextVNode(\" \" + _toDisplayString(action.label), 1)]),\n          _: 2\n        }, 1032, [\"onClick\"]);\n      }), 64))])])])) : (_openBlock(), _createElementBlock(_Fragment, {\n        key: 1\n      }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(messages.value, (message, index) => {\n        return _openBlock(), _createBlock(ChatMessage, {\n          key: index,\n          content: message.content,\n          \"is-user\": message.isUser,\n          timestamp: message.timestamp,\n          references: message.references || [],\n          onViewReference: viewPaper\n        }, null, 8, [\"content\", \"is-user\", \"timestamp\", \"references\"]);\n      }), 128)), isTyping.value ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [...(_cache[20] || (_cache[20] = [_createElementVNode(\"div\", {\n        class: \"typing-dot\"\n      }, null, -1), _createElementVNode(\"div\", {\n        class: \"typing-dot\"\n      }, null, -1), _createElementVNode(\"div\", {\n        class: \"typing-dot\"\n      }, null, -1)]))])) : _createCommentVNode(\"\", true)], 64))], 512), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [_createVNode(_component_el_tooltip, {\n        content: \"上传文件\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          circle: \"\",\n          size: \"small\",\n          onClick: handleUpload\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_unref(Paperclip))]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      }), _createVNode(_component_el_tooltip, {\n        content: \"关联论文\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          circle: \"\",\n          size: \"small\",\n          onClick: _cache[4] || (_cache[4] = $event => showPaperSelector.value = true)\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_unref(Document))]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      }), _createVNode(_component_el_tooltip, {\n        content: \"清空对话\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          circle: \"\",\n          size: \"small\",\n          onClick: clearMessages\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_unref(Delete))]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      })]), _createElementVNode(\"div\", _hoisted_18, [_createVNode(_component_el_input, {\n        modelValue: inputMessage.value,\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => inputMessage.value = $event),\n        type: \"textarea\",\n        rows: 3,\n        placeholder: \"输入您的问题，AI 将基于您的论文库进行回答...\",\n        resize: \"none\",\n        onKeydown: _withKeys(_withModifiers(handleEnter, [\"prevent\"]), [\"enter\"])\n      }, null, 8, [\"modelValue\", \"onKeydown\"]), _createVNode(_component_el_button, {\n        type: \"primary\",\n        class: \"send-btn\",\n        disabled: !inputMessage.value.trim() || isTyping.value,\n        onClick: sendMessage\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_unref(Position))]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"disabled\"])]), _createElementVNode(\"div\", _hoisted_19, [_cache[21] || (_cache[21] = _createElementVNode(\"span\", null, \"Enter 发送，Shift + Enter 换行\", -1)), selectedPapers.value.length > 0 ? (_openBlock(), _createElementBlock(\"span\", _hoisted_20, \" 已选择 \" + _toDisplayString(selectedPapers.value.length) + \" 篇论文 \", 1)) : _createCommentVNode(\"\", true)])])]), _createVNode(_component_el_dialog, {\n        modelValue: showPaperSelector.value,\n        \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => showPaperSelector.value = $event),\n        title: \"选择关联论文\",\n        width: \"60%\"\n      }, {\n        footer: _withCtx(() => [_createVNode(_component_el_button, {\n          onClick: _cache[7] || (_cache[7] = $event => showPaperSelector.value = false)\n        }, {\n          default: _withCtx(() => [...(_cache[22] || (_cache[22] = [_createTextVNode(\"取消\", -1)]))]),\n          _: 1\n        }), _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: confirmPaperSelection\n        }, {\n          default: _withCtx(() => [...(_cache[23] || (_cache[23] = [_createTextVNode(\"确定\", -1)]))]),\n          _: 1\n        })]),\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_21, [_createVNode(_component_el_input, {\n          modelValue: paperSearch.value,\n          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => paperSearch.value = $event),\n          placeholder: \"搜索论文...\",\n          clearable: \"\",\n          class: \"paper-search\"\n        }, {\n          prefix: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_unref(Search))]),\n            _: 1\n          })]),\n          _: 1\n        }, 8, [\"modelValue\"]), _createVNode(_component_el_table, {\n          data: filteredPapers.value,\n          style: {\n            \"width\": \"100%\"\n          },\n          \"max-height\": \"400\",\n          onSelectionChange: handleSelectionChange\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_table_column, {\n            type: \"selection\",\n            width: \"55\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"title\",\n            label: \"论文标题\",\n            \"show-overflow-tooltip\": \"\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"year\",\n            label: \"年份\",\n            width: \"80\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"venue\",\n            label: \"期刊/会议\",\n            \"show-overflow-tooltip\": \"\"\n          })]),\n          _: 1\n        }, 8, [\"data\"])])]),\n        _: 1\n      }, 8, [\"modelValue\"]), _createVNode(_component_el_dialog, {\n        modelValue: showSettings.value,\n        \"onUpdate:modelValue\": _cache[13] || (_cache[13] = $event => showSettings.value = $event),\n        title: \"聊天设置\",\n        width: \"400px\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_form, {\n          \"label-width\": \"100px\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, {\n            label: \"模型\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_select, {\n              modelValue: settings.value.model,\n              \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => settings.value.model = $event),\n              style: {\n                \"width\": \"100%\"\n              }\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_option, {\n                label: \"GLM-4-Plus\",\n                value: \"glm-4-plus\"\n              }), _createVNode(_component_el_option, {\n                label: \"GLM-4-Flash\",\n                value: \"glm-4-flash\"\n              })]),\n              _: 1\n            }, 8, [\"modelValue\"])]),\n            _: 1\n          }), _createVNode(_component_el_form_item, {\n            label: \"温度\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_slider, {\n              modelValue: settings.value.temperature,\n              \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => settings.value.temperature = $event),\n              min: 0,\n              max: 1,\n              step: 0.1\n            }, null, 8, [\"modelValue\"])]),\n            _: 1\n          }), _createVNode(_component_el_form_item, {\n            label: \"最大长度\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input_number, {\n              modelValue: settings.value.maxTokens,\n              \"onUpdate:modelValue\": _cache[11] || (_cache[11] = $event => settings.value.maxTokens = $event),\n              min: 1000,\n              max: 8000,\n              step: 1000\n            }, null, 8, [\"modelValue\"])]),\n            _: 1\n          }), _createVNode(_component_el_form_item, {\n            label: \"引用论文\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_switch, {\n              modelValue: settings.value.includeReferences,\n              \"onUpdate:modelValue\": _cache[12] || (_cache[12] = $event => settings.value.includeReferences = $event)\n            }, null, 8, [\"modelValue\"])]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"modelValue\"])]);\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","nextTick","onMounted","useStore","ElMessage","ElMessageBox","Plus","Fold","Expand","ChatLineRound","MoreFilled","ChatDotRound","Setting","Paperclip","Document","Delete","Position","Search","ChatMessage","api","store","sidebarCollapsed","currentChatId","messages","inputMessage","isTyping","selectedModel","messagesContainer","showPaperSelector","showSettings","paperSearch","selectedPapers","papers","settings","model","temperature","maxTokens","includeReferences","chatHistory","id","title","timestamp","Date","now","currentChatTitle","chat","value","find","c","quickActions","key","label","icon","prompt","filteredPapers","query","toLowerCase","filter","p","includes","abstract","loadPapers","response","getPapersList","limit","success","data","items","error","console","sendMessage","message","trim","push","content","isUser","scrollToBottom","chatWithAI","chatId","map","references","Error","handleEnter","e","shiftKey","sendQuickAction","scrollTop","scrollHeight","createNewChat","newId","unshift","loadChat","handleChatCommand","command","confirm","confirmButtonText","cancelButtonText","type","clearMessages","handleSelectionChange","selection","confirmPaperSelection","length","viewPaper","paper","window","open","handleUpload","info","_createElementBlock","_hoisted_1","_createElementVNode","class","_normalizeClass","_hoisted_2","_createVNode","_component_el_button","onClick","_component_el_icon","_unref","_cache","$event","_createBlock","_hoisted_3","_Fragment","_renderList","active","_hoisted_5","_toDisplayString","_component_el_dropdown","trigger","onCommand","dropdown","_withCtx","_component_el_dropdown_menu","_component_el_dropdown_item","_withModifiers","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_component_el_select","size","_component_el_option","_hoisted_11","_hoisted_12","color","_hoisted_13","_hoisted_14","action","_resolveDynamicComponent","index","onViewReference","_hoisted_15","_hoisted_16","_hoisted_17","_component_el_tooltip","circle","_hoisted_18","_component_el_input","rows","placeholder","resize","onKeydown","_withKeys","disabled","_hoisted_19","_hoisted_20","_component_el_dialog","width","footer","_hoisted_21","clearable","prefix","_component_el_table","style","onSelectionChange","_component_el_table_column","prop","_component_el_form","_component_el_form_item","_component_el_slider","min","max","step","_component_el_input_number","_component_el_switch"],"sources":["/Users/liucunyu/Documents/all_code/NUC_graduation_project/frontend/src/views/AIChat.vue"],"sourcesContent":["<template>\n  <div class=\"ai-chat-container\">\n    <!-- 左侧边栏 - 对话历史 -->\n    <div class=\"chat-sidebar\" :class=\"{ 'collapsed': sidebarCollapsed }\">\n      <div class=\"sidebar-header\">\n        <el-button type=\"primary\" class=\"new-chat-btn\" @click=\"createNewChat\">\n          <el-icon><Plus /></el-icon>\n          <span>新建对话</span>\n        </el-button>\n        <el-button class=\"collapse-btn\" @click=\"sidebarCollapsed = !sidebarCollapsed\">\n          <el-icon><Fold v-if=\"!sidebarCollapsed\" /><Expand v-else /></el-icon>\n        </el-button>\n      </div>\n      \n      <div class=\"chat-history\">\n        <div\n          v-for=\"chat in chatHistory\"\n          :key=\"chat.id\"\n          class=\"chat-item\"\n          :class=\"{ active: currentChatId === chat.id }\"\n          @click=\"loadChat(chat.id)\"\n        >\n          <el-icon class=\"chat-icon\"><ChatLineRound /></el-icon>\n          <span class=\"chat-title\">{{ chat.title }}</span>\n          <el-dropdown trigger=\"click\" @command=\"handleChatCommand($event, chat.id)\">\n            <el-icon class=\"chat-more\" @click.stop><MoreFilled /></el-icon>\n            <template #dropdown>\n              <el-dropdown-menu>\n                <el-dropdown-item command=\"rename\">重命名</el-dropdown-item>\n                <el-dropdown-item command=\"delete\" type=\"danger\">删除</el-dropdown-item>\n              </el-dropdown-menu>\n            </template>\n          </el-dropdown>\n        </div>\n      </div>\n    </div>\n\n    <!-- 主聊天区域 -->\n    <div class=\"chat-main\">\n      <!-- 顶部工具栏 -->\n      <div class=\"chat-toolbar\">\n        <div class=\"toolbar-left\">\n          <h2 class=\"chat-title\">{{ currentChatTitle }}</h2>\n        </div>\n        <div class=\"toolbar-right\">\n          <el-select v-model=\"selectedModel\" size=\"small\" class=\"model-select\">\n            <el-option label=\"GLM-4-Plus\" value=\"glm-4-plus\" />\n            <el-option label=\"GLM-4-Flash\" value=\"glm-4-flash\" />\n          </el-select>\n          <el-button size=\"small\" @click=\"showSettings = true\">\n            <el-icon><Setting /></el-icon>\n          </el-button>\n        </div>\n      </div>\n\n      <!-- 消息列表 -->\n      <div ref=\"messagesContainer\" class=\"messages-container\">\n        <div v-if=\"messages.length === 0\" class=\"welcome-screen\">\n          <div class=\"welcome-icon\">\n            <el-icon :size=\"64\" color=\"#10b981\"><ChatDotRound /></el-icon>\n          </div>\n          <h1 class=\"welcome-title\">AI 科研助手</h1>\n          <p class=\"welcome-desc\">基于您的论文库，为您提供智能问答、文献综述、研究建议等服务</p>\n          \n          <div class=\"quick-actions\">\n            <div class=\"quick-action-title\">快捷功能：</div>\n            <div class=\"quick-action-buttons\">\n              <el-button\n                v-for=\"action in quickActions\"\n                :key=\"action.key\"\n                type=\"default\"\n                class=\"quick-action-btn\"\n                @click=\"sendQuickAction(action.prompt)\"\n              >\n                <el-icon><component :is=\"action.icon\" /></el-icon>\n                {{ action.label }}\n              </el-button>\n            </div>\n          </div>\n        </div>\n\n        <template v-else>\n          <ChatMessage\n            v-for=\"(message, index) in messages\"\n            :key=\"index\"\n            :content=\"message.content\"\n            :is-user=\"message.isUser\"\n            :timestamp=\"message.timestamp\"\n            :references=\"message.references || []\"\n            @view-reference=\"viewPaper\"\n          />\n          \n          <!-- 正在输入提示 -->\n          <div v-if=\"isTyping\" class=\"typing-indicator\">\n            <div class=\"typing-dot\"></div>\n            <div class=\"typing-dot\"></div>\n            <div class=\"typing-dot\"></div>\n          </div>\n        </template>\n      </div>\n\n      <!-- 输入区域 -->\n      <div class=\"input-area\">\n        <div class=\"input-toolbar\">\n          <el-tooltip content=\"上传文件\">\n            <el-button circle size=\"small\" @click=\"handleUpload\">\n              <el-icon><Paperclip /></el-icon>\n            </el-button>\n          </el-tooltip>\n          <el-tooltip content=\"关联论文\">\n            <el-button circle size=\"small\" @click=\"showPaperSelector = true\">\n              <el-icon><Document /></el-icon>\n            </el-button>\n          </el-tooltip>\n          <el-tooltip content=\"清空对话\">\n            <el-button circle size=\"small\" @click=\"clearMessages\">\n              <el-icon><Delete /></el-icon>\n            </el-button>\n          </el-tooltip>\n        </div>\n        \n        <div class=\"input-box\">\n          <el-input\n            v-model=\"inputMessage\"\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"输入您的问题，AI 将基于您的论文库进行回答...\"\n            resize=\"none\"\n            @keydown.enter.prevent=\"handleEnter\"\n          />\n          <el-button\n            type=\"primary\"\n            class=\"send-btn\"\n            :disabled=\"!inputMessage.trim() || isTyping\"\n            @click=\"sendMessage\"\n          >\n            <el-icon><Position /></el-icon>\n          </el-button>\n        </div>\n        \n        <div class=\"input-hint\">\n          <span>Enter 发送，Shift + Enter 换行</span>\n          <span v-if=\"selectedPapers.length > 0\" class=\"selected-papers\">\n            已选择 {{ selectedPapers.length }} 篇论文\n          </span>\n        </div>\n      </div>\n    </div>\n\n    <!-- 论文选择对话框 -->\n    <el-dialog v-model=\"showPaperSelector\" title=\"选择关联论文\" width=\"60%\">\n      <div class=\"paper-selector\">\n        <el-input\n          v-model=\"paperSearch\"\n          placeholder=\"搜索论文...\"\n          clearable\n          class=\"paper-search\"\n        >\n          <template #prefix>\n            <el-icon><Search /></el-icon>\n          </template>\n        </el-input>\n        \n        <el-table\n          :data=\"filteredPapers\"\n          style=\"width: 100%\"\n          max-height=\"400\"\n          @selection-change=\"handleSelectionChange\"\n        >\n          <el-table-column type=\"selection\" width=\"55\" />\n          <el-table-column prop=\"title\" label=\"论文标题\" show-overflow-tooltip />\n          <el-table-column prop=\"year\" label=\"年份\" width=\"80\" />\n          <el-table-column prop=\"venue\" label=\"期刊/会议\" show-overflow-tooltip />\n        </el-table>\n      </div>\n      \n      <template #footer>\n        <el-button @click=\"showPaperSelector = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmPaperSelection\">确定</el-button>\n      </template>\n    </el-dialog>\n\n    <!-- 设置对话框 -->\n    <el-dialog v-model=\"showSettings\" title=\"聊天设置\" width=\"400px\">\n      <el-form label-width=\"100px\">\n        <el-form-item label=\"模型\">\n          <el-select v-model=\"settings.model\" style=\"width: 100%\">\n            <el-option label=\"GLM-4-Plus\" value=\"glm-4-plus\" />\n            <el-option label=\"GLM-4-Flash\" value=\"glm-4-flash\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"温度\">\n          <el-slider v-model=\"settings.temperature\" :min=\"0\" :max=\"1\" :step=\"0.1\" />\n        </el-form-item>\n        <el-form-item label=\"最大长度\">\n          <el-input-number v-model=\"settings.maxTokens\" :min=\"1000\" :max=\"8000\" :step=\"1000\" />\n        </el-form-item>\n        <el-form-item label=\"引用论文\">\n          <el-switch v-model=\"settings.includeReferences\" />\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, nextTick, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport {\n  Plus, Fold, Expand, ChatLineRound, MoreFilled,\n  ChatDotRound, Setting, Paperclip, Document,\n  Delete, Position, Search\n} from '@element-plus/icons-vue'\nimport ChatMessage from '@/components/ChatMessage.vue'\nimport api from '@/api'\n\nconst store = useStore()\n\n// 状态\nconst sidebarCollapsed = ref(false)\nconst currentChatId = ref(null)\nconst messages = ref([])\nconst inputMessage = ref('')\nconst isTyping = ref(false)\nconst selectedModel = ref('glm-4-plus')\nconst messagesContainer = ref(null)\nconst showPaperSelector = ref(false)\nconst showSettings = ref(false)\nconst paperSearch = ref('')\nconst selectedPapers = ref([])\nconst papers = ref([])\n\n// 设置\nconst settings = ref({\n  model: 'glm-4-plus',\n  temperature: 0.7,\n  maxTokens: 4000,\n  includeReferences: true\n})\n\n// 聊天历史\nconst chatHistory = ref([\n  { id: 1, title: '论文综述讨论', timestamp: Date.now() },\n  { id: 2, title: '研究方法分析', timestamp: Date.now() - 86400000 },\n])\n\n// 当前聊天标题\nconst currentChatTitle = computed(() => {\n  const chat = chatHistory.value.find(c => c.id === currentChatId.value)\n  return chat?.title || '新对话'\n})\n\n// 快捷功能\nconst quickActions = [\n  { key: 'summary', label: '生成文献综述', icon: 'Document', prompt: '请基于我的论文库生成一份文献综述' },\n  { key: 'gaps', label: '分析研究空白', icon: 'Search', prompt: '请分析当前研究领域的主要空白' },\n  { key: 'trends', label: '研究趋势分析', icon: 'TrendCharts', prompt: '请分析该领域的研究趋势' },\n  { key: 'methods', label: '方法论对比', icon: 'DataAnalysis', prompt: '请对比不同研究方法的优缺点' },\n]\n\n// 过滤后的论文\nconst filteredPapers = computed(() => {\n  if (!paperSearch.value) return papers.value\n  const query = paperSearch.value.toLowerCase()\n  return papers.value.filter(p => \n    (p.title || '').toLowerCase().includes(query) ||\n    (p.abstract || '').toLowerCase().includes(query)\n  )\n})\n\n// 加载论文列表\nconst loadPapers = async () => {\n  try {\n    const response = await api.getPapersList({ limit: 100 })\n    if (response.success) {\n      papers.value = response.data.items || []\n    }\n  } catch (error) {\n    console.error('加载论文失败:', error)\n  }\n}\n\n// 发送消息\nconst sendMessage = async () => {\n  const message = inputMessage.value.trim()\n  if (!message || isTyping.value) return\n\n  // 添加用户消息\n  messages.value.push({\n    content: message,\n    isUser: true,\n    timestamp: new Date()\n  })\n\n  inputMessage.value = ''\n  isTyping.value = true\n  scrollToBottom()\n\n  try {\n    // 调用 API\n    const response = await api.chatWithAI({\n      message,\n      chatId: currentChatId.value,\n      model: selectedModel.value,\n      papers: selectedPapers.value.map(p => p.id),\n      settings: settings.value\n    })\n\n    if (response.success) {\n      messages.value.push({\n        content: response.data.content,\n        isUser: false,\n        timestamp: new Date(),\n        references: response.data.references || []\n      })\n    } else {\n      throw new Error(response.error || '请求失败')\n    }\n  } catch (error) {\n    ElMessage.error('AI 响应失败: ' + error.message)\n    messages.value.push({\n      content: '抱歉，我暂时无法回答您的问题。请稍后再试。',\n      isUser: false,\n      timestamp: new Date()\n    })\n  } finally {\n    isTyping.value = false\n    scrollToBottom()\n  }\n}\n\n// 处理 Enter 键\nconst handleEnter = (e) => {\n  if (!e.shiftKey) {\n    sendMessage()\n  }\n}\n\n// 快捷功能\nconst sendQuickAction = (prompt) => {\n  inputMessage.value = prompt\n  sendMessage()\n}\n\n// 滚动到底部\nconst scrollToBottom = () => {\n  nextTick(() => {\n    if (messagesContainer.value) {\n      messagesContainer.value.scrollTop = messagesContainer.value.scrollHeight\n    }\n  })\n}\n\n// 新建对话\nconst createNewChat = () => {\n  const newId = Date.now()\n  chatHistory.value.unshift({\n    id: newId,\n    title: '新对话',\n    timestamp: Date.now()\n  })\n  currentChatId.value = newId\n  messages.value = []\n}\n\n// 加载对话\nconst loadChat = (chatId) => {\n  currentChatId.value = chatId\n  // TODO: 从后端加载历史消息\n  messages.value = []\n}\n\n// 处理对话命令\nconst handleChatCommand = async (command, chatId) => {\n  if (command === 'delete') {\n    try {\n      await ElMessageBox.confirm('确定要删除这个对话吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n      chatHistory.value = chatHistory.value.filter(c => c.id !== chatId)\n      if (currentChatId.value === chatId) {\n        currentChatId.value = null\n        messages.value = []\n      }\n    } catch {\n      // 取消\n    }\n  } else if (command === 'rename') {\n    // TODO: 重命名对话框\n  }\n}\n\n// 清空消息\nconst clearMessages = () => {\n  messages.value = []\n}\n\n// 处理论文选择\nconst handleSelectionChange = (selection) => {\n  selectedPapers.value = selection\n}\n\n// 确认论文选择\nconst confirmPaperSelection = () => {\n  showPaperSelector.value = false\n  ElMessage.success(`已选择 ${selectedPapers.value.length} 篇论文`)\n}\n\n// 查看论文\nconst viewPaper = (paper) => {\n  if (paper.id) {\n    window.open(`#/papers/${paper.id}`, '_blank')\n  }\n}\n\n// 处理上传\nconst handleUpload = () => {\n  ElMessage.info('文件上传功能开发中')\n}\n\nonMounted(() => {\n  loadPapers()\n})\n</script>\n\n<style scoped>\n.ai-chat-container {\n  display: flex;\n  height: calc(100vh - 64px);\n  background: #f8fafc;\n}\n\n/* 侧边栏 */\n.chat-sidebar {\n  width: 260px;\n  background: #fff;\n  border-right: 1px solid #e5e7eb;\n  display: flex;\n  flex-direction: column;\n  transition: width 0.3s;\n}\n\n.chat-sidebar.collapsed {\n  width: 60px;\n}\n\n.sidebar-header {\n  padding: 16px;\n  display: flex;\n  gap: 8px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.new-chat-btn {\n  flex: 1;\n}\n\n.collapsed .new-chat-btn span {\n  display: none;\n}\n\n.collapse-btn {\n  padding: 8px;\n}\n\n.chat-history {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n}\n\n.chat-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 12px;\n  border-radius: 8px;\n  cursor: pointer;\n  margin-bottom: 4px;\n  transition: all 0.2s;\n}\n\n.chat-item:hover {\n  background: #f3f4f6;\n}\n\n.chat-item.active {\n  background: #dbeafe;\n  color: #1d4ed8;\n}\n\n.chat-icon {\n  font-size: 16px;\n}\n\n.chat-title {\n  flex: 1;\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.chat-more {\n  opacity: 0;\n  transition: opacity 0.2s;\n}\n\n.chat-item:hover .chat-more {\n  opacity: 1;\n}\n\n.collapsed .chat-title,\n.collapsed .chat-more {\n  display: none;\n}\n\n/* 主聊天区域 */\n.chat-main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.chat-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 24px;\n  background: #fff;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.toolbar-left h2 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 500;\n}\n\n.toolbar-right {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n}\n\n.model-select {\n  width: 140px;\n}\n\n/* 消息区域 */\n.messages-container {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n}\n\n.welcome-screen {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  text-align: center;\n  padding: 40px;\n}\n\n.welcome-icon {\n  margin-bottom: 24px;\n}\n\n.welcome-title {\n  font-size: 28px;\n  font-weight: 600;\n  color: #1f2937;\n  margin-bottom: 12px;\n}\n\n.welcome-desc {\n  font-size: 15px;\n  color: #6b7280;\n  max-width: 500px;\n  margin-bottom: 32px;\n}\n\n.quick-actions {\n  width: 100%;\n  max-width: 600px;\n}\n\n.quick-action-title {\n  font-size: 14px;\n  color: #9ca3af;\n  margin-bottom: 12px;\n}\n\n.quick-action-buttons {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n}\n\n.quick-action-btn {\n  justify-content: flex-start;\n  padding: 16px;\n  height: auto;\n  border: 1px solid #e5e7eb;\n}\n\n.quick-action-btn:hover {\n  border-color: #10b981;\n  color: #10b981;\n}\n\n.typing-indicator {\n  display: flex;\n  gap: 4px;\n  padding: 16px 20px;\n  align-items: center;\n}\n\n.typing-dot {\n  width: 8px;\n  height: 8px;\n  background: #10b981;\n  border-radius: 50%;\n  animation: typing 1.4s infinite ease-in-out both;\n}\n\n.typing-dot:nth-child(1) { animation-delay: -0.32s; }\n.typing-dot:nth-child(2) { animation-delay: -0.16s; }\n\n@keyframes typing {\n  0%, 80%, 100% { transform: scale(0); }\n  40% { transform: scale(1); }\n}\n\n/* 输入区域 */\n.input-area {\n  background: #fff;\n  border-top: 1px solid #e5e7eb;\n  padding: 16px 24px;\n}\n\n.input-toolbar {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n\n.input-box {\n  display: flex;\n  gap: 12px;\n  align-items: flex-end;\n}\n\n.input-box :deep(.el-textarea__inner) {\n  border-radius: 12px;\n  padding: 12px 16px;\n  font-size: 14px;\n  resize: none;\n}\n\n.send-btn {\n  height: 44px;\n  width: 44px;\n  border-radius: 12px;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.input-hint {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 8px;\n  font-size: 12px;\n  color: #9ca3af;\n}\n\n.selected-papers {\n  color: #10b981;\n}\n\n/* 论文选择器 */\n.paper-selector {\n  max-height: 500px;\n}\n\n.paper-search {\n  margin-bottom: 16px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}