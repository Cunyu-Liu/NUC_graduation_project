{"ast":null,"code":"import { reactive, watch } from 'vue';\nimport Color from '../utils/color.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../../constants/event.mjs';\nconst useCommonColor = (props, emit) => {\n  const color = reactive(new Color({\n    enableAlpha: props.showAlpha,\n    format: props.colorFormat || \"\",\n    value: props.modelValue\n  }));\n  watch(() => [props.colorFormat, props.showAlpha], () => {\n    color.enableAlpha = props.showAlpha;\n    color.format = props.colorFormat || color.format;\n    color.doOnChange();\n    emit(UPDATE_MODEL_EVENT, color.value);\n  });\n  return {\n    color\n  };\n};\nexport { useCommonColor };","map":{"version":3,"names":["useCommonColor","props","emit","color","reactive","Color","enableAlpha","showAlpha","format","colorFormat","value","modelValue","watch","doOnChange","UPDATE_MODEL_EVENT"],"sources":["../../../../../../../packages/components/color-picker-panel/src/composables/use-common-color.ts"],"sourcesContent":["import { reactive, watch } from 'vue'\nimport Color from '../utils/color'\nimport { UPDATE_MODEL_EVENT } from '@element-plus/constants'\n\ntype CommonColorProps = {\n  modelValue?: string | null\n  showAlpha: boolean\n  colorFormat?: string\n}\ntype CommonColorEmits = (event: 'update:modelValue', ...args: any[]) => void\n\nexport const useCommonColor = <\n  P extends CommonColorProps,\n  E extends CommonColorEmits,\n>(\n  props: P,\n  emit: E\n) => {\n  const color = reactive(\n    new Color({\n      enableAlpha: props.showAlpha,\n      format: props.colorFormat || '',\n      value: props.modelValue,\n    })\n  ) as Color\n\n  watch(\n    () => [props.colorFormat, props.showAlpha],\n    () => {\n      color.enableAlpha = props.showAlpha\n      color.format = props.colorFormat || color.format\n      color.doOnChange()\n      emit(UPDATE_MODEL_EVENT, color.value)\n    }\n  )\n\n  return {\n    color,\n  }\n}\n"],"mappings":";;;AAWa,MAAAA,cAAA,GAAiBA,CAI5BC,KAAA,EACAC,IACG;EACH,MAAMC,KAAQ,GAAAC,QAAA,CACZ,IAAIC,KAAM;IACRC,WAAA,EAAaL,KAAM,CAAAM,SAAA;IACnBC,MAAA,EAAQP,KAAA,CAAMQ,WAAe;IAC7BC,KAAA,EAAOT,KAAM,CAAAU;EAAA,CACd,EACH;EAEAC,KAAA,CACE,MAAM,CAACX,KAAM,CAAAQ,WAAA,EAAaR,KAAA,CAAMM,SAAS,GACzC,MAAM;IACJJ,KAAA,CAAMG,WAAA,GAAcL,KAAM,CAAAM,SAAA;IACpBJ,KAAA,CAAAK,MAAA,GAASP,KAAM,CAAAQ,WAAA,IAAeN,KAAM,CAAAK,MAAA;IAC1CL,KAAA,CAAMU,UAAW;IACZX,IAAA,CAAAY,kBAAA,EAAoBX,KAAA,CAAMO,KAAK;EAAA,CACtC,CACF;EAEO;IACLP;EAAA,CACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}