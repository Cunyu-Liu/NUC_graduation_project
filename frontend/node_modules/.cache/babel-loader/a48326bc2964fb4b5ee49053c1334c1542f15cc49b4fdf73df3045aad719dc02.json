{"ast":null,"code":"import { useAttrs, useSlots, ref, computed, reactive } from 'vue';\nimport { useResizeObserver } from '@vueuse/core';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nimport { MINIMUM_INPUT_WIDTH } from '../../../../constants/form.mjs';\nfunction useInputTagDom({\n  props,\n  isFocused,\n  hovering,\n  disabled,\n  inputValue,\n  size,\n  validateState,\n  validateIcon,\n  needStatusIcon\n}) {\n  const attrs = useAttrs();\n  const slots = useSlots();\n  const ns = useNamespace(\"input-tag\");\n  const nsInput = useNamespace(\"input\");\n  const collapseItemRef = ref();\n  const innerRef = ref();\n  const containerKls = computed(() => [ns.b(), ns.is(\"focused\", isFocused.value), ns.is(\"hovering\", hovering.value), ns.is(\"disabled\", disabled.value), ns.m(size.value), ns.e(\"wrapper\"), attrs.class]);\n  const containerStyle = computed(() => [attrs.style]);\n  const innerKls = computed(() => {\n    var _a, _b;\n    return [ns.e(\"inner\"), ns.is(\"draggable\", props.draggable), ns.is(\"left-space\", !((_a = props.modelValue) == null ? void 0 : _a.length) && !slots.prefix), ns.is(\"right-space\", !((_b = props.modelValue) == null ? void 0 : _b.length) && !showSuffix.value)];\n  });\n  const showClear = computed(() => {\n    var _a;\n    return props.clearable && !disabled.value && !props.readonly && (((_a = props.modelValue) == null ? void 0 : _a.length) || inputValue.value) && (isFocused.value || hovering.value);\n  });\n  const showSuffix = computed(() => {\n    return slots.suffix || showClear.value || validateState.value && validateIcon.value && needStatusIcon.value;\n  });\n  const states = reactive({\n    innerWidth: 0,\n    collapseItemWidth: 0\n  });\n  const getGapWidth = () => {\n    if (!innerRef.value) return 0;\n    const style = window.getComputedStyle(innerRef.value);\n    return Number.parseFloat(style.gap || \"6px\");\n  };\n  const resetInnerWidth = () => {\n    states.innerWidth = Number.parseFloat(window.getComputedStyle(innerRef.value).width);\n  };\n  const resetCollapseItemWidth = () => {\n    states.collapseItemWidth = collapseItemRef.value.getBoundingClientRect().width;\n  };\n  const tagStyle = computed(() => {\n    if (!props.collapseTags) return {};\n    const gapWidth = getGapWidth();\n    const inputSlotWidth = gapWidth + MINIMUM_INPUT_WIDTH;\n    const maxWidth = collapseItemRef.value && props.maxCollapseTags === 1 ? states.innerWidth - states.collapseItemWidth - gapWidth - inputSlotWidth : states.innerWidth - inputSlotWidth;\n    return {\n      maxWidth: `${Math.max(maxWidth, 0)}px`\n    };\n  });\n  useResizeObserver(innerRef, resetInnerWidth);\n  useResizeObserver(collapseItemRef, resetCollapseItemWidth);\n  return {\n    ns,\n    nsInput,\n    containerKls,\n    containerStyle,\n    innerKls,\n    showClear,\n    showSuffix,\n    tagStyle,\n    collapseItemRef,\n    innerRef\n  };\n}\nexport { useInputTagDom };","map":{"version":3,"names":["useInputTagDom","props","isFocused","hovering","disabled","inputValue","size","validateState","validateIcon","needStatusIcon","attrs","useAttrs","slots","useSlots","ns","useNamespace","nsInput","collapseItemRef","ref","innerRef","containerKls","computed","b","is","value","m","e","class","containerStyle","style","innerKls","_a","_b","draggable","modelValue","length","prefix","showSuffix","showClear","clearable","readonly","suffix","states","reactive","innerWidth","collapseItemWidth","getGapWidth","window","getComputedStyle","Number","parseFloat","gap","resetInnerWidth","width","resetCollapseItemWidth","getBoundingClientRect","tagStyle","collapseTags","gapWidth","inputSlotWidth","MINIMUM_INPUT_WIDTH","maxWidth","maxCollapseTags","Math","max","useResizeObserver"],"sources":["../../../../../../../packages/components/input-tag/src/composables/use-input-tag-dom.ts"],"sourcesContent":["import { computed, reactive, ref, useAttrs, useSlots } from 'vue'\nimport { useNamespace } from '@element-plus/hooks'\nimport { MINIMUM_INPUT_WIDTH } from '@element-plus/constants'\nimport { useResizeObserver } from '@vueuse/core'\n\nimport type { ComputedRef, Ref, StyleValue } from 'vue'\nimport type { ComponentSize } from '@element-plus/constants'\nimport type { IconComponent } from '@element-plus/utils'\nimport type { InputTagProps } from '../input-tag'\n\ninterface UseInputTagDomOptions {\n  props: InputTagProps\n  isFocused: Ref<boolean>\n  hovering: Ref<boolean>\n  disabled: ComputedRef<boolean>\n  inputValue: Ref<string | undefined>\n  size: ComputedRef<ComponentSize>\n  validateState: ComputedRef<string>\n  validateIcon: ComputedRef<'' | IconComponent>\n  needStatusIcon: ComputedRef<boolean>\n}\n\nexport function useInputTagDom({\n  props,\n  isFocused,\n  hovering,\n  disabled,\n  inputValue,\n  size,\n  validateState,\n  validateIcon,\n  needStatusIcon,\n}: UseInputTagDomOptions) {\n  const attrs = useAttrs()\n  const slots = useSlots()\n  const ns = useNamespace('input-tag')\n  const nsInput = useNamespace('input')\n\n  const collapseItemRef = ref<HTMLElement>()\n  const innerRef = ref<HTMLElement>()\n\n  const containerKls = computed(() => [\n    ns.b(),\n    ns.is('focused', isFocused.value),\n    ns.is('hovering', hovering.value),\n    ns.is('disabled', disabled.value),\n    ns.m(size.value),\n    ns.e('wrapper'),\n    attrs.class,\n  ])\n  const containerStyle = computed<StyleValue>(() => [attrs.style as StyleValue])\n  const innerKls = computed(() => [\n    ns.e('inner'),\n    ns.is('draggable', props.draggable),\n    ns.is('left-space', !props.modelValue?.length && !slots.prefix),\n    ns.is('right-space', !props.modelValue?.length && !showSuffix.value),\n  ])\n  const showClear = computed(() => {\n    return (\n      props.clearable &&\n      !disabled.value &&\n      !props.readonly &&\n      (props.modelValue?.length || inputValue.value) &&\n      (isFocused.value || hovering.value)\n    )\n  })\n  const showSuffix = computed(() => {\n    return (\n      slots.suffix ||\n      showClear.value ||\n      (validateState.value && validateIcon.value && needStatusIcon.value)\n    )\n  })\n\n  const states = reactive({\n    innerWidth: 0,\n    collapseItemWidth: 0,\n  })\n\n  const getGapWidth = () => {\n    if (!innerRef.value) return 0\n    const style = window.getComputedStyle(innerRef.value)\n    return Number.parseFloat(style.gap || '6px')\n  }\n\n  const resetInnerWidth = () => {\n    states.innerWidth = Number.parseFloat(\n      window.getComputedStyle(innerRef.value!).width\n    )\n  }\n\n  const resetCollapseItemWidth = () => {\n    states.collapseItemWidth =\n      collapseItemRef.value!.getBoundingClientRect().width\n  }\n\n  const tagStyle = computed(() => {\n    if (!props.collapseTags) return {}\n    const gapWidth = getGapWidth()\n\n    const inputSlotWidth = gapWidth + MINIMUM_INPUT_WIDTH\n\n    const maxWidth =\n      collapseItemRef.value && props.maxCollapseTags === 1\n        ? states.innerWidth -\n          states.collapseItemWidth -\n          gapWidth -\n          inputSlotWidth\n        : states.innerWidth - inputSlotWidth\n\n    return { maxWidth: `${Math.max(maxWidth, 0)}px` }\n  })\n\n  useResizeObserver(innerRef, resetInnerWidth)\n  useResizeObserver(collapseItemRef, resetCollapseItemWidth)\n\n  return {\n    ns,\n    nsInput,\n    containerKls,\n    containerStyle,\n    innerKls,\n    showClear,\n    showSuffix,\n    tagStyle,\n    collapseItemRef,\n    innerRef,\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}