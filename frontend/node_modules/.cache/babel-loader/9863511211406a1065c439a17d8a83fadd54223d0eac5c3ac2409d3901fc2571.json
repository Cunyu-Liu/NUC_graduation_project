{"ast":null,"code":"import { shallowRef, ref, onMounted } from 'vue';\nimport { useThrottleFn, useEventListener } from '@vueuse/core';\nimport { throwError } from '../../../utils/error.mjs';\nconst useBackTop = (props, emit, componentName) => {\n  const el = shallowRef();\n  const container = shallowRef();\n  const visible = ref(false);\n  const handleScroll = () => {\n    if (el.value) visible.value = el.value.scrollTop >= props.visibilityHeight;\n  };\n  const handleClick = event => {\n    var _a;\n    (_a = el.value) == null ? void 0 : _a.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n    emit(\"click\", event);\n  };\n  const handleScrollThrottled = useThrottleFn(handleScroll, 300, true);\n  useEventListener(container, \"scroll\", handleScrollThrottled);\n  onMounted(() => {\n    var _a;\n    container.value = document;\n    el.value = document.documentElement;\n    if (props.target) {\n      el.value = (_a = document.querySelector(props.target)) != null ? _a : void 0;\n      if (!el.value) {\n        throwError(componentName, `target does not exist: ${props.target}`);\n      }\n      container.value = el.value;\n    }\n    handleScroll();\n  });\n  return {\n    visible,\n    handleClick\n  };\n};\nexport { useBackTop };","map":{"version":3,"names":["useBackTop","props","emit","componentName","el","shallowRef","container","visible","ref","handleScroll","value","scrollTop","visibilityHeight","handleClick","event","_a","scrollTo","top","behavior","handleScrollThrottled","useThrottleFn","useEventListener","onMounted","document","documentElement","target","querySelector","throwError"],"sources":["../../../../../../packages/components/backtop/src/use-backtop.ts"],"sourcesContent":["import { onMounted, ref, shallowRef } from 'vue'\nimport { useEventListener, useThrottleFn } from '@vueuse/core'\nimport { throwError } from '@element-plus/utils'\n\nimport type { SetupContext } from 'vue'\nimport type { BacktopEmits, BacktopProps } from './backtop'\n\nexport const useBackTop = (\n  props: BacktopProps,\n  emit: SetupContext<BacktopEmits>['emit'],\n  componentName: string\n) => {\n  const el = shallowRef<HTMLElement>()\n  const container = shallowRef<Document | HTMLElement>()\n  const visible = ref(false)\n\n  const handleScroll = () => {\n    if (el.value) visible.value = el.value.scrollTop >= props.visibilityHeight\n  }\n\n  const handleClick = (event: MouseEvent) => {\n    el.value?.scrollTo({ top: 0, behavior: 'smooth' })\n    emit('click', event)\n  }\n\n  const handleScrollThrottled = useThrottleFn(handleScroll, 300, true)\n\n  useEventListener(container, 'scroll', handleScrollThrottled)\n  onMounted(() => {\n    container.value = document\n    el.value = document.documentElement\n\n    if (props.target) {\n      el.value = document.querySelector<HTMLElement>(props.target) ?? undefined\n      if (!el.value) {\n        throwError(componentName, `target does not exist: ${props.target}`)\n      }\n      container.value = el.value\n    }\n    // Give visible an initial value, fix #13066\n    handleScroll()\n  })\n\n  return {\n    visible,\n    handleClick,\n  }\n}\n"],"mappings":";;;AAOO,MAAMA,UAAa,GAAAA,CACxBC,KACA,EAAAC,IAAA,EACAC,aACG;EACH,MAAMC,EAAA,GAAKC,UAAwB;EACnC,MAAMC,SAAA,GAAYD,UAAmC;EAC/C,MAAAE,OAAA,GAAUC,GAAA,CAAI,KAAK;EAEzB,MAAMC,YAAA,GAAeA,CAAA,KAAM;IACzB,IAAIL,EAAG,CAAAM,KAAA,EAAOH,OAAA,CAAQG,KAAQ,GAAAN,EAAA,CAAGM,KAAM,CAAAC,SAAA,IAAaV,KAAM,CAAAW,gBAAA;EAAA,CAC5D;EAEM,MAAAC,WAAA,GAAeC,KAAsB;IApB7C,IAAAC,EAAA;IAqBI,CAAAA,EAAA,GAAAX,EAAA,CAAGM,KAAA,KAAH,IAAU,YAAAK,EAAA,CAAAC,QAAA,CAAS;MAAEC,GAAK;MAAGC,QAAA,EAAU;IAAS;IAChDhB,IAAA,CAAK,SAASY,KAAK;EAAA,CACrB;EAEA,MAAMK,qBAAwB,GAAAC,aAAA,CAAcX,YAAc,OAAK,IAAI;EAElDY,gBAAA,CAAAf,SAAA,EAAW,UAAUa,qBAAqB;EAC3DG,SAAA,CAAU,MAAM;IA5BlB,IAAAP,EAAA;IA6BIT,SAAA,CAAUI,KAAQ,GAAAa,QAAA;IAClBnB,EAAA,CAAGM,KAAA,GAAQa,QAAS,CAAAC,eAAA;IAEpB,IAAIvB,KAAA,CAAMwB,MAAQ;MAChBrB,EAAA,CAAGM,KAAA,IAAQK,EAAS,GAAAQ,QAAA,CAAAG,aAAA,CAA2BzB,KAAM,CAAAwB,MAAM,MAAhD,IAAqD,GAAAV,EAAA;MAC5D,KAACX,EAAA,CAAGM,KAAO;QACFiB,UAAA,CAAAxB,aAAA,EAAe,0BAA0BF,KAAA,CAAMwB,MAAQ;MAAA;MAEpEnB,SAAA,CAAUI,KAAA,GAAQN,EAAG,CAAAM,KAAA;IAAA;IAGVD,YAAA;EAAA,CACd;EAEM;IACLF,OAAA;IACAM;EAAA,CACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}