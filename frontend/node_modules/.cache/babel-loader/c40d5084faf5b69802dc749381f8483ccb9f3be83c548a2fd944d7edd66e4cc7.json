{"ast":null,"code":"import { defineComponent, computed, provide, reactive, toRef, ref, createVNode, mergeProps, isVNode } from 'vue';\nimport '../../time-picker/index.mjs';\nimport { ElDatePickerPanel } from '../../date-picker-panel/index.mjs';\nimport { datePickerProps } from './props.mjs';\nimport { ROOT_PICKER_IS_DEFAULT_FORMAT_INJECTION_KEY } from '../../date-picker-panel/src/constants.mjs';\nimport { PICKER_POPPER_OPTIONS_INJECTION_KEY, DEFAULT_FORMATS_DATEPICKER, DEFAULT_FORMATS_DATE } from '../../time-picker/src/constants.mjs';\nimport CommonPicker from '../../time-picker/src/common/picker.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../constants/event.mjs';\nfunction _isSlot(s) {\n  return typeof s === \"function\" || Object.prototype.toString.call(s) === \"[object Object]\" && !isVNode(s);\n}\nvar DatePicker = defineComponent({\n  name: \"ElDatePicker\",\n  install: null,\n  props: datePickerProps,\n  emits: [UPDATE_MODEL_EVENT],\n  setup(props, {\n    expose,\n    emit,\n    slots\n  }) {\n    const isDefaultFormat = computed(() => {\n      return !props.format;\n    });\n    provide(ROOT_PICKER_IS_DEFAULT_FORMAT_INJECTION_KEY, isDefaultFormat);\n    provide(PICKER_POPPER_OPTIONS_INJECTION_KEY, reactive(toRef(props, \"popperOptions\")));\n    const commonPicker = ref();\n    const refProps = {\n      focus: () => {\n        var _a;\n        (_a = commonPicker.value) == null ? void 0 : _a.focus();\n      },\n      blur: () => {\n        var _a;\n        (_a = commonPicker.value) == null ? void 0 : _a.blur();\n      },\n      handleOpen: () => {\n        var _a;\n        (_a = commonPicker.value) == null ? void 0 : _a.handleOpen();\n      },\n      handleClose: () => {\n        var _a;\n        (_a = commonPicker.value) == null ? void 0 : _a.handleClose();\n      }\n    };\n    expose(refProps);\n    const onModelValueUpdated = val => {\n      emit(UPDATE_MODEL_EVENT, val);\n    };\n    return () => {\n      var _a;\n      const format = (_a = props.format) != null ? _a : DEFAULT_FORMATS_DATEPICKER[props.type] || DEFAULT_FORMATS_DATE;\n      return createVNode(CommonPicker, mergeProps(props, {\n        \"format\": format,\n        \"type\": props.type,\n        \"ref\": commonPicker,\n        \"onUpdate:modelValue\": onModelValueUpdated\n      }), {\n        default: scopedProps => createVNode(ElDatePickerPanel, mergeProps({\n          \"disabled\": props.disabled,\n          \"editable\": props.editable,\n          \"border\": false\n        }, scopedProps), _isSlot(slots) ? slots : {\n          default: () => [slots]\n        }),\n        \"range-separator\": slots[\"range-separator\"]\n      });\n    };\n  }\n});\nexport { DatePicker as default };","map":{"version":3,"names":["_isSlot","s","Object","prototype","toString","call","isVNode","DatePicker","defineComponent","name","install","props","datePickerProps","emits","UPDATE_MODEL_EVENT","setup","expose","emit","slots","isDefaultFormat","computed","format","provide","ROOT_PICKER_IS_DEFAULT_FORMAT_INJECTION_KEY","PICKER_POPPER_OPTIONS_INJECTION_KEY","reactive","toRef","commonPicker","ref","refProps","focus","_a","value","blur","handleOpen","handleClose","onModelValueUpdated","val","DEFAULT_FORMATS_DATEPICKER","type","DEFAULT_FORMATS_DATE","createVNode","CommonPicker","mergeProps","default","scopedProps","ElDatePickerPanel","disabled","editable"],"sources":["../../../../../../packages/components/date-picker/src/date-picker.tsx"],"sourcesContent":["import { computed, defineComponent, provide, reactive, ref, toRef } from 'vue'\nimport {\n  CommonPicker,\n  DEFAULT_FORMATS_DATE,\n  DEFAULT_FORMATS_DATEPICKER,\n  PICKER_POPPER_OPTIONS_INJECTION_KEY,\n} from '@element-plus/components/time-picker'\nimport { UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport {\n  ElDatePickerPanel,\n  ROOT_PICKER_IS_DEFAULT_FORMAT_INJECTION_KEY,\n} from '@element-plus/components/date-picker-panel'\nimport { datePickerProps } from './props'\n\nimport type {\n  DateModelType,\n  SingleOrRange,\n} from '@element-plus/components/time-picker'\nimport type { DatePickerExpose } from './instance'\n\nexport default defineComponent({\n  name: 'ElDatePicker',\n  install: null,\n  props: datePickerProps,\n  emits: [UPDATE_MODEL_EVENT],\n  setup(props, { expose, emit, slots }) {\n    const isDefaultFormat = computed(() => {\n      return !props.format\n    })\n    provide(ROOT_PICKER_IS_DEFAULT_FORMAT_INJECTION_KEY, isDefaultFormat)\n    provide(\n      PICKER_POPPER_OPTIONS_INJECTION_KEY,\n      reactive(toRef(props, 'popperOptions'))\n    )\n    const commonPicker = ref<InstanceType<typeof CommonPicker>>()\n    const refProps: DatePickerExpose = {\n      focus: () => {\n        commonPicker.value?.focus()\n      },\n      blur: () => {\n        commonPicker.value?.blur()\n      },\n      handleOpen: () => {\n        commonPicker.value?.handleOpen()\n      },\n      handleClose: () => {\n        commonPicker.value?.handleClose()\n      },\n    }\n\n    expose(refProps)\n\n    const onModelValueUpdated = (val: SingleOrRange<DateModelType> | null) => {\n      emit(UPDATE_MODEL_EVENT, val)\n    }\n\n    return () => {\n      // since props always have all defined keys on it, {format, ...props} will always overwrite format\n      // pick props.format or provide default value here before spreading\n      const format =\n        props.format ??\n        (DEFAULT_FORMATS_DATEPICKER[props.type] || DEFAULT_FORMATS_DATE)\n\n      return (\n        <CommonPicker\n          {...props}\n          format={format}\n          type={props.type}\n          ref={commonPicker}\n          onUpdate:modelValue={onModelValueUpdated}\n        >\n          {{\n            default: (scopedProps: /**FIXME: remove any type */ any) => (\n              <ElDatePickerPanel\n                disabled={props.disabled}\n                editable={props.editable}\n                border={false}\n                {...scopedProps}\n              >\n                {slots}\n              </ElDatePickerPanel>\n            ),\n            'range-separator': slots['range-separator'],\n          }}\n        </CommonPicker>\n      )\n    }\n  },\n})\n"],"mappings":";;;;;;;;AAYyC,SAAAA,QAAAC,CAAA;EAAA,cAAAA,CAAA,mBAAAC,MAAA,CAAAC,SAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAJ,CAAA,4BAAAK,OAAA,CAAAL,CAAA;AAAA;AAQzC,IAAAM,UAAA,GAAeC,eAAgB;EAC7BC,IAAM;EACNC,OAAS;EACTC,KAAO,EAAAC,eAAA;EACPC,KAAA,EAAO,CAACC,kBAAkB;EAC1BC,MAAMJ,KAAO;IAAEK,MAAA;IAAQC,IAAA;IAAMC;EAAA,CAAS;IAC9B,MAAAC,eAAA,GAAkBC,QAAA,CAAS,MAAM;MACrC,OAAO,CAACT,KAAM,CAAAU,MAAA;IAAA,CACf;IACDC,OAAA,CAAQC,2CAAA,EAA6CJ,eAAe;IACpEG,OAAA,CACEE,mCAAA,EACAC,QAAS,CAAAC,KAAA,CAAMf,KAAO,iBAAe,CAAC,CACxC;IACA,MAAMgB,YAAA,GAAeC,GAAuC;IAC5D,MAAMC,QAA6B;MACjCC,KAAA,EAAOA,CAAA,KAAM;QApCnB,IAAAC,EAAA;QAqCQ,CAAAA,EAAA,GAAAJ,YAAA,CAAaK,KAAA,KAAb,IAAoB,YAAAD,EAAA,CAAAD,KAAA;MAAA,CACtB;MACAG,IAAA,EAAMA,CAAA,KAAM;QAvClB,IAAAF,EAAA;QAwCQ,CAAAA,EAAA,GAAAJ,YAAA,CAAaK,KAAA,KAAb,IAAoB,YAAAD,EAAA,CAAAE,IAAA;MAAA,CACtB;MACAC,UAAA,EAAYA,CAAA,KAAM;QA1CxB,IAAAH,EAAA;QA2CQ,CAAAA,EAAA,GAAAJ,YAAA,CAAaK,KAAA,KAAb,IAAoB,YAAAD,EAAA,CAAAG,UAAA;MAAA,CACtB;MACAC,WAAA,EAAaA,CAAA,KAAM;QA7CzB,IAAAJ,EAAA;QA8CQ,CAAAA,EAAA,GAAAJ,YAAA,CAAaK,KAAA,KAAb,IAAoB,YAAAD,EAAA,CAAAI,WAAA;MAAA;IACtB,CACF;IAEAnB,MAAA,CAAOa,QAAQ;IAEf,MAAMO,mBAAA,GAAoEC,GAAA;MACxEpB,IAAA,CAAKH,kBAAA,EAAoBuB,GAAG;IAAA,CAC9B;IAEA,OAAO,MAAM;MAxDjB,IAAAN,EAAA;MA2DM,MAAMV,MAAA,IACJU,EAAM,GAAApB,KAAA,CAAAU,MAAA,KAAN,IACC,GAAAU,EAAA,GAAAO,0BAAA,CAA2B3B,KAAA,CAAM4B,IAAS,KAAAC,oBAAA;MAE7C,OAAAC,WAAA,CAAAC,YAAA,EAAAC,UAAA,CAEQhC,KAAK;QAAA,QACD,EAAAU,MAAA;QAAM,QACRV,KAAM,CAAA4B,IAAA;QAAI,KACX,EAAAZ,YAAA;QAAY,qBACI,EAAAS;MAAA,CAAmB;QAGtCQ,OAAU,EAAAC,WAAA,IAA6CJ,WAAA,CAAAK,iBAAA,EAAAH,UAAA;UAAA,YAEzChC,KAAM,CAAAoC,QAAA;UAAQ,YACdpC,KAAM,CAAAqC,QAAA;UAAQ,QAChB;QAAA,GACJH,WAAW,GAAA7C,OAEd,CAAAkB,KAAK,IAALA,KAAK;UAAA0B,OAAA,EAAAA,CAAA,MAAL1B,KAAK;QAAA,CAET;QACD,mBAAmBA,KAAM;MAAA,CAAkB;IAAA,CAInD;EAAA;AAEJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}