{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { defineComponent, useSlots, provide, computed, openBlock, createElementBlock, normalizeClass, unref, createElementVNode, renderSlot, createTextVNode, toDisplayString, createCommentVNode, Fragment, renderList, createBlock } from 'vue';\nimport ElDescriptionsRow from './descriptions-row2.mjs';\nimport { descriptionsKey } from './token.mjs';\nimport { descriptionProps } from './description.mjs';\nimport { COMPONENT_NAME } from './constants.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useFormSize } from '../../form/src/hooks/use-form-common-props.mjs';\nimport { flattedChildren } from '../../../utils/vue/vnode.mjs';\nconst _sfc_main = defineComponent({\n  ...{\n    name: \"ElDescriptions\"\n  },\n  __name: \"description\",\n  props: descriptionProps,\n  setup(__props) {\n    const props = __props;\n    const ns = useNamespace(\"descriptions\");\n    const descriptionsSize = useFormSize();\n    const slots = useSlots();\n    provide(descriptionsKey, props);\n    const descriptionKls = computed(() => [ns.b(), ns.m(descriptionsSize.value)]);\n    const filledNode = (node, span, count, isLast = false) => {\n      if (!node.props) {\n        node.props = {};\n      }\n      if (span > count) {\n        node.props.span = count;\n      }\n      if (isLast) {\n        node.props.span = span;\n      }\n      return node;\n    };\n    const getRows = () => {\n      if (!slots.default) return [];\n      const children = flattedChildren(slots.default()).filter(node => {\n        var _a;\n        return ((_a = node == null ? void 0 : node.type) == null ? void 0 : _a.name) === COMPONENT_NAME;\n      });\n      const rows = [];\n      let temp = [];\n      let count = props.column;\n      let totalSpan = 0;\n      const rowspanTemp = [];\n      children.forEach((node, index) => {\n        var _a, _b, _c;\n        const span = ((_a = node.props) == null ? void 0 : _a.span) || 1;\n        const rowspan = ((_b = node.props) == null ? void 0 : _b.rowspan) || 1;\n        const rowNo = rows.length;\n        rowspanTemp[rowNo] || (rowspanTemp[rowNo] = 0);\n        if (rowspan > 1) {\n          for (let i = 1; i < rowspan; i++) {\n            rowspanTemp[_c = rowNo + i] || (rowspanTemp[_c] = 0);\n            rowspanTemp[rowNo + i]++;\n            totalSpan++;\n          }\n        }\n        if (rowspanTemp[rowNo] > 0) {\n          count -= rowspanTemp[rowNo];\n          rowspanTemp[rowNo] = 0;\n        }\n        if (index < children.length - 1) {\n          totalSpan += span > count ? count : span;\n        }\n        if (index === children.length - 1) {\n          const lastSpan = props.column - totalSpan % props.column;\n          temp.push(filledNode(node, lastSpan, count, true));\n          rows.push(temp);\n          return;\n        }\n        if (span < count) {\n          count -= span;\n          temp.push(node);\n        } else {\n          temp.push(filledNode(node, span, count));\n          rows.push(temp);\n          count = props.column;\n          temp = [];\n        }\n      });\n      return rows;\n    };\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass(descriptionKls.value)\n      }, [_ctx.title || _ctx.extra || _ctx.$slots.title || _ctx.$slots.extra ? (openBlock(), createElementBlock(\"div\", {\n        key: 0,\n        class: normalizeClass(unref(ns).e(\"header\"))\n      }, [createElementVNode(\"div\", {\n        class: normalizeClass(unref(ns).e(\"title\"))\n      }, [renderSlot(_ctx.$slots, \"title\", {}, () => [createTextVNode(toDisplayString(_ctx.title), 1)])], 2), createElementVNode(\"div\", {\n        class: normalizeClass(unref(ns).e(\"extra\"))\n      }, [renderSlot(_ctx.$slots, \"extra\", {}, () => [createTextVNode(toDisplayString(_ctx.extra), 1)])], 2)], 2)) : createCommentVNode(\"v-if\", true), createElementVNode(\"div\", {\n        class: normalizeClass(unref(ns).e(\"body\"))\n      }, [createElementVNode(\"table\", {\n        class: normalizeClass([unref(ns).e(\"table\"), unref(ns).is(\"bordered\", _ctx.border)])\n      }, [createElementVNode(\"tbody\", null, [(openBlock(true), createElementBlock(Fragment, null, renderList(getRows(), (row, _index) => {\n        return openBlock(), createBlock(ElDescriptionsRow, {\n          key: _index,\n          row\n        }, null, 8, [\"row\"]);\n      }), 128))])], 2)], 2)], 2);\n    };\n  }\n});\nvar Descriptions = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue\"]]);\nexport { Descriptions as default };","map":{"version":3,"names":["props","__props","ns","useNamespace","descriptionsSize","useFormSize","slots","useSlots","provide","descriptionsKey","descriptionKls","computed","b","m","value","filledNode","node","span","count","isLast","getRows","default","children","flattedChildren","filter","_a","type","name","COMPONENT_NAME","rows","temp","column","totalSpan","rowspanTemp","forEach","index","rowspan","_b","rowNo","length","i","_c","lastSpan","push","openBlock","createElementBlock","class","normalizeClass","_ctx","title","extra","$slots","key","unref","e","createElementVNode","renderSlot","createTextVNode","toDisplayString","is","border","Fragment","renderList","row","_index","createBlock","ElDescriptionsRow"],"sources":["../../../../../../packages/components/descriptions/src/description.vue"],"sourcesContent":["<template>\n  <div :class=\"descriptionKls\">\n    <div\n      v-if=\"title || extra || $slots.title || $slots.extra\"\n      :class=\"ns.e('header')\"\n    >\n      <div :class=\"ns.e('title')\">\n        <slot name=\"title\">{{ title }}</slot>\n      </div>\n      <div :class=\"ns.e('extra')\">\n        <slot name=\"extra\">{{ extra }}</slot>\n      </div>\n    </div>\n\n    <div :class=\"ns.e('body')\">\n      <table :class=\"[ns.e('table'), ns.is('bordered', border)]\">\n        <tbody>\n          <template v-for=\"(row, _index) in getRows()\" :key=\"_index\">\n            <el-descriptions-row :row=\"row\" />\n          </template>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, provide, useSlots } from 'vue'\nimport { flattedChildren } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { useFormSize } from '@element-plus/components/form'\nimport ElDescriptionsRow from './descriptions-row.vue'\nimport { descriptionsKey } from './token'\nimport { descriptionProps } from './description'\nimport { COMPONENT_NAME } from './constants'\n\nimport type { IDescriptionsInject } from './descriptions.type'\nimport type { DescriptionItemVNode } from './description-item'\n\ndefineOptions({\n  name: 'ElDescriptions',\n})\n\nconst props = defineProps(descriptionProps)\n\nconst ns = useNamespace('descriptions')\n\nconst descriptionsSize = useFormSize()\n\nconst slots = useSlots()\n\nprovide(descriptionsKey, props as IDescriptionsInject)\n\nconst descriptionKls = computed(() => [ns.b(), ns.m(descriptionsSize.value)])\n\nconst filledNode = (\n  node: DescriptionItemVNode,\n  span: number,\n  count: number,\n  isLast = false\n) => {\n  if (!node.props) {\n    node.props = {}\n  }\n  if (span > count) {\n    node.props.span = count\n  }\n  if (isLast) {\n    // set the last span\n    node.props.span = span\n  }\n  return node\n}\n\nconst getRows = () => {\n  if (!slots.default) return []\n\n  const children = flattedChildren(slots.default()).filter(\n    (node): node is DescriptionItemVNode =>\n      (node as any)?.type?.name === COMPONENT_NAME\n  )\n  const rows: DescriptionItemVNode[][] = []\n  let temp: DescriptionItemVNode[] = []\n  let count = props.column\n  let totalSpan = 0 // all spans number of item\n  const rowspanTemp: number[] = [] // the number of row spans\n\n  children.forEach((node, index) => {\n    const span = node.props?.span || 1\n    const rowspan = node.props?.rowspan || 1\n    const rowNo = rows.length\n    rowspanTemp[rowNo] ||= 0\n\n    if (rowspan > 1) {\n      for (let i = 1; i < rowspan; i++) {\n        rowspanTemp[rowNo + i] ||= 0\n        rowspanTemp[rowNo + i]++\n        totalSpan++\n      }\n    }\n    if (rowspanTemp[rowNo] > 0) {\n      count -= rowspanTemp[rowNo]\n      rowspanTemp[rowNo] = 0\n    }\n    if (index < children.length - 1) {\n      totalSpan += span > count ? count : span\n    }\n\n    if (index === children.length - 1) {\n      // calculate the last item span\n      const lastSpan = props.column - (totalSpan % props.column)\n      temp.push(filledNode(node, lastSpan, count, true))\n      rows.push(temp)\n      return\n    }\n\n    if (span < count) {\n      count -= span\n      temp.push(node)\n    } else {\n      temp.push(filledNode(node, span, count))\n      rows.push(temp)\n      count = props.column\n      temp = []\n    }\n  })\n\n  return rows\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}