{"ast":null,"code":"import { cAF, rAF } from '../../../../utils/raf.mjs';\nconst useGridWheel = ({\n  atXEndEdge,\n  atXStartEdge,\n  atYEndEdge,\n  atYStartEdge\n}, onWheelDelta) => {\n  let frameHandle = null;\n  let xOffset = 0;\n  let yOffset = 0;\n  const hasReachedEdge = (x, y) => {\n    const xEdgeReached = x < 0 && atXStartEdge.value || x > 0 && atXEndEdge.value;\n    const yEdgeReached = y < 0 && atYStartEdge.value || y > 0 && atYEndEdge.value;\n    return xEdgeReached || yEdgeReached;\n  };\n  const onWheel = e => {\n    cAF(frameHandle);\n    let x = e.deltaX;\n    let y = e.deltaY;\n    if (Math.abs(x) > Math.abs(y)) {\n      y = 0;\n    } else {\n      x = 0;\n    }\n    if (e.shiftKey && y !== 0) {\n      x = y;\n      y = 0;\n    }\n    if (hasReachedEdge(x, y)) return;\n    xOffset += x;\n    yOffset += y;\n    e.preventDefault();\n    frameHandle = rAF(() => {\n      onWheelDelta(xOffset, yOffset);\n      xOffset = 0;\n      yOffset = 0;\n    });\n  };\n  return {\n    hasReachedEdge,\n    onWheel\n  };\n};\nexport { useGridWheel };","map":{"version":3,"names":["useGridWheel","atXEndEdge","atXStartEdge","atYEndEdge","atYStartEdge","onWheelDelta","frameHandle","xOffset","yOffset","hasReachedEdge","x","y","xEdgeReached","value","yEdgeReached","onWheel","e","cAF","deltaX","deltaY","Math","abs","shiftKey","preventDefault","rAF"],"sources":["../../../../../../../packages/components/virtual-list/src/hooks/use-grid-wheel.ts"],"sourcesContent":["import { cAF, rAF } from '@element-plus/utils'\n\nimport type { ComputedRef } from 'vue'\n\ninterface GridWheelState {\n  atXStartEdge: ComputedRef<boolean>\n  atXEndEdge: ComputedRef<boolean>\n  atYStartEdge: ComputedRef<boolean>\n  atYEndEdge: ComputedRef<boolean>\n}\n\ntype GridWheelHandler = (x: number, y: number) => void\n\nexport const useGridWheel = (\n  { atXEndEdge, atXStartEdge, atYEndEdge, atYStartEdge }: GridWheelState,\n  onWheelDelta: GridWheelHandler\n) => {\n  let frameHandle: number | null = null\n  let xOffset = 0\n  let yOffset = 0\n\n  const hasReachedEdge = (x: number, y: number) => {\n    const xEdgeReached =\n      (x < 0 && atXStartEdge.value) || (x > 0 && atXEndEdge.value)\n    const yEdgeReached =\n      (y < 0 && atYStartEdge.value) || (y > 0 && atYEndEdge.value)\n    return xEdgeReached || yEdgeReached\n  }\n\n  const onWheel = (e: WheelEvent) => {\n    cAF(frameHandle!)\n\n    let x = e.deltaX\n    let y = e.deltaY\n    // Simulate native behavior when using touch pad/track pad for wheeling.\n    if (Math.abs(x) > Math.abs(y)) {\n      y = 0\n    } else {\n      x = 0\n    }\n\n    // Special case for windows machine with shift key + wheel scrolling\n    if (e.shiftKey && y !== 0) {\n      x = y\n      y = 0\n    }\n\n    if (hasReachedEdge(x, y)) return\n\n    xOffset += x\n    yOffset += y\n\n    e.preventDefault()\n\n    frameHandle = rAF(() => {\n      onWheelDelta(xOffset, yOffset)\n      xOffset = 0\n      yOffset = 0\n    })\n  }\n\n  return {\n    hasReachedEdge,\n    onWheel,\n  }\n}\n"],"mappings":";AAaa,MAAAA,YAAA,GAAeA,CAC1B;EAAEC,UAAA;EAAYC,YAAA;EAAcC,UAAY;EAAAC;AAAA,GACxCC,YACG;EACH,IAAIC,WAA6B;EACjC,IAAIC,OAAU;EACd,IAAIC,OAAU;EAER,MAAAC,cAAA,GAAiBA,CAACC,CAAA,EAAWC,CAAc;IAC/C,MAAMC,YAAA,GACHF,CAAI,QAAKR,YAAA,CAAaW,KAAW,IAAAH,CAAA,GAAI,KAAKT,UAAW,CAAAY,KAAA;IACxD,MAAMC,YAAA,GACHH,CAAI,QAAKP,YAAA,CAAaS,KAAW,IAAAF,CAAA,GAAI,KAAKR,UAAW,CAAAU,KAAA;IACxD,OAAOD,YAAgB,IAAAE,YAAA;EAAA,CACzB;EAEM,MAAAC,OAAA,GAAWC,CAAkB;IACjCC,GAAA,CAAIX,WAAY;IAEhB,IAAII,CAAA,GAAIM,CAAE,CAAAE,MAAA;IACV,IAAIP,CAAA,GAAIK,CAAE,CAAAG,MAAA;IAEV,IAAIC,IAAA,CAAKC,GAAI,CAAAX,CAAC,IAAIU,IAAK,CAAAC,GAAA,CAAIV,CAAC,CAAG;MACzBA,CAAA;IAAA,CACC;MACDD,CAAA;IAAA;IAIF,IAAAM,CAAA,CAAEM,QAAY,IAAAX,CAAA,KAAM,CAAG;MACrBD,CAAA,GAAAC,CAAA;MACAA,CAAA;IAAA;IAGF,IAAAF,cAAA,CAAeC,CAAA,EAAGC,CAAC,GAAG;IAEfJ,OAAA,IAAAG,CAAA;IACAF,OAAA,IAAAG,CAAA;IAEXK,CAAA,CAAEO,cAAe;IAEjBjB,WAAA,GAAckB,GAAA,CAAI,MAAM;MACtBnB,YAAA,CAAaE,OAAA,EAASC,OAAO;MACnBD,OAAA;MACAC,OAAA;IAAA,CACX;EAAA,CACH;EAEO;IACLC,cAAA;IACAM;EAAA,CACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}